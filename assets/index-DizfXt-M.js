var ww=i=>{throw TypeError(i)};var cy=(i,t,e)=>t.has(i)||ww("Cannot "+e);var zi=(i,t,e)=>(cy(i,t,"read from private field"),e?e.call(i):t.get(i)),El=(i,t,e)=>t.has(i)?ww("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),vu=(i,t,e,n)=>(cy(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),df=(i,t,e)=>(cy(i,t,"access private method"),e);var Tw=(i,t,e,n)=>({set _(s){vu(i,t,s,e)},get _(){return zi(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();var uy={exports:{}},_u={};var Sw;function UP(){if(Sw)return _u;Sw=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:i,type:n,key:l,ref:s!==void 0?s:null,props:a}}return _u.Fragment=t,_u.jsx=e,_u.jsxs=e,_u}var xw;function jP(){return xw||(xw=1,uy.exports=UP()),uy.exports}var k=jP(),hy={exports:{}},kt={};var Cw;function BP(){if(Cw)return kt;Cw=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function b(H){return H===null||typeof H!="object"?null:(H=v&&H[v]||H["@@iterator"],typeof H=="function"?H:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function C(H,nt,lt){this.props=H,this.context=nt,this.refs=x,this.updater=lt||E}C.prototype.isReactComponent={},C.prototype.setState=function(H,nt){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,nt,"setState")},C.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function N(){}N.prototype=C.prototype;function O(H,nt,lt){this.props=H,this.context=nt,this.refs=x,this.updater=lt||E}var U=O.prototype=new N;U.constructor=O,w(U,C.prototype),U.isPureReactComponent=!0;var G=Array.isArray;function Y(){}var D={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function M(H,nt,lt){var ht=lt.ref;return{$$typeof:i,type:H,key:nt,ref:ht!==void 0?ht:null,props:lt}}function L(H,nt){return M(H.type,nt,H.props)}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===i}function z(H){var nt={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(lt){return nt[lt]})}var F=/\/+/g;function bt(H,nt){return typeof H=="object"&&H!==null&&H.key!=null?z(""+H.key):nt.toString(36)}function Bt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Y,Y):(H.status="pending",H.then(function(nt){H.status==="pending"&&(H.status="fulfilled",H.value=nt)},function(nt){H.status==="pending"&&(H.status="rejected",H.reason=nt)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function $(H,nt,lt,ht,St){var At=typeof H;(At==="undefined"||At==="boolean")&&(H=null);var vt=!1;if(H===null)vt=!0;else switch(At){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(H.$$typeof){case i:case t:vt=!0;break;case p:return vt=H._init,$(vt(H._payload),nt,lt,ht,St)}}if(vt)return St=St(H),vt=ht===""?"."+bt(H,0):ht,G(St)?(lt="",vt!=null&&(lt=vt.replace(F,"$&/")+"/"),$(St,nt,lt,"",function(Us){return Us})):St!=null&&(V(St)&&(St=L(St,lt+(St.key==null||H&&H.key===St.key?"":(""+St.key).replace(F,"$&/")+"/")+vt)),nt.push(St)),1;vt=0;var pe=ht===""?".":ht+":";if(G(H))for(var he=0;he<H.length;he++)ht=H[he],At=pe+bt(ht,he),vt+=$(ht,nt,lt,At,St);else if(he=b(H),typeof he=="function")for(H=he.call(H),he=0;!(ht=H.next()).done;)ht=ht.value,At=pe+bt(ht,he++),vt+=$(ht,nt,lt,At,St);else if(At==="object"){if(typeof H.then=="function")return $(Bt(H),nt,lt,ht,St);throw nt=String(H),Error("Objects are not valid as a React child (found: "+(nt==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":nt)+"). If you meant to render a collection of children, use an array instead.")}return vt}function Z(H,nt,lt){if(H==null)return H;var ht=[],St=0;return $(H,ht,"","",function(At){return nt.call(lt,At,St++)}),ht}function ut(H){if(H._status===-1){var nt=H._result;nt=nt(),nt.then(function(lt){(H._status===0||H._status===-1)&&(H._status=1,H._result=lt)},function(lt){(H._status===0||H._status===-1)&&(H._status=2,H._result=lt)}),H._status===-1&&(H._status=0,H._result=nt)}if(H._status===1)return H._result.default;throw H._result}var Tt=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var nt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(nt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Mt={map:Z,forEach:function(H,nt,lt){Z(H,function(){nt.apply(this,arguments)},lt)},count:function(H){var nt=0;return Z(H,function(){nt++}),nt},toArray:function(H){return Z(H,function(nt){return nt})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return kt.Activity=g,kt.Children=Mt,kt.Component=C,kt.Fragment=e,kt.Profiler=s,kt.PureComponent=O,kt.StrictMode=n,kt.Suspense=h,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,kt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return D.H.useMemoCache(H)}},kt.cache=function(H){return function(){return H.apply(null,arguments)}},kt.cacheSignal=function(){return null},kt.cloneElement=function(H,nt,lt){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ht=w({},H.props),St=H.key;if(nt!=null)for(At in nt.key!==void 0&&(St=""+nt.key),nt)!R.call(nt,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&nt.ref===void 0||(ht[At]=nt[At]);var At=arguments.length-2;if(At===1)ht.children=lt;else if(1<At){for(var vt=Array(At),pe=0;pe<At;pe++)vt[pe]=arguments[pe+2];ht.children=vt}return M(H.type,St,ht)},kt.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},kt.createElement=function(H,nt,lt){var ht,St={},At=null;if(nt!=null)for(ht in nt.key!==void 0&&(At=""+nt.key),nt)R.call(nt,ht)&&ht!=="key"&&ht!=="__self"&&ht!=="__source"&&(St[ht]=nt[ht]);var vt=arguments.length-2;if(vt===1)St.children=lt;else if(1<vt){for(var pe=Array(vt),he=0;he<vt;he++)pe[he]=arguments[he+2];St.children=pe}if(H&&H.defaultProps)for(ht in vt=H.defaultProps,vt)St[ht]===void 0&&(St[ht]=vt[ht]);return M(H,At,St)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(H){return{$$typeof:u,render:H}},kt.isValidElement=V,kt.lazy=function(H){return{$$typeof:p,_payload:{_status:-1,_result:H},_init:ut}},kt.memo=function(H,nt){return{$$typeof:f,type:H,compare:nt===void 0?null:nt}},kt.startTransition=function(H){var nt=D.T,lt={};D.T=lt;try{var ht=H(),St=D.S;St!==null&&St(lt,ht),typeof ht=="object"&&ht!==null&&typeof ht.then=="function"&&ht.then(Y,Tt)}catch(At){Tt(At)}finally{nt!==null&&lt.types!==null&&(nt.types=lt.types),D.T=nt}},kt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},kt.use=function(H){return D.H.use(H)},kt.useActionState=function(H,nt,lt){return D.H.useActionState(H,nt,lt)},kt.useCallback=function(H,nt){return D.H.useCallback(H,nt)},kt.useContext=function(H){return D.H.useContext(H)},kt.useDebugValue=function(){},kt.useDeferredValue=function(H,nt){return D.H.useDeferredValue(H,nt)},kt.useEffect=function(H,nt){return D.H.useEffect(H,nt)},kt.useEffectEvent=function(H){return D.H.useEffectEvent(H)},kt.useId=function(){return D.H.useId()},kt.useImperativeHandle=function(H,nt,lt){return D.H.useImperativeHandle(H,nt,lt)},kt.useInsertionEffect=function(H,nt){return D.H.useInsertionEffect(H,nt)},kt.useLayoutEffect=function(H,nt){return D.H.useLayoutEffect(H,nt)},kt.useMemo=function(H,nt){return D.H.useMemo(H,nt)},kt.useOptimistic=function(H,nt){return D.H.useOptimistic(H,nt)},kt.useReducer=function(H,nt,lt){return D.H.useReducer(H,nt,lt)},kt.useRef=function(H){return D.H.useRef(H)},kt.useState=function(H){return D.H.useState(H)},kt.useSyncExternalStore=function(H,nt,lt){return D.H.useSyncExternalStore(H,nt,lt)},kt.useTransition=function(){return D.H.useTransition()},kt.version="19.2.4",kt}var Rw;function a_(){return Rw||(Rw=1,hy.exports=BP()),hy.exports}var B=a_(),dy={exports:{}},bu={},fy={exports:{}},py={};var Iw;function zP(){return Iw||(Iw=1,(function(i){function t($,Z){var ut=$.length;$.push(Z);t:for(;0<ut;){var Tt=ut-1>>>1,Mt=$[Tt];if(0<s(Mt,Z))$[Tt]=Z,$[ut]=Mt,ut=Tt;else break t}}function e($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var Z=$[0],ut=$.pop();if(ut!==Z){$[0]=ut;t:for(var Tt=0,Mt=$.length,H=Mt>>>1;Tt<H;){var nt=2*(Tt+1)-1,lt=$[nt],ht=nt+1,St=$[ht];if(0>s(lt,ut))ht<Mt&&0>s(St,lt)?($[Tt]=St,$[ht]=ut,Tt=ht):($[Tt]=lt,$[nt]=ut,Tt=nt);else if(ht<Mt&&0>s(St,ut))$[Tt]=St,$[ht]=ut,Tt=ht;else break t}}return Z}function s($,Z){var ut=$.sortIndex-Z.sortIndex;return ut!==0?ut:$.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var h=[],f=[],p=1,g=null,v=3,b=!1,E=!1,w=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function U($){for(var Z=e(f);Z!==null;){if(Z.callback===null)n(f);else if(Z.startTime<=$)n(f),Z.sortIndex=Z.expirationTime,t(h,Z);else break;Z=e(f)}}function G($){if(w=!1,U($),!E)if(e(h)!==null)E=!0,Y||(Y=!0,z());else{var Z=e(f);Z!==null&&Bt(G,Z.startTime-$)}}var Y=!1,D=-1,R=5,M=-1;function L(){return x?!0:!(i.unstable_now()-M<R)}function V(){if(x=!1,Y){var $=i.unstable_now();M=$;var Z=!0;try{t:{E=!1,w&&(w=!1,N(D),D=-1),b=!0;var ut=v;try{e:{for(U($),g=e(h);g!==null&&!(g.expirationTime>$&&L());){var Tt=g.callback;if(typeof Tt=="function"){g.callback=null,v=g.priorityLevel;var Mt=Tt(g.expirationTime<=$);if($=i.unstable_now(),typeof Mt=="function"){g.callback=Mt,U($),Z=!0;break e}g===e(h)&&n(h),U($)}else n(h);g=e(h)}if(g!==null)Z=!0;else{var H=e(f);H!==null&&Bt(G,H.startTime-$),Z=!1}}break t}finally{g=null,v=ut,b=!1}Z=void 0}}finally{Z?z():Y=!1}}}var z;if(typeof O=="function")z=function(){O(V)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,bt=F.port2;F.port1.onmessage=V,z=function(){bt.postMessage(null)}}else z=function(){C(V,0)};function Bt($,Z){D=C(function(){$(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function($){$.callback=null},i.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function($){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ut=v;v=Z;try{return $()}finally{v=ut}},i.unstable_requestPaint=function(){x=!0},i.unstable_runWithPriority=function($,Z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ut=v;v=$;try{return Z()}finally{v=ut}},i.unstable_scheduleCallback=function($,Z,ut){var Tt=i.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Tt+ut:Tt):ut=Tt,$){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=ut+Mt,$={id:p++,callback:Z,priorityLevel:$,startTime:ut,expirationTime:Mt,sortIndex:-1},ut>Tt?($.sortIndex=ut,t(f,$),e(h)===null&&$===e(f)&&(w?(N(D),D=-1):w=!0,Bt(G,ut-Tt))):($.sortIndex=Mt,t(h,$),E||b||(E=!0,Y||(Y=!0,z()))),$},i.unstable_shouldYield=L,i.unstable_wrapCallback=function($){var Z=v;return function(){var ut=v;v=Z;try{return $.apply(this,arguments)}finally{v=ut}}}})(py)),py}var Dw;function HP(){return Dw||(Dw=1,fy.exports=zP()),fy.exports}var my={exports:{}},An={};var Mw;function GP(){if(Mw)return An;Mw=1;var i=a_();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:h,containerInfo:f,implementation:p}}var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,An.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(h,f,null,p)},An.flushSync=function(h){var f=l.T,p=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=f,n.p=p,n.d.f()}},An.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(h,f))},An.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},An.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?n.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:b}):p==="script"&&n.d.X(h,{crossOrigin:g,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},An.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(h)},An.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin);n.d.L(h,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},An.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);n.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(h)},An.requestFormReset=function(h){n.d.r(h)},An.unstable_batchedUpdates=function(h,f){return h(f)},An.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},An.useFormStatus=function(){return l.H.useHostTransitionStatus()},An.version="19.2.4",An}var Pw;function qP(){if(Pw)return my.exports;Pw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),my.exports=GP(),my.exports}var Nw;function $P(){if(Nw)return bu;Nw=1;var i=HP(),t=a_(),e=qP();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function h(r){if(a(r)!==r)throw Error(n(188))}function f(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(n(188));return o!==r?null:r}for(var c=r,d=o;;){var y=c.return;if(y===null)break;var _=y.alternate;if(_===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===c)return h(y),r;if(_===d)return h(y),o;_=_.sibling}throw Error(n(188))}if(c.return!==d.return)c=y,d=_;else{for(var T=!1,I=y.child;I;){if(I===c){T=!0,c=y,d=_;break}if(I===d){T=!0,d=y,c=_;break}I=I.sibling}if(!T){for(I=_.child;I;){if(I===c){T=!0,c=_,d=y;break}if(I===d){T=!0,d=_,c=y;break}I=I.sibling}if(!T)throw Error(n(189))}}if(c.alternate!==d)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:o}function p(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=p(r),o!==null)return o;r=r.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),O=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var F=Symbol.for("react.client.reference");function bt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===F?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case w:return"Fragment";case C:return"Profiler";case x:return"StrictMode";case G:return"Suspense";case Y:return"SuspenseList";case M:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case E:return"Portal";case O:return r.displayName||"Context";case N:return(r._context.displayName||"Context")+".Consumer";case U:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return o=r.displayName||null,o!==null?o:bt(r.type)||"Memo";case R:o=r._payload,r=r._init;try{return bt(r(o))}catch{}}return null}var Bt=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},Tt=[],Mt=-1;function H(r){return{current:r}}function nt(r){0>Mt||(r.current=Tt[Mt],Tt[Mt]=null,Mt--)}function lt(r,o){Mt++,Tt[Mt]=r.current,r.current=o}var ht=H(null),St=H(null),At=H(null),vt=H(null);function pe(r,o){switch(lt(At,o),lt(St,r),lt(ht,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?$E(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=$E(o),r=XE(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}nt(ht),lt(ht,r)}function he(){nt(ht),nt(St),nt(At)}function Us(r){r.memoizedState!==null&&lt(vt,r);var o=ht.current,c=XE(o,r.type);o!==c&&(lt(St,r),lt(ht,c))}function Po(r){St.current===r&&(nt(ht),nt(St)),vt.current===r&&(nt(vt),pu._currentValue=ut)}var No,ko;function ts(r){if(No===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);No=o&&o[1]||"",ko=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+No+r+ko}var pc=!1;function Da(r,o){if(!r||pc)return"";pc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(et){var J=et}Reflect.construct(r,[],rt)}else{try{rt.call()}catch(et){J=et}r.call(rt.prototype)}}else{try{throw Error()}catch(et){J=et}(rt=r())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch(et){if(et&&J&&typeof et.stack=="string")return[et.stack,J.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),T=_[0],I=_[1];if(T&&I){var j=T.split(`
`),Q=I.split(`
`);for(y=d=0;d<j.length&&!j[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Q.length&&!Q[y].includes("DetermineComponentFrameRoot");)y++;if(d===j.length||y===Q.length)for(d=j.length-1,y=Q.length-1;1<=d&&0<=y&&j[d]!==Q[y];)y--;for(;1<=d&&0<=y;d--,y--)if(j[d]!==Q[y]){if(d!==1||y!==1)do if(d--,y--,0>y||j[d]!==Q[y]){var it=`
`+j[d].replace(" at new "," at ");return r.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",r.displayName)),it}while(1<=d&&0<=y);break}}}finally{pc=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?ts(c):""}function mc(r,o){switch(r.tag){case 26:case 27:case 5:return ts(r.type);case 16:return ts("Lazy");case 13:return r.child!==o&&o!==null?ts("Suspense Fallback"):ts("Suspense");case 19:return ts("SuspenseList");case 0:case 15:return Da(r.type,!1);case 11:return Da(r.type.render,!1);case 1:return Da(r.type,!0);case 31:return ts("Activity");default:return""}}function gc(r){try{var o="",c=null;do o+=mc(r,c),c=r,r=r.return;while(r);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ve=Object.prototype.hasOwnProperty,Je=i.unstable_scheduleCallback,vr=i.unstable_cancelCallback,hm=i.unstable_shouldYield,Lh=i.unstable_requestPaint,Dn=i.unstable_now,Ma=i.unstable_getCurrentPriorityLevel,yc=i.unstable_ImmediatePriority,vc=i.unstable_UserBlockingPriority,_r=i.unstable_NormalPriority,dm=i.unstable_LowPriority,Vh=i.unstable_IdlePriority,Fh=i.log,Uh=i.unstable_setDisableYieldValue,Di=null,un=null;function ui(r){if(typeof Fh=="function"&&Uh(r),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Di,r)}catch{}}var De=Math.clz32?Math.clz32:Bh,jh=Math.log,Oo=Math.LN2;function Bh(r){return r>>>=0,r===0?32:31-(jh(r)/Oo|0)|0}var es=256,Pa=262144,Fe=4194304;function ns(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function is(r,o,c){var d=r.pendingLanes;if(d===0)return 0;var y=0,_=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var I=d&134217727;return I!==0?(d=I&~_,d!==0?y=ns(d):(T&=I,T!==0?y=ns(T):c||(c=I&~r,c!==0&&(y=ns(c))))):(I=d&~_,I!==0?y=ns(I):T!==0?y=ns(T):c||(c=d&~r,c!==0&&(y=ns(c)))),y===0?0:o!==0&&o!==y&&(o&_)===0&&(_=y&-y,c=o&-o,_>=c||_===32&&(c&4194048)!==0)?o:y}function Mi(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function fm(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zh(){var r=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),r}function ss(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function Na(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function pm(r,o,c,d,y,_){var T=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var I=r.entanglements,j=r.expirationTimes,Q=r.hiddenUpdates;for(c=T&~c;0<c;){var it=31-De(c),rt=1<<it;I[it]=0,j[it]=-1;var J=Q[it];if(J!==null)for(Q[it]=null,it=0;it<J.length;it++){var et=J[it];et!==null&&(et.lane&=-536870913)}c&=~rt}d!==0&&ka(r,d,0),_!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=_&~(T&~o))}function ka(r,o,c){r.pendingLanes|=o,r.suspendedLanes&=~o;var d=31-De(o);r.entangledLanes|=o,r.entanglements[d]=r.entanglements[d]|1073741824|c&261930}function _c(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var d=31-De(c),y=1<<d;y&o|r[d]&o&&(r[d]|=o),c&=~y}}function bc(r,o){var c=o&-o;return c=(c&42)!==0?1:Oa(c),(c&(r.suspendedLanes|o))!==0?0:c}function Oa(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function js(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Hh(){var r=Z.p;return r!==0?r:(r=window.event,r===void 0?32:gw(r.type))}function Pi(r,o){var c=Z.p;try{return Z.p=r,o()}finally{Z.p=c}}var Ni=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Ni,an="__reactProps$"+Ni,rs="__reactContainer$"+Ni,Lo="__reactEvents$"+Ni,mm="__reactListeners$"+Ni,Gh="__reactHandles$"+Ni,qh="__reactResources$"+Ni,as="__reactMarker$"+Ni;function Vo(r){delete r[Ue],delete r[an],delete r[Lo],delete r[mm],delete r[Gh]}function os(r){var o=r[Ue];if(o)return o;for(var c=r.parentNode;c;){if(o=c[rs]||c[Ue]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=tw(r);r!==null;){if(c=r[Ue])return c;r=tw(r)}return o}r=c,c=r.parentNode}return null}function hi(r){if(r=r[Ue]||r[rs]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Wn(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function ls(r){var o=r[qh];return o||(o=r[qh]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function je(r){r[as]=!0}var Ac=new Set,Ec={};function cs(r,o){us(r,o),us(r+"Capture",o)}function us(r,o){for(Ec[r]=o,r=0;r<o.length;r++)Ac.add(o[r])}var wc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tc={},Sc={};function $h(r){return Ve.call(Sc,r)?!0:Ve.call(Tc,r)?!1:wc.test(r)?Sc[r]=!0:(Tc[r]=!0,!1)}function Fo(r,o,c){if($h(o))if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+c)}}function Qn(r,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+c)}}function Be(r,o,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(o,c,""+d)}}function on(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function br(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function xc(r,o,c){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return y.call(this)},set:function(T){c=""+T,_.call(this,T)}}),Object.defineProperty(r,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function se(r){if(!r._valueTracker){var o=br(r)?"checked":"value";r._valueTracker=xc(r,o,""+r[o])}}function La(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return r&&(d=br(r)?r.checked?"true":"false":r.value),r=d,r!==c?(o.setValue(r),!0):!1}function hs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Va=/[\n"\\]/g;function Fn(r){return r.replace(Va,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Uo(r,o,c,d,y,_,T,I){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),o!=null?T==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+on(o)):r.value!==""+on(o)&&(r.value=""+on(o)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),o!=null?Cc(r,T,on(o)):c!=null?Cc(r,T,on(c)):d!=null&&r.removeAttribute("value"),y==null&&_!=null&&(r.defaultChecked=!!_),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+on(I):r.removeAttribute("name")}function Xh(r,o,c,d,y,_,T,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){se(r);return}c=c!=null?""+on(c):"",o=o!=null?""+on(o):c,I||o===r.value||(r.value=o),r.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=I?r.checked:!!d,r.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),se(r)}function Cc(r,o,c){o==="number"&&hs(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Ar(r,o,c,d){if(r=r.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<r.length;c++)y=o.hasOwnProperty("$"+r[c].value),r[c].selected!==y&&(r[c].selected=y),y&&d&&(r[c].defaultSelected=!0)}else{for(c=""+on(c),o=null,y=0;y<r.length;y++){if(r[y].value===c){r[y].selected=!0,d&&(r[y].defaultSelected=!0);return}o!==null||r[y].disabled||(o=r[y])}o!==null&&(o.selected=!0)}}function Yh(r,o,c){if(o!=null&&(o=""+on(o),o!==r.value&&(r.value=o),c==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=c!=null?""+on(c):""}function Er(r,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(n(92));if(Bt(d)){if(1<d.length)throw Error(n(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=on(o),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d),se(r)}function Un(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var Kh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rc(r,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":d?r.setProperty(o,c):typeof c!="number"||c===0||Kh.has(o)?o==="float"?r.cssFloat=c:r[o]=(""+c).trim():r[o]=c+"px"}function Ic(r,o,c){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&c[y]!==d&&Rc(r,y,d)}else for(var _ in o)o.hasOwnProperty(_)&&Rc(r,_,o[_])}function jo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bo(r){return wr.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ki(){}var Dc=null;function di(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tr=null,ds=null;function Fa(r){var o=hi(r);if(o&&(r=o.stateNode)){var c=r[an]||null;t:switch(r=o.stateNode,o.type){case"input":if(Uo(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Fn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==r&&d.form===r.form){var y=d[an]||null;if(!y)throw Error(n(90));Uo(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===r.form&&La(d)}break t;case"textarea":Yh(r,c.value,c.defaultValue);break t;case"select":o=c.value,o!=null&&Ar(r,!!c.multiple,o,!1)}}}var zo=!1;function Sr(r,o,c){if(zo)return r(o,c);zo=!0;try{var d=r(o);return d}finally{if(zo=!1,(Tr!==null||ds!==null)&&(Hd(),Tr&&(o=Tr,r=ds,ds=Tr=null,Fa(o),r)))for(o=0;o<r.length;o++)Fa(r[o])}}function Oi(r,o){var c=r.stateNode;if(c===null)return null;var d=c[an]||null;if(d===null)return null;c=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break t;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=!1;if(fi)try{var oe={};Object.defineProperty(oe,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",oe,oe),window.removeEventListener("test",oe,oe)}catch{Ua=!1}var fs=null,Mc=null,ja=null;function Pc(){if(ja)return ja;var r,o=Mc,c=o.length,d,y="value"in fs?fs.value:fs.textContent,_=y.length;for(r=0;r<c&&o[r]===y[r];r++);var T=c-r;for(d=1;d<=T&&o[c-d]===y[_-d];d++);return ja=y.slice(r,1<d?1-d:void 0)}function Ba(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Bs(){return!0}function Li(){return!1}function hn(r){function o(c,d,y,_,T){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(c=r[I],this[I]=c?c(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Bs:Li,this.isPropagationStopped=Li,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),o}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ps=hn(zs),xr=g({},zs,{view:0,detail:0}),Nc=hn(xr),Cr,Ho,ms,Go=g({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ms&&(ms&&r.type==="mousemove"?(Cr=r.screenX-ms.screenX,Ho=r.screenY-ms.screenY):Ho=Cr=0,ms=r),Cr)},movementY:function(r){return"movementY"in r?r.movementY:Ho}}),kc=hn(Go),za=g({},Go,{dataTransfer:0}),Qh=hn(za),Jh=g({},xr,{relatedTarget:0}),Ha=hn(Jh),Oc=g({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Zh=hn(Oc),qo=g({},zs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),td=hn(qo),ed=g({},zs,{data:0}),gs=hn(ed),nd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},id={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rd(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=sd[r])?!!o[r]:!1}function Rr(){return rd}var Mn=g({},xr,{key:function(r){if(r.key){var o=nd[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Ba(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?id[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(r){return r.type==="keypress"?Ba(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ba(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ad=hn(Mn),od=g({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hs=hn(od),m=g({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),A=hn(m),S=g({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=hn(S),K=g({},Go,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=hn(K),ct=g({},zs,{newState:0,oldState:0}),Lt=hn(ct),Me=[9,13,27,32],ee=fi&&"CompositionEvent"in window,be=null;fi&&"documentMode"in document&&(be=document.documentMode);var pi=fi&&"TextEvent"in window&&!be,ys=fi&&(!ee||be&&8<be&&11>=be),Vi=" ",Fi=!1;function Ga(r,o){switch(r){case"keyup":return Me.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $o(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xo=!1;function cM(r,o){switch(r){case"compositionend":return $o(o);case"keypress":return o.which!==32?null:(Fi=!0,Vi);case"textInput":return r=o.data,r===Vi&&Fi?null:r;default:return null}}function uM(r,o){if(Xo)return r==="compositionend"||!ee&&Ga(r,o)?(r=Pc(),ja=Mc=fs=null,Xo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ys&&o.locale!=="ko"?null:o.data;default:return null}}var hM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!hM[r.type]:o==="textarea"}function s0(r,o,c,d){Tr?ds?ds.push(d):ds=[d]:Tr=d,o=Wd(o,"onChange"),0<o.length&&(c=new ps("onChange","change",null,c,d),r.push({event:c,listeners:o}))}var Lc=null,Vc=null;function dM(r){jE(r,0)}function ld(r){var o=Wn(r);if(La(o))return r}function r0(r,o){if(r==="change")return o}var a0=!1;if(fi){var gm;if(fi){var ym="oninput"in document;if(!ym){var o0=document.createElement("div");o0.setAttribute("oninput","return;"),ym=typeof o0.oninput=="function"}gm=ym}else gm=!1;a0=gm&&(!document.documentMode||9<document.documentMode)}function l0(){Lc&&(Lc.detachEvent("onpropertychange",c0),Vc=Lc=null)}function c0(r){if(r.propertyName==="value"&&ld(Vc)){var o=[];s0(o,Vc,r,di(r)),Sr(dM,o)}}function fM(r,o,c){r==="focusin"?(l0(),Lc=o,Vc=c,Lc.attachEvent("onpropertychange",c0)):r==="focusout"&&l0()}function pM(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ld(Vc)}function mM(r,o){if(r==="click")return ld(o)}function gM(r,o){if(r==="input"||r==="change")return ld(o)}function yM(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Jn=typeof Object.is=="function"?Object.is:yM;function Fc(r,o){if(Jn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!Ve.call(o,y)||!Jn(r[y],o[y]))return!1}return!0}function u0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function h0(r,o){var c=u0(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=o&&d>=o)return{node:c,offset:o-r};r=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=u0(c)}}function d0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?d0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function f0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=hs(r.document);o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=hs(r.document)}return o}function vm(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var vM=fi&&"documentMode"in document&&11>=document.documentMode,Yo=null,_m=null,Uc=null,bm=!1;function p0(r,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;bm||Yo==null||Yo!==hs(d)||(d=Yo,"selectionStart"in d&&vm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Uc&&Fc(Uc,d)||(Uc=d,d=Wd(_m,"onSelect"),0<d.length&&(o=new ps("onSelect","select",null,o,c),r.push({event:o,listeners:d}),o.target=Yo)))}function qa(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var Ko={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},Am={},m0={};fi&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function $a(r){if(Am[r])return Am[r];if(!Ko[r])return r;var o=Ko[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in m0)return Am[r]=o[c];return r}var g0=$a("animationend"),y0=$a("animationiteration"),v0=$a("animationstart"),_M=$a("transitionrun"),bM=$a("transitionstart"),AM=$a("transitioncancel"),_0=$a("transitionend"),b0=new Map,Em="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Em.push("scrollEnd");function Ui(r,o){b0.set(r,o),cs(o,[r])}var cd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},mi=[],Wo=0,wm=0;function ud(){for(var r=Wo,o=wm=Wo=0;o<r;){var c=mi[o];mi[o++]=null;var d=mi[o];mi[o++]=null;var y=mi[o];mi[o++]=null;var _=mi[o];if(mi[o++]=null,d!==null&&y!==null){var T=d.pending;T===null?y.next=y:(y.next=T.next,T.next=y),d.pending=y}_!==0&&A0(c,y,_)}}function hd(r,o,c,d){mi[Wo++]=r,mi[Wo++]=o,mi[Wo++]=c,mi[Wo++]=d,wm|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Tm(r,o,c,d){return hd(r,o,c,d),dd(r)}function Xa(r,o){return hd(r,null,null,o),dd(r)}function A0(r,o,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var y=!1,_=r.return;_!==null;)_.childLanes|=c,d=_.alternate,d!==null&&(d.childLanes|=c),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(y=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,y&&o!==null&&(y=31-De(c),r=_.hiddenUpdates,d=r[y],d===null?r[y]=[o]:d.push(o),o.lane=c|536870912),_):null}function dd(r){if(50<ou)throw ou=0,Ng=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Qo={};function EM(r,o,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(r,o,c,d){return new EM(r,o,c,d)}function Sm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Gs(r,o){var c=r.alternate;return c===null?(c=Zn(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function E0(r,o){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,o=c.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function fd(r,o,c,d,y,_){var T=0;if(d=r,typeof r=="function")Sm(r)&&(T=1);else if(typeof r=="string")T=CP(r,c,ht.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case M:return r=Zn(31,c,o,y),r.elementType=M,r.lanes=_,r;case w:return Ya(c.children,y,_,o);case x:T=8,y|=24;break;case C:return r=Zn(12,c,o,y|2),r.elementType=C,r.lanes=_,r;case G:return r=Zn(13,c,o,y),r.elementType=G,r.lanes=_,r;case Y:return r=Zn(19,c,o,y),r.elementType=Y,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:T=10;break t;case N:T=9;break t;case U:T=11;break t;case D:T=14;break t;case R:T=16,d=null;break t}T=29,c=Error(n(130,r===null?"null":typeof r,"")),d=null}return o=Zn(T,c,o,y),o.elementType=r,o.type=d,o.lanes=_,o}function Ya(r,o,c,d){return r=Zn(7,r,d,o),r.lanes=c,r}function xm(r,o,c){return r=Zn(6,r,null,o),r.lanes=c,r}function w0(r){var o=Zn(18,null,null,0);return o.stateNode=r,o}function Cm(r,o,c){return o=Zn(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var T0=new WeakMap;function gi(r,o){if(typeof r=="object"&&r!==null){var c=T0.get(r);return c!==void 0?c:(o={value:r,source:o,stack:gc(o)},T0.set(r,o),o)}return{value:r,source:o,stack:gc(o)}}var Jo=[],Zo=0,pd=null,jc=0,yi=[],vi=0,Ir=null,vs=1,_s="";function qs(r,o){Jo[Zo++]=jc,Jo[Zo++]=pd,pd=r,jc=o}function S0(r,o,c){yi[vi++]=vs,yi[vi++]=_s,yi[vi++]=Ir,Ir=r;var d=vs;r=_s;var y=32-De(d)-1;d&=~(1<<y),c+=1;var _=32-De(o)+y;if(30<_){var T=y-y%5;_=(d&(1<<T)-1).toString(32),d>>=T,y-=T,vs=1<<32-De(o)+y|c<<y|d,_s=_+r}else vs=1<<_|c<<y|d,_s=r}function Rm(r){r.return!==null&&(qs(r,1),S0(r,1,0))}function Im(r){for(;r===pd;)pd=Jo[--Zo],Jo[Zo]=null,jc=Jo[--Zo],Jo[Zo]=null;for(;r===Ir;)Ir=yi[--vi],yi[vi]=null,_s=yi[--vi],yi[vi]=null,vs=yi[--vi],yi[vi]=null}function x0(r,o){yi[vi++]=vs,yi[vi++]=_s,yi[vi++]=Ir,vs=o.id,_s=o.overflow,Ir=r}var dn=null,ye=null,Wt=!1,Dr=null,_i=!1,Dm=Error(n(519));function Mr(r){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bc(gi(o,r)),Dm}function C0(r){var o=r.stateNode,c=r.type,d=r.memoizedProps;switch(o[Ue]=r,o[an]=d,c){case"dialog":Gt("cancel",o),Gt("close",o);break;case"iframe":case"object":case"embed":Gt("load",o);break;case"video":case"audio":for(c=0;c<cu.length;c++)Gt(cu[c],o);break;case"source":Gt("error",o);break;case"img":case"image":case"link":Gt("error",o),Gt("load",o);break;case"details":Gt("toggle",o);break;case"input":Gt("invalid",o),Xh(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Gt("invalid",o);break;case"textarea":Gt("invalid",o),Er(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||GE(o.textContent,c)?(d.popover!=null&&(Gt("beforetoggle",o),Gt("toggle",o)),d.onScroll!=null&&Gt("scroll",o),d.onScrollEnd!=null&&Gt("scrollend",o),d.onClick!=null&&(o.onclick=ki),o=!0):o=!1,o||Mr(r,!0)}function R0(r){for(dn=r.return;dn;)switch(dn.tag){case 5:case 31:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:dn=dn.return}}function tl(r){if(r!==dn)return!1;if(!Wt)return R0(r),Wt=!0,!1;var o=r.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||Yg(r.type,r.memoizedProps)),c=!c),c&&ye&&Mr(r),R0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));ye=ZE(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));ye=ZE(r)}else o===27?(o=ye,qr(r.type)?(r=Zg,Zg=null,ye=r):ye=o):ye=dn?Ai(r.stateNode.nextSibling):null;return!0}function Ka(){ye=dn=null,Wt=!1}function Mm(){var r=Dr;return r!==null&&(Hn===null?Hn=r:Hn.push.apply(Hn,r),Dr=null),r}function Bc(r){Dr===null?Dr=[r]:Dr.push(r)}var Pm=H(null),Wa=null,$s=null;function Pr(r,o,c){lt(Pm,o._currentValue),o._currentValue=c}function Xs(r){r._currentValue=Pm.current,nt(Pm)}function Nm(r,o,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),r===c)break;r=r.return}}function km(r,o,c,d){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var _=y.dependencies;if(_!==null){var T=y.child;_=_.firstContext;t:for(;_!==null;){var I=_;_=y;for(var j=0;j<o.length;j++)if(I.context===o[j]){_.lanes|=c,I=_.alternate,I!==null&&(I.lanes|=c),Nm(_.return,c,r),d||(T=null);break t}_=I.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(n(341));T.lanes|=c,_=T.alternate,_!==null&&(_.lanes|=c),Nm(T,c,r),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===r){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function el(r,o,c,d){r=null;for(var y=o,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(n(387));if(T=T.memoizedProps,T!==null){var I=y.type;Jn(y.pendingProps.value,T.value)||(r!==null?r.push(I):r=[I])}}else if(y===vt.current){if(T=y.alternate,T===null)throw Error(n(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(pu):r=[pu])}y=y.return}r!==null&&km(o,r,c,d),o.flags|=262144}function md(r){for(r=r.firstContext;r!==null;){if(!Jn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Qa(r){Wa=r,$s=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function fn(r){return I0(Wa,r)}function gd(r,o){return Wa===null&&Qa(r),I0(r,o)}function I0(r,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},$s===null){if(r===null)throw Error(n(308));$s=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else $s=$s.next=o;return c}var wM=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){o.aborted=!0,r.forEach(function(c){return c()})}},TM=i.unstable_scheduleCallback,SM=i.unstable_NormalPriority,ze={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Om(){return{controller:new wM,data:new Map,refCount:0}}function zc(r){r.refCount--,r.refCount===0&&TM(SM,function(){r.controller.abort()})}var Hc=null,Lm=0,nl=0,il=null;function xM(r,o){if(Hc===null){var c=Hc=[];Lm=0,nl=Ug(),il={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Lm++,o.then(D0,D0),o}function D0(){if(--Lm===0&&Hc!==null){il!==null&&(il.status="fulfilled");var r=Hc;Hc=null,nl=0,il=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function CM(r,o){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return r.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var M0=$.S;$.S=function(r,o){pE=Dn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&xM(r,o),M0!==null&&M0(r,o)};var Ja=H(null);function Vm(){var r=Ja.current;return r!==null?r:de.pooledCache}function yd(r,o){o===null?lt(Ja,Ja.current):lt(Ja,o.pool)}function P0(){var r=Vm();return r===null?null:{parent:ze._currentValue,pool:r}}var sl=Error(n(460)),Fm=Error(n(474)),vd=Error(n(542)),_d={then:function(){}};function N0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function k0(r,o,c){switch(c=r[c],c===void 0?r.push(o):c!==o&&(o.then(ki,ki),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,L0(r),r;default:if(typeof o.status=="string")o.then(ki,ki);else{if(r=de,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,L0(r),r}throw to=o,sl}}function Za(r){try{var o=r._init;return o(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(to=c,sl):c}}var to=null;function O0(){if(to===null)throw Error(n(459));var r=to;return to=null,r}function L0(r){if(r===sl||r===vd)throw Error(n(483))}var rl=null,Gc=0;function bd(r){var o=Gc;return Gc+=1,rl===null&&(rl=[]),k0(rl,r,o)}function qc(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Ad(r,o){throw o.$$typeof===v?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function V0(r){function o(X,q){if(r){var W=X.deletions;W===null?(X.deletions=[q],X.flags|=16):W.push(q)}}function c(X,q){if(!r)return null;for(;q!==null;)o(X,q),q=q.sibling;return null}function d(X){for(var q=new Map;X!==null;)X.key!==null?q.set(X.key,X):q.set(X.index,X),X=X.sibling;return q}function y(X,q){return X=Gs(X,q),X.index=0,X.sibling=null,X}function _(X,q,W){return X.index=W,r?(W=X.alternate,W!==null?(W=W.index,W<q?(X.flags|=67108866,q):W):(X.flags|=67108866,q)):(X.flags|=1048576,q)}function T(X){return r&&X.alternate===null&&(X.flags|=67108866),X}function I(X,q,W,st){return q===null||q.tag!==6?(q=xm(W,X.mode,st),q.return=X,q):(q=y(q,W),q.return=X,q)}function j(X,q,W,st){var Et=W.type;return Et===w?it(X,q,W.props.children,st,W.key):q!==null&&(q.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===R&&Za(Et)===q.type)?(q=y(q,W.props),qc(q,W),q.return=X,q):(q=fd(W.type,W.key,W.props,null,X.mode,st),qc(q,W),q.return=X,q)}function Q(X,q,W,st){return q===null||q.tag!==4||q.stateNode.containerInfo!==W.containerInfo||q.stateNode.implementation!==W.implementation?(q=Cm(W,X.mode,st),q.return=X,q):(q=y(q,W.children||[]),q.return=X,q)}function it(X,q,W,st,Et){return q===null||q.tag!==7?(q=Ya(W,X.mode,st,Et),q.return=X,q):(q=y(q,W),q.return=X,q)}function rt(X,q,W){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=xm(""+q,X.mode,W),q.return=X,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return W=fd(q.type,q.key,q.props,null,X.mode,W),qc(W,q),W.return=X,W;case E:return q=Cm(q,X.mode,W),q.return=X,q;case R:return q=Za(q),rt(X,q,W)}if(Bt(q)||z(q))return q=Ya(q,X.mode,W,null),q.return=X,q;if(typeof q.then=="function")return rt(X,bd(q),W);if(q.$$typeof===O)return rt(X,gd(X,q),W);Ad(X,q)}return null}function J(X,q,W,st){var Et=q!==null?q.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Et!==null?null:I(X,q,""+W,st);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return W.key===Et?j(X,q,W,st):null;case E:return W.key===Et?Q(X,q,W,st):null;case R:return W=Za(W),J(X,q,W,st)}if(Bt(W)||z(W))return Et!==null?null:it(X,q,W,st,null);if(typeof W.then=="function")return J(X,q,bd(W),st);if(W.$$typeof===O)return J(X,q,gd(X,W),st);Ad(X,W)}return null}function et(X,q,W,st,Et){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return X=X.get(W)||null,I(q,X,""+st,Et);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case b:return X=X.get(st.key===null?W:st.key)||null,j(q,X,st,Et);case E:return X=X.get(st.key===null?W:st.key)||null,Q(q,X,st,Et);case R:return st=Za(st),et(X,q,W,st,Et)}if(Bt(st)||z(st))return X=X.get(W)||null,it(q,X,st,Et,null);if(typeof st.then=="function")return et(X,q,W,bd(st),Et);if(st.$$typeof===O)return et(X,q,W,gd(q,st),Et);Ad(q,st)}return null}function pt(X,q,W,st){for(var Et=null,Zt=null,yt=q,Ft=q=0,$t=null;yt!==null&&Ft<W.length;Ft++){yt.index>Ft?($t=yt,yt=null):$t=yt.sibling;var te=J(X,yt,W[Ft],st);if(te===null){yt===null&&(yt=$t);break}r&&yt&&te.alternate===null&&o(X,yt),q=_(te,q,Ft),Zt===null?Et=te:Zt.sibling=te,Zt=te,yt=$t}if(Ft===W.length)return c(X,yt),Wt&&qs(X,Ft),Et;if(yt===null){for(;Ft<W.length;Ft++)yt=rt(X,W[Ft],st),yt!==null&&(q=_(yt,q,Ft),Zt===null?Et=yt:Zt.sibling=yt,Zt=yt);return Wt&&qs(X,Ft),Et}for(yt=d(yt);Ft<W.length;Ft++)$t=et(yt,X,Ft,W[Ft],st),$t!==null&&(r&&$t.alternate!==null&&yt.delete($t.key===null?Ft:$t.key),q=_($t,q,Ft),Zt===null?Et=$t:Zt.sibling=$t,Zt=$t);return r&&yt.forEach(function(Wr){return o(X,Wr)}),Wt&&qs(X,Ft),Et}function xt(X,q,W,st){if(W==null)throw Error(n(151));for(var Et=null,Zt=null,yt=q,Ft=q=0,$t=null,te=W.next();yt!==null&&!te.done;Ft++,te=W.next()){yt.index>Ft?($t=yt,yt=null):$t=yt.sibling;var Wr=J(X,yt,te.value,st);if(Wr===null){yt===null&&(yt=$t);break}r&&yt&&Wr.alternate===null&&o(X,yt),q=_(Wr,q,Ft),Zt===null?Et=Wr:Zt.sibling=Wr,Zt=Wr,yt=$t}if(te.done)return c(X,yt),Wt&&qs(X,Ft),Et;if(yt===null){for(;!te.done;Ft++,te=W.next())te=rt(X,te.value,st),te!==null&&(q=_(te,q,Ft),Zt===null?Et=te:Zt.sibling=te,Zt=te);return Wt&&qs(X,Ft),Et}for(yt=d(yt);!te.done;Ft++,te=W.next())te=et(yt,X,Ft,te.value,st),te!==null&&(r&&te.alternate!==null&&yt.delete(te.key===null?Ft:te.key),q=_(te,q,Ft),Zt===null?Et=te:Zt.sibling=te,Zt=te);return r&&yt.forEach(function(FP){return o(X,FP)}),Wt&&qs(X,Ft),Et}function ue(X,q,W,st){if(typeof W=="object"&&W!==null&&W.type===w&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case b:t:{for(var Et=W.key;q!==null;){if(q.key===Et){if(Et=W.type,Et===w){if(q.tag===7){c(X,q.sibling),st=y(q,W.props.children),st.return=X,X=st;break t}}else if(q.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===R&&Za(Et)===q.type){c(X,q.sibling),st=y(q,W.props),qc(st,W),st.return=X,X=st;break t}c(X,q);break}else o(X,q);q=q.sibling}W.type===w?(st=Ya(W.props.children,X.mode,st,W.key),st.return=X,X=st):(st=fd(W.type,W.key,W.props,null,X.mode,st),qc(st,W),st.return=X,X=st)}return T(X);case E:t:{for(Et=W.key;q!==null;){if(q.key===Et)if(q.tag===4&&q.stateNode.containerInfo===W.containerInfo&&q.stateNode.implementation===W.implementation){c(X,q.sibling),st=y(q,W.children||[]),st.return=X,X=st;break t}else{c(X,q);break}else o(X,q);q=q.sibling}st=Cm(W,X.mode,st),st.return=X,X=st}return T(X);case R:return W=Za(W),ue(X,q,W,st)}if(Bt(W))return pt(X,q,W,st);if(z(W)){if(Et=z(W),typeof Et!="function")throw Error(n(150));return W=Et.call(W),xt(X,q,W,st)}if(typeof W.then=="function")return ue(X,q,bd(W),st);if(W.$$typeof===O)return ue(X,q,gd(X,W),st);Ad(X,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,q!==null&&q.tag===6?(c(X,q.sibling),st=y(q,W),st.return=X,X=st):(c(X,q),st=xm(W,X.mode,st),st.return=X,X=st),T(X)):c(X,q)}return function(X,q,W,st){try{Gc=0;var Et=ue(X,q,W,st);return rl=null,Et}catch(yt){if(yt===sl||yt===vd)throw yt;var Zt=Zn(29,yt,null,X.mode);return Zt.lanes=st,Zt.return=X,Zt}}}var eo=V0(!0),F0=V0(!1),Nr=!1;function Um(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jm(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function kr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Or(r,o,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(ne&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=dd(r),A0(r,null,c),o}return hd(r,d,o,c),dd(r)}function $c(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=r.pendingLanes,c|=d,o.lanes=c,_c(r,c)}}function Bm(r,o){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?y=_=T:_=_.next=T,c=c.next}while(c!==null);_===null?y=_=o:_=_.next=o}else y=_=o;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}var zm=!1;function Xc(){if(zm){var r=il;if(r!==null)throw r}}function Yc(r,o,c,d){zm=!1;var y=r.updateQueue;Nr=!1;var _=y.firstBaseUpdate,T=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var j=I,Q=j.next;j.next=null,T===null?_=Q:T.next=Q,T=j;var it=r.alternate;it!==null&&(it=it.updateQueue,I=it.lastBaseUpdate,I!==T&&(I===null?it.firstBaseUpdate=Q:I.next=Q,it.lastBaseUpdate=j))}if(_!==null){var rt=y.baseState;T=0,it=Q=j=null,I=_;do{var J=I.lane&-536870913,et=J!==I.lane;if(et?(qt&J)===J:(d&J)===J){J!==0&&J===nl&&(zm=!0),it!==null&&(it=it.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});t:{var pt=r,xt=I;J=o;var ue=c;switch(xt.tag){case 1:if(pt=xt.payload,typeof pt=="function"){rt=pt.call(ue,rt,J);break t}rt=pt;break t;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=xt.payload,J=typeof pt=="function"?pt.call(ue,rt,J):pt,J==null)break t;rt=g({},rt,J);break t;case 2:Nr=!0}}J=I.callback,J!==null&&(r.flags|=64,et&&(r.flags|=8192),et=y.callbacks,et===null?y.callbacks=[J]:et.push(J))}else et={lane:J,tag:I.tag,payload:I.payload,callback:I.callback,next:null},it===null?(Q=it=et,j=rt):it=it.next=et,T|=J;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;et=I,I=et.next,et.next=null,y.lastBaseUpdate=et,y.shared.pending=null}}while(!0);it===null&&(j=rt),y.baseState=j,y.firstBaseUpdate=Q,y.lastBaseUpdate=it,_===null&&(y.shared.lanes=0),jr|=T,r.lanes=T,r.memoizedState=rt}}function U0(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function j0(r,o){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)U0(c[r],o)}var al=H(null),Ed=H(0);function B0(r,o){r=nr,lt(Ed,r),lt(al,o),nr=r|o.baseLanes}function Hm(){lt(Ed,nr),lt(al,al.current)}function Gm(){nr=Ed.current,nt(al),nt(Ed)}var ti=H(null),bi=null;function Lr(r){var o=r.alternate;lt(Pe,Pe.current&1),lt(ti,r),bi===null&&(o===null||al.current!==null||o.memoizedState!==null)&&(bi=r)}function qm(r){lt(Pe,Pe.current),lt(ti,r),bi===null&&(bi=r)}function z0(r){r.tag===22?(lt(Pe,Pe.current),lt(ti,r),bi===null&&(bi=r)):Vr()}function Vr(){lt(Pe,Pe.current),lt(ti,ti.current)}function ei(r){nt(ti),bi===r&&(bi=null),nt(Pe)}var Pe=H(0);function wd(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Qg(c)||Jg(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ys=0,Vt=null,le=null,He=null,Td=!1,ol=!1,no=!1,Sd=0,Kc=0,ll=null,RM=0;function Ce(){throw Error(n(321))}function $m(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!Jn(r[c],o[c]))return!1;return!0}function Xm(r,o,c,d,y,_){return Ys=_,Vt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$.H=r===null||r.memoizedState===null?SA:lg,no=!1,_=c(d,y),no=!1,ol&&(_=G0(o,c,d,y)),H0(r),_}function H0(r){$.H=Jc;var o=le!==null&&le.next!==null;if(Ys=0,He=le=Vt=null,Td=!1,Kc=0,ll=null,o)throw Error(n(300));r===null||Ge||(r=r.dependencies,r!==null&&md(r)&&(Ge=!0))}function G0(r,o,c,d){Vt=r;var y=0;do{if(ol&&(ll=null),Kc=0,ol=!1,25<=y)throw Error(n(301));if(y+=1,He=le=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=xA,_=o(c,d)}while(ol);return _}function IM(){var r=$.H,o=r.useState()[0];return o=typeof o.then=="function"?Wc(o):o,r=r.useState()[0],(le!==null?le.memoizedState:null)!==r&&(Vt.flags|=1024),o}function Ym(){var r=Sd!==0;return Sd=0,r}function Km(r,o,c){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~c}function Wm(r){if(Td){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Td=!1}Ys=0,He=le=Vt=null,ol=!1,Kc=Sd=0,ll=null}function Pn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Vt.memoizedState=He=r:He=He.next=r,He}function Ne(){if(le===null){var r=Vt.alternate;r=r!==null?r.memoizedState:null}else r=le.next;var o=He===null?Vt.memoizedState:He.next;if(o!==null)He=o,le=r;else{if(r===null)throw Vt.alternate===null?Error(n(467)):Error(n(310));le=r,r={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},He===null?Vt.memoizedState=He=r:He=He.next=r}return He}function xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wc(r){var o=Kc;return Kc+=1,ll===null&&(ll=[]),r=k0(ll,r,o),o=Vt,(He===null?o.memoizedState:He.next)===null&&(o=o.alternate,$.H=o===null||o.memoizedState===null?SA:lg),r}function Cd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Wc(r);if(r.$$typeof===O)return fn(r)}throw Error(n(438,String(r)))}function Qm(r){var o=null,c=Vt.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=Vt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=xd(),Vt.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(r),d=0;d<r;d++)c[d]=L;return o.index++,c}function Ks(r,o){return typeof o=="function"?o(r):o}function Rd(r){var o=Ne();return Jm(o,le,r)}function Jm(r,o,c){var d=r.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=c;var y=r.baseQueue,_=d.pending;if(_!==null){if(y!==null){var T=y.next;y.next=_.next,_.next=T}o.baseQueue=y=_,d.pending=null}if(_=r.baseState,y===null)r.memoizedState=_;else{o=y.next;var I=T=null,j=null,Q=o,it=!1;do{var rt=Q.lane&-536870913;if(rt!==Q.lane?(qt&rt)===rt:(Ys&rt)===rt){var J=Q.revertLane;if(J===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),rt===nl&&(it=!0);else if((Ys&J)===J){Q=Q.next,J===nl&&(it=!0);continue}else rt={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},j===null?(I=j=rt,T=_):j=j.next=rt,Vt.lanes|=J,jr|=J;rt=Q.action,no&&c(_,rt),_=Q.hasEagerState?Q.eagerState:c(_,rt)}else J={lane:rt,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},j===null?(I=j=J,T=_):j=j.next=J,Vt.lanes|=rt,jr|=rt;Q=Q.next}while(Q!==null&&Q!==o);if(j===null?T=_:j.next=I,!Jn(_,r.memoizedState)&&(Ge=!0,it&&(c=il,c!==null)))throw c;r.memoizedState=_,r.baseState=T,r.baseQueue=j,d.lastRenderedState=_}return y===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Zm(r){var o=Ne(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var d=c.dispatch,y=c.pending,_=o.memoizedState;if(y!==null){c.pending=null;var T=y=y.next;do _=r(_,T.action),T=T.next;while(T!==y);Jn(_,o.memoizedState)||(Ge=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,d]}function q0(r,o,c){var d=Vt,y=Ne(),_=Wt;if(_){if(c===void 0)throw Error(n(407));c=c()}else c=o();var T=!Jn((le||y).memoizedState,c);if(T&&(y.memoizedState=c,Ge=!0),y=y.queue,ng(Y0.bind(null,d,y,r),[r]),y.getSnapshot!==o||T||He!==null&&He.memoizedState.tag&1){if(d.flags|=2048,cl(9,{destroy:void 0},X0.bind(null,d,y,c,o),null),de===null)throw Error(n(349));_||(Ys&127)!==0||$0(d,o,c)}return c}function $0(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=Vt.updateQueue,o===null?(o=xd(),Vt.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function X0(r,o,c,d){o.value=c,o.getSnapshot=d,K0(o)&&W0(r)}function Y0(r,o,c){return c(function(){K0(o)&&W0(r)})}function K0(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!Jn(r,c)}catch{return!0}}function W0(r){var o=Xa(r,2);o!==null&&Gn(o,r,2)}function tg(r){var o=Pn();if(typeof r=="function"){var c=r;if(r=c(),no){ui(!0);try{c()}finally{ui(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:r},o}function Q0(r,o,c,d){return r.baseState=c,Jm(r,le,typeof d=="function"?d:Ks)}function DM(r,o,c,d,y){if(Md(r))throw Error(n(485));if(r=o.action,r!==null){var _={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};$.T!==null?c(!0):_.isTransition=!1,d(_),c=o.pending,c===null?(_.next=o.pending=_,J0(o,_)):(_.next=c.next,o.pending=c.next=_)}}function J0(r,o){var c=o.action,d=o.payload,y=r.state;if(o.isTransition){var _=$.T,T={};$.T=T;try{var I=c(y,d),j=$.S;j!==null&&j(T,I),Z0(r,o,I)}catch(Q){eg(r,o,Q)}finally{_!==null&&T.types!==null&&(_.types=T.types),$.T=_}}else try{_=c(y,d),Z0(r,o,_)}catch(Q){eg(r,o,Q)}}function Z0(r,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){tA(r,o,d)},function(d){return eg(r,o,d)}):tA(r,o,c)}function tA(r,o,c){o.status="fulfilled",o.value=c,eA(o),r.state=c,o=r.pending,o!==null&&(c=o.next,c===o?r.pending=null:(c=c.next,o.next=c,J0(r,c)))}function eg(r,o,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,eA(o),o=o.next;while(o!==d)}r.action=null}function eA(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function nA(r,o){return o}function iA(r,o){if(Wt){var c=de.formState;if(c!==null){t:{var d=Vt;if(Wt){if(ye){e:{for(var y=ye,_=_i;y.nodeType!==8;){if(!_){y=null;break e}if(y=Ai(y.nextSibling),y===null){y=null;break e}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ye=Ai(y.nextSibling),d=y.data==="F!";break t}}Mr(d)}d=!1}d&&(o=c[0])}}return c=Pn(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nA,lastRenderedState:o},c.queue=d,c=EA.bind(null,Vt,d),d.dispatch=c,d=tg(!1),_=og.bind(null,Vt,!1,d.queue),d=Pn(),y={state:o,dispatch:null,action:r,pending:null},d.queue=y,c=DM.bind(null,Vt,y,_,c),y.dispatch=c,d.memoizedState=r,[o,c,!1]}function sA(r){var o=Ne();return rA(o,le,r)}function rA(r,o,c){if(o=Jm(r,o,nA)[0],r=Rd(Ks)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Wc(o)}catch(T){throw T===sl?vd:T}else d=o;o=Ne();var y=o.queue,_=y.dispatch;return c!==o.memoizedState&&(Vt.flags|=2048,cl(9,{destroy:void 0},MM.bind(null,y,c),null)),[d,_,r]}function MM(r,o){r.action=o}function aA(r){var o=Ne(),c=le;if(c!==null)return rA(o,c,r);Ne(),o=o.memoizedState,c=Ne();var d=c.queue.dispatch;return c.memoizedState=r,[o,d,!1]}function cl(r,o,c,d){return r={tag:r,create:c,deps:d,inst:o,next:null},o=Vt.updateQueue,o===null&&(o=xd(),Vt.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,o.lastEffect=r),r}function oA(){return Ne().memoizedState}function Id(r,o,c,d){var y=Pn();Vt.flags|=r,y.memoizedState=cl(1|o,{destroy:void 0},c,d===void 0?null:d)}function Dd(r,o,c,d){var y=Ne();d=d===void 0?null:d;var _=y.memoizedState.inst;le!==null&&d!==null&&$m(d,le.memoizedState.deps)?y.memoizedState=cl(o,_,c,d):(Vt.flags|=r,y.memoizedState=cl(1|o,_,c,d))}function lA(r,o){Id(8390656,8,r,o)}function ng(r,o){Dd(2048,8,r,o)}function PM(r){Vt.flags|=4;var o=Vt.updateQueue;if(o===null)o=xd(),Vt.updateQueue=o,o.events=[r];else{var c=o.events;c===null?o.events=[r]:c.push(r)}}function cA(r){var o=Ne().memoizedState;return PM({ref:o,nextImpl:r}),function(){if((ne&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function uA(r,o){return Dd(4,2,r,o)}function hA(r,o){return Dd(4,4,r,o)}function dA(r,o){if(typeof o=="function"){r=r();var c=o(r);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function fA(r,o,c){c=c!=null?c.concat([r]):null,Dd(4,4,dA.bind(null,o,r),c)}function ig(){}function pA(r,o){var c=Ne();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&$m(o,d[1])?d[0]:(c.memoizedState=[r,o],r)}function mA(r,o){var c=Ne();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&$m(o,d[1]))return d[0];if(d=r(),no){ui(!0);try{r()}finally{ui(!1)}}return c.memoizedState=[d,o],d}function sg(r,o,c){return c===void 0||(Ys&1073741824)!==0&&(qt&261930)===0?r.memoizedState=o:(r.memoizedState=c,r=gE(),Vt.lanes|=r,jr|=r,c)}function gA(r,o,c,d){return Jn(c,o)?c:al.current!==null?(r=sg(r,c,d),Jn(r,o)||(Ge=!0),r):(Ys&42)===0||(Ys&1073741824)!==0&&(qt&261930)===0?(Ge=!0,r.memoizedState=c):(r=gE(),Vt.lanes|=r,jr|=r,o)}function yA(r,o,c,d,y){var _=Z.p;Z.p=_!==0&&8>_?_:8;var T=$.T,I={};$.T=I,og(r,!1,o,c);try{var j=y(),Q=$.S;if(Q!==null&&Q(I,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var it=CM(j,d);Qc(r,o,it,si(r))}else Qc(r,o,d,si(r))}catch(rt){Qc(r,o,{then:function(){},status:"rejected",reason:rt},si())}finally{Z.p=_,T!==null&&I.types!==null&&(T.types=I.types),$.T=T}}function NM(){}function rg(r,o,c,d){if(r.tag!==5)throw Error(n(476));var y=vA(r).queue;yA(r,y,o,ut,c===null?NM:function(){return _A(r),c(d)})}function vA(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:ut},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:c},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function _A(r){var o=vA(r);o.next===null&&(o=r.alternate.memoizedState),Qc(r,o.next.queue,{},si())}function ag(){return fn(pu)}function bA(){return Ne().memoizedState}function AA(){return Ne().memoizedState}function kM(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var c=si();r=kr(c);var d=Or(o,r,c);d!==null&&(Gn(d,o,c),$c(d,o,c)),o={cache:Om()},r.payload=o;return}o=o.return}}function OM(r,o,c){var d=si();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Md(r)?wA(o,c):(c=Tm(r,o,c,d),c!==null&&(Gn(c,r,d),TA(c,o,d)))}function EA(r,o,c){var d=si();Qc(r,o,c,d)}function Qc(r,o,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Md(r))wA(o,y);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var T=o.lastRenderedState,I=_(T,c);if(y.hasEagerState=!0,y.eagerState=I,Jn(I,T))return hd(r,o,y,0),de===null&&ud(),!1}catch{}if(c=Tm(r,o,y,d),c!==null)return Gn(c,r,d),TA(c,o,d),!0}return!1}function og(r,o,c,d){if(d={lane:2,revertLane:Ug(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Md(r)){if(o)throw Error(n(479))}else o=Tm(r,c,d,2),o!==null&&Gn(o,r,2)}function Md(r){var o=r.alternate;return r===Vt||o!==null&&o===Vt}function wA(r,o){ol=Td=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function TA(r,o,c){if((c&4194048)!==0){var d=o.lanes;d&=r.pendingLanes,c|=d,o.lanes=c,_c(r,c)}}var Jc={readContext:fn,use:Cd,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useLayoutEffect:Ce,useInsertionEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useSyncExternalStore:Ce,useId:Ce,useHostTransitionStatus:Ce,useFormState:Ce,useActionState:Ce,useOptimistic:Ce,useMemoCache:Ce,useCacheRefresh:Ce};Jc.useEffectEvent=Ce;var SA={readContext:fn,use:Cd,useCallback:function(r,o){return Pn().memoizedState=[r,o===void 0?null:o],r},useContext:fn,useEffect:lA,useImperativeHandle:function(r,o,c){c=c!=null?c.concat([r]):null,Id(4194308,4,dA.bind(null,o,r),c)},useLayoutEffect:function(r,o){return Id(4194308,4,r,o)},useInsertionEffect:function(r,o){Id(4,2,r,o)},useMemo:function(r,o){var c=Pn();o=o===void 0?null:o;var d=r();if(no){ui(!0);try{r()}finally{ui(!1)}}return c.memoizedState=[d,o],d},useReducer:function(r,o,c){var d=Pn();if(c!==void 0){var y=c(o);if(no){ui(!0);try{c(o)}finally{ui(!1)}}}else y=o;return d.memoizedState=d.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},d.queue=r,r=r.dispatch=OM.bind(null,Vt,r),[d.memoizedState,r]},useRef:function(r){var o=Pn();return r={current:r},o.memoizedState=r},useState:function(r){r=tg(r);var o=r.queue,c=EA.bind(null,Vt,o);return o.dispatch=c,[r.memoizedState,c]},useDebugValue:ig,useDeferredValue:function(r,o){var c=Pn();return sg(c,r,o)},useTransition:function(){var r=tg(!1);return r=yA.bind(null,Vt,r.queue,!0,!1),Pn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,c){var d=Vt,y=Pn();if(Wt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),de===null)throw Error(n(349));(qt&127)!==0||$0(d,o,c)}y.memoizedState=c;var _={value:c,getSnapshot:o};return y.queue=_,lA(Y0.bind(null,d,_,r),[r]),d.flags|=2048,cl(9,{destroy:void 0},X0.bind(null,d,_,c,o),null),c},useId:function(){var r=Pn(),o=de.identifierPrefix;if(Wt){var c=_s,d=vs;c=(d&~(1<<32-De(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Sd++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=RM++,o="_"+o+"r_"+c.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:ag,useFormState:iA,useActionState:iA,useOptimistic:function(r){var o=Pn();o.memoizedState=o.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=og.bind(null,Vt,!0,c),c.dispatch=o,[r,o]},useMemoCache:Qm,useCacheRefresh:function(){return Pn().memoizedState=kM.bind(null,Vt)},useEffectEvent:function(r){var o=Pn(),c={impl:r};return o.memoizedState=c,function(){if((ne&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},lg={readContext:fn,use:Cd,useCallback:pA,useContext:fn,useEffect:ng,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:hA,useMemo:mA,useReducer:Rd,useRef:oA,useState:function(){return Rd(Ks)},useDebugValue:ig,useDeferredValue:function(r,o){var c=Ne();return gA(c,le.memoizedState,r,o)},useTransition:function(){var r=Rd(Ks)[0],o=Ne().memoizedState;return[typeof r=="boolean"?r:Wc(r),o]},useSyncExternalStore:q0,useId:bA,useHostTransitionStatus:ag,useFormState:sA,useActionState:sA,useOptimistic:function(r,o){var c=Ne();return Q0(c,le,r,o)},useMemoCache:Qm,useCacheRefresh:AA};lg.useEffectEvent=cA;var xA={readContext:fn,use:Cd,useCallback:pA,useContext:fn,useEffect:ng,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:hA,useMemo:mA,useReducer:Zm,useRef:oA,useState:function(){return Zm(Ks)},useDebugValue:ig,useDeferredValue:function(r,o){var c=Ne();return le===null?sg(c,r,o):gA(c,le.memoizedState,r,o)},useTransition:function(){var r=Zm(Ks)[0],o=Ne().memoizedState;return[typeof r=="boolean"?r:Wc(r),o]},useSyncExternalStore:q0,useId:bA,useHostTransitionStatus:ag,useFormState:aA,useActionState:aA,useOptimistic:function(r,o){var c=Ne();return le!==null?Q0(c,le,r,o):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Qm,useCacheRefresh:AA};xA.useEffectEvent=cA;function cg(r,o,c,d){o=r.memoizedState,c=c(d,o),c=c==null?o:g({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var ug={enqueueSetState:function(r,o,c){r=r._reactInternals;var d=si(),y=kr(d);y.payload=o,c!=null&&(y.callback=c),o=Or(r,y,d),o!==null&&(Gn(o,r,d),$c(o,r,d))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var d=si(),y=kr(d);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=Or(r,y,d),o!==null&&(Gn(o,r,d),$c(o,r,d))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=si(),d=kr(c);d.tag=2,o!=null&&(d.callback=o),o=Or(r,d,c),o!==null&&(Gn(o,r,c),$c(o,r,c))}};function CA(r,o,c,d,y,_,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,_,T):o.prototype&&o.prototype.isPureReactComponent?!Fc(c,d)||!Fc(y,_):!0}function RA(r,o,c,d){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==r&&ug.enqueueReplaceState(o,o.state,null)}function io(r,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(r=r.defaultProps){c===o&&(c=g({},c));for(var y in r)c[y]===void 0&&(c[y]=r[y])}return c}function IA(r){cd(r)}function DA(r){console.error(r)}function MA(r){cd(r)}function Pd(r,o){try{var c=r.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function PA(r,o,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function hg(r,o,c){return c=kr(c),c.tag=3,c.payload={element:null},c.callback=function(){Pd(r,o)},c}function NA(r){return r=kr(r),r.tag=3,r}function kA(r,o,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var _=d.value;r.payload=function(){return y(_)},r.callback=function(){PA(o,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){PA(o,c,d),typeof y!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function LM(r,o,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&el(o,c,y,!0),c=ti.current,c!==null){switch(c.tag){case 31:case 13:return bi===null?Gd():c.alternate===null&&Re===0&&(Re=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===_d?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Lg(r,d,y)),!1;case 22:return c.flags|=65536,d===_d?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Lg(r,d,y)),!1}throw Error(n(435,c.tag))}return Lg(r,d,y),Gd(),!1}if(Wt)return o=ti.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==Dm&&(r=Error(n(422),{cause:d}),Bc(gi(r,c)))):(d!==Dm&&(o=Error(n(423),{cause:d}),Bc(gi(o,c))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,d=gi(d,c),y=hg(r.stateNode,d,y),Bm(r,y),Re!==4&&(Re=2)),!1;var _=Error(n(520),{cause:d});if(_=gi(_,c),au===null?au=[_]:au.push(_),Re!==4&&(Re=2),o===null)return!0;d=gi(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,r=y&-y,c.lanes|=r,r=hg(c.stateNode,d,r),Bm(c,r),!1;case 1:if(o=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Br===null||!Br.has(_))))return c.flags|=65536,y&=-y,c.lanes|=y,y=NA(y),kA(y,r,c,d),Bm(c,y),!1}c=c.return}while(c!==null);return!1}var dg=Error(n(461)),Ge=!1;function pn(r,o,c,d){o.child=r===null?F0(o,null,c,d):eo(o,r.child,c,d)}function OA(r,o,c,d,y){c=c.render;var _=o.ref;if("ref"in d){var T={};for(var I in d)I!=="ref"&&(T[I]=d[I])}else T=d;return Qa(o),d=Xm(r,o,c,T,_,y),I=Ym(),r!==null&&!Ge?(Km(r,o,y),Ws(r,o,y)):(Wt&&I&&Rm(o),o.flags|=1,pn(r,o,d,y),o.child)}function LA(r,o,c,d,y){if(r===null){var _=c.type;return typeof _=="function"&&!Sm(_)&&_.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=_,VA(r,o,_,d,y)):(r=fd(c.type,null,d,o,o.mode,y),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!bg(r,y)){var T=_.memoizedProps;if(c=c.compare,c=c!==null?c:Fc,c(T,d)&&r.ref===o.ref)return Ws(r,o,y)}return o.flags|=1,r=Gs(_,d),r.ref=o.ref,r.return=o,o.child=r}function VA(r,o,c,d,y){if(r!==null){var _=r.memoizedProps;if(Fc(_,d)&&r.ref===o.ref)if(Ge=!1,o.pendingProps=d=_,bg(r,y))(r.flags&131072)!==0&&(Ge=!0);else return o.lanes=r.lanes,Ws(r,o,y)}return fg(r,o,c,d,y)}function FA(r,o,c,d){var y=d.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|c:c,r!==null){for(d=o.child=r.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~_}else d=0,o.child=null;return UA(r,o,_,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&yd(o,_!==null?_.cachePool:null),_!==null?B0(o,_):Hm(),z0(o);else return d=o.lanes=536870912,UA(r,o,_!==null?_.baseLanes|c:c,c,d)}else _!==null?(yd(o,_.cachePool),B0(o,_),Vr(),o.memoizedState=null):(r!==null&&yd(o,null),Hm(),Vr());return pn(r,o,y,c),o.child}function Zc(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function UA(r,o,c,d,y){var _=Vm();return _=_===null?null:{parent:ze._currentValue,pool:_},o.memoizedState={baseLanes:c,cachePool:_},r!==null&&yd(o,null),Hm(),z0(o),r!==null&&el(r,o,d,!0),o.childLanes=y,null}function Nd(r,o){return o=Od({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function jA(r,o,c){return eo(o,r.child,null,c),r=Nd(o,o.pendingProps),r.flags|=2,ei(o),o.memoizedState=null,r}function VM(r,o,c){var d=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(Wt){if(d.mode==="hidden")return r=Nd(o,d),o.lanes=536870912,Zc(null,r);if(qm(o),(r=ye)?(r=JE(r,_i),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ir!==null?{id:vs,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},c=w0(r),c.return=o,o.child=c,dn=o,ye=null)):r=null,r===null)throw Mr(o);return o.lanes=536870912,null}return Nd(o,d)}var _=r.memoizedState;if(_!==null){var T=_.dehydrated;if(qm(o),y)if(o.flags&256)o.flags&=-257,o=jA(r,o,c);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(n(558));else if(Ge||el(r,o,c,!1),y=(c&r.childLanes)!==0,Ge||y){if(d=de,d!==null&&(T=bc(d,c),T!==0&&T!==_.retryLane))throw _.retryLane=T,Xa(r,T),Gn(d,r,T),dg;Gd(),o=jA(r,o,c)}else r=_.treeContext,ye=Ai(T.nextSibling),dn=o,Wt=!0,Dr=null,_i=!1,r!==null&&x0(o,r),o=Nd(o,d),o.flags|=4096;return o}return r=Gs(r.child,{mode:d.mode,children:d.children}),r.ref=o.ref,o.child=r,r.return=o,r}function kd(r,o){var c=o.ref;if(c===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(r===null||r.ref!==c)&&(o.flags|=4194816)}}function fg(r,o,c,d,y){return Qa(o),c=Xm(r,o,c,d,void 0,y),d=Ym(),r!==null&&!Ge?(Km(r,o,y),Ws(r,o,y)):(Wt&&d&&Rm(o),o.flags|=1,pn(r,o,c,y),o.child)}function BA(r,o,c,d,y,_){return Qa(o),o.updateQueue=null,c=G0(o,d,c,y),H0(r),d=Ym(),r!==null&&!Ge?(Km(r,o,_),Ws(r,o,_)):(Wt&&d&&Rm(o),o.flags|=1,pn(r,o,c,_),o.child)}function zA(r,o,c,d,y){if(Qa(o),o.stateNode===null){var _=Qo,T=c.contextType;typeof T=="object"&&T!==null&&(_=fn(T)),_=new c(d,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ug,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=d,_.state=o.memoizedState,_.refs={},Um(o),T=c.contextType,_.context=typeof T=="object"&&T!==null?fn(T):Qo,_.state=o.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(cg(o,c,T,d),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&ug.enqueueReplaceState(_,_.state,null),Yc(o,d,_,y),Xc(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(r===null){_=o.stateNode;var I=o.memoizedProps,j=io(c,I);_.props=j;var Q=_.context,it=c.contextType;T=Qo,typeof it=="object"&&it!==null&&(T=fn(it));var rt=c.getDerivedStateFromProps;it=typeof rt=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,it||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||Q!==T)&&RA(o,_,d,T),Nr=!1;var J=o.memoizedState;_.state=J,Yc(o,d,_,y),Xc(),Q=o.memoizedState,I||J!==Q||Nr?(typeof rt=="function"&&(cg(o,c,rt,d),Q=o.memoizedState),(j=Nr||CA(o,c,j,d,J,Q,T))?(it||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=Q),_.props=d,_.state=Q,_.context=T,d=j):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{_=o.stateNode,jm(r,o),T=o.memoizedProps,it=io(c,T),_.props=it,rt=o.pendingProps,J=_.context,Q=c.contextType,j=Qo,typeof Q=="object"&&Q!==null&&(j=fn(Q)),I=c.getDerivedStateFromProps,(Q=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==rt||J!==j)&&RA(o,_,d,j),Nr=!1,J=o.memoizedState,_.state=J,Yc(o,d,_,y),Xc();var et=o.memoizedState;T!==rt||J!==et||Nr||r!==null&&r.dependencies!==null&&md(r.dependencies)?(typeof I=="function"&&(cg(o,c,I,d),et=o.memoizedState),(it=Nr||CA(o,c,it,d,J,et,j)||r!==null&&r.dependencies!==null&&md(r.dependencies))?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,et,j),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,et,j)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===r.memoizedProps&&J===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&J===r.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=et),_.props=d,_.state=et,_.context=j,d=it):(typeof _.componentDidUpdate!="function"||T===r.memoizedProps&&J===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&J===r.memoizedState||(o.flags|=1024),d=!1)}return _=d,kd(r,o),d=(o.flags&128)!==0,_||d?(_=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&d?(o.child=eo(o,r.child,null,y),o.child=eo(o,null,c,y)):pn(r,o,c,y),o.memoizedState=_.state,r=o.child):r=Ws(r,o,y),r}function HA(r,o,c,d){return Ka(),o.flags|=256,pn(r,o,c,d),o.child}var pg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mg(r){return{baseLanes:r,cachePool:P0()}}function gg(r,o,c){return r=r!==null?r.childLanes&~c:0,o&&(r|=ii),r}function GA(r,o,c){var d=o.pendingProps,y=!1,_=(o.flags&128)!==0,T;if((T=_)||(T=r!==null&&r.memoizedState===null?!1:(Pe.current&2)!==0),T&&(y=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,r===null){if(Wt){if(y?Lr(o):Vr(),(r=ye)?(r=JE(r,_i),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ir!==null?{id:vs,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},c=w0(r),c.return=o,o.child=c,dn=o,ye=null)):r=null,r===null)throw Mr(o);return Jg(r)?o.lanes=32:o.lanes=536870912,null}var I=d.children;return d=d.fallback,y?(Vr(),y=o.mode,I=Od({mode:"hidden",children:I},y),d=Ya(d,y,c,null),I.return=o,d.return=o,I.sibling=d,o.child=I,d=o.child,d.memoizedState=mg(c),d.childLanes=gg(r,T,c),o.memoizedState=pg,Zc(null,d)):(Lr(o),yg(o,I))}var j=r.memoizedState;if(j!==null&&(I=j.dehydrated,I!==null)){if(_)o.flags&256?(Lr(o),o.flags&=-257,o=vg(r,o,c)):o.memoizedState!==null?(Vr(),o.child=r.child,o.flags|=128,o=null):(Vr(),I=d.fallback,y=o.mode,d=Od({mode:"visible",children:d.children},y),I=Ya(I,y,c,null),I.flags|=2,d.return=o,I.return=o,d.sibling=I,o.child=d,eo(o,r.child,null,c),d=o.child,d.memoizedState=mg(c),d.childLanes=gg(r,T,c),o.memoizedState=pg,o=Zc(null,d));else if(Lr(o),Jg(I)){if(T=I.nextSibling&&I.nextSibling.dataset,T)var Q=T.dgst;T=Q,d=Error(n(419)),d.stack="",d.digest=T,Bc({value:d,source:null,stack:null}),o=vg(r,o,c)}else if(Ge||el(r,o,c,!1),T=(c&r.childLanes)!==0,Ge||T){if(T=de,T!==null&&(d=bc(T,c),d!==0&&d!==j.retryLane))throw j.retryLane=d,Xa(r,d),Gn(T,r,d),dg;Qg(I)||Gd(),o=vg(r,o,c)}else Qg(I)?(o.flags|=192,o.child=r.child,o=null):(r=j.treeContext,ye=Ai(I.nextSibling),dn=o,Wt=!0,Dr=null,_i=!1,r!==null&&x0(o,r),o=yg(o,d.children),o.flags|=4096);return o}return y?(Vr(),I=d.fallback,y=o.mode,j=r.child,Q=j.sibling,d=Gs(j,{mode:"hidden",children:d.children}),d.subtreeFlags=j.subtreeFlags&65011712,Q!==null?I=Gs(Q,I):(I=Ya(I,y,c,null),I.flags|=2),I.return=o,d.return=o,d.sibling=I,o.child=d,Zc(null,d),d=o.child,I=r.child.memoizedState,I===null?I=mg(c):(y=I.cachePool,y!==null?(j=ze._currentValue,y=y.parent!==j?{parent:j,pool:j}:y):y=P0(),I={baseLanes:I.baseLanes|c,cachePool:y}),d.memoizedState=I,d.childLanes=gg(r,T,c),o.memoizedState=pg,Zc(r.child,d)):(Lr(o),c=r.child,r=c.sibling,c=Gs(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,r!==null&&(T=o.deletions,T===null?(o.deletions=[r],o.flags|=16):T.push(r)),o.child=c,o.memoizedState=null,c)}function yg(r,o){return o=Od({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Od(r,o){return r=Zn(22,r,null,o),r.lanes=0,r}function vg(r,o,c){return eo(o,r.child,null,c),r=yg(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function qA(r,o,c){r.lanes|=o;var d=r.alternate;d!==null&&(d.lanes|=o),Nm(r.return,o,c)}function _g(r,o,c,d,y,_){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:_}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=c,T.tailMode=y,T.treeForkCount=_)}function $A(r,o,c){var d=o.pendingProps,y=d.revealOrder,_=d.tail;d=d.children;var T=Pe.current,I=(T&2)!==0;if(I?(T=T&1|2,o.flags|=128):T&=1,lt(Pe,T),pn(r,o,d,c),d=Wt?jc:0,!I&&r!==null&&(r.flags&128)!==0)t:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&qA(r,c,o);else if(r.tag===19)qA(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break t;for(;r.sibling===null;){if(r.return===null||r.return===o)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(c=o.child,y=null;c!==null;)r=c.alternate,r!==null&&wd(r)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),_g(o,!1,y,c,_,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(r=y.alternate,r!==null&&wd(r)===null){o.child=y;break}r=y.sibling,y.sibling=c,c=y,y=r}_g(o,!0,c,null,_,d);break;case"together":_g(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Ws(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),jr|=o.lanes,(c&o.childLanes)===0)if(r!==null){if(el(r,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,c=Gs(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Gs(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function bg(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&md(r)))}function FM(r,o,c){switch(o.tag){case 3:pe(o,o.stateNode.containerInfo),Pr(o,ze,r.memoizedState.cache),Ka();break;case 27:case 5:Us(o);break;case 4:pe(o,o.stateNode.containerInfo);break;case 10:Pr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,qm(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Lr(o),o.flags|=128,null):(c&o.child.childLanes)!==0?GA(r,o,c):(Lr(o),r=Ws(r,o,c),r!==null?r.sibling:null);Lr(o);break;case 19:var y=(r.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(el(r,o,c,!1),d=(c&o.childLanes)!==0),y){if(d)return $A(r,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),lt(Pe,Pe.current),d)break;return null;case 22:return o.lanes=0,FA(r,o,c,o.pendingProps);case 24:Pr(o,ze,r.memoizedState.cache)}return Ws(r,o,c)}function XA(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps)Ge=!0;else{if(!bg(r,c)&&(o.flags&128)===0)return Ge=!1,FM(r,o,c);Ge=(r.flags&131072)!==0}else Ge=!1,Wt&&(o.flags&1048576)!==0&&S0(o,jc,o.index);switch(o.lanes=0,o.tag){case 16:t:{var d=o.pendingProps;if(r=Za(o.elementType),o.type=r,typeof r=="function")Sm(r)?(d=io(r,d),o.tag=1,o=zA(null,o,r,d,c)):(o.tag=0,o=fg(null,o,r,d,c));else{if(r!=null){var y=r.$$typeof;if(y===U){o.tag=11,o=OA(null,o,r,d,c);break t}else if(y===D){o.tag=14,o=LA(null,o,r,d,c);break t}}throw o=bt(r)||r,Error(n(306,o,""))}}return o;case 0:return fg(r,o,o.type,o.pendingProps,c);case 1:return d=o.type,y=io(d,o.pendingProps),zA(r,o,d,y,c);case 3:t:{if(pe(o,o.stateNode.containerInfo),r===null)throw Error(n(387));d=o.pendingProps;var _=o.memoizedState;y=_.element,jm(r,o),Yc(o,d,null,c);var T=o.memoizedState;if(d=T.cache,Pr(o,ze,d),d!==_.cache&&km(o,[ze],c,!0),Xc(),d=T.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=HA(r,o,d,c);break t}else if(d!==y){y=gi(Error(n(424)),o),Bc(y),o=HA(r,o,d,c);break t}else for(r=o.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,ye=Ai(r.firstChild),dn=o,Wt=!0,Dr=null,_i=!0,c=F0(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ka(),d===y){o=Ws(r,o,c);break t}pn(r,o,d,c)}o=o.child}return o;case 26:return kd(r,o),r===null?(c=sw(o.type,null,o.pendingProps,null))?o.memoizedState=c:Wt||(c=o.type,r=o.pendingProps,d=Qd(At.current).createElement(c),d[Ue]=o,d[an]=r,mn(d,c,r),je(d),o.stateNode=d):o.memoizedState=sw(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Us(o),r===null&&Wt&&(d=o.stateNode=ew(o.type,o.pendingProps,At.current),dn=o,_i=!0,y=ye,qr(o.type)?(Zg=y,ye=Ai(d.firstChild)):ye=y),pn(r,o,o.pendingProps.children,c),kd(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Wt&&((y=d=ye)&&(d=pP(d,o.type,o.pendingProps,_i),d!==null?(o.stateNode=d,dn=o,ye=Ai(d.firstChild),_i=!1,y=!0):y=!1),y||Mr(o)),Us(o),y=o.type,_=o.pendingProps,T=r!==null?r.memoizedProps:null,d=_.children,Yg(y,_)?d=null:T!==null&&Yg(y,T)&&(o.flags|=32),o.memoizedState!==null&&(y=Xm(r,o,IM,null,null,c),pu._currentValue=y),kd(r,o),pn(r,o,d,c),o.child;case 6:return r===null&&Wt&&((r=c=ye)&&(c=mP(c,o.pendingProps,_i),c!==null?(o.stateNode=c,dn=o,ye=null,r=!0):r=!1),r||Mr(o)),null;case 13:return GA(r,o,c);case 4:return pe(o,o.stateNode.containerInfo),d=o.pendingProps,r===null?o.child=eo(o,null,d,c):pn(r,o,d,c),o.child;case 11:return OA(r,o,o.type,o.pendingProps,c);case 7:return pn(r,o,o.pendingProps,c),o.child;case 8:return pn(r,o,o.pendingProps.children,c),o.child;case 12:return pn(r,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,Pr(o,o.type,d.value),pn(r,o,d.children,c),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,Qa(o),y=fn(y),d=d(y),o.flags|=1,pn(r,o,d,c),o.child;case 14:return LA(r,o,o.type,o.pendingProps,c);case 15:return VA(r,o,o.type,o.pendingProps,c);case 19:return $A(r,o,c);case 31:return VM(r,o,c);case 22:return FA(r,o,c,o.pendingProps);case 24:return Qa(o),d=fn(ze),r===null?(y=Vm(),y===null&&(y=de,_=Om(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=c),y=_),o.memoizedState={parent:d,cache:y},Um(o),Pr(o,ze,y)):((r.lanes&c)!==0&&(jm(r,o),Yc(o,null,null,c),Xc()),y=r.memoizedState,_=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Pr(o,ze,d)):(d=_.cache,Pr(o,ze,d),d!==y.cache&&km(o,[ze],c,!0))),pn(r,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Qs(r){r.flags|=4}function Ag(r,o,c,d,y){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if(bE())r.flags|=8192;else throw to=_d,Fm}else r.flags&=-16777217}function YA(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!cw(o))if(bE())r.flags|=8192;else throw to=_d,Fm}function Ld(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?zh():536870912,r.lanes|=o,fl|=o)}function tu(r,o){if(!Wt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function ve(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(o)for(var y=r.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=d,r.childLanes=c,o}function UM(r,o,c){var d=o.pendingProps;switch(Im(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(o),null;case 1:return ve(o),null;case 3:return c=o.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Xs(ze),he(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(tl(o)?Qs(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Mm())),ve(o),null;case 26:var y=o.type,_=o.memoizedState;return r===null?(Qs(o),_!==null?(ve(o),YA(o,_)):(ve(o),Ag(o,y,null,d,c))):_?_!==r.memoizedState?(Qs(o),ve(o),YA(o,_)):(ve(o),o.flags&=-16777217):(r=r.memoizedProps,r!==d&&Qs(o),ve(o),Ag(o,y,r,d,c)),null;case 27:if(Po(o),c=At.current,y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&Qs(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return ve(o),null}r=ht.current,tl(o)?C0(o):(r=ew(y,d,c),o.stateNode=r,Qs(o))}return ve(o),null;case 5:if(Po(o),y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&Qs(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return ve(o),null}if(_=ht.current,tl(o))C0(o);else{var T=Qd(At.current);switch(_){case 1:_=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=T.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?_.multiple=!0:d.size&&(_.size=d.size);break;default:_=typeof d.is=="string"?T.createElement(y,{is:d.is}):T.createElement(y)}}_[Ue]=o,_[an]=d;t:for(T=o.child;T!==null;){if(T.tag===5||T.tag===6)_.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===o)break t;for(;T.sibling===null;){if(T.return===null||T.return===o)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}o.stateNode=_;t:switch(mn(_,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Qs(o)}}return ve(o),Ag(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,c),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==d&&Qs(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(r=At.current,tl(o)){if(r=o.stateNode,c=o.memoizedProps,d=null,y=dn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}r[Ue]=o,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||GE(r.nodeValue,c)),r||Mr(o,!0)}else r=Qd(r).createTextNode(d),r[Ue]=o,o.stateNode=r}return ve(o),null;case 31:if(c=o.memoizedState,r===null||r.memoizedState!==null){if(d=tl(o),c!==null){if(r===null){if(!d)throw Error(n(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[Ue]=o}else Ka(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ve(o),r=!1}else c=Mm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return o.flags&256?(ei(o),o):(ei(o),null);if((o.flags&128)!==0)throw Error(n(558))}return ve(o),null;case 13:if(d=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=tl(o),d!==null&&d.dehydrated!==null){if(r===null){if(!y)throw Error(n(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Ue]=o}else Ka(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ve(o),y=!1}else y=Mm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(ei(o),o):(ei(o),null)}return ei(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,r=r!==null&&r.memoizedState!==null,c&&(d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),_=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048)),c!==r&&c&&(o.child.flags|=8192),Ld(o,o.updateQueue),ve(o),null);case 4:return he(),r===null&&Hg(o.stateNode.containerInfo),ve(o),null;case 10:return Xs(o.type),ve(o),null;case 19:if(nt(Pe),d=o.memoizedState,d===null)return ve(o),null;if(y=(o.flags&128)!==0,_=d.rendering,_===null)if(y)tu(d,!1);else{if(Re!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=wd(r),_!==null){for(o.flags|=128,tu(d,!1),r=_.updateQueue,o.updateQueue=r,Ld(o,r),o.subtreeFlags=0,r=c,c=o.child;c!==null;)E0(c,r),c=c.sibling;return lt(Pe,Pe.current&1|2),Wt&&qs(o,d.treeForkCount),o.child}r=r.sibling}d.tail!==null&&Dn()>Bd&&(o.flags|=128,y=!0,tu(d,!1),o.lanes=4194304)}else{if(!y)if(r=wd(_),r!==null){if(o.flags|=128,y=!0,r=r.updateQueue,o.updateQueue=r,Ld(o,r),tu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!Wt)return ve(o),null}else 2*Dn()-d.renderingStartTime>Bd&&c!==536870912&&(o.flags|=128,y=!0,tu(d,!1),o.lanes=4194304);d.isBackwards?(_.sibling=o.child,o.child=_):(r=d.last,r!==null?r.sibling=_:o.child=_,d.last=_)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Dn(),r.sibling=null,c=Pe.current,lt(Pe,y?c&1|2:c&1),Wt&&qs(o,d.treeForkCount),r):(ve(o),null);case 22:case 23:return ei(o),Gm(),d=o.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(ve(o),o.subtreeFlags&6&&(o.flags|=8192)):ve(o),c=o.updateQueue,c!==null&&Ld(o,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),r!==null&&nt(Ja),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Xs(ze),ve(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function jM(r,o){switch(Im(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Xs(ze),he(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Po(o),null;case 31:if(o.memoizedState!==null){if(ei(o),o.alternate===null)throw Error(n(340));Ka()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(ei(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Ka()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return nt(Pe),null;case 4:return he(),null;case 10:return Xs(o.type),null;case 22:case 23:return ei(o),Gm(),r!==null&&nt(Ja),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Xs(ze),null;case 25:return null;default:return null}}function KA(r,o){switch(Im(o),o.tag){case 3:Xs(ze),he();break;case 26:case 27:case 5:Po(o);break;case 4:he();break;case 31:o.memoizedState!==null&&ei(o);break;case 13:ei(o);break;case 19:nt(Pe);break;case 10:Xs(o.type);break;case 22:case 23:ei(o),Gm(),r!==null&&nt(Ja);break;case 24:Xs(ze)}}function eu(r,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&r)===r){d=void 0;var _=c.create,T=c.inst;d=_(),T.destroy=d}c=c.next}while(c!==y)}}catch(I){ae(o,o.return,I)}}function Fr(r,o,c){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&r)===r){var T=d.inst,I=T.destroy;if(I!==void 0){T.destroy=void 0,y=o;var j=c,Q=I;try{Q()}catch(it){ae(y,j,it)}}}d=d.next}while(d!==_)}}catch(it){ae(o,o.return,it)}}function WA(r){var o=r.updateQueue;if(o!==null){var c=r.stateNode;try{j0(o,c)}catch(d){ae(r,r.return,d)}}}function QA(r,o,c){c.props=io(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){ae(r,o,d)}}function nu(r,o){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof c=="function"?r.refCleanup=c(d):c.current=d}}catch(y){ae(r,o,y)}}function bs(r,o){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){ae(r,o,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){ae(r,o,y)}else c.current=null}function JA(r){var o=r.type,c=r.memoizedProps,d=r.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){ae(r,r.return,y)}}function Eg(r,o,c){try{var d=r.stateNode;lP(d,r.type,c,o),d[an]=o}catch(y){ae(r,r.return,y)}}function ZA(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&qr(r.type)||r.tag===4}function wg(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||ZA(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&qr(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Tg(r,o,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(r),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=ki));else if(d!==4&&(d===27&&qr(r.type)&&(c=r.stateNode,o=null),r=r.child,r!==null))for(Tg(r,o,c),r=r.sibling;r!==null;)Tg(r,o,c),r=r.sibling}function Vd(r,o,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(d!==4&&(d===27&&qr(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Vd(r,o,c),r=r.sibling;r!==null;)Vd(r,o,c),r=r.sibling}function tE(r){var o=r.stateNode,c=r.memoizedProps;try{for(var d=r.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);mn(o,d,c),o[Ue]=r,o[an]=c}catch(_){ae(r,r.return,_)}}var Js=!1,qe=!1,Sg=!1,eE=typeof WeakSet=="function"?WeakSet:Set,ln=null;function BM(r,o){if(r=r.containerInfo,$g=rf,r=f0(r),vm(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else t:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break t}var T=0,I=-1,j=-1,Q=0,it=0,rt=r,J=null;e:for(;;){for(var et;rt!==c||y!==0&&rt.nodeType!==3||(I=T+y),rt!==_||d!==0&&rt.nodeType!==3||(j=T+d),rt.nodeType===3&&(T+=rt.nodeValue.length),(et=rt.firstChild)!==null;)J=rt,rt=et;for(;;){if(rt===r)break e;if(J===c&&++Q===y&&(I=T),J===_&&++it===d&&(j=T),(et=rt.nextSibling)!==null)break;rt=J,J=rt.parentNode}rt=et}c=I===-1||j===-1?null:{start:I,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(Xg={focusedElem:r,selectionRange:c},rf=!1,ln=o;ln!==null;)if(o=ln,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,ln=r;else for(;ln!==null;){switch(o=ln,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)y=r[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,c=o,y=_.memoizedProps,_=_.memoizedState,d=c.stateNode;try{var pt=io(c.type,y);r=d.getSnapshotBeforeUpdate(pt,_),d.__reactInternalSnapshotBeforeUpdate=r}catch(xt){ae(c,c.return,xt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,c=r.nodeType,c===9)Wg(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Wg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,ln=r;break}ln=o.return}}function nE(r,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:tr(r,c),d&4&&eu(5,c);break;case 1:if(tr(r,c),d&4)if(r=c.stateNode,o===null)try{r.componentDidMount()}catch(T){ae(c,c.return,T)}else{var y=io(c.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(y,o,r.__reactInternalSnapshotBeforeUpdate)}catch(T){ae(c,c.return,T)}}d&64&&WA(c),d&512&&nu(c,c.return);break;case 3:if(tr(r,c),d&64&&(r=c.updateQueue,r!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{j0(r,o)}catch(T){ae(c,c.return,T)}}break;case 27:o===null&&d&4&&tE(c);case 26:case 5:tr(r,c),o===null&&d&4&&JA(c),d&512&&nu(c,c.return);break;case 12:tr(r,c);break;case 31:tr(r,c),d&4&&rE(r,c);break;case 13:tr(r,c),d&4&&aE(r,c),d&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=WM.bind(null,c),gP(r,c))));break;case 22:if(d=c.memoizedState!==null||Js,!d){o=o!==null&&o.memoizedState!==null||qe,y=Js;var _=qe;Js=d,(qe=o)&&!_?er(r,c,(c.subtreeFlags&8772)!==0):tr(r,c),Js=y,qe=_}break;case 30:break;default:tr(r,c)}}function iE(r){var o=r.alternate;o!==null&&(r.alternate=null,iE(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Vo(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ae=null,jn=!1;function Zs(r,o,c){for(c=c.child;c!==null;)sE(r,o,c),c=c.sibling}function sE(r,o,c){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Di,c)}catch{}switch(c.tag){case 26:qe||bs(c,o),Zs(r,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:qe||bs(c,o);var d=Ae,y=jn;qr(c.type)&&(Ae=c.stateNode,jn=!1),Zs(r,o,c),hu(c.stateNode),Ae=d,jn=y;break;case 5:qe||bs(c,o);case 6:if(d=Ae,y=jn,Ae=null,Zs(r,o,c),Ae=d,jn=y,Ae!==null)if(jn)try{(Ae.nodeType===9?Ae.body:Ae.nodeName==="HTML"?Ae.ownerDocument.body:Ae).removeChild(c.stateNode)}catch(_){ae(c,o,_)}else try{Ae.removeChild(c.stateNode)}catch(_){ae(c,o,_)}break;case 18:Ae!==null&&(jn?(r=Ae,WE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Al(r)):WE(Ae,c.stateNode));break;case 4:d=Ae,y=jn,Ae=c.stateNode.containerInfo,jn=!0,Zs(r,o,c),Ae=d,jn=y;break;case 0:case 11:case 14:case 15:Fr(2,c,o),qe||Fr(4,c,o),Zs(r,o,c);break;case 1:qe||(bs(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&QA(c,o,d)),Zs(r,o,c);break;case 21:Zs(r,o,c);break;case 22:qe=(d=qe)||c.memoizedState!==null,Zs(r,o,c),qe=d;break;default:Zs(r,o,c)}}function rE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Al(r)}catch(c){ae(o,o.return,c)}}}function aE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Al(r)}catch(c){ae(o,o.return,c)}}function zM(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new eE),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new eE),o;default:throw Error(n(435,r.tag))}}function Fd(r,o){var c=zM(r);o.forEach(function(d){if(!c.has(d)){c.add(d);var y=QM.bind(null,r,d);d.then(y,y)}})}function Bn(r,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],_=r,T=o,I=T;t:for(;I!==null;){switch(I.tag){case 27:if(qr(I.type)){Ae=I.stateNode,jn=!1;break t}break;case 5:Ae=I.stateNode,jn=!1;break t;case 3:case 4:Ae=I.stateNode.containerInfo,jn=!0;break t}I=I.return}if(Ae===null)throw Error(n(160));sE(_,T,y),Ae=null,jn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)oE(o,r),o=o.sibling}var ji=null;function oE(r,o){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Bn(o,r),zn(r),d&4&&(Fr(3,r,r.return),eu(3,r),Fr(5,r,r.return));break;case 1:Bn(o,r),zn(r),d&512&&(qe||c===null||bs(c,c.return)),d&64&&Js&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=ji;if(Bn(o,r),zn(r),d&512&&(qe||c===null||bs(c,c.return)),d&4){var _=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){t:{d=r.type,c=r.memoizedProps,y=y.ownerDocument||y;e:switch(d){case"title":_=y.getElementsByTagName("title")[0],(!_||_[as]||_[Ue]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(d),y.head.insertBefore(_,y.querySelector("head > title"))),mn(_,d,c),_[Ue]=r,je(_),d=_;break t;case"link":var T=ow("link","href",y).get(d+(c.href||""));if(T){for(var I=0;I<T.length;I++)if(_=T[I],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(I,1);break e}}_=y.createElement(d),mn(_,d,c),y.head.appendChild(_);break;case"meta":if(T=ow("meta","content",y).get(d+(c.content||""))){for(I=0;I<T.length;I++)if(_=T[I],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(I,1);break e}}_=y.createElement(d),mn(_,d,c),y.head.appendChild(_);break;default:throw Error(n(468,d))}_[Ue]=r,je(_),d=_}r.stateNode=d}else lw(y,r.type,r.stateNode);else r.stateNode=aw(y,d,r.memoizedProps);else _!==d?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,d===null?lw(y,r.type,r.stateNode):aw(y,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Eg(r,r.memoizedProps,c.memoizedProps)}break;case 27:Bn(o,r),zn(r),d&512&&(qe||c===null||bs(c,c.return)),c!==null&&d&4&&Eg(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Bn(o,r),zn(r),d&512&&(qe||c===null||bs(c,c.return)),r.flags&32){y=r.stateNode;try{Un(y,"")}catch(pt){ae(r,r.return,pt)}}d&4&&r.stateNode!=null&&(y=r.memoizedProps,Eg(r,y,c!==null?c.memoizedProps:y)),d&1024&&(Sg=!0);break;case 6:if(Bn(o,r),zn(r),d&4){if(r.stateNode===null)throw Error(n(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(pt){ae(r,r.return,pt)}}break;case 3:if(tf=null,y=ji,ji=Jd(o.containerInfo),Bn(o,r),ji=y,zn(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Al(o.containerInfo)}catch(pt){ae(r,r.return,pt)}Sg&&(Sg=!1,lE(r));break;case 4:d=ji,ji=Jd(r.stateNode.containerInfo),Bn(o,r),zn(r),ji=d;break;case 12:Bn(o,r),zn(r);break;case 31:Bn(o,r),zn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Fd(r,d)));break;case 13:Bn(o,r),zn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(jd=Dn()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Fd(r,d)));break;case 22:y=r.memoizedState!==null;var j=c!==null&&c.memoizedState!==null,Q=Js,it=qe;if(Js=Q||y,qe=it||j,Bn(o,r),qe=it,Js=Q,zn(r),d&8192)t:for(o=r.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||j||Js||qe||so(r)),c=null,o=r;;){if(o.tag===5||o.tag===26){if(c===null){j=c=o;try{if(_=j.stateNode,y)T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{I=j.stateNode;var rt=j.memoizedProps.style,J=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;I.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(pt){ae(j,j.return,pt)}}}else if(o.tag===6){if(c===null){j=o;try{j.stateNode.nodeValue=y?"":j.memoizedProps}catch(pt){ae(j,j.return,pt)}}}else if(o.tag===18){if(c===null){j=o;try{var et=j.stateNode;y?QE(et,!0):QE(j.stateNode,!1)}catch(pt){ae(j,j.return,pt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break t;for(;o.sibling===null;){if(o.return===null||o.return===r)break t;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Fd(r,c))));break;case 19:Bn(o,r),zn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Fd(r,d)));break;case 30:break;case 21:break;default:Bn(o,r),zn(r)}}function zn(r){var o=r.flags;if(o&2){try{for(var c,d=r.return;d!==null;){if(ZA(d)){c=d;break}d=d.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var y=c.stateNode,_=wg(r);Vd(r,_,y);break;case 5:var T=c.stateNode;c.flags&32&&(Un(T,""),c.flags&=-33);var I=wg(r);Vd(r,I,T);break;case 3:case 4:var j=c.stateNode.containerInfo,Q=wg(r);Tg(r,Q,j);break;default:throw Error(n(161))}}catch(it){ae(r,r.return,it)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function lE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;lE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function tr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)nE(r,o.alternate,o),o=o.sibling}function so(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Fr(4,o,o.return),so(o);break;case 1:bs(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&QA(o,o.return,c),so(o);break;case 27:hu(o.stateNode);case 26:case 5:bs(o,o.return),so(o);break;case 22:o.memoizedState===null&&so(o);break;case 30:so(o);break;default:so(o)}r=r.sibling}}function er(r,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=r,_=o,T=_.flags;switch(_.tag){case 0:case 11:case 15:er(y,_,c),eu(4,_);break;case 1:if(er(y,_,c),d=_,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Q){ae(d,d.return,Q)}if(d=_,y=d.updateQueue,y!==null){var I=d.stateNode;try{var j=y.shared.hiddenCallbacks;if(j!==null)for(y.shared.hiddenCallbacks=null,y=0;y<j.length;y++)U0(j[y],I)}catch(Q){ae(d,d.return,Q)}}c&&T&64&&WA(_),nu(_,_.return);break;case 27:tE(_);case 26:case 5:er(y,_,c),c&&d===null&&T&4&&JA(_),nu(_,_.return);break;case 12:er(y,_,c);break;case 31:er(y,_,c),c&&T&4&&rE(y,_);break;case 13:er(y,_,c),c&&T&4&&aE(y,_);break;case 22:_.memoizedState===null&&er(y,_,c),nu(_,_.return);break;case 30:break;default:er(y,_,c)}o=o.sibling}}function xg(r,o){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&zc(c))}function Cg(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&zc(r))}function Bi(r,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)cE(r,o,c,d),o=o.sibling}function cE(r,o,c,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Bi(r,o,c,d),y&2048&&eu(9,o);break;case 1:Bi(r,o,c,d);break;case 3:Bi(r,o,c,d),y&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&zc(r)));break;case 12:if(y&2048){Bi(r,o,c,d),r=o.stateNode;try{var _=o.memoizedProps,T=_.id,I=_.onPostCommit;typeof I=="function"&&I(T,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){ae(o,o.return,j)}}else Bi(r,o,c,d);break;case 31:Bi(r,o,c,d);break;case 13:Bi(r,o,c,d);break;case 23:break;case 22:_=o.stateNode,T=o.alternate,o.memoizedState!==null?_._visibility&2?Bi(r,o,c,d):iu(r,o):_._visibility&2?Bi(r,o,c,d):(_._visibility|=2,ul(r,o,c,d,(o.subtreeFlags&10256)!==0||!1)),y&2048&&xg(T,o);break;case 24:Bi(r,o,c,d),y&2048&&Cg(o.alternate,o);break;default:Bi(r,o,c,d)}}function ul(r,o,c,d,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,T=o,I=c,j=d,Q=T.flags;switch(T.tag){case 0:case 11:case 15:ul(_,T,I,j,y),eu(8,T);break;case 23:break;case 22:var it=T.stateNode;T.memoizedState!==null?it._visibility&2?ul(_,T,I,j,y):iu(_,T):(it._visibility|=2,ul(_,T,I,j,y)),y&&Q&2048&&xg(T.alternate,T);break;case 24:ul(_,T,I,j,y),y&&Q&2048&&Cg(T.alternate,T);break;default:ul(_,T,I,j,y)}o=o.sibling}}function iu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=r,d=o,y=d.flags;switch(d.tag){case 22:iu(c,d),y&2048&&xg(d.alternate,d);break;case 24:iu(c,d),y&2048&&Cg(d.alternate,d);break;default:iu(c,d)}o=o.sibling}}var su=8192;function hl(r,o,c){if(r.subtreeFlags&su)for(r=r.child;r!==null;)uE(r,o,c),r=r.sibling}function uE(r,o,c){switch(r.tag){case 26:hl(r,o,c),r.flags&su&&r.memoizedState!==null&&RP(c,ji,r.memoizedState,r.memoizedProps);break;case 5:hl(r,o,c);break;case 3:case 4:var d=ji;ji=Jd(r.stateNode.containerInfo),hl(r,o,c),ji=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=su,su=16777216,hl(r,o,c),su=d):hl(r,o,c));break;default:hl(r,o,c)}}function hE(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function ru(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];ln=d,fE(d,r)}hE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)dE(r),r=r.sibling}function dE(r){switch(r.tag){case 0:case 11:case 15:ru(r),r.flags&2048&&Fr(9,r,r.return);break;case 3:ru(r);break;case 12:ru(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Ud(r)):ru(r);break;default:ru(r)}}function Ud(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];ln=d,fE(d,r)}hE(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Fr(8,o,o.return),Ud(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Ud(o));break;default:Ud(o)}r=r.sibling}}function fE(r,o){for(;ln!==null;){var c=ln;switch(c.tag){case 0:case 11:case 15:Fr(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:zc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,ln=d;else t:for(c=r;ln!==null;){d=ln;var y=d.sibling,_=d.return;if(iE(d),d===c){ln=null;break t}if(y!==null){y.return=_,ln=y;break t}ln=_}}}var HM={getCacheForType:function(r){var o=fn(ze),c=o.data.get(r);return c===void 0&&(c=r(),o.data.set(r,c)),c},cacheSignal:function(){return fn(ze).controller.signal}},GM=typeof WeakMap=="function"?WeakMap:Map,ne=0,de=null,Ht=null,qt=0,re=0,ni=null,Ur=!1,dl=!1,Rg=!1,nr=0,Re=0,jr=0,ro=0,Ig=0,ii=0,fl=0,au=null,Hn=null,Dg=!1,jd=0,pE=0,Bd=1/0,zd=null,Br=null,Ze=0,zr=null,pl=null,ir=0,Mg=0,Pg=null,mE=null,ou=0,Ng=null;function si(){return(ne&2)!==0&&qt!==0?qt&-qt:$.T!==null?Ug():Hh()}function gE(){if(ii===0)if((qt&536870912)===0||Wt){var r=Pa;Pa<<=1,(Pa&3932160)===0&&(Pa=262144),ii=r}else ii=536870912;return r=ti.current,r!==null&&(r.flags|=32),ii}function Gn(r,o,c){(r===de&&(re===2||re===9)||r.cancelPendingCommit!==null)&&(ml(r,0),Hr(r,qt,ii,!1)),Na(r,c),((ne&2)===0||r!==de)&&(r===de&&((ne&2)===0&&(ro|=c),Re===4&&Hr(r,qt,ii,!1)),As(r))}function yE(r,o,c){if((ne&6)!==0)throw Error(n(327));var d=!c&&(o&127)===0&&(o&r.expiredLanes)===0||Mi(r,o),y=d?XM(r,o):Og(r,o,!0),_=d;do{if(y===0){dl&&!d&&Hr(r,o,0,!1);break}else{if(c=r.current.alternate,_&&!qM(c)){y=Og(r,o,!1),_=!1;continue}if(y===2){if(_=o,r.errorRecoveryDisabledLanes&_)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;t:{var I=r;y=au;var j=I.current.memoizedState.isDehydrated;if(j&&(ml(I,T).flags|=256),T=Og(I,T,!1),T!==2){if(Rg&&!j){I.errorRecoveryDisabledLanes|=_,ro|=_,y=4;break t}_=Hn,Hn=y,_!==null&&(Hn===null?Hn=_:Hn.push.apply(Hn,_))}y=T}if(_=!1,y!==2)continue}}if(y===1){ml(r,0),Hr(r,o,0,!0);break}t:{switch(d=r,_=y,_){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Hr(d,o,ii,!Ur);break t;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(y=jd+300-Dn(),10<y)){if(Hr(d,o,ii,!Ur),is(d,0,!0)!==0)break t;ir=o,d.timeoutHandle=YE(vE.bind(null,d,c,Hn,zd,Dg,o,ii,ro,fl,Ur,_,"Throttled",-0,0),y);break t}vE(d,c,Hn,zd,Dg,o,ii,ro,fl,Ur,_,null,-0,0)}}break}while(!0);As(r)}function vE(r,o,c,d,y,_,T,I,j,Q,it,rt,J,et){if(r.timeoutHandle=-1,rt=o.subtreeFlags,rt&8192||(rt&16785408)===16785408){rt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ki},uE(o,_,rt);var pt=(_&62914560)===_?jd-Dn():(_&4194048)===_?pE-Dn():0;if(pt=IP(rt,pt),pt!==null){ir=_,r.cancelPendingCommit=pt(xE.bind(null,r,o,_,c,d,y,T,I,j,it,rt,null,J,et)),Hr(r,_,T,!Q);return}}xE(r,o,_,c,d,y,T,I,j)}function qM(r){for(var o=r;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],_=y.getSnapshot;y=y.value;try{if(!Jn(_(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Hr(r,o,c,d){o&=~Ig,o&=~ro,r.suspendedLanes|=o,r.pingedLanes&=~o,d&&(r.warmLanes|=o),d=r.expirationTimes;for(var y=o;0<y;){var _=31-De(y),T=1<<_;d[_]=-1,y&=~T}c!==0&&ka(r,c,o)}function Hd(){return(ne&6)===0?(lu(0),!1):!0}function kg(){if(Ht!==null){if(re===0)var r=Ht.return;else r=Ht,$s=Wa=null,Wm(r),rl=null,Gc=0,r=Ht;for(;r!==null;)KA(r.alternate,r),r=r.return;Ht=null}}function ml(r,o){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,hP(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),ir=0,kg(),de=r,Ht=c=Gs(r.current,null),qt=o,re=0,ni=null,Ur=!1,dl=Mi(r,o),Rg=!1,fl=ii=Ig=ro=jr=Re=0,Hn=au=null,Dg=!1,(o&8)!==0&&(o|=o&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=o;0<d;){var y=31-De(d),_=1<<y;o|=r[y],d&=~_}return nr=o,ud(),c}function _E(r,o){Vt=null,$.H=Jc,o===sl||o===vd?(o=O0(),re=3):o===Fm?(o=O0(),re=4):re=o===dg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ni=o,Ht===null&&(Re=1,Pd(r,gi(o,r.current)))}function bE(){var r=ti.current;return r===null?!0:(qt&4194048)===qt?bi===null:(qt&62914560)===qt||(qt&536870912)!==0?r===bi:!1}function AE(){var r=$.H;return $.H=Jc,r===null?Jc:r}function EE(){var r=$.A;return $.A=HM,r}function Gd(){Re=4,Ur||(qt&4194048)!==qt&&ti.current!==null||(dl=!0),(jr&134217727)===0&&(ro&134217727)===0||de===null||Hr(de,qt,ii,!1)}function Og(r,o,c){var d=ne;ne|=2;var y=AE(),_=EE();(de!==r||qt!==o)&&(zd=null,ml(r,o)),o=!1;var T=Re;t:do try{if(re!==0&&Ht!==null){var I=Ht,j=ni;switch(re){case 8:kg(),T=6;break t;case 3:case 2:case 9:case 6:ti.current===null&&(o=!0);var Q=re;if(re=0,ni=null,gl(r,I,j,Q),c&&dl){T=0;break t}break;default:Q=re,re=0,ni=null,gl(r,I,j,Q)}}$M(),T=Re;break}catch(it){_E(r,it)}while(!0);return o&&r.shellSuspendCounter++,$s=Wa=null,ne=d,$.H=y,$.A=_,Ht===null&&(de=null,qt=0,ud()),T}function $M(){for(;Ht!==null;)wE(Ht)}function XM(r,o){var c=ne;ne|=2;var d=AE(),y=EE();de!==r||qt!==o?(zd=null,Bd=Dn()+500,ml(r,o)):dl=Mi(r,o);t:do try{if(re!==0&&Ht!==null){o=Ht;var _=ni;e:switch(re){case 1:re=0,ni=null,gl(r,o,_,1);break;case 2:case 9:if(N0(_)){re=0,ni=null,TE(o);break}o=function(){re!==2&&re!==9||de!==r||(re=7),As(r)},_.then(o,o);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:N0(_)?(re=0,ni=null,TE(o)):(re=0,ni=null,gl(r,o,_,7));break;case 5:var T=null;switch(Ht.tag){case 26:T=Ht.memoizedState;case 5:case 27:var I=Ht;if(T?cw(T):I.stateNode.complete){re=0,ni=null;var j=I.sibling;if(j!==null)Ht=j;else{var Q=I.return;Q!==null?(Ht=Q,qd(Q)):Ht=null}break e}}re=0,ni=null,gl(r,o,_,5);break;case 6:re=0,ni=null,gl(r,o,_,6);break;case 8:kg(),Re=6;break t;default:throw Error(n(462))}}YM();break}catch(it){_E(r,it)}while(!0);return $s=Wa=null,$.H=d,$.A=y,ne=c,Ht!==null?0:(de=null,qt=0,ud(),Re)}function YM(){for(;Ht!==null&&!hm();)wE(Ht)}function wE(r){var o=XA(r.alternate,r,nr);r.memoizedProps=r.pendingProps,o===null?qd(r):Ht=o}function TE(r){var o=r,c=o.alternate;switch(o.tag){case 15:case 0:o=BA(c,o,o.pendingProps,o.type,void 0,qt);break;case 11:o=BA(c,o,o.pendingProps,o.type.render,o.ref,qt);break;case 5:Wm(o);default:KA(c,o),o=Ht=E0(o,nr),o=XA(c,o,nr)}r.memoizedProps=r.pendingProps,o===null?qd(r):Ht=o}function gl(r,o,c,d){$s=Wa=null,Wm(o),rl=null,Gc=0;var y=o.return;try{if(LM(r,y,o,c,qt)){Re=1,Pd(r,gi(c,r.current)),Ht=null;return}}catch(_){if(y!==null)throw Ht=y,_;Re=1,Pd(r,gi(c,r.current)),Ht=null;return}o.flags&32768?(Wt||d===1?r=!0:dl||(qt&536870912)!==0?r=!1:(Ur=r=!0,(d===2||d===9||d===3||d===6)&&(d=ti.current,d!==null&&d.tag===13&&(d.flags|=16384))),SE(o,r)):qd(o)}function qd(r){var o=r;do{if((o.flags&32768)!==0){SE(o,Ur);return}r=o.return;var c=UM(o.alternate,o,nr);if(c!==null){Ht=c;return}if(o=o.sibling,o!==null){Ht=o;return}Ht=o=r}while(o!==null);Re===0&&(Re=5)}function SE(r,o){do{var c=jM(r.alternate,r);if(c!==null){c.flags&=32767,Ht=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(r=r.sibling,r!==null)){Ht=r;return}Ht=r=c}while(r!==null);Re=6,Ht=null}function xE(r,o,c,d,y,_,T,I,j){r.cancelPendingCommit=null;do $d();while(Ze!==0);if((ne&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(_=o.lanes|o.childLanes,_|=wm,pm(r,c,_,T,I,j),r===de&&(Ht=de=null,qt=0),pl=o,zr=r,ir=c,Mg=_,Pg=y,mE=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,JM(_r,function(){return ME(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=$.T,$.T=null,y=Z.p,Z.p=2,T=ne,ne|=4;try{BM(r,o,c)}finally{ne=T,Z.p=y,$.T=d}}Ze=1,CE(),RE(),IE()}}function CE(){if(Ze===1){Ze=0;var r=zr,o=pl,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var d=Z.p;Z.p=2;var y=ne;ne|=4;try{oE(o,r);var _=Xg,T=f0(r.containerInfo),I=_.focusedElem,j=_.selectionRange;if(T!==I&&I&&I.ownerDocument&&d0(I.ownerDocument.documentElement,I)){if(j!==null&&vm(I)){var Q=j.start,it=j.end;if(it===void 0&&(it=Q),"selectionStart"in I)I.selectionStart=Q,I.selectionEnd=Math.min(it,I.value.length);else{var rt=I.ownerDocument||document,J=rt&&rt.defaultView||window;if(J.getSelection){var et=J.getSelection(),pt=I.textContent.length,xt=Math.min(j.start,pt),ue=j.end===void 0?xt:Math.min(j.end,pt);!et.extend&&xt>ue&&(T=ue,ue=xt,xt=T);var X=h0(I,xt),q=h0(I,ue);if(X&&q&&(et.rangeCount!==1||et.anchorNode!==X.node||et.anchorOffset!==X.offset||et.focusNode!==q.node||et.focusOffset!==q.offset)){var W=rt.createRange();W.setStart(X.node,X.offset),et.removeAllRanges(),xt>ue?(et.addRange(W),et.extend(q.node,q.offset)):(W.setEnd(q.node,q.offset),et.addRange(W))}}}}for(rt=[],et=I;et=et.parentNode;)et.nodeType===1&&rt.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<rt.length;I++){var st=rt[I];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}rf=!!$g,Xg=$g=null}finally{ne=y,Z.p=d,$.T=c}}r.current=o,Ze=2}}function RE(){if(Ze===2){Ze=0;var r=zr,o=pl,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var d=Z.p;Z.p=2;var y=ne;ne|=4;try{nE(r,o.alternate,o)}finally{ne=y,Z.p=d,$.T=c}}Ze=3}}function IE(){if(Ze===4||Ze===3){Ze=0,Lh();var r=zr,o=pl,c=ir,d=mE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ze=5:(Ze=0,pl=zr=null,DE(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(Br=null),js(c),o=o.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Di,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=$.T,y=Z.p,Z.p=2,$.T=null;try{for(var _=r.onRecoverableError,T=0;T<d.length;T++){var I=d[T];_(I.value,{componentStack:I.stack})}}finally{$.T=o,Z.p=y}}(ir&3)!==0&&$d(),As(r),y=r.pendingLanes,(c&261930)!==0&&(y&42)!==0?r===Ng?ou++:(ou=0,Ng=r):ou=0,lu(0)}}function DE(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,zc(o)))}function $d(){return CE(),RE(),IE(),ME()}function ME(){if(Ze!==5)return!1;var r=zr,o=Mg;Mg=0;var c=js(ir),d=$.T,y=Z.p;try{Z.p=32>c?32:c,$.T=null,c=Pg,Pg=null;var _=zr,T=ir;if(Ze=0,pl=zr=null,ir=0,(ne&6)!==0)throw Error(n(331));var I=ne;if(ne|=4,dE(_.current),cE(_,_.current,T,c),ne=I,lu(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Di,_)}catch{}return!0}finally{Z.p=y,$.T=d,DE(r,o)}}function PE(r,o,c){o=gi(c,o),o=hg(r.stateNode,o,2),r=Or(r,o,2),r!==null&&(Na(r,2),As(r))}function ae(r,o,c){if(r.tag===3)PE(r,r,c);else for(;o!==null;){if(o.tag===3){PE(o,r,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Br===null||!Br.has(d))){r=gi(c,r),c=NA(2),d=Or(o,c,2),d!==null&&(kA(c,d,o,r),Na(d,2),As(d));break}}o=o.return}}function Lg(r,o,c){var d=r.pingCache;if(d===null){d=r.pingCache=new GM;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(c)||(Rg=!0,y.add(c),r=KM.bind(null,r,o,c),o.then(r,r))}function KM(r,o,c){var d=r.pingCache;d!==null&&d.delete(o),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,de===r&&(qt&c)===c&&(Re===4||Re===3&&(qt&62914560)===qt&&300>Dn()-jd?(ne&2)===0&&ml(r,0):Ig|=c,fl===qt&&(fl=0)),As(r)}function NE(r,o){o===0&&(o=zh()),r=Xa(r,o),r!==null&&(Na(r,o),As(r))}function WM(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),NE(r,c)}function QM(r,o){var c=0;switch(r.tag){case 31:case 13:var d=r.stateNode,y=r.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(o),NE(r,c)}function JM(r,o){return Je(r,o)}var Xd=null,yl=null,Vg=!1,Yd=!1,Fg=!1,Gr=0;function As(r){r!==yl&&r.next===null&&(yl===null?Xd=yl=r:yl=yl.next=r),Yd=!0,Vg||(Vg=!0,tP())}function lu(r,o){if(!Fg&&Yd){Fg=!0;do for(var c=!1,d=Xd;d!==null;){if(r!==0){var y=d.pendingLanes;if(y===0)var _=0;else{var T=d.suspendedLanes,I=d.pingedLanes;_=(1<<31-De(42|r)+1)-1,_&=y&~(T&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,VE(d,_))}else _=qt,_=is(d,d===de?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||Mi(d,_)||(c=!0,VE(d,_));d=d.next}while(c);Fg=!1}}function ZM(){kE()}function kE(){Yd=Vg=!1;var r=0;Gr!==0&&uP()&&(r=Gr);for(var o=Dn(),c=null,d=Xd;d!==null;){var y=d.next,_=OE(d,o);_===0?(d.next=null,c===null?Xd=y:c.next=y,y===null&&(yl=c)):(c=d,(r!==0||(_&3)!==0)&&(Yd=!0)),d=y}Ze!==0&&Ze!==5||lu(r),Gr!==0&&(Gr=0)}function OE(r,o){for(var c=r.suspendedLanes,d=r.pingedLanes,y=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var T=31-De(_),I=1<<T,j=y[T];j===-1?((I&c)===0||(I&d)!==0)&&(y[T]=fm(I,o)):j<=o&&(r.expiredLanes|=I),_&=~I}if(o=de,c=qt,c=is(r,r===o?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,c===0||r===o&&(re===2||re===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&vr(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Mi(r,c)){if(o=c&-c,o===r.callbackPriority)return o;switch(d!==null&&vr(d),js(c)){case 2:case 8:c=vc;break;case 32:c=_r;break;case 268435456:c=Vh;break;default:c=_r}return d=LE.bind(null,r),c=Je(c,d),r.callbackPriority=o,r.callbackNode=c,o}return d!==null&&d!==null&&vr(d),r.callbackPriority=2,r.callbackNode=null,2}function LE(r,o){if(Ze!==0&&Ze!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if($d()&&r.callbackNode!==c)return null;var d=qt;return d=is(r,r===de?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(yE(r,d,o),OE(r,Dn()),r.callbackNode!=null&&r.callbackNode===c?LE.bind(null,r):null)}function VE(r,o){if($d())return null;yE(r,o,!0)}function tP(){dP(function(){(ne&6)!==0?Je(yc,ZM):kE()})}function Ug(){if(Gr===0){var r=nl;r===0&&(r=es,es<<=1,(es&261888)===0&&(es=256)),Gr=r}return Gr}function FE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Bo(""+r)}function UE(r,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,r.id&&c.setAttribute("form",r.id),o.parentNode.insertBefore(c,o),r=new FormData(r),c.parentNode.removeChild(c),r}function eP(r,o,c,d,y){if(o==="submit"&&c&&c.stateNode===y){var _=FE((y[an]||null).action),T=d.submitter;T&&(o=(o=T[an]||null)?FE(o.formAction):T.getAttribute("formAction"),o!==null&&(_=o,T=null));var I=new ps("action","action",null,d,y);r.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Gr!==0){var j=T?UE(y,T):new FormData(y);rg(c,{pending:!0,data:j,method:y.method,action:_},null,j)}}else typeof _=="function"&&(I.preventDefault(),j=T?UE(y,T):new FormData(y),rg(c,{pending:!0,data:j,method:y.method,action:_},_,j))},currentTarget:y}]})}}for(var jg=0;jg<Em.length;jg++){var Bg=Em[jg],nP=Bg.toLowerCase(),iP=Bg[0].toUpperCase()+Bg.slice(1);Ui(nP,"on"+iP)}Ui(g0,"onAnimationEnd"),Ui(y0,"onAnimationIteration"),Ui(v0,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(_M,"onTransitionRun"),Ui(bM,"onTransitionStart"),Ui(AM,"onTransitionCancel"),Ui(_0,"onTransitionEnd"),us("onMouseEnter",["mouseout","mouseover"]),us("onMouseLeave",["mouseout","mouseover"]),us("onPointerEnter",["pointerout","pointerover"]),us("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function jE(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],y=d.event;d=d.listeners;t:{var _=void 0;if(o)for(var T=d.length-1;0<=T;T--){var I=d[T],j=I.instance,Q=I.currentTarget;if(I=I.listener,j!==_&&y.isPropagationStopped())break t;_=I,y.currentTarget=Q;try{_(y)}catch(it){cd(it)}y.currentTarget=null,_=j}else for(T=0;T<d.length;T++){if(I=d[T],j=I.instance,Q=I.currentTarget,I=I.listener,j!==_&&y.isPropagationStopped())break t;_=I,y.currentTarget=Q;try{_(y)}catch(it){cd(it)}y.currentTarget=null,_=j}}}}function Gt(r,o){var c=o[Lo];c===void 0&&(c=o[Lo]=new Set);var d=r+"__bubble";c.has(d)||(BE(o,r,2,!1),c.add(d))}function zg(r,o,c){var d=0;o&&(d|=4),BE(c,r,d,o)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Hg(r){if(!r[Kd]){r[Kd]=!0,Ac.forEach(function(c){c!=="selectionchange"&&(sP.has(c)||zg(c,!1,r),zg(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Kd]||(o[Kd]=!0,zg("selectionchange",!1,o))}}function BE(r,o,c,d){switch(gw(o)){case 2:var y=PP;break;case 8:y=NP;break;default:y=sy}c=y.bind(null,o,c,r),y=void 0,!Ua||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?r.addEventListener(o,c,{capture:!0,passive:y}):r.addEventListener(o,c,!0):y!==void 0?r.addEventListener(o,c,{passive:y}):r.addEventListener(o,c,!1)}function Gg(r,o,c,d,y){var _=d;if((o&1)===0&&(o&2)===0&&d!==null)t:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var I=d.stateNode.containerInfo;if(I===y)break;if(T===4)for(T=d.return;T!==null;){var j=T.tag;if((j===3||j===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;I!==null;){if(T=os(I),T===null)return;if(j=T.tag,j===5||j===6||j===26||j===27){d=_=T;continue t}I=I.parentNode}}d=d.return}Sr(function(){var Q=_,it=di(c),rt=[];t:{var J=b0.get(r);if(J!==void 0){var et=ps,pt=r;switch(r){case"keypress":if(Ba(c)===0)break t;case"keydown":case"keyup":et=ad;break;case"focusin":pt="focus",et=Ha;break;case"focusout":pt="blur",et=Ha;break;case"beforeblur":case"afterblur":et=Ha;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=Qh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=A;break;case g0:case y0:case v0:et=Zh;break;case _0:et=P;break;case"scroll":case"scrollend":et=Nc;break;case"wheel":et=tt;break;case"copy":case"cut":case"paste":et=td;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Hs;break;case"toggle":case"beforetoggle":et=Lt}var xt=(o&4)!==0,ue=!xt&&(r==="scroll"||r==="scrollend"),X=xt?J!==null?J+"Capture":null:J;xt=[];for(var q=Q,W;q!==null;){var st=q;if(W=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||W===null||X===null||(st=Oi(q,X),st!=null&&xt.push(uu(q,st,W))),ue)break;q=q.return}0<xt.length&&(J=new et(J,pt,null,c,it),rt.push({event:J,listeners:xt}))}}if((o&7)===0){t:{if(J=r==="mouseover"||r==="pointerover",et=r==="mouseout"||r==="pointerout",J&&c!==Dc&&(pt=c.relatedTarget||c.fromElement)&&(os(pt)||pt[rs]))break t;if((et||J)&&(J=it.window===it?it:(J=it.ownerDocument)?J.defaultView||J.parentWindow:window,et?(pt=c.relatedTarget||c.toElement,et=Q,pt=pt?os(pt):null,pt!==null&&(ue=a(pt),xt=pt.tag,pt!==ue||xt!==5&&xt!==27&&xt!==6)&&(pt=null)):(et=null,pt=Q),et!==pt)){if(xt=kc,st="onMouseLeave",X="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(xt=Hs,st="onPointerLeave",X="onPointerEnter",q="pointer"),ue=et==null?J:Wn(et),W=pt==null?J:Wn(pt),J=new xt(st,q+"leave",et,c,it),J.target=ue,J.relatedTarget=W,st=null,os(it)===Q&&(xt=new xt(X,q+"enter",pt,c,it),xt.target=W,xt.relatedTarget=ue,st=xt),ue=st,et&&pt)e:{for(xt=rP,X=et,q=pt,W=0,st=X;st;st=xt(st))W++;st=0;for(var Et=q;Et;Et=xt(Et))st++;for(;0<W-st;)X=xt(X),W--;for(;0<st-W;)q=xt(q),st--;for(;W--;){if(X===q||q!==null&&X===q.alternate){xt=X;break e}X=xt(X),q=xt(q)}xt=null}else xt=null;et!==null&&zE(rt,J,et,xt,!1),pt!==null&&ue!==null&&zE(rt,ue,pt,xt,!0)}}t:{if(J=Q?Wn(Q):window,et=J.nodeName&&J.nodeName.toLowerCase(),et==="select"||et==="input"&&J.type==="file")var Zt=r0;else if(i0(J))if(a0)Zt=gM;else{Zt=pM;var yt=fM}else et=J.nodeName,!et||et.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Q&&jo(Q.elementType)&&(Zt=r0):Zt=mM;if(Zt&&(Zt=Zt(r,Q))){s0(rt,Zt,c,it);break t}yt&&yt(r,J,Q),r==="focusout"&&Q&&J.type==="number"&&Q.memoizedProps.value!=null&&Cc(J,"number",J.value)}switch(yt=Q?Wn(Q):window,r){case"focusin":(i0(yt)||yt.contentEditable==="true")&&(Yo=yt,_m=Q,Uc=null);break;case"focusout":Uc=_m=Yo=null;break;case"mousedown":bm=!0;break;case"contextmenu":case"mouseup":case"dragend":bm=!1,p0(rt,c,it);break;case"selectionchange":if(vM)break;case"keydown":case"keyup":p0(rt,c,it)}var Ft;if(ee)t:{switch(r){case"compositionstart":var $t="onCompositionStart";break t;case"compositionend":$t="onCompositionEnd";break t;case"compositionupdate":$t="onCompositionUpdate";break t}$t=void 0}else Xo?Ga(r,c)&&($t="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&($t="onCompositionStart");$t&&(ys&&c.locale!=="ko"&&(Xo||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&Xo&&(Ft=Pc()):(fs=it,Mc="value"in fs?fs.value:fs.textContent,Xo=!0)),yt=Wd(Q,$t),0<yt.length&&($t=new gs($t,r,null,c,it),rt.push({event:$t,listeners:yt}),Ft?$t.data=Ft:(Ft=$o(c),Ft!==null&&($t.data=Ft)))),(Ft=pi?cM(r,c):uM(r,c))&&($t=Wd(Q,"onBeforeInput"),0<$t.length&&(yt=new gs("onBeforeInput","beforeinput",null,c,it),rt.push({event:yt,listeners:$t}),yt.data=Ft)),eP(rt,r,Q,c,it)}jE(rt,o)})}function uu(r,o,c){return{instance:r,listener:o,currentTarget:c}}function Wd(r,o){for(var c=o+"Capture",d=[];r!==null;){var y=r,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Oi(r,c),y!=null&&d.unshift(uu(r,y,_)),y=Oi(r,o),y!=null&&d.push(uu(r,y,_))),r.tag===3)return d;r=r.return}return[]}function rP(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function zE(r,o,c,d,y){for(var _=o._reactName,T=[];c!==null&&c!==d;){var I=c,j=I.alternate,Q=I.stateNode;if(I=I.tag,j!==null&&j===d)break;I!==5&&I!==26&&I!==27||Q===null||(j=Q,y?(Q=Oi(c,_),Q!=null&&T.unshift(uu(c,Q,j))):y||(Q=Oi(c,_),Q!=null&&T.push(uu(c,Q,j)))),c=c.return}T.length!==0&&r.push({event:o,listeners:T})}var aP=/\r\n?/g,oP=/\u0000|\uFFFD/g;function HE(r){return(typeof r=="string"?r:""+r).replace(aP,`
`).replace(oP,"")}function GE(r,o){return o=HE(o),HE(r)===o}function ce(r,o,c,d,y,_){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Un(r,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Un(r,""+d);break;case"className":Qn(r,"class",d);break;case"tabIndex":Qn(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Qn(r,c,d);break;case"style":Ic(r,d,_);break;case"data":if(o!=="object"){Qn(r,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=Bo(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(o!=="input"&&ce(r,o,"name",y.name,y,null),ce(r,o,"formEncType",y.formEncType,y,null),ce(r,o,"formMethod",y.formMethod,y,null),ce(r,o,"formTarget",y.formTarget,y,null)):(ce(r,o,"encType",y.encType,y,null),ce(r,o,"method",y.method,y,null),ce(r,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=Bo(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=ki);break;case"onScroll":d!=null&&Gt("scroll",r);break;case"onScrollEnd":d!=null&&Gt("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(n(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=Bo(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":Gt("beforetoggle",r),Gt("toggle",r),Fo(r,"popover",d);break;case"xlinkActuate":Be(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Be(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Be(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Be(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Be(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Be(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Be(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Be(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Be(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Fo(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Wh.get(c)||c,Fo(r,c,d))}}function qg(r,o,c,d,y,_){switch(c){case"style":Ic(r,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(n(60));r.innerHTML=c}}break;case"children":typeof d=="string"?Un(r,d):(typeof d=="number"||typeof d=="bigint")&&Un(r,""+d);break;case"onScroll":d!=null&&Gt("scroll",r);break;case"onScrollEnd":d!=null&&Gt("scrollend",r);break;case"onClick":d!=null&&(r.onclick=ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ec.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),_=r[an]||null,_=_!=null?_[c]:null,typeof _=="function"&&r.removeEventListener(o,_,y),typeof d=="function")){typeof _!="function"&&_!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(o,d,y);break t}c in r?r[c]=d:d===!0?r.setAttribute(c,""):Fo(r,c,d)}}}function mn(r,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",r),Gt("load",r);var d=!1,y=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var T=c[_];if(T!=null)switch(_){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ce(r,o,_,T,c,null)}}y&&ce(r,o,"srcSet",c.srcSet,c,null),d&&ce(r,o,"src",c.src,c,null);return;case"input":Gt("invalid",r);var I=_=T=y=null,j=null,Q=null;for(d in c)if(c.hasOwnProperty(d)){var it=c[d];if(it!=null)switch(d){case"name":y=it;break;case"type":T=it;break;case"checked":j=it;break;case"defaultChecked":Q=it;break;case"value":_=it;break;case"defaultValue":I=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,o));break;default:ce(r,o,d,it,c,null)}}Xh(r,_,I,j,Q,T,y,!1);return;case"select":Gt("invalid",r),d=T=_=null;for(y in c)if(c.hasOwnProperty(y)&&(I=c[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":T=I;break;case"multiple":d=I;default:ce(r,o,y,I,c,null)}o=_,c=T,r.multiple=!!d,o!=null?Ar(r,!!d,o,!1):c!=null&&Ar(r,!!d,c,!0);return;case"textarea":Gt("invalid",r),_=y=d=null;for(T in c)if(c.hasOwnProperty(T)&&(I=c[T],I!=null))switch(T){case"value":d=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(n(91));break;default:ce(r,o,T,I,c,null)}Er(r,d,y,_);return;case"option":for(j in c)c.hasOwnProperty(j)&&(d=c[j],d!=null)&&(j==="selected"?r.selected=d&&typeof d!="function"&&typeof d!="symbol":ce(r,o,j,d,c,null));return;case"dialog":Gt("beforetoggle",r),Gt("toggle",r),Gt("cancel",r),Gt("close",r);break;case"iframe":case"object":Gt("load",r);break;case"video":case"audio":for(d=0;d<cu.length;d++)Gt(cu[d],r);break;case"image":Gt("error",r),Gt("load",r);break;case"details":Gt("toggle",r);break;case"embed":case"source":case"link":Gt("error",r),Gt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(d=c[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ce(r,o,Q,d,c,null)}return;default:if(jo(o)){for(it in c)c.hasOwnProperty(it)&&(d=c[it],d!==void 0&&qg(r,o,it,d,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(d=c[I],d!=null&&ce(r,o,I,d,c,null))}function lP(r,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,T=null,I=null,j=null,Q=null,it=null;for(et in c){var rt=c[et];if(c.hasOwnProperty(et)&&rt!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":j=rt;default:d.hasOwnProperty(et)||ce(r,o,et,null,d,rt)}}for(var J in d){var et=d[J];if(rt=c[J],d.hasOwnProperty(J)&&(et!=null||rt!=null))switch(J){case"type":_=et;break;case"name":y=et;break;case"checked":Q=et;break;case"defaultChecked":it=et;break;case"value":T=et;break;case"defaultValue":I=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,o));break;default:et!==rt&&ce(r,o,J,et,d,rt)}}Uo(r,T,I,j,Q,it,_,y);return;case"select":et=T=I=J=null;for(_ in c)if(j=c[_],c.hasOwnProperty(_)&&j!=null)switch(_){case"value":break;case"multiple":et=j;default:d.hasOwnProperty(_)||ce(r,o,_,null,d,j)}for(y in d)if(_=d[y],j=c[y],d.hasOwnProperty(y)&&(_!=null||j!=null))switch(y){case"value":J=_;break;case"defaultValue":I=_;break;case"multiple":T=_;default:_!==j&&ce(r,o,y,_,d,j)}o=I,c=T,d=et,J!=null?Ar(r,!!c,J,!1):!!d!=!!c&&(o!=null?Ar(r,!!c,o,!0):Ar(r,!!c,c?[]:"",!1));return;case"textarea":et=J=null;for(I in c)if(y=c[I],c.hasOwnProperty(I)&&y!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ce(r,o,I,null,d,y)}for(T in d)if(y=d[T],_=c[T],d.hasOwnProperty(T)&&(y!=null||_!=null))switch(T){case"value":J=y;break;case"defaultValue":et=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==_&&ce(r,o,T,y,d,_)}Yh(r,J,et);return;case"option":for(var pt in c)J=c[pt],c.hasOwnProperty(pt)&&J!=null&&!d.hasOwnProperty(pt)&&(pt==="selected"?r.selected=!1:ce(r,o,pt,null,d,J));for(j in d)J=d[j],et=c[j],d.hasOwnProperty(j)&&J!==et&&(J!=null||et!=null)&&(j==="selected"?r.selected=J&&typeof J!="function"&&typeof J!="symbol":ce(r,o,j,J,d,et));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in c)J=c[xt],c.hasOwnProperty(xt)&&J!=null&&!d.hasOwnProperty(xt)&&ce(r,o,xt,null,d,J);for(Q in d)if(J=d[Q],et=c[Q],d.hasOwnProperty(Q)&&J!==et&&(J!=null||et!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,o));break;default:ce(r,o,Q,J,d,et)}return;default:if(jo(o)){for(var ue in c)J=c[ue],c.hasOwnProperty(ue)&&J!==void 0&&!d.hasOwnProperty(ue)&&qg(r,o,ue,void 0,d,J);for(it in d)J=d[it],et=c[it],!d.hasOwnProperty(it)||J===et||J===void 0&&et===void 0||qg(r,o,it,J,d,et);return}}for(var X in c)J=c[X],c.hasOwnProperty(X)&&J!=null&&!d.hasOwnProperty(X)&&ce(r,o,X,null,d,J);for(rt in d)J=d[rt],et=c[rt],!d.hasOwnProperty(rt)||J===et||J==null&&et==null||ce(r,o,rt,J,d,et)}function qE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cP(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],_=y.transferSize,T=y.initiatorType,I=y.duration;if(_&&I&&qE(T)){for(T=0,I=y.responseEnd,d+=1;d<c.length;d++){var j=c[d],Q=j.startTime;if(Q>I)break;var it=j.transferSize,rt=j.initiatorType;it&&qE(rt)&&(j=j.responseEnd,T+=it*(j<I?1:(I-Q)/(j-Q)))}if(--d,o+=8*(_+T)/(y.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var $g=null,Xg=null;function Qd(r){return r.nodeType===9?r:r.ownerDocument}function $E(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XE(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Yg(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kg=null;function uP(){var r=window.event;return r&&r.type==="popstate"?r===Kg?!1:(Kg=r,!0):(Kg=null,!1)}var YE=typeof setTimeout=="function"?setTimeout:void 0,hP=typeof clearTimeout=="function"?clearTimeout:void 0,KE=typeof Promise=="function"?Promise:void 0,dP=typeof queueMicrotask=="function"?queueMicrotask:typeof KE<"u"?function(r){return KE.resolve(null).then(r).catch(fP)}:YE;function fP(r){setTimeout(function(){throw r})}function qr(r){return r==="head"}function WE(r,o){var c=o,d=0;do{var y=c.nextSibling;if(r.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){r.removeChild(y),Al(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")hu(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,hu(c);for(var _=c.firstChild;_;){var T=_.nextSibling,I=_.nodeName;_[as]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=T}}else c==="body"&&hu(r.ownerDocument.body);c=y}while(c);Al(o)}function QE(r,o){var c=r;r=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=d}while(c)}function Wg(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Wg(c),Vo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function pP(r,o,c,d){for(;r.nodeType===1;){var y=c;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[as])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Ai(r.nextSibling),r===null)break}return null}function mP(r,o,c){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Ai(r.nextSibling),r===null))return null;return r}function JE(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ai(r.nextSibling),r===null))return null;return r}function Qg(r){return r.data==="$?"||r.data==="$~"}function Jg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function gP(r,o){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Ai(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Zg=null;function ZE(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(o===0)return Ai(r.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}r=r.nextSibling}return null}function tw(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return r;o--}else c!=="/$"&&c!=="/&"||o++}r=r.previousSibling}return null}function ew(r,o,c){switch(o=Qd(c),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function hu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Vo(r)}var Ei=new Map,nw=new Set;function Jd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var sr=Z.d;Z.d={f:yP,r:vP,D:_P,C:bP,L:AP,m:EP,X:TP,S:wP,M:SP};function yP(){var r=sr.f(),o=Hd();return r||o}function vP(r){var o=hi(r);o!==null&&o.tag===5&&o.type==="form"?_A(o):sr.r(r)}var vl=typeof document>"u"?null:document;function iw(r,o,c){var d=vl;if(d&&typeof o=="string"&&o){var y=Fn(o);y='link[rel="'+r+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),nw.has(y)||(nw.add(y),r={rel:r,crossOrigin:c,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),mn(o,"link",r),je(o),d.head.appendChild(o)))}}function _P(r){sr.D(r),iw("dns-prefetch",r,null)}function bP(r,o){sr.C(r,o),iw("preconnect",r,o)}function AP(r,o,c){sr.L(r,o,c);var d=vl;if(d&&r&&o){var y='link[rel="preload"][as="'+Fn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Fn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Fn(c.imageSizes)+'"]')):y+='[href="'+Fn(r)+'"]';var _=y;switch(o){case"style":_=_l(r);break;case"script":_=bl(r)}Ei.has(_)||(r=g({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:r,as:o},c),Ei.set(_,r),d.querySelector(y)!==null||o==="style"&&d.querySelector(du(_))||o==="script"&&d.querySelector(fu(_))||(o=d.createElement("link"),mn(o,"link",r),je(o),d.head.appendChild(o)))}}function EP(r,o){sr.m(r,o);var c=vl;if(c&&r){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Fn(d)+'"][href="'+Fn(r)+'"]',_=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=bl(r)}if(!Ei.has(_)&&(r=g({rel:"modulepreload",href:r},o),Ei.set(_,r),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(fu(_)))return}d=c.createElement("link"),mn(d,"link",r),je(d),c.head.appendChild(d)}}}function wP(r,o,c){sr.S(r,o,c);var d=vl;if(d&&r){var y=ls(d).hoistableStyles,_=_l(r);o=o||"default";var T=y.get(_);if(!T){var I={loading:0,preload:null};if(T=d.querySelector(du(_)))I.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":o},c),(c=Ei.get(_))&&ty(r,c);var j=T=d.createElement("link");je(j),mn(j,"link",r),j._p=new Promise(function(Q,it){j.onload=Q,j.onerror=it}),j.addEventListener("load",function(){I.loading|=1}),j.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Zd(T,o,d)}T={type:"stylesheet",instance:T,count:1,state:I},y.set(_,T)}}}function TP(r,o){sr.X(r,o);var c=vl;if(c&&r){var d=ls(c).hoistableScripts,y=bl(r),_=d.get(y);_||(_=c.querySelector(fu(y)),_||(r=g({src:r,async:!0},o),(o=Ei.get(y))&&ey(r,o),_=c.createElement("script"),je(_),mn(_,"link",r),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function SP(r,o){sr.M(r,o);var c=vl;if(c&&r){var d=ls(c).hoistableScripts,y=bl(r),_=d.get(y);_||(_=c.querySelector(fu(y)),_||(r=g({src:r,async:!0,type:"module"},o),(o=Ei.get(y))&&ey(r,o),_=c.createElement("script"),je(_),mn(_,"link",r),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function sw(r,o,c,d){var y=(y=At.current)?Jd(y):null;if(!y)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=_l(c.href),c=ls(y).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=_l(c.href);var _=ls(y).hoistableStyles,T=_.get(r);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,T),(_=y.querySelector(du(r)))&&!_._p&&(T.instance=_,T.state.loading=5),Ei.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ei.set(r,c),_||xP(y,r,c,T.state))),o&&d===null)throw Error(n(528,""));return T}if(o&&d!==null)throw Error(n(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=bl(c),c=ls(y).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function _l(r){return'href="'+Fn(r)+'"'}function du(r){return'link[rel="stylesheet"]['+r+"]"}function rw(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function xP(r,o,c,d){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=r.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),mn(o,"link",c),je(o),r.head.appendChild(o))}function bl(r){return'[src="'+Fn(r)+'"]'}function fu(r){return"script[async]"+r}function aw(r,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=r.querySelector('style[data-href~="'+Fn(c.href)+'"]');if(d)return o.instance=d,je(d),d;var y=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),je(d),mn(d,"style",y),Zd(d,c.precedence,r),o.instance=d;case"stylesheet":y=_l(c.href);var _=r.querySelector(du(y));if(_)return o.state.loading|=4,o.instance=_,je(_),_;d=rw(c),(y=Ei.get(y))&&ty(d,y),_=(r.ownerDocument||r).createElement("link"),je(_);var T=_;return T._p=new Promise(function(I,j){T.onload=I,T.onerror=j}),mn(_,"link",d),o.state.loading|=4,Zd(_,c.precedence,r),o.instance=_;case"script":return _=bl(c.src),(y=r.querySelector(fu(_)))?(o.instance=y,je(y),y):(d=c,(y=Ei.get(_))&&(d=g({},c),ey(d,y)),r=r.ownerDocument||r,y=r.createElement("script"),je(y),mn(y,"link",d),r.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Zd(d,c.precedence,r));return o.instance}function Zd(r,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,_=y,T=0;T<d.length;T++){var I=d[T];if(I.dataset.precedence===o)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(r,o.firstChild))}function ty(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function ey(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var tf=null;function ow(r,o,c){if(tf===null){var d=new Map,y=tf=new Map;y.set(c,d)}else y=tf,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),y=0;y<c.length;y++){var _=c[y];if(!(_[as]||_[Ue]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(o)||"";T=r+T;var I=d.get(T);I?I.push(_):d.set(T,[_])}}return d}function lw(r,o,c){r=r.ownerDocument||r,r.head.insertBefore(c,o==="title"?r.querySelector("head > title"):null)}function CP(r,o,c){if(c===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(r=o.disabled,typeof o.precedence=="string"&&r==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function cw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function RP(r,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=_l(d.href),_=o.querySelector(du(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=ef.bind(r),o.then(r,r)),c.state.loading|=4,c.instance=_,je(_);return}_=o.ownerDocument||o,d=rw(d),(y=Ei.get(y))&&ty(d,y),_=_.createElement("link"),je(_);var T=_;T._p=new Promise(function(I,j){T.onload=I,T.onerror=j}),mn(_,"link",d),c.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=ef.bind(r),o.addEventListener("load",c),o.addEventListener("error",c))}}var ny=0;function IP(r,o){return r.stylesheets&&r.count===0&&sf(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var d=setTimeout(function(){if(r.stylesheets&&sf(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&ny===0&&(ny=62500*cP());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&sf(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>ny?50:800)+o);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function ef(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var nf=null;function sf(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,nf=new Map,o.forEach(DP,r),nf=null,ef.call(r))}function DP(r,o){if(!(o.state.loading&4)){var c=nf.get(r);if(c)var d=c.get(null);else{c=new Map,nf.set(r,c);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var T=y[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}y=o.instance,T=y.getAttribute("data-precedence"),_=c.get(T)||d,_===d&&c.set(null,y),c.set(T,y),this.count++,d=ef.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),_?_.parentNode.insertBefore(y,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),o.state.loading|=4}}var pu={$$typeof:O,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function MP(r,o,c,d,y,_,T,I,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ss(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ss(0),this.hiddenUpdates=ss(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function uw(r,o,c,d,y,_,T,I,j,Q,it,rt){return r=new MP(r,o,c,T,j,Q,it,rt,I),o=1,_===!0&&(o|=24),_=Zn(3,null,null,o),r.current=_,_.stateNode=r,o=Om(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:d,isDehydrated:c,cache:o},Um(_),r}function hw(r){return r?(r=Qo,r):Qo}function dw(r,o,c,d,y,_){y=hw(y),d.context===null?d.context=y:d.pendingContext=y,d=kr(o),d.payload={element:c},_=_===void 0?null:_,_!==null&&(d.callback=_),c=Or(r,d,o),c!==null&&(Gn(c,r,o),$c(c,r,o))}function fw(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function iy(r,o){fw(r,o),(r=r.alternate)&&fw(r,o)}function pw(r){if(r.tag===13||r.tag===31){var o=Xa(r,67108864);o!==null&&Gn(o,r,67108864),iy(r,67108864)}}function mw(r){if(r.tag===13||r.tag===31){var o=si();o=Oa(o);var c=Xa(r,o);c!==null&&Gn(c,r,o),iy(r,o)}}var rf=!0;function PP(r,o,c,d){var y=$.T;$.T=null;var _=Z.p;try{Z.p=2,sy(r,o,c,d)}finally{Z.p=_,$.T=y}}function NP(r,o,c,d){var y=$.T;$.T=null;var _=Z.p;try{Z.p=8,sy(r,o,c,d)}finally{Z.p=_,$.T=y}}function sy(r,o,c,d){if(rf){var y=ry(d);if(y===null)Gg(r,o,d,af,c),yw(r,d);else if(OP(y,r,o,c,d))d.stopPropagation();else if(yw(r,d),o&4&&-1<kP.indexOf(r)){for(;y!==null;){var _=hi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=ns(_.pendingLanes);if(T!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;T;){var j=1<<31-De(T);I.entanglements[1]|=j,T&=~j}As(_),(ne&6)===0&&(Bd=Dn()+500,lu(0))}}break;case 31:case 13:I=Xa(_,2),I!==null&&Gn(I,_,2),Hd(),iy(_,2)}if(_=ry(d),_===null&&Gg(r,o,d,af,c),_===y)break;y=_}y!==null&&d.stopPropagation()}else Gg(r,o,d,null,c)}}function ry(r){return r=di(r),ay(r)}var af=null;function ay(r){if(af=null,r=os(r),r!==null){var o=a(r);if(o===null)r=null;else{var c=o.tag;if(c===13){if(r=l(o),r!==null)return r;r=null}else if(c===31){if(r=u(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return af=r,null}function gw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ma()){case yc:return 2;case vc:return 8;case _r:case dm:return 32;case Vh:return 268435456;default:return 32}default:return 32}}var oy=!1,$r=null,Xr=null,Yr=null,mu=new Map,gu=new Map,Kr=[],kP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yw(r,o){switch(r){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":mu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(o.pointerId)}}function yu(r,o,c,d,y,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:_,targetContainers:[y]},o!==null&&(o=hi(o),o!==null&&pw(o)),r):(r.eventSystemFlags|=d,o=r.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),r)}function OP(r,o,c,d,y){switch(o){case"focusin":return $r=yu($r,r,o,c,d,y),!0;case"dragenter":return Xr=yu(Xr,r,o,c,d,y),!0;case"mouseover":return Yr=yu(Yr,r,o,c,d,y),!0;case"pointerover":var _=y.pointerId;return mu.set(_,yu(mu.get(_)||null,r,o,c,d,y)),!0;case"gotpointercapture":return _=y.pointerId,gu.set(_,yu(gu.get(_)||null,r,o,c,d,y)),!0}return!1}function vw(r){var o=os(r.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){r.blockedOn=o,Pi(r.priority,function(){mw(c)});return}}else if(o===31){if(o=u(c),o!==null){r.blockedOn=o,Pi(r.priority,function(){mw(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function of(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=ry(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);Dc=d,c.target.dispatchEvent(d),Dc=null}else return o=hi(c),o!==null&&pw(o),r.blockedOn=c,!1;o.shift()}return!0}function _w(r,o,c){of(r)&&c.delete(o)}function LP(){oy=!1,$r!==null&&of($r)&&($r=null),Xr!==null&&of(Xr)&&(Xr=null),Yr!==null&&of(Yr)&&(Yr=null),mu.forEach(_w),gu.forEach(_w)}function lf(r,o){r.blockedOn===o&&(r.blockedOn=null,oy||(oy=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,LP)))}var cf=null;function bw(r){cf!==r&&(cf=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){cf===r&&(cf=null);for(var o=0;o<r.length;o+=3){var c=r[o],d=r[o+1],y=r[o+2];if(typeof d!="function"){if(ay(d||c)===null)continue;break}var _=hi(c);_!==null&&(r.splice(o,3),o-=3,rg(_,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function Al(r){function o(j){return lf(j,r)}$r!==null&&lf($r,r),Xr!==null&&lf(Xr,r),Yr!==null&&lf(Yr,r),mu.forEach(o),gu.forEach(o);for(var c=0;c<Kr.length;c++){var d=Kr[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Kr.length&&(c=Kr[0],c.blockedOn===null);)vw(c),c.blockedOn===null&&Kr.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],_=c[d+1],T=y[an]||null;if(typeof _=="function")T||bw(c);else if(T){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,T=_[an]||null)I=T.formAction;else if(ay(y)!==null)continue}else I=T.action;typeof I=="function"?c[d+1]=I:(c.splice(d,3),d-=3),bw(c)}}}function Aw(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function ly(r){this._internalRoot=r}uf.prototype.render=ly.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var c=o.current,d=si();dw(c,d,r,o,null,null)},uf.prototype.unmount=ly.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;dw(r.current,2,null,r,null,null),Hd(),o[rs]=null}};function uf(r){this._internalRoot=r}uf.prototype.unstable_scheduleHydration=function(r){if(r){var o=Hh();r={blockedOn:null,target:r,priority:o};for(var c=0;c<Kr.length&&o!==0&&o<Kr[c].priority;c++);Kr.splice(c,0,r),c===0&&vw(r)}};var Ew=t.version;if(Ew!=="19.2.4")throw Error(n(527,Ew,"19.2.4"));Z.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=f(o),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var VP={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{Di=hf.inject(VP),un=hf}catch{}}return bu.createRoot=function(r,o){if(!s(r))throw Error(n(299));var c=!1,d="",y=IA,_=DA,T=MA;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError)),o=uw(r,1,!1,null,null,c,d,null,y,_,T,Aw),r[rs]=o.current,Hg(r),new ly(o)},bu.hydrateRoot=function(r,o,c){if(!s(r))throw Error(n(299));var d=!1,y="",_=IA,T=DA,I=MA,j=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.formState!==void 0&&(j=c.formState)),o=uw(r,1,!0,o,c??null,d,y,j,_,T,I,Aw),o.context=hw(null),c=o.current,d=si(),d=Oa(d),y=kr(d),y.callback=null,Or(c,y,d),c=d,o.current.lanes=c,Na(o,c),As(o),r[rs]=o.current,Hg(r),new uf(o)},bu.version="19.2.4",bu}var kw;function XP(){if(kw)return dy.exports;kw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),dy.exports=$P(),dy.exports}var YP=XP();var Ow="popstate";function KP(i={}){function t(n,s){let{pathname:a,search:l,hash:u}=n.location;return ev("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(n,s){return typeof s=="string"?s:Qu(s)}return QP(t,e,null,i)}function Te(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function Ki(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function WP(){return Math.random().toString(36).substring(2,10)}function Lw(i,t){return{usr:i.state,key:i.key,idx:t}}function ev(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?nc(t):t,state:e,key:t&&t.key||n||WP()}}function Qu({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function nc(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function QP(i,t,e,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,u="POP",h=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function g(){u="POP";let x=p(),C=x==null?null:x-f;f=x,h&&h({action:u,location:w.location,delta:C})}function v(x,C){u="PUSH";let N=ev(w.location,x,C);f=p()+1;let O=Lw(N,f),U=w.createHref(N);try{l.pushState(O,"",U)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;s.location.assign(U)}a&&h&&h({action:u,location:w.location,delta:1})}function b(x,C){u="REPLACE";let N=ev(w.location,x,C);f=p();let O=Lw(N,f),U=w.createHref(N);l.replaceState(O,"",U),a&&h&&h({action:u,location:w.location,delta:0})}function E(x){return JP(x)}let w={get action(){return u},get location(){return i(s,l)},listen(x){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(Ow,g),h=x,()=>{s.removeEventListener(Ow,g),h=null}},createHref(x){return t(s,x)},createURL:E,encodeLocation(x){let C=E(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:b,go(x){return l.go(x)}};return w}function JP(i,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Te(e,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Qu(i);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function ax(i,t,e="/"){return ZP(i,t,e,!1)}function ZP(i,t,e,n){let s=typeof t=="string"?nc(t):t,a=dr(s.pathname||"/",e);if(a==null)return null;let l=ox(i);tN(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=hN(a);u=cN(l[h],f,n)}return u}function ox(i,t=[],e=[],n="",s=!1){let a=(l,u,h=s,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&h)return;Te(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=cr([n,p.relativePath]),v=e.concat(p);l.children&&l.children.length>0&&(Te(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),ox(l.children,t,v,g,h)),!(l.path==null&&!l.index)&&t.push({path:g,score:oN(g,l.index),routesMeta:v})};return i.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))a(l,u);else for(let h of lx(l.path))a(l,u,!0,h)}),t}function lx(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,s=e.endsWith("?"),a=e.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=lx(n.join("/")),u=[];return u.push(...l.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...l),u.map(h=>i.startsWith("/")&&h===""?"/":h)}function tN(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:lN(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var eN=/^:[\w-]+$/,nN=3,iN=2,sN=1,rN=10,aN=-2,Vw=i=>i==="*";function oN(i,t){let e=i.split("/"),n=e.length;return e.some(Vw)&&(n+=aN),t&&(n+=iN),e.filter(s=>!Vw(s)).reduce((s,a)=>s+(eN.test(a)?nN:a===""?sN:rN),n)}function lN(i,t){return i.length===t.length&&i.slice(0,-1).every((n,s)=>n===t[s])?i[i.length-1]-t[t.length-1]:0}function cN(i,t,e=!1){let{routesMeta:n}=i,s={},a="/",l=[];for(let u=0;u<n.length;++u){let h=n[u],f=u===n.length-1,p=a==="/"?t:t.slice(a.length)||"/",g=Wf({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),v=h.route;if(!g&&f&&e&&!n[n.length-1].route.index&&(g=Wf({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!g)return null;Object.assign(s,g.params),l.push({params:s,pathname:cr([a,g.pathname]),pathnameBase:mN(cr([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=cr([a,g.pathnameBase]))}return l}function Wf(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=uN(i.path,i.caseSensitive,i.end),s=t.match(e);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,{paramName:p,isOptional:g},v)=>{if(p==="*"){let E=u[v]||"";l=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const b=u[v];return g&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:i}}function uN(i,t=!1,e=!0){Ki(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function hN(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ki(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function dr(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}var dN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function fN(i,t="/"){let{pathname:e,search:n="",hash:s=""}=typeof i=="string"?nc(i):i,a;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?a=Fw(e.substring(1),"/"):a=Fw(e,t)):a=t,{pathname:a,search:gN(n),hash:yN(s)}}function Fw(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function gy(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pN(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function o_(i){let t=pN(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function l_(i,t,e,n=!1){let s;typeof i=="string"?s=nc(i):(s={...i},Te(!s.pathname||!s.pathname.includes("?"),gy("?","pathname","search",s)),Te(!s.pathname||!s.pathname.includes("#"),gy("#","pathname","hash",s)),Te(!s.search||!s.search.includes("#"),gy("#","search","hash",s)));let a=i===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=e;else{let g=t.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;s.pathname=v.join("/")}u=g>=0?t[g]:"/"}let h=fN(s,u),f=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var cr=i=>i.join("/").replace(/\/\/+/g,"/"),mN=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),gN=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,yN=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,vN=class{constructor(i,t,e,n=!1){this.status=i,this.statusText=t||"",this.internal=n,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function _N(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function bN(i){return i.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var cx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ux(i,t){let e=i;if(typeof e!="string"||!dN.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let n=e,s=!1;if(cx)try{let a=new URL(window.location.href),l=e.startsWith("//")?new URL(a.protocol+e):new URL(e),u=dr(l.pathname,t);l.origin===a.origin&&u!=null?e=u+l.search+l.hash:s=!0}catch{Ki(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:s,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var hx=["POST","PUT","PATCH","DELETE"];new Set(hx);var AN=["GET",...hx];new Set(AN);var ic=B.createContext(null);ic.displayName="DataRouter";var Rp=B.createContext(null);Rp.displayName="DataRouterState";var EN=B.createContext(!1),dx=B.createContext({isTransitioning:!1});dx.displayName="ViewTransition";var wN=B.createContext(new Map);wN.displayName="Fetchers";var TN=B.createContext(null);TN.displayName="Await";var ci=B.createContext(null);ci.displayName="Navigation";var mh=B.createContext(null);mh.displayName="Location";var Zi=B.createContext({outlet:null,matches:[],isDataRoute:!1});Zi.displayName="Route";var c_=B.createContext(null);c_.displayName="RouteError";var fx="REACT_ROUTER_ERROR",SN="REDIRECT",xN="ROUTE_ERROR_RESPONSE";function CN(i){if(i.startsWith(`${fx}:${SN}:{`))try{let t=JSON.parse(i.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function RN(i){if(i.startsWith(`${fx}:${xN}:{`))try{let t=JSON.parse(i.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new vN(t.status,t.statusText,t.data)}catch{}}function IN(i,{relative:t}={}){Te(sc(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=B.useContext(ci),{hash:s,pathname:a,search:l}=gh(i,{relative:t}),u=a;return e!=="/"&&(u=a==="/"?e:cr([e,a])),n.createHref({pathname:u,search:l,hash:s})}function sc(){return B.useContext(mh)!=null}function wa(){return Te(sc(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(mh).location}var px="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mx(i){B.useContext(ci).static||B.useLayoutEffect(i)}function Ip(){let{isDataRoute:i}=B.useContext(Zi);return i?HN():DN()}function DN(){Te(sc(),"useNavigate() may be used only in the context of a <Router> component.");let i=B.useContext(ic),{basename:t,navigator:e}=B.useContext(ci),{matches:n}=B.useContext(Zi),{pathname:s}=wa(),a=JSON.stringify(o_(n)),l=B.useRef(!1);return mx(()=>{l.current=!0}),B.useCallback((h,f={})=>{if(Ki(l.current,px),!l.current)return;if(typeof h=="number"){e.go(h);return}let p=l_(h,JSON.parse(a),s,f.relative==="path");i==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:cr([t,p.pathname])),(f.replace?e.replace:e.push)(p,f.state,f)},[t,e,a,s,i])}B.createContext(null);function MN(){let{matches:i}=B.useContext(Zi),t=i[i.length-1];return t?t.params:{}}function gh(i,{relative:t}={}){let{matches:e}=B.useContext(Zi),{pathname:n}=wa(),s=JSON.stringify(o_(e));return B.useMemo(()=>l_(i,JSON.parse(s),n,t==="path"),[i,s,n,t])}function PN(i,t){return gx(i,t)}function gx(i,t,e,n,s){Te(sc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=B.useContext(ci),{matches:l}=B.useContext(Zi),u=l[l.length-1],h=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let N=g&&g.path||"";vx(f,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=wa(),b;if(t){let N=typeof t=="string"?nc(t):t;Te(p==="/"||N.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${N.pathname}" was given in the \`location\` prop.`),b=N}else b=v;let E=b.pathname||"/",w=E;if(p!=="/"){let N=p.replace(/^\//,"").split("/");w="/"+E.replace(/^\//,"").split("/").slice(N.length).join("/")}let x=ax(i,{pathname:w});Ki(g||x!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ki(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=VN(x&&x.map(N=>Object.assign({},N,{params:Object.assign({},h,N.params),pathname:cr([p,a.encodeLocation?a.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:cr([p,a.encodeLocation?a.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),l,e,n,s);return t&&C?B.createElement(mh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},C):C}function NN(){let i=zN(),t=_N(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",i),l=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:a},"ErrorBoundary")," or"," ",B.createElement("code",{style:a},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},t),e?B.createElement("pre",{style:s},e):null,l)}var kN=B.createElement(NN,null),yx=class extends B.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){this.props.onError?this.props.onError(i,t):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const e=RN(i.digest);e&&(i=e)}let t=i!==void 0?B.createElement(Zi.Provider,{value:this.props.routeContext},B.createElement(c_.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?B.createElement(ON,{error:i},t):t}};yx.contextType=EN;var yy=new WeakMap;function ON({children:i,error:t}){let{basename:e}=B.useContext(ci);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=CN(t.digest);if(n){let s=yy.get(t);if(s)throw s;let a=ux(n.location,e);if(cx&&!yy.get(t))if(a.isExternal||n.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:n.replace}));throw yy.set(t,l),l}return B.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return i}function LN({routeContext:i,match:t,children:e}){let n=B.useContext(ic);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(Zi.Provider,{value:i},e)}function VN(i,t=[],e=null,n=null,s=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let a=i,l=e?.errors;if(l!=null){let p=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);Te(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,h=-1;if(e)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:v,errors:b}=e,E=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||E){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}let f=e&&n?(p,g)=>{n(p,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:bN(e.matches),errorInfo:g})}:void 0;return a.reduceRight((p,g,v)=>{let b,E=!1,w=null,x=null;e&&(b=l&&g.route.id?l[g.route.id]:void 0,w=g.route.errorElement||kN,u&&(h<0&&v===0?(vx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,x=null):h===v&&(E=!0,x=g.route.hydrateFallbackElement||null)));let C=t.concat(a.slice(0,v+1)),N=()=>{let O;return b?O=w:E?O=x:g.route.Component?O=B.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=p,B.createElement(LN,{match:g,routeContext:{outlet:p,matches:C,isDataRoute:e!=null},children:O})};return e&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?B.createElement(yx,{location:e.location,revalidation:e.revalidation,component:w,error:b,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:f}):N()},null)}function u_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FN(i){let t=B.useContext(ic);return Te(t,u_(i)),t}function UN(i){let t=B.useContext(Rp);return Te(t,u_(i)),t}function jN(i){let t=B.useContext(Zi);return Te(t,u_(i)),t}function h_(i){let t=jN(i),e=t.matches[t.matches.length-1];return Te(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function BN(){return h_("useRouteId")}function zN(){let i=B.useContext(c_),t=UN("useRouteError"),e=h_("useRouteError");return i!==void 0?i:t.errors?.[e]}function HN(){let{router:i}=FN("useNavigate"),t=h_("useNavigate"),e=B.useRef(!1);return mx(()=>{e.current=!0}),B.useCallback(async(s,a={})=>{Ki(e.current,px),e.current&&(typeof s=="number"?await i.navigate(s):await i.navigate(s,{fromRouteId:t,...a}))},[i,t])}var Uw={};function vx(i,t,e){!t&&!Uw[i]&&(Uw[i]=!0,Ki(!1,e))}B.memo(GN);function GN({routes:i,future:t,state:e,onError:n}){return gx(i,void 0,e,n,t)}function qN({to:i,replace:t,state:e,relative:n}){Te(sc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=B.useContext(ci);Ki(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=B.useContext(Zi),{pathname:l}=wa(),u=Ip(),h=l_(i,o_(a),l,n==="path"),f=JSON.stringify(h);return B.useEffect(()=>{u(JSON.parse(f),{replace:t,state:e,relative:n})},[u,f,n,t,e]),null}function Df(i){Te(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $N({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){Te(!sc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:u,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[u,s,a,l]);typeof e=="string"&&(e=nc(e));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:b="default"}=e,E=B.useMemo(()=>{let w=dr(f,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:v,key:b},navigationType:n}},[u,f,p,g,v,b,n]);return Ki(E!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:B.createElement(ci.Provider,{value:h},B.createElement(mh.Provider,{children:t,value:E}))}function XN({children:i,location:t}){return PN(nv(i),t)}function nv(i,t=[]){let e=[];return B.Children.forEach(i,(n,s)=>{if(!B.isValidElement(n))return;let a=[...t,s];if(n.type===B.Fragment){e.push.apply(e,nv(n.props.children,a));return}Te(n.type===Df,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Te(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=nv(n.props.children,a)),e.push(l)}),e}var Mf="get",Pf="application/x-www-form-urlencoded";function Dp(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function YN(i){return Dp(i)&&i.tagName.toLowerCase()==="button"}function KN(i){return Dp(i)&&i.tagName.toLowerCase()==="form"}function WN(i){return Dp(i)&&i.tagName.toLowerCase()==="input"}function QN(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function JN(i,t){return i.button===0&&(!t||t==="_self")&&!QN(i)}var ff=null;function ZN(){if(ff===null)try{new FormData(document.createElement("form"),0),ff=!1}catch{ff=!0}return ff}var tk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vy(i){return i!=null&&!tk.has(i)?(Ki(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pf}"`),null):i}function ek(i,t){let e,n,s,a,l;if(KN(i)){let u=i.getAttribute("action");n=u?dr(u,t):null,e=i.getAttribute("method")||Mf,s=vy(i.getAttribute("enctype"))||Pf,a=new FormData(i)}else if(YN(i)||WN(i)&&(i.type==="submit"||i.type==="image")){let u=i.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=i.getAttribute("formaction")||u.getAttribute("action");if(n=h?dr(h,t):null,e=i.getAttribute("formmethod")||u.getAttribute("method")||Mf,s=vy(i.getAttribute("formenctype"))||vy(u.getAttribute("enctype"))||Pf,a=new FormData(u,i),!ZN()){let{name:f,type:p,value:g}=i;if(p==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,g)}}else{if(Dp(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Mf,n=null,s=Pf,l=i}return a&&s==="text/plain"&&(l=a,a=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function d_(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function nk(i,t,e,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${n}`:s.pathname=`${s.pathname}.${n}`:s.pathname==="/"?s.pathname=`_root.${n}`:t&&dr(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function ik(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sk(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function rk(i,t,e){let n=await Promise.all(i.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await ik(a,e);return l.links?l.links():[]}return[]}));return ck(n.flat(1).filter(sk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function jw(i,t,e,n,s,a){let l=(h,f)=>e[f]?h.route.id!==e[f].route.id:!0,u=(h,f)=>e[f].pathname!==h.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==h.params["*"];return a==="assets"?t.filter((h,f)=>l(h,f)||u(h,f)):a==="data"?t.filter((h,f)=>{let p=n.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(l(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function ak(i,t,{includeHydrateFallback:e}={}){return ok(i.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function ok(i){return[...new Set(i)]}function lk(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function ck(i,t){let e=new Set;return new Set(t),i.reduce((n,s)=>{let a=JSON.stringify(lk(s));return e.has(a)||(e.add(a),n.push({key:a,link:s})),n},[])}function _x(){let i=B.useContext(ic);return d_(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function uk(){let i=B.useContext(Rp);return d_(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var f_=B.createContext(void 0);f_.displayName="FrameworkContext";function bx(){let i=B.useContext(f_);return d_(i,"You must render this element inside a <HydratedRouter> element"),i}function hk(i,t){let e=B.useContext(f_),[n,s]=B.useState(!1),[a,l]=B.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=t,v=B.useRef(null);B.useEffect(()=>{if(i==="render"&&l(!0),i==="viewport"){let w=C=>{C.forEach(N=>{l(N.isIntersecting)})},x=new IntersectionObserver(w,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[i]),B.useEffect(()=>{if(n){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[n]);let b=()=>{s(!0)},E=()=>{s(!1),l(!1)};return e?i!=="intent"?[a,v,{}]:[a,v,{onFocus:Au(u,b),onBlur:Au(h,E),onMouseEnter:Au(f,b),onMouseLeave:Au(p,E),onTouchStart:Au(g,b)}]:[!1,v,{}]}function Au(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function dk({page:i,...t}){let{router:e}=_x(),n=B.useMemo(()=>ax(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?B.createElement(pk,{page:i,matches:n,...t}):null}function fk(i){let{manifest:t,routeModules:e}=bx(),[n,s]=B.useState([]);return B.useEffect(()=>{let a=!1;return rk(i,t,e).then(l=>{a||s(l)}),()=>{a=!0}},[i,t,e]),n}function pk({page:i,matches:t,...e}){let n=wa(),{future:s,manifest:a,routeModules:l}=bx(),{basename:u}=_x(),{loaderData:h,matches:f}=uk(),p=B.useMemo(()=>jw(i,t,f,a,n,"data"),[i,t,f,a,n]),g=B.useMemo(()=>jw(i,t,f,a,n,"assets"),[i,t,f,a,n]),v=B.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let w=new Set,x=!1;if(t.forEach(N=>{let O=a.routes[N.route.id];!O||!O.hasLoader||(!p.some(U=>U.route.id===N.route.id)&&N.route.id in h&&l[N.route.id]?.shouldRevalidate||O.hasClientLoader?x=!0:w.add(N.route.id))}),w.size===0)return[];let C=nk(i,u,s.unstable_trailingSlashAwareDataRequests,"data");return x&&w.size>0&&C.searchParams.set("_routes",t.filter(N=>w.has(N.route.id)).map(N=>N.route.id).join(",")),[C.pathname+C.search]},[u,s.unstable_trailingSlashAwareDataRequests,h,n,a,p,t,i,l]),b=B.useMemo(()=>ak(g,a),[g,a]),E=fk(g);return B.createElement(B.Fragment,null,v.map(w=>B.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...e})),b.map(w=>B.createElement("link",{key:w,rel:"modulepreload",href:w,...e})),E.map(({key:w,link:x})=>B.createElement("link",{key:w,nonce:e.nonce,...x,crossOrigin:x.crossOrigin??e.crossOrigin})))}function mk(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var gk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gk&&(window.__reactRouterVersion="7.13.0")}catch{}function yk({basename:i,children:t,unstable_useTransitions:e,window:n}){let s=B.useRef();s.current==null&&(s.current=KP({window:n,v5Compat:!0}));let a=s.current,[l,u]=B.useState({action:a.action,location:a.location}),h=B.useCallback(f=>{e===!1?u(f):B.startTransition(()=>u(f))},[e]);return B.useLayoutEffect(()=>a.listen(h),[a,h]),B.createElement($N,{basename:i,children:t,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:e})}var Ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vu=B.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:s,reloadDocument:a,replace:l,state:u,target:h,to:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...b},E){let{basename:w,unstable_useTransitions:x}=B.useContext(ci),C=typeof f=="string"&&Ax.test(f),N=ux(f,w);f=N.to;let O=IN(f,{relative:s}),[U,G,Y]=hk(n,b),D=Ak(f,{replace:l,state:u,target:h,preventScrollReset:p,relative:s,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:x});function R(L){t&&t(L),L.defaultPrevented||D(L)}let M=B.createElement("a",{...b,...Y,href:N.absoluteURL||O,onClick:N.isExternal||a?t:R,ref:mk(E,G),target:h,"data-discover":!C&&e==="render"?"true":void 0});return U&&!C?B.createElement(B.Fragment,null,M,B.createElement(dk,{page:O})):M});Vu.displayName="Link";var vk=B.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:s=!1,style:a,to:l,viewTransition:u,children:h,...f},p){let g=gh(l,{relative:f.relative}),v=wa(),b=B.useContext(Rp),{navigator:E,basename:w}=B.useContext(ci),x=b!=null&&xk(g)&&u===!0,C=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,N=v.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;e||(N=N.toLowerCase(),O=O?O.toLowerCase():null,C=C.toLowerCase()),O&&w&&(O=dr(O,w)||O);const U=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let G=N===C||!s&&N.startsWith(C)&&N.charAt(U)==="/",Y=O!=null&&(O===C||!s&&O.startsWith(C)&&O.charAt(C.length)==="/"),D={isActive:G,isPending:Y,isTransitioning:x},R=G?t:void 0,M;typeof n=="function"?M=n(D):M=[n,G?"active":null,Y?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(D):a;return B.createElement(Vu,{...f,"aria-current":R,className:M,ref:p,style:L,to:l,viewTransition:u},typeof h=="function"?h(D):h)});vk.displayName="NavLink";var _k=B.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:s,state:a,method:l=Mf,action:u,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...b},E)=>{let{unstable_useTransitions:w}=B.useContext(ci),x=Tk(),C=Sk(u,{relative:f}),N=l.toLowerCase()==="get"?"get":"post",O=typeof u=="string"&&Ax.test(u),U=G=>{if(h&&h(G),G.defaultPrevented)return;G.preventDefault();let Y=G.nativeEvent.submitter,D=Y?.getAttribute("formmethod")||l,R=()=>x(Y||G.currentTarget,{fetcherKey:t,method:D,navigate:e,replace:s,state:a,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v});w&&e!==!1?B.startTransition(()=>R()):R()};return B.createElement("form",{ref:E,method:N,action:C,onSubmit:n?h:U,...b,"data-discover":!O&&i==="render"?"true":void 0})});_k.displayName="Form";function bk(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ex(i){let t=B.useContext(ic);return Te(t,bk(i)),t}function Ak(i,{target:t,replace:e,state:n,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let f=Ip(),p=wa(),g=gh(i,{relative:a});return B.useCallback(v=>{if(JN(v,t)){v.preventDefault();let b=e!==void 0?e:Qu(p)===Qu(g),E=()=>f(i,{replace:b,state:n,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u});h?B.startTransition(()=>E()):E()}},[p,f,g,e,n,t,i,s,a,l,u,h])}var Ek=0,wk=()=>`__${String(++Ek)}__`;function Tk(){let{router:i}=Ex("useSubmit"),{basename:t}=B.useContext(ci),e=BN(),n=i.fetch,s=i.navigate;return B.useCallback(async(a,l={})=>{let{action:u,method:h,encType:f,formData:p,body:g}=ek(a,t);if(l.navigate===!1){let v=l.fetcherKey||wk();await n(v,e,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||h,formEncType:l.encType||f,flushSync:l.flushSync})}else await s(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||h,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:e,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,s,t,e])}function Sk(i,{relative:t}={}){let{basename:e}=B.useContext(ci),n=B.useContext(Zi);Te(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...gh(i||".",{relative:t})},l=wa();if(i==null){a.search=l.search;let u=new URLSearchParams(a.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();a.search=p?`?${p}`:""}}return(!i||i===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(a.pathname=a.pathname==="/"?e:cr([e,a.pathname])),Qu(a)}function xk(i,{relative:t}={}){let e=B.useContext(dx);Te(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Ex("useViewTransitionState"),s=gh(i,{relative:t});if(!e.isTransitioning)return!1;let a=dr(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=dr(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Wf(s.pathname,l)!=null||Wf(s.pathname,a)!=null}const p_=B.createContext({});function m_(i){const t=B.useRef(null);return t.current===null&&(t.current=i()),t.current}const wx=typeof window<"u",Tx=wx?B.useLayoutEffect:B.useEffect,Mp=B.createContext(null);function g_(i,t){i.indexOf(t)===-1&&i.push(t)}function y_(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const ks=(i,t,e)=>e>t?t:e<i?i:e;let v_=()=>{};const fr={},Sx=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function xx(i){return typeof i=="object"&&i!==null}const Cx=i=>/^0[^.\s]+$/u.test(i);function __(i){let t;return()=>(t===void 0&&(t=i()),t)}const Ii=i=>i,Ck=(i,t)=>e=>t(i(e)),yh=(...i)=>i.reduce(Ck),Ju=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n};class b_{constructor(){this.subscriptions=[]}add(t){return g_(this.subscriptions,t),()=>y_(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,n);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ur=i=>i*1e3,Ri=i=>i/1e3;function Rx(i,t){return t?i*(1e3/t):0}const Ix=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,Rk=1e-7,Ik=12;function Dk(i,t,e,n,s){let a,l,u=0;do l=t+(e-t)/2,a=Ix(l,n,s)-i,a>0?e=l:t=l;while(Math.abs(a)>Rk&&++u<Ik);return l}function vh(i,t,e,n){if(i===t&&e===n)return Ii;const s=a=>Dk(a,0,1,i,e);return a=>a===0||a===1?a:Ix(s(a),t,n)}const Dx=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,Mx=i=>t=>1-i(1-t),Px=vh(.33,1.53,.69,.99),A_=Mx(Px),Nx=Dx(A_),kx=i=>(i*=2)<1?.5*A_(i):.5*(2-Math.pow(2,-10*(i-1))),E_=i=>1-Math.sin(Math.acos(i)),Ox=Mx(E_),Lx=Dx(E_),Mk=vh(.42,0,1,1),Pk=vh(0,0,.58,1),Vx=vh(.42,0,.58,1),Nk=i=>Array.isArray(i)&&typeof i[0]!="number",Fx=i=>Array.isArray(i)&&typeof i[0]=="number",kk={linear:Ii,easeIn:Mk,easeInOut:Vx,easeOut:Pk,circIn:E_,circInOut:Lx,circOut:Ox,backIn:A_,backInOut:Nx,backOut:Px,anticipate:kx},Ok=i=>typeof i=="string",Bw=i=>{if(Fx(i)){v_(i.length===4);const[t,e,n,s]=i;return vh(t,e,n,s)}else if(Ok(i))return kk[i];return i},pf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Lk(i,t){let e=new Set,n=new Set,s=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){l.has(p)&&(f.schedule(p),i()),p(u)}const f={schedule:(p,g=!1,v=!1)=>{const E=v&&s?e:n;return g&&l.add(p),E.has(p)||E.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(u=p,s){a=!0;return}s=!0,[e,n]=[n,e],e.forEach(h),e.clear(),s=!1,a&&(a=!1,f.process(p))}};return f}const Vk=40;function Ux(i,t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=pf.reduce((O,U)=>(O[U]=Lk(a),O),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:p,update:g,preRender:v,render:b,postRender:E}=l,w=()=>{const O=fr.useManualTiming?s.timestamp:performance.now();e=!1,fr.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(O-s.timestamp,Vk),1)),s.timestamp=O,s.isProcessing=!0,u.process(s),h.process(s),f.process(s),p.process(s),g.process(s),v.process(s),b.process(s),E.process(s),s.isProcessing=!1,e&&t&&(n=!1,i(w))},x=()=>{e=!0,n=!0,s.isProcessing||i(w)};return{schedule:pf.reduce((O,U)=>{const G=l[U];return O[U]=(Y,D=!1,R=!1)=>(e||x(),G.schedule(Y,D,R)),O},{}),cancel:O=>{for(let U=0;U<pf.length;U++)l[pf[U]].cancel(O)},state:s,steps:l}}const{schedule:_e,cancel:da,state:gn,steps:_y}=Ux(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ii,!0);let Nf;function Fk(){Nf=void 0}const On={now:()=>(Nf===void 0&&On.set(gn.isProcessing||fr.useManualTiming?gn.timestamp:performance.now()),Nf),set:i=>{Nf=i,queueMicrotask(Fk)}},jx=i=>t=>typeof t=="string"&&t.startsWith(i),Bx=jx("--"),Uk=jx("var(--"),w_=i=>Uk(i)?jk.test(i.split("/*")[0].trim()):!1,jk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function zw(i){return typeof i!="string"?!1:i.split("/*")[0].includes("var(--")}const rc={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Zu={...rc,transform:i=>ks(0,1,i)},mf={...rc,default:1},Fu=i=>Math.round(i*1e5)/1e5,T_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Bk(i){return i==null}const zk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,S_=(i,t)=>e=>!!(typeof e=="string"&&zk.test(e)&&e.startsWith(i)||t&&!Bk(e)&&Object.prototype.hasOwnProperty.call(e,t)),zx=(i,t,e)=>n=>{if(typeof n!="string")return n;const[s,a,l,u]=n.match(T_);return{[i]:parseFloat(s),[t]:parseFloat(a),[e]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},Hk=i=>ks(0,255,i),by={...rc,transform:i=>Math.round(Hk(i))},co={test:S_("rgb","red"),parse:zx("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+by.transform(i)+", "+by.transform(t)+", "+by.transform(e)+", "+Fu(Zu.transform(n))+")"};function Gk(i){let t="",e="",n="",s="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),t+=t,e+=e,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const iv={test:S_("#"),parse:Gk,transform:co.transform},_h=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),Jr=_h("deg"),xs=_h("%"),gt=_h("px"),qk=_h("vh"),$k=_h("vw"),Hw={...xs,parse:i=>xs.parse(i)/100,transform:i=>xs.transform(i*100)},Rl={test:S_("hsl","hue"),parse:zx("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+xs.transform(Fu(t))+", "+xs.transform(Fu(e))+", "+Fu(Zu.transform(n))+")"},Ye={test:i=>co.test(i)||iv.test(i)||Rl.test(i),parse:i=>co.test(i)?co.parse(i):Rl.test(i)?Rl.parse(i):iv.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?co.transform(i):Rl.transform(i),getAnimatableNone:i=>{const t=Ye.parse(i);return t.alpha=0,Ye.transform(t)}},Xk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Yk(i){return isNaN(i)&&typeof i=="string"&&(i.match(T_)?.length||0)+(i.match(Xk)?.length||0)>0}const Hx="number",Gx="color",Kk="var",Wk="var(",Gw="${}",Qk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function th(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},s=[];let a=0;const u=t.replace(Qk,h=>(Ye.test(h)?(n.color.push(a),s.push(Gx),e.push(Ye.parse(h))):h.startsWith(Wk)?(n.var.push(a),s.push(Kk),e.push(h)):(n.number.push(a),s.push(Hx),e.push(parseFloat(h))),++a,Gw)).split(Gw);return{values:e,split:u,indexes:n,types:s}}function qx(i){return th(i).values}function $x(i){const{split:t,types:e}=th(i),n=t.length;return s=>{let a="";for(let l=0;l<n;l++)if(a+=t[l],s[l]!==void 0){const u=e[l];u===Hx?a+=Fu(s[l]):u===Gx?a+=Ye.transform(s[l]):a+=s[l]}return a}}const Jk=i=>typeof i=="number"?0:Ye.test(i)?Ye.getAnimatableNone(i):i;function Zk(i){const t=qx(i);return $x(i)(t.map(Jk))}const fa={test:Yk,parse:qx,createTransformer:$x,getAnimatableNone:Zk};function Ay(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function t2({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let s=0,a=0,l=0;if(!t)s=a=l=e;else{const u=e<.5?e*(1+t):e+t-e*t,h=2*e-u;s=Ay(h,u,i+1/3),a=Ay(h,u,i),l=Ay(h,u,i-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function Qf(i,t){return e=>e>0?t:i}const Se=(i,t,e)=>i+(t-i)*e,Ey=(i,t,e)=>{const n=i*i,s=e*(t*t-n)+n;return s<0?0:Math.sqrt(s)},e2=[iv,co,Rl],n2=i=>e2.find(t=>t.test(i));function qw(i){const t=n2(i);if(!t)return!1;let e=t.parse(i);return t===Rl&&(e=t2(e)),e}const $w=(i,t)=>{const e=qw(i),n=qw(t);if(!e||!n)return Qf(i,t);const s={...e};return a=>(s.red=Ey(e.red,n.red,a),s.green=Ey(e.green,n.green,a),s.blue=Ey(e.blue,n.blue,a),s.alpha=Se(e.alpha,n.alpha,a),co.transform(s))},sv=new Set(["none","hidden"]);function i2(i,t){return sv.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function s2(i,t){return e=>Se(i,t,e)}function x_(i){return typeof i=="number"?s2:typeof i=="string"?w_(i)?Qf:Ye.test(i)?$w:o2:Array.isArray(i)?Xx:typeof i=="object"?Ye.test(i)?$w:r2:Qf}function Xx(i,t){const e=[...i],n=e.length,s=i.map((a,l)=>x_(a)(a,t[l]));return a=>{for(let l=0;l<n;l++)e[l]=s[l](a);return e}}function r2(i,t){const e={...i,...t},n={};for(const s in e)i[s]!==void 0&&t[s]!==void 0&&(n[s]=x_(i[s])(i[s],t[s]));return s=>{for(const a in n)e[a]=n[a](s);return e}}function a2(i,t){const e=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],l=i.indexes[a][n[a]],u=i.values[l]??0;e[s]=u,n[a]++}return e}const o2=(i,t)=>{const e=fa.createTransformer(t),n=th(i),s=th(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?sv.has(i)&&!s.values.length||sv.has(t)&&!n.values.length?i2(i,t):yh(Xx(a2(n,s),s.values),e):Qf(i,t)};function Yx(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?Se(i,t,e):x_(i)(i,t)}const l2=i=>{const t=({timestamp:e})=>i(e);return{start:(e=!0)=>_e.update(t,e),stop:()=>da(t),now:()=>gn.isProcessing?gn.timestamp:On.now()}},Kx=(i,t,e=10)=>{let n="";const s=Math.max(Math.round(t/e),2);for(let a=0;a<s;a++)n+=Math.round(i(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Jf=2e4;function C_(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<Jf;)t+=e,n=i.next(t);return t>=Jf?1/0:t}function c2(i,t=100,e){const n=e({...i,keyframes:[0,t]}),s=Math.min(C_(n),Jf);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:Ri(s)}}const u2=5;function Wx(i,t,e){const n=Math.max(t-u2,0);return Rx(e-i(n),t-n)}const Ie={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wy=.001;function h2({duration:i=Ie.duration,bounce:t=Ie.bounce,velocity:e=Ie.velocity,mass:n=Ie.mass}){let s,a,l=1-t;l=ks(Ie.minDamping,Ie.maxDamping,l),i=ks(Ie.minDuration,Ie.maxDuration,Ri(i)),l<1?(s=f=>{const p=f*l,g=p*i,v=p-e,b=rv(f,l),E=Math.exp(-g);return wy-v/b*E},a=f=>{const g=f*l*i,v=g*e+e,b=Math.pow(l,2)*Math.pow(f,2)*i,E=Math.exp(-g),w=rv(Math.pow(f,2),l);return(-s(f)+wy>0?-1:1)*((v-b)*E)/w}):(s=f=>{const p=Math.exp(-f*i),g=(f-e)*i+1;return-wy+p*g},a=f=>{const p=Math.exp(-f*i),g=(e-f)*(i*i);return p*g});const u=5/i,h=f2(s,a,u);if(i=ur(i),isNaN(h))return{stiffness:Ie.stiffness,damping:Ie.damping,duration:i};{const f=Math.pow(h,2)*n;return{stiffness:f,damping:l*2*Math.sqrt(n*f),duration:i}}}const d2=12;function f2(i,t,e){let n=e;for(let s=1;s<d2;s++)n=n-i(n)/t(n);return n}function rv(i,t){return i*Math.sqrt(1-t*t)}const p2=["duration","bounce"],m2=["stiffness","damping","mass"];function Xw(i,t){return t.some(e=>i[e]!==void 0)}function g2(i){let t={velocity:Ie.velocity,stiffness:Ie.stiffness,damping:Ie.damping,mass:Ie.mass,isResolvedFromDuration:!1,...i};if(!Xw(i,m2)&&Xw(i,p2))if(i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),s=n*n,a=2*ks(.05,1,1-(i.bounce||0))*Math.sqrt(s);t={...t,mass:Ie.mass,stiffness:s,damping:a}}else{const e=h2(i);t={...t,...e,mass:Ie.mass},t.isResolvedFromDuration=!0}return t}function Zf(i=Ie.visualDuration,t=Ie.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:s}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],u={done:!1,value:a},{stiffness:h,damping:f,mass:p,duration:g,velocity:v,isResolvedFromDuration:b}=g2({...e,velocity:-Ri(e.velocity||0)}),E=v||0,w=f/(2*Math.sqrt(h*p)),x=l-a,C=Ri(Math.sqrt(h/p)),N=Math.abs(x)<5;n||(n=N?Ie.restSpeed.granular:Ie.restSpeed.default),s||(s=N?Ie.restDelta.granular:Ie.restDelta.default);let O;if(w<1){const G=rv(C,w);O=Y=>{const D=Math.exp(-w*C*Y);return l-D*((E+w*C*x)/G*Math.sin(G*Y)+x*Math.cos(G*Y))}}else if(w===1)O=G=>l-Math.exp(-C*G)*(x+(E+C*x)*G);else{const G=C*Math.sqrt(w*w-1);O=Y=>{const D=Math.exp(-w*C*Y),R=Math.min(G*Y,300);return l-D*((E+w*C*x)*Math.sinh(R)+G*x*Math.cosh(R))/G}}const U={calculatedDuration:b&&g||null,next:G=>{const Y=O(G);if(b)u.done=G>=g;else{let D=G===0?E:0;w<1&&(D=G===0?ur(E):Wx(O,G,Y));const R=Math.abs(D)<=n,M=Math.abs(l-Y)<=s;u.done=R&&M}return u.value=u.done?l:Y,u},toString:()=>{const G=Math.min(C_(U),Jf),Y=Kx(D=>U.next(G*D).value,G,30);return G+"ms "+Y},toTransition:()=>{}};return U}Zf.applyToOptions=i=>{const t=c2(i,100,Zf);return i.ease=t.ease,i.duration=ur(t.duration),i.type="keyframes",i};function av({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:h,restDelta:f=.5,restSpeed:p}){const g=i[0],v={done:!1,value:g},b=R=>u!==void 0&&R<u||h!==void 0&&R>h,E=R=>u===void 0?h:h===void 0||Math.abs(u-R)<Math.abs(h-R)?u:h;let w=e*t;const x=g+w,C=l===void 0?x:l(x);C!==x&&(w=C-g);const N=R=>-w*Math.exp(-R/n),O=R=>C+N(R),U=R=>{const M=N(R),L=O(R);v.done=Math.abs(M)<=f,v.value=v.done?C:L};let G,Y;const D=R=>{b(v.value)&&(G=R,Y=Zf({keyframes:[v.value,E(v.value)],velocity:Wx(O,R,v.value),damping:s,stiffness:a,restDelta:f,restSpeed:p}))};return D(0),{calculatedDuration:null,next:R=>{let M=!1;return!Y&&G===void 0&&(M=!0,U(R),D(R)),G!==void 0&&R>=G?Y.next(R-G):(!M&&U(R),v)}}}function y2(i,t,e){const n=[],s=e||fr.mix||Yx,a=i.length-1;for(let l=0;l<a;l++){let u=s(i[l],i[l+1]);if(t){const h=Array.isArray(t)?t[l]||Ii:t;u=yh(h,u)}n.push(u)}return n}function v2(i,t,{clamp:e=!0,ease:n,mixer:s}={}){const a=i.length;if(v_(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=i[0]===i[1];i[0]>i[a-1]&&(i=[...i].reverse(),t=[...t].reverse());const u=y2(t,n,s),h=u.length,f=p=>{if(l&&p<i[0])return t[0];let g=0;if(h>1)for(;g<i.length-2&&!(p<i[g+1]);g++);const v=Ju(i[g],i[g+1],p);return u[g](v)};return e?p=>f(ks(i[0],i[a-1],p)):f}function _2(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const s=Ju(0,t,n);i.push(Se(e,1,s))}}function b2(i){const t=[0];return _2(t,i.length-1),t}function A2(i,t){return i.map(e=>e*t)}function E2(i,t){return i.map(()=>t||Vx).splice(0,i.length-1)}function Uu({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const s=Nk(n)?n.map(Bw):Bw(n),a={done:!1,value:t[0]},l=A2(e&&e.length===t.length?e:b2(t),i),u=v2(l,t,{ease:Array.isArray(s)?s:E2(t,s)});return{calculatedDuration:i,next:h=>(a.value=u(h),a.done=h>=i,a)}}const w2=i=>i!==null;function R_(i,{repeat:t,repeatType:e="loop"},n,s=1){const a=i.filter(w2),u=s<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!u||n===void 0?a[u]:n}const T2={decay:av,inertia:av,tween:Uu,keyframes:Uu,spring:Zf};function Qx(i){typeof i.type=="string"&&(i.type=T2[i.type])}class I_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const S2=i=>i/100;class D_ extends I_{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==On.now()&&this.tick(On.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Qx(t);const{type:e=Uu,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=t;let{keyframes:u}=t;const h=e||Uu;h!==Uu&&typeof u[0]!="number"&&(this.mixKeyframes=yh(S2,Yx(u[0],u[1])),u=[0,100]);const f=h({...t,keyframes:u});a==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=C_(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:p,repeat:g,repeatType:v,repeatDelay:b,type:E,onUpdate:w,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const C=this.currentTime-f*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?C<0:C>s;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let O=this.currentTime,U=n;if(g){const R=Math.min(this.currentTime,s)/u;let M=Math.floor(R),L=R%1;!L&&R>=1&&(L=1),L===1&&M--,M=Math.min(M,g+1),M%2&&(v==="reverse"?(L=1-L,b&&(L-=b/u)):v==="mirror"&&(U=l)),O=ks(0,1,L)*u}const G=N?{done:!1,value:p[0]}:U.next(O);a&&(G.value=a(G.value));let{done:Y}=G;!N&&h!==null&&(Y=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return D&&E!==av&&(G.value=R_(p,this.options,x,this.speed)),w&&w(G.value),D&&this.finish(),G}then(t,e){return this.finished.then(t,e)}get duration(){return Ri(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ri(t)}get time(){return Ri(this.currentTime)}set time(t){t=ur(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(On.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Ri(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=l2,startTime:e}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(On.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function x2(i){for(let t=1;t<i.length;t++)i[t]??(i[t]=i[t-1])}const uo=i=>i*180/Math.PI,ov=i=>{const t=uo(Math.atan2(i[1],i[0]));return lv(t)},C2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:ov,rotateZ:ov,skewX:i=>uo(Math.atan(i[1])),skewY:i=>uo(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},lv=i=>(i=i%360,i<0&&(i+=360),i),Yw=ov,Kw=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),Ww=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),R2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Kw,scaleY:Ww,scale:i=>(Kw(i)+Ww(i))/2,rotateX:i=>lv(uo(Math.atan2(i[6],i[5]))),rotateY:i=>lv(uo(Math.atan2(-i[2],i[0]))),rotateZ:Yw,rotate:Yw,skewX:i=>uo(Math.atan(i[4])),skewY:i=>uo(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function cv(i){return i.includes("scale")?1:0}function uv(i,t){if(!i||i==="none")return cv(t);const e=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(e)n=R2,s=e;else{const u=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=C2,s=u}if(!s)return cv(t);const a=n[t],l=s[1].split(",").map(D2);return typeof a=="function"?a(l):l[a]}const I2=(i,t)=>{const{transform:e="none"}=getComputedStyle(i);return uv(e,t)};function D2(i){return parseFloat(i.trim())}const ac=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oc=new Set(ac),Qw=i=>i===rc||i===gt,M2=new Set(["x","y","z"]),P2=ac.filter(i=>!M2.has(i));function N2(i){const t=[];return P2.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const sa={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:(i,{transform:t})=>uv(t,"x"),y:(i,{transform:t})=>uv(t,"y")};sa.translateX=sa.x;sa.translateY=sa.y;const go=new Set;let hv=!1,dv=!1,fv=!1;function Jx(){if(dv){const i=Array.from(go).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const s=N2(n);s.length&&(e.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=e.get(n);s&&s.forEach(([a,l])=>{n.getValue(a)?.set(l)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}dv=!1,hv=!1,go.forEach(i=>i.complete(fv)),go.clear()}function Zx(){go.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(dv=!0)})}function k2(){fv=!0,Zx(),Jx(),fv=!1}class M_{constructor(t,e,n,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(go.add(this),hv||(hv=!0,_e.read(Zx),_e.resolveKeyframes(Jx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&e){const u=n.readValue(e,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),s&&a===void 0&&s.set(t[0])}x2(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),go.delete(this)}cancel(){this.state==="scheduled"&&(go.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const O2=i=>i.startsWith("--");function L2(i,t,e){O2(t)?i.style.setProperty(t,e):i.style[t]=e}const V2=__(()=>window.ScrollTimeline!==void 0),F2={};function U2(i,t){const e=__(i);return()=>F2[t]??e()}const tC=U2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ru=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,Jw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ru([0,.65,.55,1]),circOut:Ru([.55,0,1,.45]),backIn:Ru([.31,.01,.66,-.59]),backOut:Ru([.33,1.53,.69,.99])};function eC(i,t){if(i)return typeof i=="function"?tC()?Kx(i,t):"ease-out":Fx(i)?Ru(i):Array.isArray(i)?i.map(e=>eC(e,t)||Jw.easeOut):Jw[i]}function j2(i,t,e,{delay:n=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:h}={},f=void 0){const p={[t]:e};h&&(p.offset=h);const g=eC(u,s);Array.isArray(g)&&(p.easing=g);const v={delay:n,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),i.animate(p,v)}function nC(i){return typeof i=="function"&&"applyToOptions"in i}function B2({type:i,...t}){return nC(i)&&tC()?i.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class z2 extends I_{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:h}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,v_(typeof t.type!="string");const f=B2(t);this.animation=j2(e,n,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=R_(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):L2(e,n,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Ri(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ri(t)}get time(){return Ri(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ur(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&V2()?(this.animation.timeline=t,Ii):e(this)}}const iC={anticipate:kx,backInOut:Nx,circInOut:Lx};function H2(i){return i in iC}function G2(i){typeof i.ease=="string"&&H2(i.ease)&&(i.ease=iC[i.ease])}const Ty=10;class q2 extends z2{constructor(t){G2(t),Qx(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:s,element:a,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const u=new D_({...l,autoplay:!1}),h=Math.max(Ty,On.now()-this.startTime),f=ks(0,Ty,h-Ty);e.setWithVelocity(u.sample(Math.max(0,h-f)).value,u.sample(h).value,f),u.stop()}}const Zw=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(fa.test(i)||i==="0")&&!i.startsWith("url("));function $2(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function X2(i,t,e,n){const s=i[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=i[i.length-1],l=Zw(s,t),u=Zw(a,t);return!l||!u?!1:$2(i)||(e==="spring"||nC(e))&&n}function pv(i){i.duration=0,i.type="keyframes"}const Y2=new Set(["opacity","clipPath","filter","transform"]),K2=__(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function W2(i){const{motionValue:t,name:e,repeatDelay:n,repeatType:s,damping:a,type:l}=i;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=t.owner.getProps();return K2()&&e&&Y2.has(e)&&(e!=="transform"||!f)&&!h&&!n&&s!=="mirror"&&a!==0&&l!=="inertia"}const Q2=40;class J2 extends I_{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:h,motionValue:f,element:p,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=On.now();const v={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:a,repeatType:l,name:h,motionValue:f,element:p,...g},b=p?.KeyframeResolver||M_;this.keyframeResolver=new b(u,(E,w,x)=>this.onKeyframesResolved(E,w,v,!x),h,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,s){this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:h,isHandoff:f,onUpdate:p}=n;this.resolvedAt=On.now(),X2(t,a,l,u)||((fr.instantAnimations||!h)&&p?.(R_(t,n,e)),t[0]=t[t.length-1],pv(n),n.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Q2?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},b=!f&&W2(v),E=v.motionValue?.owner?.current,w=b?new q2({...v,element:E}):new D_(v);w.finished.then(()=>{this.notifyFinished()}).catch(Ii),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),k2()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function sC(i,t,e,n=0,s=1){const a=Array.from(i).sort((f,p)=>f.sortNodePosition(p)).indexOf(t),l=i.size,u=(l-1)*n;return typeof e=="function"?e(a,l):s===1?a*n:u-a*n}const Z2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tO(i){const t=Z2.exec(i);if(!t)return[,];const[,e,n,s]=t;return[`--${e??n}`,s]}function rC(i,t,e=1){const[n,s]=tO(i);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const l=a.trim();return Sx(l)?parseFloat(l):l}return w_(s)?rC(s,t,e+1):s}const eO={type:"spring",stiffness:500,damping:25,restSpeed:10},nO=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),iO={type:"keyframes",duration:.8},sO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rO=(i,{keyframes:t})=>t.length>2?iO:oc.has(i)?i.startsWith("scale")?nO(t[1]):eO:sO,aO=i=>i!==null;function oO(i,{repeat:t,repeatType:e="loop"},n){const s=i.filter(aO),a=t&&e!=="loop"&&t%2===1?0:s.length-1;return s[a]}function P_(i,t){return i?.[t]??i?.default??i}function lO({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const N_=(i,t,e,n={},s,a)=>l=>{const u=P_(n,i)||{},h=u.delay||n.delay||0;let{elapsed:f=0}=n;f=f-ur(h);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:v=>{t.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:i,motionValue:t,element:a?void 0:s};lO(u)||Object.assign(p,rO(i,p)),p.duration&&(p.duration=ur(p.duration)),p.repeatDelay&&(p.repeatDelay=ur(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(pv(p),p.delay===0&&(g=!0)),(fr.instantAnimations||fr.skipAnimations)&&(g=!0,pv(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,g&&!a&&t.get()!==void 0){const v=oO(p.keyframes,u);if(v!==void 0){_e.update(()=>{p.onUpdate(v),p.onComplete()});return}}return u.isSync?new D_(p):new J2(p)};function tT(i){const t=[{},{}];return i?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function k_(i,t,e,n){if(typeof t=="function"){const[s,a]=tT(n);t=t(e!==void 0?e:i.custom,s,a)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[s,a]=tT(n);t=t(e!==void 0?e:i.custom,s,a)}return t}function kl(i,t,e){const n=i.getProps();return k_(n,t,e!==void 0?e:n.custom,i)}const aC=new Set(["width","height","top","left","right","bottom",...ac]),eT=30,cO=i=>!isNaN(parseFloat(i));class uO{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=On.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=On.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=cO(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new b_);const n=this.events[t].add(e);return t==="change"?()=>{n(),_e.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=On.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>eT)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,eT);return Rx(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $l(i,t){return new uO(i,t)}const mv=i=>Array.isArray(i);function hO(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,$l(e))}function dO(i){return mv(i)?i[i.length-1]||0:i}function fO(i,t){const e=kl(i,t);let{transitionEnd:n={},transition:s={},...a}=e||{};a={...a,...n};for(const l in a){const u=dO(a[l]);hO(i,l,u)}}const Rn=i=>!!(i&&i.getVelocity);function pO(i){return!!(Rn(i)&&i.add)}function gv(i,t){const e=i.getValue("willChange");if(pO(e))return e.add(t);if(!e&&fr.WillChange){const n=new fr.WillChange("auto");i.addValue("willChange",n),n.add(t)}}function O_(i){return i.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const mO="framerAppearId",oC="data-"+O_(mO);function lC(i){return i.props[oC]}function gO({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function cC(i,t,{delay:e=0,transitionOverride:n,type:s}={}){let{transition:a=i.getDefaultTransition(),transitionEnd:l,...u}=t;const h=a?.reduceMotion;n&&(a=n);const f=[],p=s&&i.animationState&&i.animationState.getState()[s];for(const g in u){const v=i.getValue(g,i.latestValues[g]??null),b=u[g];if(b===void 0||p&&gO(p,g))continue;const E={delay:e,...P_(a||{},g)},w=v.get();if(w!==void 0&&!v.isAnimating&&!Array.isArray(b)&&b===w&&!E.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const O=lC(i);if(O){const U=window.MotionHandoffAnimation(O,g,_e);U!==null&&(E.startTime=U,x=!0)}}gv(i,g);const C=h??i.shouldReduceMotion;v.start(N_(g,v,b,C&&aC.has(g)?{type:!1}:E,i,x));const N=v.animation;N&&f.push(N)}return l&&Promise.all(f).then(()=>{_e.update(()=>{l&&fO(i,l)})}),f}function yv(i,t,e={}){const n=kl(i,t,e.type==="exit"?i.presenceContext?.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(s=e.transitionOverride);const a=n?()=>Promise.all(cC(i,n,e)):()=>Promise.resolve(),l=i.variantChildren&&i.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:g}=s;return yO(i,t,h,f,p,g,e)}:()=>Promise.resolve(),{when:u}=s;if(u){const[h,f]=u==="beforeChildren"?[a,l]:[l,a];return h().then(()=>f())}else return Promise.all([a(),l(e.delay)])}function yO(i,t,e=0,n=0,s=0,a=1,l){const u=[];for(const h of i.variantChildren)h.notify("AnimationStart",t),u.push(yv(h,t,{...l,delay:e+(typeof n=="function"?0:n)+sC(i.variantChildren,h,n,s,a)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(u)}function vO(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>yv(i,a,e));n=Promise.all(s)}else if(typeof t=="string")n=yv(i,t,e);else{const s=typeof t=="function"?kl(i,t,e.custom):t;n=Promise.all(cC(i,s,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}const _O={test:i=>i==="auto",parse:i=>i},uC=i=>t=>t.test(i),hC=[rc,gt,xs,Jr,$k,qk,_O],nT=i=>hC.find(uC(i));function bO(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||Cx(i):!0}const AO=new Set(["brightness","contrast","saturate","opacity"]);function EO(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(T_)||[];if(!n)return i;const s=e.replace(n,"");let a=AO.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+s+")"}const wO=/\b([a-z-]*)\(.*?\)/gu,vv={...fa,getAnimatableNone:i=>{const t=i.match(wO);return t?t.map(EO).join(" "):i}},iT={...rc,transform:Math.round},TO={rotate:Jr,rotateX:Jr,rotateY:Jr,rotateZ:Jr,scale:mf,scaleX:mf,scaleY:mf,scaleZ:mf,skew:Jr,skewX:Jr,skewY:Jr,distance:gt,translateX:gt,translateY:gt,translateZ:gt,x:gt,y:gt,z:gt,perspective:gt,transformPerspective:gt,opacity:Zu,originX:Hw,originY:Hw,originZ:gt},L_={borderWidth:gt,borderTopWidth:gt,borderRightWidth:gt,borderBottomWidth:gt,borderLeftWidth:gt,borderRadius:gt,borderTopLeftRadius:gt,borderTopRightRadius:gt,borderBottomRightRadius:gt,borderBottomLeftRadius:gt,width:gt,maxWidth:gt,height:gt,maxHeight:gt,top:gt,right:gt,bottom:gt,left:gt,inset:gt,insetBlock:gt,insetBlockStart:gt,insetBlockEnd:gt,insetInline:gt,insetInlineStart:gt,insetInlineEnd:gt,padding:gt,paddingTop:gt,paddingRight:gt,paddingBottom:gt,paddingLeft:gt,paddingBlock:gt,paddingBlockStart:gt,paddingBlockEnd:gt,paddingInline:gt,paddingInlineStart:gt,paddingInlineEnd:gt,margin:gt,marginTop:gt,marginRight:gt,marginBottom:gt,marginLeft:gt,marginBlock:gt,marginBlockStart:gt,marginBlockEnd:gt,marginInline:gt,marginInlineStart:gt,marginInlineEnd:gt,fontSize:gt,backgroundPositionX:gt,backgroundPositionY:gt,...TO,zIndex:iT,fillOpacity:Zu,strokeOpacity:Zu,numOctaves:iT},SO={...L_,color:Ye,backgroundColor:Ye,outlineColor:Ye,fill:Ye,stroke:Ye,borderColor:Ye,borderTopColor:Ye,borderRightColor:Ye,borderBottomColor:Ye,borderLeftColor:Ye,filter:vv,WebkitFilter:vv},dC=i=>SO[i];function fC(i,t){let e=dC(i);return e!==vv&&(e=fa),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const xO=new Set(["auto","none","0"]);function CO(i,t,e){let n=0,s;for(;n<i.length&&!s;){const a=i[n];typeof a=="string"&&!xO.has(a)&&th(a).values.length&&(s=i[n]),n++}if(s&&e)for(const a of t)i[a]=fC(e,s)}class RO extends M_{constructor(t,e,n,s,a){super(t,e,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let g=t[p];if(typeof g=="string"&&(g=g.trim(),w_(g))){const v=rC(g,e.current);v!==void 0&&(t[p]=v),p===t.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!aC.has(n)||t.length!==2)return;const[s,a]=t,l=nT(s),u=nT(a),h=zw(s),f=zw(a);if(h!==f&&sa[n]){this.needsMeasurement=!0;return}if(l!==u)if(Qw(l)&&Qw(u))for(let p=0;p<t.length;p++){const g=t[p];typeof g=="string"&&(t[p]=parseFloat(g))}else sa[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||bO(t[s]))&&n.push(s);n.length&&CO(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sa[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,l=n[a];n[a]=sa[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,h])=>{t.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function IO(i,t,e){if(i==null)return[];if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const s=e?.[i]??n.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i).filter(n=>n!=null)}const pC=(i,t)=>t&&typeof i=="number"?t.transform(i):i;function _v(i){return xx(i)&&"offsetHeight"in i}const{schedule:V_}=Ux(queueMicrotask,!1),Gi={x:!1,y:!1};function mC(){return Gi.x||Gi.y}function DO(i){return i==="x"||i==="y"?Gi[i]?null:(Gi[i]=!0,()=>{Gi[i]=!1}):Gi.x||Gi.y?null:(Gi.x=Gi.y=!0,()=>{Gi.x=Gi.y=!1})}function gC(i,t){const e=IO(i),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[e,s,()=>n.abort()]}function sT(i){return!(i.pointerType==="touch"||mC())}function MO(i,t,e={}){const[n,s,a]=gC(i,e),l=u=>{if(!sT(u))return;const{target:h}=u,f=t(h,u);if(typeof f!="function"||!h)return;const p=g=>{sT(g)&&(f(g),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,s)};return n.forEach(u=>{u.addEventListener("pointerenter",l,s)}),a}const yC=(i,t)=>t?i===t?!0:yC(i,t.parentElement):!1,F_=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,PO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vC(i){return PO.has(i.tagName)||i.isContentEditable===!0}const kf=new WeakSet;function rT(i){return t=>{t.key==="Enter"&&i(t)}}function Sy(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const NO=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=rT(()=>{if(kf.has(e))return;Sy(e,"down");const s=rT(()=>{Sy(e,"up")}),a=()=>Sy(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function aT(i){return F_(i)&&!mC()}function kO(i,t,e={}){const[n,s,a]=gC(i,e),l=u=>{const h=u.currentTarget;if(!aT(u))return;kf.add(h);const f=t(h,u),p=(b,E)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),kf.has(h)&&kf.delete(h),aT(b)&&typeof f=="function"&&f(b,{success:E})},g=b=>{p(b,h===window||h===document||e.useGlobalTarget||yC(h,b.target))},v=b=>{p(b,!1)};window.addEventListener("pointerup",g,s),window.addEventListener("pointercancel",v,s)};return n.forEach(u=>{(e.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),_v(u)&&(u.addEventListener("focus",f=>NO(f,s)),!vC(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function _C(i){return xx(i)&&"ownerSVGElement"in i}function OO(i){return _C(i)&&i.tagName==="svg"}const LO=[...hC,Ye,fa],VO=i=>LO.find(uC(i)),oT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Il=()=>({x:oT(),y:oT()}),lT=()=>({min:0,max:0}),nn=()=>({x:lT(),y:lT()}),bv={current:null},bC={current:!1},FO=typeof window<"u";function UO(){if(bC.current=!0,!!FO)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>bv.current=i.matches;i.addEventListener("change",t),t()}else bv.current=!1}const jO=new WeakMap;function Pp(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function eh(i){return typeof i=="string"||Array.isArray(i)}const U_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],j_=["initial",...U_];function Np(i){return Pp(i.animate)||j_.some(t=>eh(i[t]))}function AC(i){return!!(Np(i)||i.variants)}function BO(i,t,e){for(const n in t){const s=t[n],a=e[n];if(Rn(s))i.addValue(n,s);else if(Rn(a))i.addValue(n,$l(s,{owner:i}));else if(a!==s)if(i.hasValue(n)){const l=i.getValue(n);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=i.getStaticValue(n);i.addValue(n,$l(l!==void 0?l:s,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const cT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let tp={};function EC(i){tp=i}function zO(){return tp}class HO{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=M_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=On.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,_e.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=Np(e),this.isVariantNode=AC(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(e,{},this);for(const v in g){const b=g[v];h[v]!==void 0&&Rn(b)&&b.set(h[v])}}mount(t){this.current=t,jO.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(bC.current||UO(),this.shouldReduceMotion=bv.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),da(this.notifyUpdate),da(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=oc.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&_e.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in tp){const e=tp[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<cT.length;n++){const s=cT[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=t[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=BO(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=$l(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(Sx(n)||Cx(n))?n=parseFloat(n):!VO(n)&&fa.test(e)&&(n=fC(t,e)),this.setBaseTarget(t,Rn(n)?n.get():n)),Rn(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const a=k_(this.props,e,this.presenceContext?.custom);a&&(n=a[t])}if(e&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Rn(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new b_),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){V_.render(this.render)}}class wC extends HO{constructor(){super(...arguments),this.KeyframeResolver=RO}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){const n=t.style;return n?n[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Rn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class Ta{constructor(t){this.isMounted=!1,this.node=t}update(){}}function TC({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function GO({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function qO(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function xy(i){return i===void 0||i===1}function Av({scale:i,scaleX:t,scaleY:e}){return!xy(i)||!xy(t)||!xy(e)}function oo(i){return Av(i)||SC(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function SC(i){return uT(i.x)||uT(i.y)}function uT(i){return i&&i!=="0%"}function ep(i,t,e){const n=i-e,s=t*n;return e+s}function hT(i,t,e,n,s){return s!==void 0&&(i=ep(i,s,n)),ep(i,e,n)+t}function Ev(i,t=0,e=1,n,s){i.min=hT(i.min,t,e,n,s),i.max=hT(i.max,t,e,n,s)}function xC(i,{x:t,y:e}){Ev(i.x,t.translate,t.scale,t.originPoint),Ev(i.y,e.translate,e.scale,e.originPoint)}const dT=.999999999999,fT=1.0000000000001;function $O(i,t,e,n=!1){const s=e.length;if(!s)return;t.x=t.y=1;let a,l;for(let u=0;u<s;u++){a=e[u],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ml(i,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,xC(i,l)),n&&oo(a.latestValues)&&Ml(i,a.latestValues))}t.x<fT&&t.x>dT&&(t.x=1),t.y<fT&&t.y>dT&&(t.y=1)}function Dl(i,t){i.min=i.min+t,i.max=i.max+t}function pT(i,t,e,n,s=.5){const a=Se(i.min,i.max,s);Ev(i,t,e,a,n)}function Ml(i,t){pT(i.x,t.x,t.scaleX,t.scale,t.originX),pT(i.y,t.y,t.scaleY,t.scale,t.originY)}function CC(i,t){return TC(qO(i.getBoundingClientRect(),t))}function XO(i,t,e){const n=CC(i,e),{scroll:s}=t;return s&&(Dl(n.x,s.offset.x),Dl(n.y,s.offset.y)),n}const YO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KO=ac.length;function WO(i,t,e){let n="",s=!0;for(let a=0;a<KO;a++){const l=ac[a],u=i[l];if(u===void 0)continue;let h=!0;if(typeof u=="number")h=u===(l.startsWith("scale")?1:0);else{const f=parseFloat(u);h=l.startsWith("scale")?f===1:f===0}if(!h||e){const f=pC(u,L_[l]);if(!h){s=!1;const p=YO[l]||l;n+=`${p}(${f}) `}e&&(t[l]=f)}}return n=n.trim(),e?n=e(t,s?"":n):s&&(n="none"),n}function B_(i,t,e){const{style:n,vars:s,transformOrigin:a}=i;let l=!1,u=!1;for(const h in t){const f=t[h];if(oc.has(h)){l=!0;continue}else if(Bx(h)){s[h]=f;continue}else{const p=pC(f,L_[h]);h.startsWith("origin")?(u=!0,a[h]=p):n[h]=p}}if(t.transform||(l||e?n.transform=WO(t,i.transform,e):n.transform&&(n.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=a;n.transformOrigin=`${h} ${f} ${p}`}}function RC(i,{style:t,vars:e},n,s){const a=i.style;let l;for(l in t)a[l]=t[l];s?.applyProjectionStyles(a,n);for(l in e)a.setProperty(l,e[l])}function mT(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const Eu={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(gt.test(i))i=parseFloat(i);else return i;const e=mT(i,t.target.x),n=mT(i,t.target.y);return`${e}% ${n}%`}},QO={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,s=fa.parse(i);if(s.length>5)return n;const a=fa.createTransformer(i),l=typeof s[0]!="number"?1:0,u=e.x.scale*t.x,h=e.y.scale*t.y;s[0+l]/=u,s[1+l]/=h;const f=Se(u,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),a(s)}},wv={borderRadius:{...Eu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Eu,borderTopRightRadius:Eu,borderBottomLeftRadius:Eu,borderBottomRightRadius:Eu,boxShadow:QO};function IC(i,{layout:t,layoutId:e}){return oc.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!wv[i]||i==="opacity")}function z_(i,t,e){const n=i.style,s=t?.style,a={};if(!n)return a;for(const l in n)(Rn(n[l])||s&&Rn(s[l])||IC(l,i)||e?.getValue(l)?.liveStyle!==void 0)&&(a[l]=n[l]);return a}function JO(i){return window.getComputedStyle(i)}class ZO extends wC{constructor(){super(...arguments),this.type="html",this.renderInstance=RC}readValueFromInstance(t,e){if(oc.has(e))return this.projection?.isProjecting?cv(e):I2(t,e);{const n=JO(t),s=(Bx(e)?n.getPropertyValue(e):n[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return CC(t,e)}build(t,e,n){B_(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return z_(t,e,n)}}const tL={offset:"stroke-dashoffset",array:"stroke-dasharray"},eL={offset:"strokeDashoffset",array:"strokeDasharray"};function nL(i,t,e=1,n=0,s=!0){i.pathLength=1;const a=s?tL:eL;i[a.offset]=`${-n}`,i[a.array]=`${t} ${e}`}const iL=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function DC(i,{attrX:t,attrY:e,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},h,f,p){if(B_(i,u,f),h){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:g,style:v}=i;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=p?.transformBox??"fill-box",delete g.transformBox);for(const b of iL)g[b]!==void 0&&(v[b]=g[b],delete g[b]);t!==void 0&&(g.x=t),e!==void 0&&(g.y=e),n!==void 0&&(g.scale=n),s!==void 0&&nL(g,s,a,l,!1)}const MC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),PC=i=>typeof i=="string"&&i.toLowerCase()==="svg";function sL(i,t,e,n){RC(i,t,void 0,n);for(const s in t.attrs)i.setAttribute(MC.has(s)?s:O_(s),t.attrs[s])}function NC(i,t,e){const n=z_(i,t,e);for(const s in i)if(Rn(i[s])||Rn(t[s])){const a=ac.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=i[s]}return n}class rL extends wC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(oc.has(e)){const n=dC(e);return n&&n.default||0}return e=MC.has(e)?e:O_(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return NC(t,e,n)}build(t,e,n){DC(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,s){sL(t,e,n,s)}mount(t){this.isSVGTag=PC(t.tagName),super.mount(t)}}const aL=j_.length;function kC(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?kC(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<aL;e++){const n=j_[e],s=i.props[n];(eh(s)||s===!1)&&(t[n]=s)}return t}function OC(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}const oL=[...U_].reverse(),lL=U_.length;function cL(i){return t=>Promise.all(t.map(({animation:e,options:n})=>vO(i,e,n)))}function uL(i){let t=cL(i),e=gT(),n=!0;const s=h=>(f,p)=>{const g=kl(i,p,h==="exit"?i.presenceContext?.custom:void 0);if(g){const{transition:v,transitionEnd:b,...E}=g;f={...f,...E,...b}}return f};function a(h){t=h(i)}function l(h){const{props:f}=i,p=kC(i.parent)||{},g=[],v=new Set;let b={},E=1/0;for(let x=0;x<lL;x++){const C=oL[x],N=e[C],O=f[C]!==void 0?f[C]:p[C],U=eh(O),G=C===h?N.isActive:null;G===!1&&(E=x);let Y=O===p[C]&&O!==f[C]&&U;if(Y&&n&&i.manuallyAnimateOnMount&&(Y=!1),N.protectedKeys={...b},!N.isActive&&G===null||!O&&!N.prevProp||Pp(O)||typeof O=="boolean")continue;const D=hL(N.prevProp,O);let R=D||C===h&&N.isActive&&!Y&&U||x>E&&U,M=!1;const L=Array.isArray(O)?O:[O];let V=L.reduce(s(C),{});G===!1&&(V={});const{prevResolvedValues:z={}}=N,F={...z,...V},bt=Z=>{R=!0,v.has(Z)&&(M=!0,v.delete(Z)),N.needsAnimating[Z]=!0;const ut=i.getValue(Z);ut&&(ut.liveStyle=!1)};for(const Z in F){const ut=V[Z],Tt=z[Z];if(b.hasOwnProperty(Z))continue;let Mt=!1;mv(ut)&&mv(Tt)?Mt=!OC(ut,Tt):Mt=ut!==Tt,Mt?ut!=null?bt(Z):v.add(Z):ut!==void 0&&v.has(Z)?bt(Z):N.protectedKeys[Z]=!0}N.prevProp=O,N.prevResolvedValues=V,N.isActive&&(b={...b,...V}),n&&i.blockInitialAnimation&&(R=!1);const Bt=Y&&D;R&&(!Bt||M)&&g.push(...L.map(Z=>{const ut={type:C};if(typeof Z=="string"&&n&&!Bt&&i.manuallyAnimateOnMount&&i.parent){const{parent:Tt}=i,Mt=kl(Tt,Z);if(Tt.enteringChildren&&Mt){const{delayChildren:H}=Mt.transition||{};ut.delay=sC(Tt.enteringChildren,i,H)}}return{animation:Z,options:ut}}))}if(v.size){const x={};if(typeof f.initial!="boolean"){const C=kl(i,Array.isArray(f.initial)?f.initial[0]:f.initial);C&&C.transition&&(x.transition=C.transition)}v.forEach(C=>{const N=i.getBaseTarget(C),O=i.getValue(C);O&&(O.liveStyle=!0),x[C]=N??null}),g.push({animation:x})}let w=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!i.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(g):Promise.resolve()}function u(h,f){if(e[h].isActive===f)return Promise.resolve();i.variantChildren?.forEach(g=>g.animationState?.setActive(h,f)),e[h].isActive=f;const p=l(h);for(const g in e)e[g].protectedKeys={};return p}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>e,reset:()=>{e=gT()}}}function hL(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!OC(t,i):!1}function ao(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gT(){return{animate:ao(!0),whileInView:ao(),whileHover:ao(),whileTap:ao(),whileDrag:ao(),whileFocus:ao(),exit:ao()}}function yT(i,t){i.min=t.min,i.max=t.max}function Hi(i,t){yT(i.x,t.x),yT(i.y,t.y)}function vT(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}const LC=1e-4,dL=1-LC,fL=1+LC,VC=.01,pL=0-VC,mL=0+VC;function Ln(i){return i.max-i.min}function gL(i,t,e){return Math.abs(i-t)<=e}function _T(i,t,e,n=.5){i.origin=n,i.originPoint=Se(t.min,t.max,i.origin),i.scale=Ln(e)/Ln(t),i.translate=Se(e.min,e.max,i.origin)-i.originPoint,(i.scale>=dL&&i.scale<=fL||isNaN(i.scale))&&(i.scale=1),(i.translate>=pL&&i.translate<=mL||isNaN(i.translate))&&(i.translate=0)}function ju(i,t,e,n){_T(i.x,t.x,e.x,n?n.originX:void 0),_T(i.y,t.y,e.y,n?n.originY:void 0)}function bT(i,t,e){i.min=e.min+t.min,i.max=i.min+Ln(t)}function yL(i,t,e){bT(i.x,t.x,e.x),bT(i.y,t.y,e.y)}function AT(i,t,e){i.min=t.min-e.min,i.max=i.min+Ln(t)}function np(i,t,e){AT(i.x,t.x,e.x),AT(i.y,t.y,e.y)}function ET(i,t,e,n,s){return i-=t,i=ep(i,1/e,n),s!==void 0&&(i=ep(i,1/s,n)),i}function vL(i,t=0,e=1,n=.5,s,a=i,l=i){if(xs.test(t)&&(t=parseFloat(t),t=Se(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=Se(a.min,a.max,n);i===a&&(u-=t),i.min=ET(i.min,t,e,u,s),i.max=ET(i.max,t,e,u,s)}function wT(i,t,[e,n,s],a,l){vL(i,t[e],t[n],t[s],t.scale,a,l)}const _L=["x","scaleX","originX"],bL=["y","scaleY","originY"];function TT(i,t,e,n){wT(i.x,t,_L,e?e.x:void 0,n?n.x:void 0),wT(i.y,t,bL,e?e.y:void 0,n?n.y:void 0)}function ST(i){return i.translate===0&&i.scale===1}function FC(i){return ST(i.x)&&ST(i.y)}function xT(i,t){return i.min===t.min&&i.max===t.max}function AL(i,t){return xT(i.x,t.x)&&xT(i.y,t.y)}function CT(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function UC(i,t){return CT(i.x,t.x)&&CT(i.y,t.y)}function RT(i){return Ln(i.x)/Ln(i.y)}function IT(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}function Ti(i){return[i("x"),i("y")]}function EL(i,t,e){let n="";const s=i.x.translate/t.x,a=i.y.translate/t.y,l=e?.z||0;if((s||a||l)&&(n=`translate3d(${s}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:p,rotateX:g,rotateY:v,skewX:b,skewY:E}=e;f&&(n=`perspective(${f}px) ${n}`),p&&(n+=`rotate(${p}deg) `),g&&(n+=`rotateX(${g}deg) `),v&&(n+=`rotateY(${v}deg) `),b&&(n+=`skewX(${b}deg) `),E&&(n+=`skewY(${E}deg) `)}const u=i.x.scale*t.x,h=i.y.scale*t.y;return(u!==1||h!==1)&&(n+=`scale(${u}, ${h})`),n||"none"}const jC=["TopLeft","TopRight","BottomLeft","BottomRight"],wL=jC.length,DT=i=>typeof i=="string"?parseFloat(i):i,MT=i=>typeof i=="number"||gt.test(i);function TL(i,t,e,n,s,a){s?(i.opacity=Se(0,e.opacity??1,SL(n)),i.opacityExit=Se(t.opacity??1,0,xL(n))):a&&(i.opacity=Se(t.opacity??1,e.opacity??1,n));for(let l=0;l<wL;l++){const u=`border${jC[l]}Radius`;let h=PT(t,u),f=PT(e,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||MT(h)===MT(f)?(i[u]=Math.max(Se(DT(h),DT(f),n),0),(xs.test(f)||xs.test(h))&&(i[u]+="%")):i[u]=f}(t.rotate||e.rotate)&&(i.rotate=Se(t.rotate||0,e.rotate||0,n))}function PT(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const SL=BC(0,.5,Ox),xL=BC(.5,.95,Ii);function BC(i,t,e){return n=>n<i?0:n>t?1:e(Ju(i,t,n))}function CL(i,t,e){const n=Rn(i)?i:$l(i);return n.start(N_("",n,t,e)),n.animation}function nh(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}const RL=(i,t)=>i.depth-t.depth;class IL{constructor(){this.children=[],this.isDirty=!1}add(t){g_(this.children,t),this.isDirty=!0}remove(t){y_(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(RL),this.isDirty=!1,this.children.forEach(t)}}function DL(i,t){const e=On.now(),n=({timestamp:s})=>{const a=s-e;a>=t&&(da(n),i(a-t))};return _e.setup(n,!0),()=>da(n)}function Of(i){return Rn(i)?i.get():i}class ML{constructor(){this.members=[]}add(t){g_(this.members,t),t.scheduleRender()}remove(t){if(y_(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let n;for(let s=e;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const s=n.options.layoutDependency,a=t.options.layoutDependency;s!==void 0&&a!==void 0&&s===a||(t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:u}=t.options;u===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Lf={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Cy=["","X","Y","Z"],PL=1e3;let NL=0;function Ry(i,t,e,n){const{latestValues:s}=t;s[i]&&(e[i]=s[i],t.setStaticValue(i,0),n&&(n[i]=0))}function zC(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=lC(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:a}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",_e,!(s||a))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&zC(n)}function HC({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(l={},u=t?.()){this.id=NL++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(LL),this.nodes.forEach(jL),this.nodes.forEach(BL),this.nodes.forEach(VL)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new IL)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new b_),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const h=this.eventHandlers.get(l);h&&h.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=_C(l)&&!OO(l),this.instance=l;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),i){let p,g=0;const v=()=>this.root.updateBlockedByResize=!1;_e.read(()=>{g=window.innerWidth}),i(l,()=>{const b=window.innerWidth;b!==g&&(g=b,this.root.updateBlockedByResize=!0,p&&p(),p=DL(v,250),Lf.hasAnimatedSinceResize&&(Lf.hasAnimatedSinceResize=!1,this.nodes.forEach(OT)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||f.getDefaultTransition()||$L,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=f.getProps(),C=!this.targetLayout||!UC(this.targetLayout,b),N=!g&&v;if(this.options.layoutRoot||this.resumeFrom||N||g&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...P_(E,"layout"),onPlay:w,onComplete:x};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(p,N)}else g||OT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zL),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(UL),this.nodes.forEach(kL),this.nodes.forEach(OL)):this.nodes.forEach(kT),this.clearAllSnapshots();const u=On.now();gn.delta=ks(0,1e3/60,u-gn.timestamp),gn.timestamp=u,gn.isProcessing=!0,_y.update.process(gn),_y.preRender.process(gn),_y.render.process(gn),gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,V_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FL),this.sharedNodes.forEach(HL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ln(this.snapshot.measuredBox.x)&&!Ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=nn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!FC(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||oo(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return l&&(h=this.removeTransform(h)),XL(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return nn();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(YL))){const{scroll:f}=this.root;f&&(Dl(u.x,f.offset.x),Dl(u.y,f.offset.y))}return u}removeElementScroll(l){const u=nn();if(Hi(u,l),this.scroll?.wasRoot)return u;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:g}=f;f!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&Hi(u,l),Dl(u.x,p.offset.x),Dl(u.y,p.offset.y))}return u}applyTransform(l,u=!1){const h=nn();Hi(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Ml(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),oo(p.latestValues)&&Ml(h,p.latestValues)}return oo(this.latestValues)&&Ml(h,this.latestValues),h}removeTransform(l){const u=nn();Hi(u,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!oo(f.latestValues))continue;Av(f.latestValues)&&f.updateSnapshot();const p=nn(),g=f.measurePageBox();Hi(p,g),TT(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return oo(this.latestValues)&&TT(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!this.layout||!(p||g))return;this.resolvedRelativeTargetAt=gn.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nn(),this.targetWithTransforms=nn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hi(this.target,this.layout.layoutBox),xC(this.target,this.targetDelta)):Hi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Av(this.parent.latestValues)||SC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,h){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),np(this.relativeTargetOrigin,u,h),Hi(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===gn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Hi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;$O(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=nn());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vT(this.prevProjectionDelta.x,this.projectionDelta.x),vT(this.prevProjectionDelta.y,this.projectionDelta.y)),ju(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!IT(this.projectionDelta.x,this.prevProjectionDelta.x)||!IT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Il(),this.projectionDelta=Il(),this.projectionDeltaWithTransform=Il()}setAnimationOrigin(l,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},g=Il();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=nn(),b=h?h.source:void 0,E=this.layout?this.layout.source:void 0,w=b!==E,x=this.getStack(),C=!x||x.members.length<=1,N=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(qL));this.animationProgress=0;let O;this.mixTargetDelta=U=>{const G=U/1e3;LT(g.x,l.x,G),LT(g.y,l.y,G),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(np(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GL(this.relativeTarget,this.relativeTargetOrigin,v,G),O&&AL(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=nn()),Hi(O,this.relativeTarget)),w&&(this.animationValues=p,TL(p,f,this.latestValues,G,N,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_e.update(()=>{Lf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$l(0)),this.currentAnimation=CL(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=l;if(!(!u||!h||!f)){if(this!==l&&this.layout&&f&&GC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||nn();const g=Ln(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+g;const v=Ln(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+v}Hi(u,h),Ml(u,p),ju(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new ML),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&Ry("z",l,f,this.animationValues);for(let p=0;p<Cy.length;p++)Ry(`rotate${Cy[p]}`,l,f,this.animationValues),Ry(`skew${Cy[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Of(u?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Of(u?.pointerEvents)||""),this.hasProjected&&!oo(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let g=EL(this.projectionDeltaWithTransform,this.treeScale,p);h&&(g=h(p,g)),l.transform=g;const{x:v,y:b}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,f.animationValues?l.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const E in wv){if(p[E]===void 0)continue;const{correct:w,applyTo:x,isCSSVariable:C}=wv[E],N=g==="none"?p[E]:w(p[E],f);if(x){const O=x.length;for(let U=0;U<O;U++)l[x[U]]=N}else C?this.options.visualElement.renderState.vars[E]=N:l[E]=N}this.options.layoutId&&(l.pointerEvents=f===this?Of(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(NT),this.root.sharedNodes.clear()}}}function kL(i){i.updateLayout()}function OL(i){const t=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=i.layout,{animationType:s}=i.options,a=t.source!==i.layout.source;s==="size"?Ti(p=>{const g=a?t.measuredBox[p]:t.layoutBox[p],v=Ln(g);g.min=e[p].min,g.max=g.min+v}):GC(s,t.layoutBox,e)&&Ti(p=>{const g=a?t.measuredBox[p]:t.layoutBox[p],v=Ln(e[p]);g.max=g.min+v,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[p].max=i.relativeTarget[p].min+v)});const l=Il();ju(l,e,t.layoutBox);const u=Il();a?ju(u,i.applyTransform(n,!0),t.measuredBox):ju(u,e,t.layoutBox);const h=!FC(l);let f=!1;if(!i.resumeFrom){const p=i.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:v}=p;if(g&&v){const b=nn();np(b,t.layoutBox,g.layoutBox);const E=nn();np(E,e,v.layoutBox),UC(b,E)||(f=!0),p.options.layoutRoot&&(i.relativeTarget=E,i.relativeTargetOrigin=b,i.relativeParent=p)}}}i.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:u,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(i.isLead()){const{onExitComplete:e}=i.options;e&&e()}i.options.transition=void 0}function LL(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function VL(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function FL(i){i.clearSnapshot()}function NT(i){i.clearMeasurements()}function kT(i){i.isLayoutDirty=!1}function UL(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function OT(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function jL(i){i.resolveTargetDelta()}function BL(i){i.calcProjection()}function zL(i){i.resetSkewAndRotation()}function HL(i){i.removeLeadSnapshot()}function LT(i,t,e){i.translate=Se(t.translate,0,e),i.scale=Se(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function VT(i,t,e,n){i.min=Se(t.min,e.min,n),i.max=Se(t.max,e.max,n)}function GL(i,t,e,n){VT(i.x,t.x,e.x,n),VT(i.y,t.y,e.y,n)}function qL(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const $L={duration:.45,ease:[.4,0,.1,1]},FT=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),UT=FT("applewebkit/")&&!FT("chrome/")?Math.round:Ii;function jT(i){i.min=UT(i.min),i.max=UT(i.max)}function XL(i){jT(i.x),jT(i.y)}function GC(i,t,e){return i==="position"||i==="preserve-aspect"&&!gL(RT(t),RT(e),.2)}function YL(i){return i!==i.root&&i.scroll?.wasRoot}const KL=HC({attachResizeListener:(i,t)=>nh(i,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Iy={current:void 0},qC=HC({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!Iy.current){const i=new KL({});i.mount(window),i.setOptions({layoutScroll:!0}),Iy.current=i}return Iy.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),H_=B.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function BT(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function WL(...i){return t=>{let e=!1;const n=i.map(s=>{const a=BT(s,t);return!e&&typeof a=="function"&&(e=!0),a});if(e)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():BT(i[s],null)}}}}function QL(...i){return B.useCallback(WL(...i),i)}class JL extends B.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,s=_v(n)&&n.offsetWidth||0,a=_v(n)&&n.offsetHeight||0,l=this.props.sizeRef.current;l.height=e.offsetHeight||0,l.width=e.offsetWidth||0,l.top=e.offsetTop,l.left=e.offsetLeft,l.right=s-l.width-l.left,l.bottom=a-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function ZL({children:i,isPresent:t,anchorX:e,anchorY:n,root:s}){const a=B.useId(),l=B.useRef(null),u=B.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=B.useContext(H_),f=i.props?.ref??i?.ref,p=QL(l,f);return B.useInsertionEffect(()=>{const{width:g,height:v,top:b,left:E,right:w,bottom:x}=u.current;if(t||!l.current||!g||!v)return;const C=e==="left"?`left: ${E}`:`right: ${w}`,N=n==="bottom"?`bottom: ${x}`:`top: ${b}`;l.current.dataset.motionPopId=a;const O=document.createElement("style");h&&(O.nonce=h);const U=s??document.head;return U.appendChild(O),O.sheet&&O.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${v}px !important;
            ${C}px !important;
            ${N}px !important;
          }
        `),()=>{U.contains(O)&&U.removeChild(O)}},[t]),k.jsx(JL,{isPresent:t,childRef:l,sizeRef:u,children:B.cloneElement(i,{ref:p})})}const tV=({children:i,initial:t,isPresent:e,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:l,anchorX:u,anchorY:h,root:f})=>{const p=m_(eV),g=B.useId();let v=!0,b=B.useMemo(()=>(v=!1,{id:g,initial:t,isPresent:e,custom:s,onExitComplete:E=>{p.set(E,!0);for(const w of p.values())if(!w)return;n&&n()},register:E=>(p.set(E,!1),()=>p.delete(E))}),[e,p,n]);return a&&v&&(b={...b}),B.useMemo(()=>{p.forEach((E,w)=>p.set(w,!1))},[e]),B.useEffect(()=>{!e&&!p.size&&n&&n()},[e]),l==="popLayout"&&(i=k.jsx(ZL,{isPresent:e,anchorX:u,anchorY:h,root:f,children:i})),k.jsx(Mp.Provider,{value:b,children:i})};function eV(){return new Map}function $C(i=!0){const t=B.useContext(Mp);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,a=B.useId();B.useEffect(()=>{if(i)return s(a)},[i]);const l=B.useCallback(()=>i&&n&&n(a),[a,n,i]);return!e&&n?[!1,l]:[!0]}const gf=i=>i.key||"";function zT(i){const t=[];return B.Children.forEach(i,e=>{B.isValidElement(e)&&t.push(e)}),t}const nV=({children:i,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1,anchorX:u="left",anchorY:h="top",root:f})=>{const[p,g]=$C(l),v=B.useMemo(()=>zT(i),[i]),b=l&&!p?[]:v.map(gf),E=B.useRef(!0),w=B.useRef(v),x=m_(()=>new Map),C=B.useRef(new Set),[N,O]=B.useState(v),[U,G]=B.useState(v);Tx(()=>{E.current=!1,w.current=v;for(let R=0;R<U.length;R++){const M=gf(U[R]);b.includes(M)?(x.delete(M),C.current.delete(M)):x.get(M)!==!0&&x.set(M,!1)}},[U,b.length,b.join("-")]);const Y=[];if(v!==N){let R=[...v];for(let M=0;M<U.length;M++){const L=U[M],V=gf(L);b.includes(V)||(R.splice(M,0,L),Y.push(L))}return a==="wait"&&Y.length&&(R=Y),G(zT(R)),O(v),null}const{forceRender:D}=B.useContext(p_);return k.jsx(k.Fragment,{children:U.map(R=>{const M=gf(R),L=l&&!p?!1:v===U||b.includes(M),V=()=>{if(C.current.has(M))return;if(C.current.add(M),x.has(M))x.set(M,!0);else return;let z=!0;x.forEach(F=>{F||(z=!1)}),z&&(D?.(),G(w.current),l&&g?.(),n&&n())};return k.jsx(tV,{isPresent:L,initial:!E.current||e?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:f,onExitComplete:L?void 0:V,anchorX:u,anchorY:h,children:R},M)})})},XC=B.createContext({strict:!1}),HT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let GT=!1;function iV(){if(GT)return;const i={};for(const t in HT)i[t]={isEnabled:e=>HT[t].some(n=>!!e[n])};EC(i),GT=!0}function YC(){return iV(),zO()}function sV(i){const t=YC();for(const e in i)t[e]={...t[e],...i[e]};EC(t)}const rV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ip(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||rV.has(i)}let KC=i=>!ip(i);function aV(i){typeof i=="function"&&(KC=t=>t.startsWith("on")?!ip(t):i(t))}try{aV(require("@emotion/is-prop-valid").default)}catch{}function oV(i,t,e){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(KC(s)||e===!0&&ip(s)||!t&&!ip(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}const kp=B.createContext({});function lV(i,t){if(Np(i)){const{initial:e,animate:n}=i;return{initial:e===!1||eh(e)?e:void 0,animate:eh(n)?n:void 0}}return i.inherit!==!1?t:{}}function cV(i){const{initial:t,animate:e}=lV(i,B.useContext(kp));return B.useMemo(()=>({initial:t,animate:e}),[qT(t),qT(e)])}function qT(i){return Array.isArray(i)?i.join(" "):i}const G_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function WC(i,t,e){for(const n in t)!Rn(t[n])&&!IC(n,e)&&(i[n]=t[n])}function uV({transformTemplate:i},t){return B.useMemo(()=>{const e=G_();return B_(e,t,i),Object.assign({},e.vars,e.style)},[t])}function hV(i,t){const e=i.style||{},n={};return WC(n,e,i),Object.assign(n,uV(i,t)),n}function dV(i,t){const e={},n=hV(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}const QC=()=>({...G_(),attrs:{}});function fV(i,t,e,n){const s=B.useMemo(()=>{const a=QC();return DC(a,t,PC(n),i.transformTemplate,i.style),{...a.attrs,style:{...a.style}}},[t]);if(i.style){const a={};WC(a,i.style,i),s.style={...a,...s.style}}return s}const pV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function q_(i){return typeof i!="string"||i.includes("-")?!1:!!(pV.indexOf(i)>-1||/[A-Z]/u.test(i))}function mV(i,t,e,{latestValues:n},s,a=!1,l){const h=(l??q_(i)?fV:dV)(t,n,s,i),f=oV(t,typeof i=="string",a),p=i!==B.Fragment?{...f,...h,ref:e}:{},{children:g}=t,v=B.useMemo(()=>Rn(g)?g.get():g,[g]);return B.createElement(i,{...p,children:v})}function gV({scrapeMotionValuesFromProps:i,createRenderState:t},e,n,s){return{latestValues:yV(e,n,s,i),renderState:t()}}function yV(i,t,e,n){const s={},a=n(i,{});for(const v in a)s[v]=Of(a[v]);let{initial:l,animate:u}=i;const h=Np(i),f=AC(i);t&&f&&!h&&i.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const g=p?u:l;if(g&&typeof g!="boolean"&&!Pp(g)){const v=Array.isArray(g)?g:[g];for(let b=0;b<v.length;b++){const E=k_(i,v[b]);if(E){const{transitionEnd:w,transition:x,...C}=E;for(const N in C){let O=C[N];if(Array.isArray(O)){const U=p?O.length-1:0;O=O[U]}O!==null&&(s[N]=O)}for(const N in w)s[N]=w[N]}}}return s}const JC=i=>(t,e)=>{const n=B.useContext(kp),s=B.useContext(Mp),a=()=>gV(i,t,n,s);return e?a():m_(a)},vV=JC({scrapeMotionValuesFromProps:z_,createRenderState:G_}),_V=JC({scrapeMotionValuesFromProps:NC,createRenderState:QC}),bV=Symbol.for("motionComponentSymbol");function AV(i,t,e){const n=B.useRef(e);B.useInsertionEffect(()=>{n.current=e});const s=B.useRef(null);return B.useCallback(a=>{a&&i.onMount?.(a),t&&(a?t.mount(a):t.unmount());const l=n.current;if(typeof l=="function")if(a){const u=l(a);typeof u=="function"&&(s.current=u)}else s.current?(s.current(),s.current=null):l(a);else l&&(l.current=a)},[t])}const ZC=B.createContext({});function Iu(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function EV(i,t,e,n,s,a){const{visualElement:l}=B.useContext(kp),u=B.useContext(XC),h=B.useContext(Mp),f=B.useContext(H_).reducedMotion,p=B.useRef(null),g=B.useRef(!1);n=n||u.renderer,!p.current&&n&&(p.current=n(i,{visualState:t,parent:l,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f,isSVG:a}),g.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const v=p.current,b=B.useContext(ZC);v&&!v.projection&&s&&(v.type==="html"||v.type==="svg")&&wV(p.current,e,s,b);const E=B.useRef(!1);B.useInsertionEffect(()=>{v&&E.current&&v.update(e,h)});const w=e[oC],x=B.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return Tx(()=>{g.current=!0,v&&(E.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),x.current&&v.animationState&&v.animationState.animateChanges())}),B.useEffect(()=>{v&&(!x.current&&v.animationState&&v.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),x.current=!1),v.enteringChildren=void 0)}),v}function wV(i,t,e,n){const{layoutId:s,layout:a,drag:l,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:tR(i.parent)),i.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||u&&Iu(u),visualElement:i,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:h,layoutRoot:f})}function tR(i){if(i)return i.options.allowProjection!==!1?i.projection:tR(i.parent)}function Dy(i,{forwardMotionProps:t=!1,type:e}={},n,s){n&&sV(n);const a=e?e==="svg":q_(i),l=a?_V:vV;function u(f,p){let g;const v={...B.useContext(H_),...f,layoutId:TV(f)},{isStatic:b}=v,E=cV(f),w=l(f,b);if(!b&&wx){SV();const x=xV(v);g=x.MeasureLayout,E.visualElement=EV(i,w,v,s,x.ProjectionNode,a)}return k.jsxs(kp.Provider,{value:E,children:[g&&E.visualElement?k.jsx(g,{visualElement:E.visualElement,...v}):null,mV(i,f,AV(w,E.visualElement,p),w,b,t,a)]})}u.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const h=B.forwardRef(u);return h[bV]=i,h}function TV({layoutId:i}){const t=B.useContext(p_).id;return t&&i!==void 0?t+"-"+i:i}function SV(i,t){B.useContext(XC).strict}function xV(i){const t=YC(),{drag:e,layout:n}=t;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(i)||n?.isEnabled(i)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function CV(i,t){if(typeof Proxy>"u")return Dy;const e=new Map,n=(a,l)=>Dy(a,l,i,t),s=(a,l)=>n(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?n:(e.has(l)||e.set(l,Dy(l,void 0,i,t)),e.get(l))})}const RV=(i,t)=>t.isSVG??q_(i)?new rL(t):new ZO(t,{allowProjection:i!==B.Fragment});class IV extends Ta{constructor(t){super(t),t.animationState||(t.animationState=uL(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let DV=0;class MV extends Ta{constructor(){super(...arguments),this.id=DV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const PV={animation:{Feature:IV},exit:{Feature:MV}};function bh(i){return{point:{x:i.pageX,y:i.pageY}}}const NV=i=>t=>F_(t)&&i(t,bh(t));function Bu(i,t,e,n){return nh(i,t,NV(e),n)}const eR=({current:i})=>i?i.ownerDocument.defaultView:null,$T=(i,t)=>Math.abs(i-t);function kV(i,t){const e=$T(i.x,t.x),n=$T(i.y,t.y);return Math.sqrt(e**2+n**2)}const XT=new Set(["auto","scroll"]);class nR{constructor(t,e,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=b=>{this.handleScroll(b.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Py(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,w=kV(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!w)return;const{point:x}=b,{timestamp:C}=gn;this.history.push({...x,timestamp:C});const{onStart:N,onMove:O}=this.handlers;E||(N&&N(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,b)},this.handlePointerMove=(b,E)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=My(E,this.transformPagePoint),_e.update(this.updatePoint,!0)},this.handlePointerUp=(b,E)=>{this.end();const{onEnd:w,onSessionEnd:x,resumeAnimation:C}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Py(b.type==="pointercancel"?this.lastMoveEventInfo:My(E,this.transformPagePoint),this.history);this.startEvent&&w&&w(b,N),x&&x(b,N)},!F_(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=s||window;const h=bh(t),f=My(h,this.transformPagePoint),{point:p}=f,{timestamp:g}=gn;this.history=[{...p,timestamp:g}];const{onSessionStart:v}=e;v&&v(t,Py(f,this.history)),this.removeListeners=yh(Bu(this.contextWindow,"pointermove",this.handlePointerMove),Bu(this.contextWindow,"pointerup",this.handlePointerUp),Bu(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(XT.has(n.overflowX)||XT.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,s=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},a={x:s.x-e.x,y:s.y-e.y};a.x===0&&a.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(t,s),_e.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),da(this.updatePoint)}}function My(i,t){return t?{point:t(i.point)}:i}function YT(i,t){return{x:i.x-t.x,y:i.y-t.y}}function Py({point:i},t){return{point:i,delta:YT(i,iR(t)),offset:YT(i,OV(t)),velocity:LV(t,.1)}}function OV(i){return i[0]}function iR(i){return i[i.length-1]}function LV(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const s=iR(i);for(;e>=0&&(n=i[e],!(s.timestamp-n.timestamp>ur(t)));)e--;if(!n)return{x:0,y:0};const a=Ri(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function VV(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?Se(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?Se(e,i,n.max):Math.min(i,e)),i}function KT(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function FV(i,{top:t,left:e,bottom:n,right:s}){return{x:KT(i.x,e,s),y:KT(i.y,t,n)}}function WT(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function UV(i,t){return{x:WT(i.x,t.x),y:WT(i.y,t.y)}}function jV(i,t){let e=.5;const n=Ln(i),s=Ln(t);return s>n?e=Ju(t.min,t.max-n,i.min):n>s&&(e=Ju(i.min,i.max-s,t.min)),ks(0,1,e)}function BV(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const Tv=.35;function zV(i=Tv){return i===!1?i=0:i===!0&&(i=Tv),{x:QT(i,"left","right"),y:QT(i,"top","bottom")}}function QT(i,t,e){return{min:JT(i,t),max:JT(i,e)}}function JT(i,t){return typeof i=="number"?i:i[t]||0}const HV=new WeakMap;class GV{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=g=>{e?(this.stopAnimation(),this.snapToCursor(bh(g).point)):this.pauseAnimation()},l=(g,v)=>{this.stopAnimation();const{drag:b,dragPropagation:E,onDragStart:w}=this.getProps();if(b&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DO(b),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ti(C=>{let N=this.getAxisMotionValue(C).get()||0;if(xs.test(N)){const{projection:O}=this.visualElement;if(O&&O.layout){const U=O.layout.layoutBox[C];U&&(N=Ln(U)*(parseFloat(N)/100))}}this.originPoint[C]=N}),w&&_e.postRender(()=>w(g,v)),gv(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},u=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:E,onDirectionLock:w,onDrag:x}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:C}=v;if(E&&this.currentDirection===null){this.currentDirection=qV(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",v.point,C),this.updateAxis("y",v.point,C),this.visualElement.render(),x&&x(g,v)},h=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v,this.stop(g,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Ti(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new nR(t,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:eR(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,s=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&_e.postRender(()=>u(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!yf(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=VV(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Iu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=FV(n.layoutBox,t):this.constraints=!1,this.elastic=zV(e),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ti(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=BV(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Iu(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=XO(n,s.root,this.visualElement.getTransformPagePoint());let l=UV(s.layout.layoutBox,a);if(e){const u=e(GO(l));this.hasMutatedConstraints=!!u,u&&(l=TC(u))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Ti(p=>{if(!yf(p,e,this.currentDirection))return;let g=h&&h[p]||{};l&&(g={min:0,max:0});const v=s?200:1e6,b=s?40:1e7,E={type:"inertia",velocity:n?t[p]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,E)});return Promise.all(f).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return gv(this.visualElement,t),n.start(N_(t,n,0,e,this.visualElement,!1))}stopAnimation(){Ti(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ti(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ti(e=>{const{drag:n}=this.getProps();if(!yf(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(e);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[e],h=a.get()||0;a.set(t[e]-Se(l,u,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Iu(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ti(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();s[l]=jV({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ti(l=>{if(!yf(l,t,null))return;const u=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];u.set(Se(h,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;HV.set(this.visualElement,this);const t=this.visualElement.current,e=Bu(t,"pointerdown",h=>{const{drag:f,dragListener:p=!0}=this.getProps(),g=h.target,v=g!==t&&vC(g);f&&p&&!v&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();Iu(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),_e.read(n);const l=nh(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Ti(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=h[p].translate,g.set(g.get()+h[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),a(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=Tv,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function yf(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function qV(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class $V extends Ta{constructor(t){super(t),this.removeGroupControls=Ii,this.removeListeners=Ii,this.controls=new GV(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ii}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const ZT=i=>(t,e)=>{i&&_e.postRender(()=>i(t,e))};class XV extends Ta{constructor(){super(...arguments),this.removePointerDownListener=Ii}onPointerDown(t){this.session=new nR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:ZT(t),onStart:ZT(e),onMove:n,onEnd:(a,l)=>{delete this.session,s&&_e.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Bu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Ny=!1;class YV extends B.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;a&&(e.group&&e.group.add(a),n&&n.register&&s&&n.register(a),Ny&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Lf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:a}=this.props,{projection:l}=n;return l&&(l.isPresent=a,t.layoutDependency!==e&&l.setOptions({...l.options,layoutDependency:e}),Ny=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||_e.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),V_.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;Ny=!0,s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function sR(i){const[t,e]=$C(),n=B.useContext(p_);return k.jsx(YV,{...i,layoutGroup:n,switchLayoutGroup:B.useContext(ZC),isPresent:t,safeToRemove:e})}const KV={pan:{Feature:XV},drag:{Feature:$V,ProjectionNode:qC,MeasureLayout:sR}};function tS(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,a=n[s];a&&_e.postRender(()=>a(t,bh(t)))}class WV extends Ta{mount(){const{current:t}=this.node;t&&(this.unmount=MO(t,(e,n)=>(tS(this.node,n,"Start"),s=>tS(this.node,s,"End"))))}unmount(){}}class QV extends Ta{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yh(nh(this.node.current,"focus",()=>this.onFocus()),nh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eS(i,t,e){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),a=n[s];a&&_e.postRender(()=>a(t,bh(t)))}class JV extends Ta{mount(){const{current:t}=this.node;t&&(this.unmount=kO(t,(e,n)=>(eS(this.node,n,"Start"),(s,{success:a})=>eS(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Sv=new WeakMap,ky=new WeakMap,ZV=i=>{const t=Sv.get(i.target);t&&t(i)},tF=i=>{i.forEach(ZV)};function eF({root:i,...t}){const e=i||document;ky.has(e)||ky.set(e,{});const n=ky.get(e),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(tF,{root:i,...t})),n[s]}function nF(i,t,e){const n=eF(t);return Sv.set(i,e),n.observe(i),()=>{Sv.delete(i),n.unobserve(i)}}const iF={some:0,all:1};class sF extends Ta{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:iF[s]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),v=f?p:g;v&&v(h)};return nF(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(rF(t,e))&&this.startObserver()}unmount(){}}function rF({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const aF={inView:{Feature:sF},tap:{Feature:JV},focus:{Feature:QV},hover:{Feature:WV}},oF={layout:{ProjectionNode:qC,MeasureLayout:sR}},lF={...PV,...aF,...KV,...oF},xi=CV(lF,RV),cF=()=>{};var nS={};const rR=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},uF=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const s=i[e++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=i[e++];t[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=i[e++],l=i[e++],u=i[e++],h=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;t[n++]=String.fromCharCode(55296+(h>>10)),t[n++]=String.fromCharCode(56320+(h&1023))}else{const a=i[e++],l=i[e++];t[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return t.join("")},aR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<i.length;s+=3){const a=i[s],l=s+1<i.length,u=l?i[s+1]:0,h=s+2<i.length,f=h?i[s+2]:0,p=a>>2,g=(a&3)<<4|u>>4;let v=(u&15)<<2|f>>6,b=f&63;h||(b=64,l||(v=64)),n.push(e[p],e[g],e[v],e[b])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(rR(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):uF(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<i.length;){const a=e[i.charAt(s++)],u=s<i.length?e[i.charAt(s)]:0;++s;const f=s<i.length?e[i.charAt(s)]:64;++s;const g=s<i.length?e[i.charAt(s)]:64;if(++s,a==null||u==null||f==null||g==null)throw new hF;const v=a<<2|u>>4;if(n.push(v),f!==64){const b=u<<4&240|f>>2;if(n.push(b),g!==64){const E=f<<6&192|g;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class hF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dF=function(i){const t=rR(i);return aR.encodeByteArray(t,!0)},sp=function(i){return dF(i).replace(/\./g,"")},oR=function(i){try{return aR.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function fF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const pF=()=>fF().__FIREBASE_DEFAULTS__,mF=()=>{if(typeof process>"u"||typeof nS>"u")return;const i=nS.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},gF=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&oR(i[1]);return t&&JSON.parse(t)},Op=()=>{try{return cF()||pF()||mF()||gF()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},lR=i=>Op()?.emulatorHosts?.[i],cR=i=>{const t=lR(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},uR=()=>Op()?.config,hR=i=>Op()?.[`_${i}`];class yF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}function So(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $_(i){return(await fetch(i,{credentials:"include"})).ok}function dR(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",s=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...i};return[sp(JSON.stringify(e)),sp(JSON.stringify(l)),""].join(".")}const zu={};function vF(){const i={prod:[],emulator:[]};for(const t of Object.keys(zu))zu[t]?i.emulator.push(t):i.prod.push(t);return i}function _F(i){let t=document.getElementById(i),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),e=!0),{created:e,element:t}}let iS=!1;function X_(i,t){if(typeof window>"u"||typeof document>"u"||!So(window.location.host)||zu[i]===t||zu[i]||iS)return;zu[i]=t;function e(v){return`__firebase__banner__${v}`}const n="__firebase__banner",a=vF().prod.length>0;function l(){const v=document.getElementById(n);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{iS=!0,l()},v}function p(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=_F(n),b=e("text"),E=document.getElementById(b)||document.createElement("span"),w=e("learnmore"),x=document.getElementById(w)||document.createElement("a"),C=e("preprendIcon"),N=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const O=v.element;u(O),p(x,w);const U=f();h(N,C),O.append(N,E,x,U),document.body.appendChild(O)}a?(E.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function AF(){const i=Op()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wF(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function TF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SF(){const i=In();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function xF(){return!AF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CF(){try{return typeof indexedDB=="object"}catch{return!1}}function RF(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}const IF="FirebaseError";class Vs extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=IF,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ah.prototype.create)}}class Ah{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},s=`${this.service}/${t}`,a=this.errors[t],l=a?DF(a,n):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new Vs(s,u,n)}}function DF(i,t){return i.replace(MF,(e,n)=>{const s=t[n];return s!=null?String(s):`<${n}?>`})}const MF=/\{\$([^}]+)}/g;function PF(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function yo(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const s of e){if(!n.includes(s))return!1;const a=i[s],l=t[s];if(sS(a)&&sS(l)){if(!yo(a,l))return!1}else if(a!==l)return!1}for(const s of n)if(!e.includes(s))return!1;return!0}function sS(i){return i!==null&&typeof i=="object"}function Eh(i){const t=[];for(const[e,n]of Object.entries(i))Array.isArray(n)?n.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Du(i){const t={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");t[decodeURIComponent(s)]=decodeURIComponent(a)}}),t}function Mu(i){const t=i.indexOf("?");if(!t)return"";const e=i.indexOf("#",t);return i.substring(t,e>0?e:void 0)}function NF(i,t){const e=new kF(i,t);return e.subscribe.bind(e)}class kF{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let s;if(t===void 0&&e===void 0&&n===void 0)throw new Error("Missing Observer.");OF(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:n},s.next===void 0&&(s.next=Oy),s.error===void 0&&(s.error=Oy),s.complete===void 0&&(s.complete=Oy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OF(i,t){if(typeof i!="object"||i===null)return!1;for(const e of t)if(e in i&&typeof i[e]=="function")return!0;return!1}function Oy(){}function _n(i){return i&&i._delegate?i._delegate:i}class pa{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const lo="[DEFAULT]";class LF{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new yF;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),n=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(FF(t))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(t=lo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=lo){return this.instances.has(t)}getOptions(t=lo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);n===u&&l.resolve(s)}return s}onInit(t,e){const n=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(n)??new Set;s.add(t),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&t(a,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:VF(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=lo){return this.component?this.component.multipleInstances?t:lo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VF(i){return i===lo?void 0:i}function FF(i){return i.instantiationMode==="EAGER"}class UF{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new LF(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Xt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Xt||(Xt={}));const jF={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},BF=Xt.INFO,zF={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},HF=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),s=zF[t];if(s)console[s](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Y_{constructor(t){this.name=t,this._logLevel=BF,this._logHandler=HF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Xt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?jF[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...t),this._logHandler(this,Xt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...t),this._logHandler(this,Xt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...t),this._logHandler(this,Xt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...t),this._logHandler(this,Xt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...t),this._logHandler(this,Xt.ERROR,...t)}}const GF=(i,t)=>t.some(e=>i instanceof e);let rS,aS;function qF(){return rS||(rS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $F(){return aS||(aS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fR=new WeakMap,xv=new WeakMap,pR=new WeakMap,Ly=new WeakMap,K_=new WeakMap;function XF(i){const t=new Promise((e,n)=>{const s=()=>{i.removeEventListener("success",a),i.removeEventListener("error",l)},a=()=>{e(aa(i.result)),s()},l=()=>{n(i.error),s()};i.addEventListener("success",a),i.addEventListener("error",l)});return t.then(e=>{e instanceof IDBCursor&&fR.set(e,i)}).catch(()=>{}),K_.set(t,i),t}function YF(i){if(xv.has(i))return;const t=new Promise((e,n)=>{const s=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",l),i.removeEventListener("abort",l)},a=()=>{e(),s()},l=()=>{n(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",a),i.addEventListener("error",l),i.addEventListener("abort",l)});xv.set(i,t)}let Cv={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return xv.get(i);if(t==="objectStoreNames")return i.objectStoreNames||pR.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return aa(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function KF(i){Cv=i(Cv)}function WF(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(Vy(this),t,...e);return pR.set(n,t.sort?t.sort():[t]),aa(n)}:$F().includes(i)?function(...t){return i.apply(Vy(this),t),aa(fR.get(this))}:function(...t){return aa(i.apply(Vy(this),t))}}function QF(i){return typeof i=="function"?WF(i):(i instanceof IDBTransaction&&YF(i),GF(i,qF())?new Proxy(i,Cv):i)}function aa(i){if(i instanceof IDBRequest)return XF(i);if(Ly.has(i))return Ly.get(i);const t=QF(i);return t!==i&&(Ly.set(i,t),K_.set(t,i)),t}const Vy=i=>K_.get(i);function JF(i,t,{blocked:e,upgrade:n,blocking:s,terminated:a}={}){const l=indexedDB.open(i,t),u=aa(l);return n&&l.addEventListener("upgradeneeded",h=>{n(aa(l.result),h.oldVersion,h.newVersion,aa(l.transaction),h)}),e&&l.addEventListener("blocked",h=>e(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const ZF=["get","getKey","getAll","getAllKeys","count"],t4=["put","add","delete","clear"],Fy=new Map;function oS(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Fy.get(t))return Fy.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,s=t4.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(s||ZF.includes(e)))return;const a=async function(l,...u){const h=this.transaction(l,s?"readwrite":"readonly");let f=h.store;return n&&(f=f.index(u.shift())),(await Promise.all([f[e](...u),s&&h.done]))[0]};return Fy.set(t,a),a}KF(i=>({...i,get:(t,e,n)=>oS(t,e)||i.get(t,e,n),has:(t,e)=>!!oS(t,e)||i.has(t,e)}));class e4{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(n4(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function n4(i){return i.getComponent()?.type==="VERSION"}const Rv="@firebase/app",lS="0.14.7";const pr=new Y_("@firebase/app"),i4="@firebase/app-compat",s4="@firebase/analytics-compat",r4="@firebase/analytics",a4="@firebase/app-check-compat",o4="@firebase/app-check",l4="@firebase/auth",c4="@firebase/auth-compat",u4="@firebase/database",h4="@firebase/data-connect",d4="@firebase/database-compat",f4="@firebase/functions",p4="@firebase/functions-compat",m4="@firebase/installations",g4="@firebase/installations-compat",y4="@firebase/messaging",v4="@firebase/messaging-compat",_4="@firebase/performance",b4="@firebase/performance-compat",A4="@firebase/remote-config",E4="@firebase/remote-config-compat",w4="@firebase/storage",T4="@firebase/storage-compat",S4="@firebase/firestore",x4="@firebase/ai",C4="@firebase/firestore-compat",R4="firebase",I4="12.8.0";const Iv="[DEFAULT]",D4={[Rv]:"fire-core",[i4]:"fire-core-compat",[r4]:"fire-analytics",[s4]:"fire-analytics-compat",[o4]:"fire-app-check",[a4]:"fire-app-check-compat",[l4]:"fire-auth",[c4]:"fire-auth-compat",[u4]:"fire-rtdb",[h4]:"fire-data-connect",[d4]:"fire-rtdb-compat",[f4]:"fire-fn",[p4]:"fire-fn-compat",[m4]:"fire-iid",[g4]:"fire-iid-compat",[y4]:"fire-fcm",[v4]:"fire-fcm-compat",[_4]:"fire-perf",[b4]:"fire-perf-compat",[A4]:"fire-rc",[E4]:"fire-rc-compat",[w4]:"fire-gcs",[T4]:"fire-gcs-compat",[S4]:"fire-fst",[C4]:"fire-fst-compat",[x4]:"fire-vertex","fire-js":"fire-js",[R4]:"fire-js-all"};const rp=new Map,M4=new Map,Dv=new Map;function cS(i,t){try{i.container.addComponent(t)}catch(e){pr.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function vo(i){const t=i.name;if(Dv.has(t))return pr.debug(`There were multiple attempts to register component ${t}.`),!1;Dv.set(t,i);for(const e of rp.values())cS(e,i);for(const e of M4.values())cS(e,i);return!0}function Lp(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function ai(i){return i==null?!1:i.settings!==void 0}const P4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oa=new Ah("app","Firebase",P4);class N4{constructor(t,e,n){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw oa.create("app-deleted",{appName:this._name})}}const xo=I4;function mR(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n={name:Iv,automaticDataCollectionEnabled:!0,...t},s=n.name;if(typeof s!="string"||!s)throw oa.create("bad-app-name",{appName:String(s)});if(e||(e=uR()),!e)throw oa.create("no-options");const a=rp.get(s);if(a){if(yo(e,a.options)&&yo(n,a.config))return a;throw oa.create("duplicate-app",{appName:s})}const l=new UF(s);for(const h of Dv.values())l.addComponent(h);const u=new N4(e,n,l);return rp.set(s,u),u}function W_(i=Iv){const t=rp.get(i);if(!t&&i===Iv&&uR())return mR();if(!t)throw oa.create("no-app",{appName:i});return t}function Cs(i,t,e){let n=D4[i]??i;e&&(n+=`-${e}`);const s=n.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const l=[`Unable to register library "${n}" with version "${t}":`];s&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),pr.warn(l.join(" "));return}vo(new pa(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}const k4="firebase-heartbeat-database",O4=1,ih="firebase-heartbeat-store";let Uy=null;function gR(){return Uy||(Uy=JF(k4,O4,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(ih)}catch(e){console.warn(e)}}}}).catch(i=>{throw oa.create("idb-open",{originalErrorMessage:i.message})})),Uy}async function L4(i){try{const e=(await gR()).transaction(ih),n=await e.objectStore(ih).get(yR(i));return await e.done,n}catch(t){if(t instanceof Vs)pr.warn(t.message);else{const e=oa.create("idb-get",{originalErrorMessage:t?.message});pr.warn(e.message)}}}async function uS(i,t){try{const n=(await gR()).transaction(ih,"readwrite");await n.objectStore(ih).put(t,yR(i)),await n.done}catch(e){if(e instanceof Vs)pr.warn(e.message);else{const n=oa.create("idb-set",{originalErrorMessage:e?.message});pr.warn(n.message)}}}function yR(i){return`${i.name}!${i.options.appId}`}const V4=1024,F4=30;class U4{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new B4(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=hS();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>F4){const s=z4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){pr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=hS(),{heartbeatsToSend:e,unsentEntries:n}=j4(this._heartbeatsCache.heartbeats),s=sp(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return pr.warn(t),""}}}function hS(){return new Date().toISOString().substring(0,10)}function j4(i,t=V4){const e=[];let n=i.slice();for(const s of i){const a=e.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),dS(e)>t){a.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),dS(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class B4{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CF()?RF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await L4(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return uS(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return uS(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function dS(i){return sp(JSON.stringify({version:2,heartbeats:i})).length}function z4(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let n=1;n<i.length;n++)i[n].date<e&&(e=i[n].date,t=n);return t}function H4(i){vo(new pa("platform-logger",t=>new e4(t),"PRIVATE")),vo(new pa("heartbeat",t=>new U4(t),"PRIVATE")),Cs(Rv,lS,i),Cs(Rv,lS,"esm2020"),Cs("fire-js","")}H4("");function vR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G4=vR,_R=new Ah("auth","Firebase",vR());const ap=new Y_("@firebase/auth");function q4(i,...t){ap.logLevel<=Xt.WARN&&ap.warn(`Auth (${xo}): ${i}`,...t)}function Vf(i,...t){ap.logLevel<=Xt.ERROR&&ap.error(`Auth (${xo}): ${i}`,...t)}function Wi(i,...t){throw Q_(i,...t)}function Rs(i,...t){return Q_(i,...t)}function bR(i,t,e){const n={...G4(),[t]:e};return new Ah("auth","Firebase",n).create(t,{appName:i.name})}function hr(i){return bR(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q_(i,...t){if(typeof i!="string"){const e=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(e,...n)}return _R.create(i,...t)}function It(i,t,...e){if(!i)throw Q_(t,...e)}function or(i){const t="INTERNAL ASSERTION FAILED: "+i;throw Vf(t),new Error(t)}function mr(i,t){i||or(t)}function Mv(){return typeof self<"u"&&self.location?.href||""}function $4(){return fS()==="http:"||fS()==="https:"}function fS(){return typeof self<"u"&&self.location?.protocol||null}function X4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($4()||wF()||"connection"in navigator)?navigator.onLine:!0}function Y4(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class wh{constructor(t,e){this.shortDelay=t,this.longDelay=e,mr(e>t,"Short delay should be less than long delay!"),this.isMobile=bF()||TF()}get(){return X4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function J_(i,t){mr(i.emulator,"Emulator should always be set here");const{url:e}=i.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class AR{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const K4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const W4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Q4=new wh(3e4,6e4);function Sa(i,t){return i.tenantId&&!t.tenantId?{...t,tenantId:i.tenantId}:t}async function xa(i,t,e,n,s={}){return ER(i,s,async()=>{let a={},l={};n&&(t==="GET"?l=n:a={body:JSON.stringify(n)});const u=Eh({key:i.config.apiKey,...l}).slice(1),h=await i._getAdditionalHeaders();h["Content-Type"]="application/json",i.languageCode&&(h["X-Firebase-Locale"]=i.languageCode);const f={method:t,headers:h,...a};return EF()||(f.referrerPolicy="no-referrer"),i.emulatorConfig&&So(i.emulatorConfig.host)&&(f.credentials="include"),AR.fetch()(await wR(i,i.config.apiHost,e,u),f)})}async function ER(i,t,e){i._canInitEmulator=!1;const n={...K4,...t};try{const s=new Z4(i),a=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw vf(i,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw vf(i,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw vf(i,"email-already-in-use",l);if(h==="USER_DISABLED")throw vf(i,"user-disabled",l);const p=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw bR(i,p,f);Wi(i,p)}}catch(s){if(s instanceof Vs)throw s;Wi(i,"network-request-failed",{message:String(s)})}}async function Th(i,t,e,n,s={}){const a=await xa(i,t,e,n,s);return"mfaPendingCredential"in a&&Wi(i,"multi-factor-auth-required",{_serverResponse:a}),a}async function wR(i,t,e,n){const s=`${t}${e}?${n}`,a=i,l=a.config.emulator?J_(i.config,s):`${i.config.apiScheme}://${s}`;return W4.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function J4(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,n)=>{this.timer=setTimeout(()=>n(Rs(this.auth,"network-request-failed")),Q4.get())})}}function vf(i,t,e){const n={appName:i.name};e.email&&(n.email=e.email),e.phoneNumber&&(n.phoneNumber=e.phoneNumber);const s=Rs(i,t,n);return s.customData._tokenResponse=e,s}function pS(i){return i!==void 0&&i.enterprise!==void 0}class tU{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return J4(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eU(i,t){return xa(i,"GET","/v2/recaptchaConfig",Sa(i,t))}async function nU(i,t){return xa(i,"POST","/v1/accounts:delete",t)}async function op(i,t){return xa(i,"POST","/v1/accounts:lookup",t)}function Hu(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function iU(i,t=!1){const e=_n(i),n=await e.getIdToken(t),s=Z_(n);It(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:n,authTime:Hu(jy(s.auth_time)),issuedAtTime:Hu(jy(s.iat)),expirationTime:Hu(jy(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function jy(i){return Number(i)*1e3}function Z_(i){const[t,e,n]=i.split(".");if(t===void 0||e===void 0||n===void 0)return Vf("JWT malformed, contained fewer than 3 sections"),null;try{const s=oR(e);return s?JSON.parse(s):(Vf("Failed to decode base64 JWT payload"),null)}catch(s){return Vf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function mS(i){const t=Z_(i);return It(t,"internal-error"),It(typeof t.exp<"u","internal-error"),It(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function sh(i,t,e=!1){if(e)return t;try{return await t}catch(n){throw n instanceof Vs&&sU(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function sU({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class rU{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Pv{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function lp(i){const t=i.auth,e=await i.getIdToken(),n=await sh(i,op(t,{idToken:e}));It(n?.users.length,t,"internal-error");const s=n.users[0];i._notifyReloadListener(s);const a=s.providerUserInfo?.length?TR(s.providerUserInfo):[],l=oU(i.providerData,a),u=i.isAnonymous,h=!(i.email&&s.passwordHash)&&!l?.length,f=u?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Pv(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(i,p)}async function aU(i){const t=_n(i);await lp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function oU(i,t){return[...i.filter(n=>!t.some(s=>s.providerId===n.providerId)),...t]}function TR(i){return i.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function lU(i,t){const e=await ER(i,{},async()=>{const n=Eh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:a}=i.config,l=await wR(i,s,"/v1/token",`key=${a}`),u=await i._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:n};return i.emulatorConfig&&So(i.emulatorConfig.host)&&(h.credentials="include"),AR.fetch()(l,h)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function cU(i,t){return xa(i,"POST","/v2/accounts:revokeToken",Sa(i,t))}class Ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){It(t.idToken,"internal-error"),It(typeof t.idToken<"u","internal-error"),It(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):mS(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){It(t.length!==0,"internal-error");const e=mS(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(It(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:s,expiresIn:a}=await lU(t,e);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,e){const{refreshToken:n,accessToken:s,expirationTime:a}=e,l=new Ol;return n&&(It(typeof n=="string","internal-error",{appName:t}),l.refreshToken=n),s&&(It(typeof s=="string","internal-error",{appName:t}),l.accessToken=s),a&&(It(typeof a=="number","internal-error",{appName:t}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ol,this.toJSON())}_performRefresh(){return or("not implemented")}}function Qr(i,t){It(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class $i{constructor({uid:t,auth:e,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new rU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await sh(this,this.stsTokenManager.getToken(this.auth,t));return It(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return iU(this,t)}reload(){return aU(this)}_assign(t){this!==t&&(It(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new $i({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await lp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(hr(this.auth));const t=await this.getIdToken();return await sh(this,nU(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const n=e.displayName??void 0,s=e.email??void 0,a=e.phoneNumber??void 0,l=e.photoURL??void 0,u=e.tenantId??void 0,h=e._redirectEventId??void 0,f=e.createdAt??void 0,p=e.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:b,providerData:E,stsTokenManager:w}=e;It(g&&w,t,"internal-error");const x=Ol.fromJSON(this.name,w);It(typeof g=="string",t,"internal-error"),Qr(n,t.name),Qr(s,t.name),It(typeof v=="boolean",t,"internal-error"),It(typeof b=="boolean",t,"internal-error"),Qr(a,t.name),Qr(l,t.name),Qr(u,t.name),Qr(h,t.name),Qr(f,t.name),Qr(p,t.name);const C=new $i({uid:g,auth:t,email:s,emailVerified:v,displayName:n,isAnonymous:b,photoURL:l,phoneNumber:a,tenantId:u,stsTokenManager:x,createdAt:f,lastLoginAt:p});return E&&Array.isArray(E)&&(C.providerData=E.map(N=>({...N}))),h&&(C._redirectEventId=h),C}static async _fromIdTokenResponse(t,e,n=!1){const s=new Ol;s.updateFromServerResponse(e);const a=new $i({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:n});return await lp(a),a}static async _fromGetAccountInfoResponse(t,e,n){const s=e.users[0];It(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?TR(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,u=new Ol;u.updateFromIdToken(n);const h=new $i({uid:s.localId,auth:t,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Pv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(h,f),h}}const gS=new Map;function lr(i){mr(i instanceof Function,"Expected a class definition");let t=gS.get(i);return t?(mr(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,gS.set(i,t),t)}class SR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}SR.type="NONE";const yS=SR;function Ff(i,t,e){return`firebase:${i}:${t}:${e}`}class Ll{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=Ff(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ff("persistence",s.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await op(this.auth,{idToken:t}).catch(()=>{});return e?$i._fromGetAccountInfoResponse(this.auth,e,t):null}return $i._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Ll(lr(yS),t,n);const s=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||lr(yS);const l=Ff(n,t.config.apiKey,t.name);let u=null;for(const f of e)try{const p=await f._get(l);if(p){let g;if(typeof p=="string"){const v=await op(t,{idToken:p}).catch(()=>{});if(!v)break;g=await $i._fromGetAccountInfoResponse(t,v,p)}else g=$i._fromJSON(t,p);f!==a&&(u=g),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Ll(a,t,n):(a=h[0],u&&await a._set(l,u.toJSON()),await Promise.all(e.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new Ll(a,t,n))}}function vS(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(IR(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xR(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(MR(t))return"Blackberry";if(PR(t))return"Webos";if(CR(t))return"Safari";if((t.includes("chrome/")||RR(t))&&!t.includes("edge/"))return"Chrome";if(DR(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(e);if(n?.length===2)return n[1]}return"Other"}function xR(i=In()){return/firefox\//i.test(i)}function CR(i=In()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function RR(i=In()){return/crios\//i.test(i)}function IR(i=In()){return/iemobile/i.test(i)}function DR(i=In()){return/android/i.test(i)}function MR(i=In()){return/blackberry/i.test(i)}function PR(i=In()){return/webos/i.test(i)}function tb(i=In()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function uU(i=In()){return tb(i)&&!!window.navigator?.standalone}function hU(){return SF()&&document.documentMode===10}function NR(i=In()){return tb(i)||DR(i)||PR(i)||MR(i)||/windows phone/i.test(i)||IR(i)}function kR(i,t=[]){let e;switch(i){case"Browser":e=vS(In());break;case"Worker":e=`${vS(In())}-${i}`;break;default:e=i}const n=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${xo}/${n}`}class dU{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=a=>new Promise((l,u)=>{try{const h=t(a);l(h)}catch(h){u(h)}});n.onAbort=e,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function fU(i,t={}){return xa(i,"GET","/v2/passwordPolicy",Sa(i,t))}const pU=6;class mU{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??pU,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let n;for(let s=0;s<t.length;s++)n=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}class gU{constructor(t,e,n,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _S(this),this.idTokenSubscription=new _S(this),this.beforeStateQueue=new dU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_R,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=lr(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ll.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await op(this,{idToken:t}),n=await $i._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ai(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let n=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=n?._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&u?.user&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await lp(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Y4()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ai(this.app))return Promise.reject(hr(this));const e=t?_n(t):null;return e&&It(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&It(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ai(this.app)?Promise.reject(hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await fU(this),e=new mU(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ah("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(n.tenantId=this.tenantId),await cU(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&lr(t)||this._popupRedirectResolver;It(e,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[lr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,s){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(It(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof e=="function"){const h=t.addObserver(e,n,s);return()=>{l=!0,h()}}else{const h=t.addObserver(e);return()=>{l=!0,h()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=kR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&q4(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Co(i){return _n(i)}class _S{constructor(t){this.auth=t,this.observer=null,this.addObserver=NF(e=>this.observer=e)}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yU(i){Vp=i}function OR(i){return Vp.loadJS(i)}function vU(){return Vp.recaptchaEnterpriseScript}function _U(){return Vp.gapiScript}function bU(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class AU{constructor(){this.enterprise=new EU}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class EU{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const wU="recaptcha-enterprise",LR="NO_RECAPTCHA";class TU{constructor(t){this.type=wU,this.auth=Co(t)}async verify(t="verify",e=!1){async function n(a){if(!e){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{eU(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new tU(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(h=>{u(h)})})}function s(a,l,u){const h=window.grecaptcha;pS(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:t}).then(f=>{l(f)}).catch(()=>{l(LR)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AU().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{n(this.auth).then(u=>{if(!e&&pS(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=vU();h.length!==0&&(h+=u),OR(h).then(()=>{s(u,a,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function bS(i,t,e,n=!1,s=!1){const a=new TU(i);let l;if(s)l=LR;else try{l=await a.verify(e)}catch{l=await a.verify(e,!0)}const u={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Nv(i,t,e,n,s){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await bS(i,t,e,e==="getOobCode");return n(i,a)}else return n(i,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await bS(i,t,e,e==="getOobCode");return n(i,l)}else return Promise.reject(a)})}function SU(i,t){const e=Lp(i,"auth");if(e.isInitialized()){const s=e.getImmediate(),a=e.getOptions();if(yo(a,t??{}))return s;Wi(s,"already-initialized")}return e.initialize({options:t})}function xU(i,t){const e=t?.persistence||[],n=(Array.isArray(e)?e:[e]).map(lr);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(n,t?.popupRedirectResolver)}function CU(i,t,e){const n=Co(i);It(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const s=!1,a=VR(t),{host:l,port:u}=RU(t),h=u===null?"":`:${u}`,f={url:`${a}//${l}${h}/`},p=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){It(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),It(yo(f,n.config.emulator)&&yo(p,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=p,n.settings.appVerificationDisabledForTesting=!0,So(l)?($_(`${a}//${l}${h}`),X_("Auth",!0)):IU()}function VR(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function RU(i){const t=VR(i),e=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!e)return{host:"",port:null};const n=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:AS(n.substr(a.length+1))}}else{const[a,l]=n.split(":");return{host:a,port:AS(l)}}}function AS(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function IU(){function i(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class eb{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return or("not implemented")}_getIdTokenResponse(t){return or("not implemented")}_linkToIdToken(t,e){return or("not implemented")}_getReauthenticationResolver(t){return or("not implemented")}}async function DU(i,t){return xa(i,"POST","/v1/accounts:signUp",t)}async function MU(i,t){return Th(i,"POST","/v1/accounts:signInWithPassword",Sa(i,t))}async function PU(i,t){return Th(i,"POST","/v1/accounts:signInWithEmailLink",Sa(i,t))}async function NU(i,t){return Th(i,"POST","/v1/accounts:signInWithEmailLink",Sa(i,t))}class rh extends eb{constructor(t,e,n,s=null){super("password",n),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new rh(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new rh(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nv(t,e,"signInWithPassword",MU);case"emailLink":return PU(t,{email:this._email,oobCode:this._password});default:Wi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const n={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nv(t,n,"signUpPassword",DU);case"emailLink":return NU(t,{idToken:e,email:this._email,oobCode:this._password});default:Wi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Vl(i,t){return Th(i,"POST","/v1/accounts:signInWithIdp",Sa(i,t))}const kU="http://localhost";class _o extends eb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new _o(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Wi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:s,...a}=e;if(!n||!s)return null;const l=new _o(n,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(t){const e=this.buildRequest();return Vl(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Vl(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Vl(t,e)}buildRequest(){const t={requestUri:kU,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Eh(e)}return t}}function OU(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LU(i){const t=Du(Mu(i)).link,e=t?Du(Mu(t)).deep_link_id:null,n=Du(Mu(i)).deep_link_id;return(n?Du(Mu(n)).link:null)||n||e||t||i}class nb{constructor(t){const e=Du(Mu(t)),n=e.apiKey??null,s=e.oobCode??null,a=OU(e.mode??null);It(n&&s&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=LU(t);try{return new nb(e)}catch{return null}}}class lc{constructor(){this.providerId=lc.PROVIDER_ID}static credential(t,e){return rh._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=nb.parseLink(e);return It(n,"argument-error"),rh._fromEmailAndCode(t,n.code,n.tenantId)}}lc.PROVIDER_ID="password";lc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class FR{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Sh extends FR{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Zr extends Sh{constructor(){super("facebook.com")}static credential(t){return _o._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Zr.credentialFromTaggedObject(t)}static credentialFromError(t){return Zr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Zr.credential(t.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";class ta extends Sh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return _o._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ta.credentialFromTaggedObject(t)}static credentialFromError(t){return ta.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return ta.credential(e,n)}catch{return null}}}ta.GOOGLE_SIGN_IN_METHOD="google.com";ta.PROVIDER_ID="google.com";class ea extends Sh{constructor(){super("github.com")}static credential(t){return _o._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ea.credentialFromTaggedObject(t)}static credentialFromError(t){return ea.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ea.credential(t.oauthAccessToken)}catch{return null}}}ea.GITHUB_SIGN_IN_METHOD="github.com";ea.PROVIDER_ID="github.com";class na extends Sh{constructor(){super("twitter.com")}static credential(t,e){return _o._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return na.credentialFromTaggedObject(t)}static credentialFromError(t){return na.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return na.credential(e,n)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";async function VU(i,t){return Th(i,"POST","/v1/accounts:signUp",Sa(i,t))}class bo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,s=!1){const a=await $i._fromIdTokenResponse(t,n,s),l=ES(n);return new bo({user:a,providerId:l,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const s=ES(n);return new bo({user:t,providerId:s,_tokenResponse:n,operationType:e})}}function ES(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class cp extends Vs{constructor(t,e,n,s){super(e.code,e.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,cp.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,s){return new cp(t,e,n,s)}}function UR(i,t,e,n){return(t==="reauthenticate"?e._getReauthenticationResolver(i):e._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cp._fromErrorAndOperation(i,a,t,n):a})}async function FU(i,t,e=!1){const n=await sh(i,t._linkToIdToken(i.auth,await i.getIdToken()),e);return bo._forOperation(i,"link",n)}async function UU(i,t,e=!1){const{auth:n}=i;if(ai(n.app))return Promise.reject(hr(n));const s="reauthenticate";try{const a=await sh(i,UR(n,s,t,i),e);It(a.idToken,n,"internal-error");const l=Z_(a.idToken);It(l,n,"internal-error");const{sub:u}=l;return It(i.uid===u,n,"user-mismatch"),bo._forOperation(i,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&Wi(n,"user-mismatch"),a}}async function jR(i,t,e=!1){if(ai(i.app))return Promise.reject(hr(i));const n="signIn",s=await UR(i,n,t),a=await bo._fromIdTokenResponse(i,n,s);return e||await i._updateCurrentUser(a.user),a}async function jU(i,t){return jR(Co(i),t)}async function BR(i){const t=Co(i);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function BU(i,t,e){if(ai(i.app))return Promise.reject(hr(i));const n=Co(i),l=await Nv(n,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VU).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&BR(i),h}),u=await bo._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(u.user),u}function zU(i,t,e){return ai(i.app)?Promise.reject(hr(i)):jU(_n(i),lc.credential(t,e)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&BR(i),n})}function HU(i,t,e,n){return _n(i).onIdTokenChanged(t,e,n)}function GU(i,t,e){return _n(i).beforeAuthStateChanged(t,e)}const up="__sak";class zR{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(up,"1"),this.storage.removeItem(up),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const qU=1e3,$U=10;class HR extends zR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),s=this.localCache[e];n!==s&&t(e,s,n)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const n=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(n);!e&&this.localCache[n]===l||this.notifyListeners(n,l)},a=this.storage.getItem(n);hU()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,$U):s()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const s of Array.from(n))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},qU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}HR.type="LOCAL";const XU=HR;class GR extends zR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}GR.type="SESSION";const qR=GR;function YU(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class Fp{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const n=new Fp(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:s,data:a}=e.data,l=this.handlersMap[s];if(!l?.size)return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(l).map(async f=>f(e.origin,a)),h=await YU(u);e.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:h})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fp.receivers=[];function ib(i="",t=10){let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*10);return i+e}class KU{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,h)=>{const f=ib("",20);s.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:s,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(p),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Is(){return window}function WU(i){Is().location.href=i}function $R(){return typeof Is().WorkerGlobalScope<"u"&&typeof Is().importScripts=="function"}async function QU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JU(){return navigator?.serviceWorker?.controller||null}function ZU(){return $R()?self:null}const XR="firebaseLocalStorageDb",t3=1,hp="firebaseLocalStorage",YR="fbase_key";class xh{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Up(i,t){return i.transaction([hp],t?"readwrite":"readonly").objectStore(hp)}function e3(){const i=indexedDB.deleteDatabase(XR);return new xh(i).toPromise()}function kv(){const i=indexedDB.open(XR,t3);return new Promise((t,e)=>{i.addEventListener("error",()=>{e(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(hp,{keyPath:YR})}catch(s){e(s)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(hp)?t(n):(n.close(),await e3(),t(await kv()))})})}async function wS(i,t,e){const n=Up(i,!0).put({[YR]:t,value:e});return new xh(n).toPromise()}async function n3(i,t){const e=Up(i,!1).get(t),n=await new xh(e).toPromise();return n===void 0?null:n.value}function TS(i,t){const e=Up(i,!0).delete(t);return new xh(e).toPromise()}const i3=800,s3=3;class KR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kv(),this.db)}async _withRetries(t){let e=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(e++>s3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $R()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fp._getInstance(ZU()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QU(),!this.activeServiceWorker)return;this.sender=new KU(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||JU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await kv();return await wS(t,up,"1"),await TS(t,up),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wS(n,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(n=>n3(n,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>TS(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const a=Up(s,!1).getAll();return new xh(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],n=new Set;if(t.length!==0)for(const{fbase_key:s,value:a}of t)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const s of Array.from(n))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KR.type="LOCAL";const r3=KR;new wh(3e4,6e4);function a3(i,t){return t?lr(t):(It(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class sb extends eb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Vl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Vl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Vl(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function o3(i){return jR(i.auth,new sb(i),i.bypassAuthState)}function l3(i){const{auth:t,user:e}=i;return It(e,t,"internal-error"),UU(e,new sb(i),i.bypassAuthState)}async function c3(i){const{auth:t,user:e}=i;return It(e,t,"internal-error"),FU(e,new sb(i),i.bypassAuthState)}class WR{constructor(t,e,n,s,a=!1){this.auth=t,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:s,tenantId:a,error:l,type:u}=t;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:e,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return o3;case"linkViaPopup":case"linkViaRedirect":return c3;case"reauthViaPopup":case"reauthViaRedirect":return l3;default:Wi(this.auth,"internal-error")}}resolve(t){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const u3=new wh(2e3,1e4);class Pl extends WR{constructor(t,e,n,s,a){super(t,e,s,a),this.provider=n,this.authWindow=null,this.pollId=null,Pl.currentPopupAction&&Pl.currentPopupAction.cancel(),Pl.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return It(t,this.auth,"internal-error"),t}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const t=ib();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pl.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,u3.get())};t()}}Pl.currentPopupAction=null;const h3="pendingRedirect",Uf=new Map;class d3 extends WR{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Uf.get(this.auth._key());if(!t){try{const n=await f3(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Uf.set(this.auth._key(),t)}return this.bypassAuthState||Uf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f3(i,t){const e=g3(t),n=m3(i);if(!await n._isAvailable())return!1;const s=await n._get(e)==="true";return await n._remove(e),s}function p3(i,t){Uf.set(i._key(),t)}function m3(i){return lr(i._redirectPersistence)}function g3(i){return Ff(h3,i.config.apiKey,i.name)}async function y3(i,t,e=!1){if(ai(i.app))return Promise.reject(hr(i));const n=Co(i),s=a3(n,t),l=await new d3(n,s,e).execute();return l&&!e&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,t)),l}const v3=600*1e3;class _3{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!b3(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!QR(t)){const n=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Rs(this.auth,n))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=v3&&this.cachedEventUids.clear(),this.cachedEventUids.has(SS(t))}saveEventToCache(t){this.cachedEventUids.add(SS(t)),this.lastProcessedEventTime=Date.now()}}function SS(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function QR({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function b3(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QR(i);default:return!1}}async function A3(i,t={}){return xa(i,"GET","/v1/projects",t)}const E3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,w3=/^https?/;async function T3(i){if(i.config.emulator)return;const{authorizedDomains:t}=await A3(i);for(const e of t)try{if(S3(e))return}catch{}Wi(i,"unauthorized-domain")}function S3(i){const t=Mv(),{protocol:e,hostname:n}=new URL(t);if(i.startsWith("chrome-extension://")){const l=new URL(i);return l.hostname===""&&n===""?e==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&l.hostname===n}if(!w3.test(e))return!1;if(E3.test(i))return n===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const x3=new wh(3e4,6e4);function xS(){const i=Is().___jsl;if(i?.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let e=0;e<i.CP.length;e++)i.CP[e]=null}}function C3(i){return new Promise((t,e)=>{function n(){xS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xS(),e(Rs(i,"network-request-failed"))},timeout:x3.get()})}if(Is().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Is().gapi?.load)n();else{const s=bU("iframefcb");return Is()[s]=()=>{gapi.load?n():e(Rs(i,"network-request-failed"))},OR(`${_U()}?onload=${s}`).catch(a=>e(a))}}).catch(t=>{throw jf=null,t})}let jf=null;function R3(i){return jf=jf||C3(i),jf}const I3=new wh(5e3,15e3),D3="__/auth/iframe",M3="emulator/auth/iframe",P3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k3(i){const t=i.config;It(t.authDomain,i,"auth-domain-config-required");const e=t.emulator?J_(t,M3):`https://${i.config.authDomain}/${D3}`,n={apiKey:t.apiKey,appName:i.name,v:xo},s=N3.get(i.config.apiHost);s&&(n.eid=s);const a=i._getFrameworks();return a.length&&(n.fw=a.join(",")),`${e}?${Eh(n).slice(1)}`}async function O3(i){const t=await R3(i),e=Is().gapi;return It(e,i,"internal-error"),t.open({where:document.body,url:k3(i),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P3,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const l=Rs(i,"network-request-failed"),u=Is().setTimeout(()=>{a(l)},I3.get());function h(){Is().clearTimeout(u),s(n)}n.ping(h).then(h,()=>{a(l)})}))}const L3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V3=500,F3=600,U3="_blank",j3="http://localhost";class CS{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function B3(i,t,e,n=V3,s=F3){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const h={...L3,width:n.toString(),height:s.toString(),top:a,left:l},f=In().toLowerCase();e&&(u=RR(f)?U3:e),xR(f)&&(t=t||j3,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[b,E])=>`${v}${b}=${E},`,"");if(uU(f)&&u!=="_self")return z3(t||"",u),new CS(null);const g=window.open(t||"",u,p);It(g,i,"popup-blocked");try{g.focus()}catch{}return new CS(g)}function z3(i,t){const e=document.createElement("a");e.href=i,e.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(n)}const H3="__/auth/handler",G3="emulator/auth/handler",q3=encodeURIComponent("fac");async function RS(i,t,e,n,s,a){It(i.config.authDomain,i,"auth-domain-config-required"),It(i.config.apiKey,i,"invalid-api-key");const l={apiKey:i.config.apiKey,appName:i.name,authType:e,redirectUrl:n,v:xo,eventId:s};if(t instanceof FR){t.setDefaultLanguage(i.languageCode),l.providerId=t.providerId||"",PF(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,g]of Object.entries({}))l[p]=g}if(t instanceof Sh){const p=t.getScopes().filter(g=>g!=="");p.length>0&&(l.scopes=p.join(","))}i.tenantId&&(l.tid=i.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await i._getAppCheckToken(),f=h?`#${q3}=${encodeURIComponent(h)}`:"";return`${$3(i)}?${Eh(u).slice(1)}${f}`}function $3({config:i}){return i.emulator?J_(i,G3):`https://${i.authDomain}/${H3}`}const By="webStorageSupport";class X3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qR,this._completeRedirectFn=y3,this._overrideRedirectResult=p3}async _openPopup(t,e,n,s){mr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const a=await RS(t,e,n,Mv(),s);return B3(t,a,ib())}async _openRedirect(t,e,n,s){await this._originValidation(t);const a=await RS(t,e,n,Mv(),s);return WU(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:a}=this.eventManagers[e];return s?Promise.resolve(s):(mr(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}async initAndGetManager(t){const e=await O3(t),n=new _3(t);return e.register("authEvent",s=>(It(s?.authEvent,t,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(By,{type:By},s=>{const a=s?.[0]?.[By];a!==void 0&&e(!!a),Wi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=T3(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return NR()||CR()||tb()}}const Y3=X3;var IS="@firebase/auth",DS="1.12.0";class K3{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(n=>{t(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function W3(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q3(i){vo(new pa("auth",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=n.options;It(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:u,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kR(i)},f=new gU(n,s,a,h);return xU(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),vo(new pa("auth-internal",t=>{const e=Co(t.getProvider("auth").getImmediate());return(n=>new K3(n))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(IS,DS,W3(i)),Cs(IS,DS,"esm2020")}const J3=300,Z3=hR("authIdTokenMaxAge")||J3;let MS=null;const tj=i=>async t=>{const e=t&&await t.getIdTokenResult(),n=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>Z3)return;const s=e?.token;MS!==s&&(MS=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ej(i=W_()){const t=Lp(i,"auth");if(t.isInitialized())return t.getImmediate();const e=SU(i,{popupRedirectResolver:Y3,persistence:[r3,XU,qR]}),n=hR("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const l=tj(a.toString());GU(e,l,()=>l(e.currentUser)),HU(e,u=>l(u))}}const s=lR("auth");return s&&CU(e,`http://${s}`),e}function nj(){return document.getElementsByTagName("head")?.[0]??document}yU({loadJS(i){return new Promise((t,e)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=t,n.onerror=s=>{const a=Rs("internal-error");a.customData=s,e(a)},n.type="text/javascript",n.charset="UTF-8",nj().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q3("Browser");var ij="firebase",sj="12.8.0";Cs(ij,sj,"app");var PS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var la,JR;(function(){var i;function t(D,R){function M(){}M.prototype=R.prototype,D.F=R.prototype,D.prototype=new M,D.prototype.constructor=D,D.D=function(L,V,z){for(var F=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)F[bt-2]=arguments[bt];return R.prototype[V].apply(L,F)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,e),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,R,M){M||(M=0);const L=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)L[V]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(V=0;V<16;++V)L[V]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=D.g[0],M=D.g[1],V=D.g[2];let z=D.g[3],F;F=R+(z^M&(V^z))+L[0]+3614090360&4294967295,R=M+(F<<7&4294967295|F>>>25),F=z+(V^R&(M^V))+L[1]+3905402710&4294967295,z=R+(F<<12&4294967295|F>>>20),F=V+(M^z&(R^M))+L[2]+606105819&4294967295,V=z+(F<<17&4294967295|F>>>15),F=M+(R^V&(z^R))+L[3]+3250441966&4294967295,M=V+(F<<22&4294967295|F>>>10),F=R+(z^M&(V^z))+L[4]+4118548399&4294967295,R=M+(F<<7&4294967295|F>>>25),F=z+(V^R&(M^V))+L[5]+1200080426&4294967295,z=R+(F<<12&4294967295|F>>>20),F=V+(M^z&(R^M))+L[6]+2821735955&4294967295,V=z+(F<<17&4294967295|F>>>15),F=M+(R^V&(z^R))+L[7]+4249261313&4294967295,M=V+(F<<22&4294967295|F>>>10),F=R+(z^M&(V^z))+L[8]+1770035416&4294967295,R=M+(F<<7&4294967295|F>>>25),F=z+(V^R&(M^V))+L[9]+2336552879&4294967295,z=R+(F<<12&4294967295|F>>>20),F=V+(M^z&(R^M))+L[10]+4294925233&4294967295,V=z+(F<<17&4294967295|F>>>15),F=M+(R^V&(z^R))+L[11]+2304563134&4294967295,M=V+(F<<22&4294967295|F>>>10),F=R+(z^M&(V^z))+L[12]+1804603682&4294967295,R=M+(F<<7&4294967295|F>>>25),F=z+(V^R&(M^V))+L[13]+4254626195&4294967295,z=R+(F<<12&4294967295|F>>>20),F=V+(M^z&(R^M))+L[14]+2792965006&4294967295,V=z+(F<<17&4294967295|F>>>15),F=M+(R^V&(z^R))+L[15]+1236535329&4294967295,M=V+(F<<22&4294967295|F>>>10),F=R+(V^z&(M^V))+L[1]+4129170786&4294967295,R=M+(F<<5&4294967295|F>>>27),F=z+(M^V&(R^M))+L[6]+3225465664&4294967295,z=R+(F<<9&4294967295|F>>>23),F=V+(R^M&(z^R))+L[11]+643717713&4294967295,V=z+(F<<14&4294967295|F>>>18),F=M+(z^R&(V^z))+L[0]+3921069994&4294967295,M=V+(F<<20&4294967295|F>>>12),F=R+(V^z&(M^V))+L[5]+3593408605&4294967295,R=M+(F<<5&4294967295|F>>>27),F=z+(M^V&(R^M))+L[10]+38016083&4294967295,z=R+(F<<9&4294967295|F>>>23),F=V+(R^M&(z^R))+L[15]+3634488961&4294967295,V=z+(F<<14&4294967295|F>>>18),F=M+(z^R&(V^z))+L[4]+3889429448&4294967295,M=V+(F<<20&4294967295|F>>>12),F=R+(V^z&(M^V))+L[9]+568446438&4294967295,R=M+(F<<5&4294967295|F>>>27),F=z+(M^V&(R^M))+L[14]+3275163606&4294967295,z=R+(F<<9&4294967295|F>>>23),F=V+(R^M&(z^R))+L[3]+4107603335&4294967295,V=z+(F<<14&4294967295|F>>>18),F=M+(z^R&(V^z))+L[8]+1163531501&4294967295,M=V+(F<<20&4294967295|F>>>12),F=R+(V^z&(M^V))+L[13]+2850285829&4294967295,R=M+(F<<5&4294967295|F>>>27),F=z+(M^V&(R^M))+L[2]+4243563512&4294967295,z=R+(F<<9&4294967295|F>>>23),F=V+(R^M&(z^R))+L[7]+1735328473&4294967295,V=z+(F<<14&4294967295|F>>>18),F=M+(z^R&(V^z))+L[12]+2368359562&4294967295,M=V+(F<<20&4294967295|F>>>12),F=R+(M^V^z)+L[5]+4294588738&4294967295,R=M+(F<<4&4294967295|F>>>28),F=z+(R^M^V)+L[8]+2272392833&4294967295,z=R+(F<<11&4294967295|F>>>21),F=V+(z^R^M)+L[11]+1839030562&4294967295,V=z+(F<<16&4294967295|F>>>16),F=M+(V^z^R)+L[14]+4259657740&4294967295,M=V+(F<<23&4294967295|F>>>9),F=R+(M^V^z)+L[1]+2763975236&4294967295,R=M+(F<<4&4294967295|F>>>28),F=z+(R^M^V)+L[4]+1272893353&4294967295,z=R+(F<<11&4294967295|F>>>21),F=V+(z^R^M)+L[7]+4139469664&4294967295,V=z+(F<<16&4294967295|F>>>16),F=M+(V^z^R)+L[10]+3200236656&4294967295,M=V+(F<<23&4294967295|F>>>9),F=R+(M^V^z)+L[13]+681279174&4294967295,R=M+(F<<4&4294967295|F>>>28),F=z+(R^M^V)+L[0]+3936430074&4294967295,z=R+(F<<11&4294967295|F>>>21),F=V+(z^R^M)+L[3]+3572445317&4294967295,V=z+(F<<16&4294967295|F>>>16),F=M+(V^z^R)+L[6]+76029189&4294967295,M=V+(F<<23&4294967295|F>>>9),F=R+(M^V^z)+L[9]+3654602809&4294967295,R=M+(F<<4&4294967295|F>>>28),F=z+(R^M^V)+L[12]+3873151461&4294967295,z=R+(F<<11&4294967295|F>>>21),F=V+(z^R^M)+L[15]+530742520&4294967295,V=z+(F<<16&4294967295|F>>>16),F=M+(V^z^R)+L[2]+3299628645&4294967295,M=V+(F<<23&4294967295|F>>>9),F=R+(V^(M|~z))+L[0]+4096336452&4294967295,R=M+(F<<6&4294967295|F>>>26),F=z+(M^(R|~V))+L[7]+1126891415&4294967295,z=R+(F<<10&4294967295|F>>>22),F=V+(R^(z|~M))+L[14]+2878612391&4294967295,V=z+(F<<15&4294967295|F>>>17),F=M+(z^(V|~R))+L[5]+4237533241&4294967295,M=V+(F<<21&4294967295|F>>>11),F=R+(V^(M|~z))+L[12]+1700485571&4294967295,R=M+(F<<6&4294967295|F>>>26),F=z+(M^(R|~V))+L[3]+2399980690&4294967295,z=R+(F<<10&4294967295|F>>>22),F=V+(R^(z|~M))+L[10]+4293915773&4294967295,V=z+(F<<15&4294967295|F>>>17),F=M+(z^(V|~R))+L[1]+2240044497&4294967295,M=V+(F<<21&4294967295|F>>>11),F=R+(V^(M|~z))+L[8]+1873313359&4294967295,R=M+(F<<6&4294967295|F>>>26),F=z+(M^(R|~V))+L[15]+4264355552&4294967295,z=R+(F<<10&4294967295|F>>>22),F=V+(R^(z|~M))+L[6]+2734768916&4294967295,V=z+(F<<15&4294967295|F>>>17),F=M+(z^(V|~R))+L[13]+1309151649&4294967295,M=V+(F<<21&4294967295|F>>>11),F=R+(V^(M|~z))+L[4]+4149444226&4294967295,R=M+(F<<6&4294967295|F>>>26),F=z+(M^(R|~V))+L[11]+3174756917&4294967295,z=R+(F<<10&4294967295|F>>>22),F=V+(R^(z|~M))+L[2]+718787259&4294967295,V=z+(F<<15&4294967295|F>>>17),F=M+(z^(V|~R))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(V+(F<<21&4294967295|F>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+z&4294967295}n.prototype.v=function(D,R){R===void 0&&(R=D.length);const M=R-this.blockSize,L=this.C;let V=this.h,z=0;for(;z<R;){if(V==0)for(;z<=M;)s(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<R;)if(L[V++]=D.charCodeAt(z++),V==this.blockSize){s(this,L),V=0;break}}else for(;z<R;)if(L[V++]=D[z++],V==this.blockSize){s(this,L),V=0;break}}this.h=V,this.o+=R},n.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var M=D.length-8;M<D.length;++M)D[M]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,M=0;M<4;++M)for(let L=0;L<32;L+=8)D[R++]=this.g[M]>>>L&255;return D};function a(D,R){var M=u;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=R(D)}function l(D,R){this.h=R;const M=[];let L=!0;for(let V=D.length-1;V>=0;V--){const z=D[V]|0;L&&z==R||(M[V]=z,L=!1)}this.g=M}var u={};function h(D){return-128<=D&&D<128?a(D,function(R){return new l([R|0],R<0?-1:0)}):new l([D|0],D<0?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return x(f(-D));const R=[];let M=1;for(let L=0;D>=M;L++)R[L]=D/M|0,M*=4294967296;return new l(R,0)}function p(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return x(p(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(R,8));let L=g;for(let z=0;z<D.length;z+=8){var V=Math.min(8,D.length-z);const F=parseInt(D.substring(z,z+V),R);V<8?(V=f(Math.pow(R,V)),L=L.j(V).add(f(F))):(L=L.j(M),L=L.add(f(F)))}return L}var g=h(0),v=h(1),b=h(16777216);i=l.prototype,i.m=function(){if(w(this))return-x(this).m();let D=0,R=1;for(let M=0;M<this.g.length;M++){const L=this.i(M);D+=(L>=0?L:4294967296+L)*R,R*=4294967296}return D},i.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(E(this))return"0";if(w(this))return"-"+x(this).toString(D);const R=f(Math.pow(D,6));var M=this;let L="";for(;;){const V=U(M,R).g;M=C(M,V.j(R));let z=((M.g.length>0?M.g[0]:M.h)>>>0).toString(D);if(M=V,E(M))return z+L;for(;z.length<6;)z="0"+z;L=z+L}},i.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function E(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function w(D){return D.h==-1}i.l=function(D){return D=C(this,D),w(D)?-1:E(D)?0:1};function x(D){const R=D.g.length,M=[];for(let L=0;L<R;L++)M[L]=~D.g[L];return new l(M,~D.h).add(v)}i.abs=function(){return w(this)?x(this):this},i.add=function(D){const R=Math.max(this.g.length,D.g.length),M=[];let L=0;for(let V=0;V<=R;V++){let z=L+(this.i(V)&65535)+(D.i(V)&65535),F=(z>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);L=F>>>16,z&=65535,F&=65535,M[V]=F<<16|z}return new l(M,M[M.length-1]&-2147483648?-1:0)};function C(D,R){return D.add(x(R))}i.j=function(D){if(E(this)||E(D))return g;if(w(this))return w(D)?x(this).j(x(D)):x(x(this).j(D));if(w(D))return x(this.j(x(D)));if(this.l(b)<0&&D.l(b)<0)return f(this.m()*D.m());const R=this.g.length+D.g.length,M=[];for(var L=0;L<2*R;L++)M[L]=0;for(L=0;L<this.g.length;L++)for(let V=0;V<D.g.length;V++){const z=this.i(L)>>>16,F=this.i(L)&65535,bt=D.i(V)>>>16,Bt=D.i(V)&65535;M[2*L+2*V]+=F*Bt,N(M,2*L+2*V),M[2*L+2*V+1]+=z*Bt,N(M,2*L+2*V+1),M[2*L+2*V+1]+=F*bt,N(M,2*L+2*V+1),M[2*L+2*V+2]+=z*bt,N(M,2*L+2*V+2)}for(D=0;D<R;D++)M[D]=M[2*D+1]<<16|M[2*D];for(D=R;D<2*R;D++)M[D]=0;return new l(M,0)};function N(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function O(D,R){this.g=D,this.h=R}function U(D,R){if(E(R))throw Error("division by zero");if(E(D))return new O(g,g);if(w(D))return R=U(x(D),R),new O(x(R.g),x(R.h));if(w(R))return R=U(D,x(R)),new O(x(R.g),R.h);if(D.g.length>30){if(w(D)||w(R))throw Error("slowDivide_ only works with positive integers.");for(var M=v,L=R;L.l(D)<=0;)M=G(M),L=G(L);var V=Y(M,1),z=Y(L,1);for(L=Y(L,2),M=Y(M,2);!E(L);){var F=z.add(L);F.l(D)<=0&&(V=V.add(M),z=F),L=Y(L,1),M=Y(M,1)}return R=C(D,V.j(R)),new O(V,R)}for(V=g;D.l(R)>=0;){for(M=Math.max(1,Math.floor(D.m()/R.m())),L=Math.ceil(Math.log(M)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),z=f(M),F=z.j(R);w(F)||F.l(D)>0;)M-=L,z=f(M),F=z.j(R);E(z)&&(z=v),V=V.add(z),D=C(D,F)}return new O(V,D)}i.B=function(D){return U(this,D).h},i.and=function(D){const R=Math.max(this.g.length,D.g.length),M=[];for(let L=0;L<R;L++)M[L]=this.i(L)&D.i(L);return new l(M,this.h&D.h)},i.or=function(D){const R=Math.max(this.g.length,D.g.length),M=[];for(let L=0;L<R;L++)M[L]=this.i(L)|D.i(L);return new l(M,this.h|D.h)},i.xor=function(D){const R=Math.max(this.g.length,D.g.length),M=[];for(let L=0;L<R;L++)M[L]=this.i(L)^D.i(L);return new l(M,this.h^D.h)};function G(D){const R=D.g.length+1,M=[];for(let L=0;L<R;L++)M[L]=D.i(L)<<1|D.i(L-1)>>>31;return new l(M,D.h)}function Y(D,R){const M=R>>5;R%=32;const L=D.g.length-M,V=[];for(let z=0;z<L;z++)V[z]=R>0?D.i(z+M)>>>R|D.i(z+M+1)<<32-R:D.i(z+M);return new l(V,D.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,JR=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,la=l}).apply(typeof PS<"u"?PS:typeof self<"u"?self:typeof window<"u"?window:{});var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ZR,Pu,tI,Bf,Ov,eI,nI,iI;(function(){var i,t=Object.defineProperty;function e(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof _f=="object"&&_f];for(var A=0;A<m.length;++A){var S=m[A];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var n=e(this);function s(m,A){if(A)t:{var S=n;m=m.split(".");for(var P=0;P<m.length-1;P++){var K=m[P];if(!(K in S))break t;S=S[K]}m=m[m.length-1],P=S[m],A=A(P),A!=P&&A!=null&&t(S,m,{configurable:!0,writable:!0,value:A})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(A){var S=[],P;for(P in A)Object.prototype.hasOwnProperty.call(A,P)&&S.push([P,A[P]]);return S}});var a=a||{},l=this||self;function u(m){var A=typeof m;return A=="object"&&m!=null||A=="function"}function h(m,A,S){return m.call.apply(m.bind,arguments)}function f(m,A,S){return f=h,f.apply(null,arguments)}function p(m,A){var S=Array.prototype.slice.call(arguments,1);return function(){var P=S.slice();return P.push.apply(P,arguments),m.apply(this,P)}}function g(m,A){function S(){}S.prototype=A.prototype,m.Z=A.prototype,m.prototype=new S,m.prototype.constructor=m,m.Ob=function(P,K,tt){for(var ct=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)ct[Lt-2]=arguments[Lt];return A.prototype[K].apply(P,ct)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function b(m){const A=m.length;if(A>0){const S=Array(A);for(let P=0;P<A;P++)S[P]=m[P];return S}return[]}function E(m,A){for(let P=1;P<arguments.length;P++){const K=arguments[P];var S=typeof K;if(S=S!="object"?S:K?Array.isArray(K)?"array":S:"null",S=="array"||S=="object"&&typeof K.length=="number"){S=m.length||0;const tt=K.length||0;m.length=S+tt;for(let ct=0;ct<tt;ct++)m[S+ct]=K[ct]}else m.push(K)}}class w{constructor(A,S){this.i=A,this.j=S,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function x(m){l.setTimeout(()=>{throw m},0)}function C(){var m=D;let A=null;return m.g&&(A=m.g,m.g=m.g.next,m.g||(m.h=null),A.next=null),A}class N{constructor(){this.h=this.g=null}add(A,S){const P=O.get();P.set(A,S),this.h?this.h.next=P:this.g=P,this.h=P}}var O=new w(()=>new U,m=>m.reset());class U{constructor(){this.next=this.g=this.h=null}set(A,S){this.h=A,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Y=!1,D=new N,R=()=>{const m=Promise.resolve(void 0);G=()=>{m.then(M)}};function M(){for(var m;m=C();){try{m.h.call(m.g)}catch(S){x(S)}var A=O;A.j(m),A.h<100&&(A.h++,m.next=A.g,A.g=m)}Y=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(m,A){this.type=m,this.g=this.target=A,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,A=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};l.addEventListener("test",S,A),l.removeEventListener("test",S,A)}catch{}return m})();function F(m){return/^[\s\xa0]*$/.test(m)}function bt(m,A){V.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,A)}g(bt,V),bt.prototype.init=function(m,A){const S=this.type=m.type,P=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=A,A=m.relatedTarget,A||(S=="mouseover"?A=m.fromElement:S=="mouseout"&&(A=m.toElement)),this.relatedTarget=A,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&bt.Z.h.call(this)},bt.prototype.h=function(){bt.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Bt="closure_listenable_"+(Math.random()*1e6|0),$=0;function Z(m,A,S,P,K){this.listener=m,this.proxy=null,this.src=A,this.type=S,this.capture=!!P,this.ha=K,this.key=++$,this.da=this.fa=!1}function ut(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Tt(m,A,S){for(const P in m)A.call(S,m[P],P,m)}function Mt(m,A){for(const S in m)A.call(void 0,m[S],S,m)}function H(m){const A={};for(const S in m)A[S]=m[S];return A}const nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(m,A){let S,P;for(let K=1;K<arguments.length;K++){P=arguments[K];for(S in P)m[S]=P[S];for(let tt=0;tt<nt.length;tt++)S=nt[tt],Object.prototype.hasOwnProperty.call(P,S)&&(m[S]=P[S])}}function ht(m){this.src=m,this.g={},this.h=0}ht.prototype.add=function(m,A,S,P,K){const tt=m.toString();m=this.g[tt],m||(m=this.g[tt]=[],this.h++);const ct=At(m,A,P,K);return ct>-1?(A=m[ct],S||(A.fa=!1)):(A=new Z(A,this.src,tt,!!P,K),A.fa=S,m.push(A)),A};function St(m,A){const S=A.type;if(S in m.g){var P=m.g[S],K=Array.prototype.indexOf.call(P,A,void 0),tt;(tt=K>=0)&&Array.prototype.splice.call(P,K,1),tt&&(ut(A),m.g[S].length==0&&(delete m.g[S],m.h--))}}function At(m,A,S,P){for(let K=0;K<m.length;++K){const tt=m[K];if(!tt.da&&tt.listener==A&&tt.capture==!!S&&tt.ha==P)return K}return-1}var vt="closure_lm_"+(Math.random()*1e6|0),pe={};function he(m,A,S,P,K){if(Array.isArray(A)){for(let tt=0;tt<A.length;tt++)he(m,A[tt],S,P,K);return null}return S=gc(S),m&&m[Bt]?m.J(A,S,u(P)?!!P.capture:!1,K):Us(m,A,S,!1,P,K)}function Us(m,A,S,P,K,tt){if(!A)throw Error("Invalid event type");const ct=u(K)?!!K.capture:!!K;let Lt=Da(m);if(Lt||(m[vt]=Lt=new ht(m)),S=Lt.add(A,S,P,ct,tt),S.proxy)return S;if(P=Po(),S.proxy=P,P.src=m,P.listener=S,m.addEventListener)z||(K=ct),K===void 0&&(K=!1),m.addEventListener(A.toString(),P,K);else if(m.attachEvent)m.attachEvent(ts(A.toString()),P);else if(m.addListener&&m.removeListener)m.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Po(){function m(S){return A.call(m.src,m.listener,S)}const A=pc;return m}function No(m,A,S,P,K){if(Array.isArray(A))for(var tt=0;tt<A.length;tt++)No(m,A[tt],S,P,K);else P=u(P)?!!P.capture:!!P,S=gc(S),m&&m[Bt]?(m=m.i,tt=String(A).toString(),tt in m.g&&(A=m.g[tt],S=At(A,S,P,K),S>-1&&(ut(A[S]),Array.prototype.splice.call(A,S,1),A.length==0&&(delete m.g[tt],m.h--)))):m&&(m=Da(m))&&(A=m.g[A.toString()],m=-1,A&&(m=At(A,S,P,K)),(S=m>-1?A[m]:null)&&ko(S))}function ko(m){if(typeof m!="number"&&m&&!m.da){var A=m.src;if(A&&A[Bt])St(A.i,m);else{var S=m.type,P=m.proxy;A.removeEventListener?A.removeEventListener(S,P,m.capture):A.detachEvent?A.detachEvent(ts(S),P):A.addListener&&A.removeListener&&A.removeListener(P),(S=Da(A))?(St(S,m),S.h==0&&(S.src=null,A[vt]=null)):ut(m)}}}function ts(m){return m in pe?pe[m]:pe[m]="on"+m}function pc(m,A){if(m.da)m=!0;else{A=new bt(A,this);const S=m.listener,P=m.ha||m.src;m.fa&&ko(m),m=S.call(P,A)}return m}function Da(m){return m=m[vt],m instanceof ht?m:null}var mc="__closure_events_fn_"+(Math.random()*1e9>>>0);function gc(m){return typeof m=="function"?m:(m[mc]||(m[mc]=function(A){return m.handleEvent(A)}),m[mc])}function Ve(){L.call(this),this.i=new ht(this),this.M=this,this.G=null}g(Ve,L),Ve.prototype[Bt]=!0,Ve.prototype.removeEventListener=function(m,A,S,P){No(this,m,A,S,P)};function Je(m,A){var S,P=m.G;if(P)for(S=[];P;P=P.G)S.push(P);if(m=m.M,P=A.type||A,typeof A=="string")A=new V(A,m);else if(A instanceof V)A.target=A.target||m;else{var K=A;A=new V(P,m),lt(A,K)}K=!0;let tt,ct;if(S)for(ct=S.length-1;ct>=0;ct--)tt=A.g=S[ct],K=vr(tt,P,!0,A)&&K;if(tt=A.g=m,K=vr(tt,P,!0,A)&&K,K=vr(tt,P,!1,A)&&K,S)for(ct=0;ct<S.length;ct++)tt=A.g=S[ct],K=vr(tt,P,!1,A)&&K}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var m=this.i;for(const A in m.g){const S=m.g[A];for(let P=0;P<S.length;P++)ut(S[P]);delete m.g[A],m.h--}}this.G=null},Ve.prototype.J=function(m,A,S,P){return this.i.add(String(m),A,!1,S,P)},Ve.prototype.K=function(m,A,S,P){return this.i.add(String(m),A,!0,S,P)};function vr(m,A,S,P){if(A=m.i.g[String(A)],!A)return!0;A=A.concat();let K=!0;for(let tt=0;tt<A.length;++tt){const ct=A[tt];if(ct&&!ct.da&&ct.capture==S){const Lt=ct.listener,Me=ct.ha||ct.src;ct.fa&&St(m.i,ct),K=Lt.call(Me,P)!==!1&&K}}return K&&!P.defaultPrevented}function hm(m,A){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:l.setTimeout(m,A||0)}function Lh(m){m.g=hm(()=>{m.g=null,m.i&&(m.i=!1,Lh(m))},m.l);const A=m.h;m.h=null,m.m.apply(null,A)}class Dn extends L{constructor(A,S){super(),this.m=A,this.l=S,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Lh(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(m){L.call(this),this.h=m,this.g={}}g(Ma,L);var yc=[];function vc(m){Tt(m.g,function(A,S){this.g.hasOwnProperty(S)&&ko(A)},m),m.g={}}Ma.prototype.N=function(){Ma.Z.N.call(this),vc(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=l.JSON.stringify,dm=l.JSON.parse,Vh=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function Fh(){}function Uh(){}var Di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function un(){V.call(this,"d")}g(un,V);function ui(){V.call(this,"c")}g(ui,V);var De={},jh=null;function Oo(){return jh=jh||new Ve}De.Ia="serverreachability";function Bh(m){V.call(this,De.Ia,m)}g(Bh,V);function es(m){const A=Oo();Je(A,new Bh(A))}De.STAT_EVENT="statevent";function Pa(m,A){V.call(this,De.STAT_EVENT,m),this.stat=A}g(Pa,V);function Fe(m){const A=Oo();Je(A,new Pa(A,m))}De.Ja="timingevent";function ns(m,A){V.call(this,De.Ja,m),this.size=A}g(ns,V);function is(m,A){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},A)}function Mi(){this.g=!0}Mi.prototype.ua=function(){this.g=!1};function fm(m,A,S,P,K,tt){m.info(function(){if(m.g)if(tt){var ct="",Lt=tt.split("&");for(let ee=0;ee<Lt.length;ee++){var Me=Lt[ee].split("=");if(Me.length>1){const be=Me[0];Me=Me[1];const pi=be.split("_");ct=pi.length>=2&&pi[1]=="type"?ct+(be+"="+Me+"&"):ct+(be+"=redacted&")}}}else ct=null;else ct=tt;return"XMLHTTP REQ ("+P+") [attempt "+K+"]: "+A+`
`+S+`
`+ct})}function zh(m,A,S,P,K,tt,ct){m.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+K+"]: "+A+`
`+S+`
`+tt+" "+ct})}function ss(m,A,S,P){m.info(function(){return"XMLHTTP TEXT ("+A+"): "+pm(m,S)+(P?" "+P:"")})}function Na(m,A){m.info(function(){return"TIMEOUT: "+A})}Mi.prototype.info=function(){};function pm(m,A){if(!m.g)return A;if(!A)return null;try{const tt=JSON.parse(A);if(tt){for(m=0;m<tt.length;m++)if(Array.isArray(tt[m])){var S=tt[m];if(!(S.length<2)){var P=S[1];if(Array.isArray(P)&&!(P.length<1)){var K=P[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ct=1;ct<P.length;ct++)P[ct]=""}}}}return _r(tt)}catch{return A}}var ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_c={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bc;function Oa(){}g(Oa,Fh),Oa.prototype.g=function(){return new XMLHttpRequest},bc=new Oa;function js(m){return encodeURIComponent(String(m))}function Hh(m){var A=1;m=m.split(":");const S=[];for(;A>0&&m.length;)S.push(m.shift()),A--;return m.length&&S.push(m.join(":")),S}function Pi(m,A,S,P){this.j=m,this.i=A,this.l=S,this.S=P||1,this.V=new Ma(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ni}function Ni(){this.i=null,this.g="",this.h=!1}var Ue={},an={};function rs(m,A,S){m.M=1,m.A=La(Be(A)),m.u=S,m.R=!0,Lo(m,null)}function Lo(m,A){m.F=Date.now(),as(m),m.B=Be(m.A);var S=m.B,P=m.S;Array.isArray(P)||(P=[String(P)]),jo(S.i,"t",P),m.C=0,S=m.j.L,m.h=new Ni,m.g=sd(m.j,S?A:null,!m.u),m.P>0&&(m.O=new Dn(f(m.Y,m,m.g),m.P)),A=m.V,S=m.g,P=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(yc[0]=K.toString()),K=yc);for(let tt=0;tt<K.length;tt++){const ct=he(S,K[tt],P||A.handleEvent,!1,A.h||A);if(!ct)break;A.g[ct.key]=ct}A=m.J?H(m.J):{},m.u?(m.v||(m.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,A)):(m.v="GET",m.g.ea(m.B,m.v,null,A)),es(),fm(m.i,m.v,m.B,m.l,m.S,m.u)}Pi.prototype.ba=function(m){m=m.target;const A=this.O;A&&Li(m)==3?A.j():this.Y(m)},Pi.prototype.Y=function(m){try{if(m==this.g)t:{const Lt=Li(this.g),Me=this.g.ya(),ee=this.g.ca();if(!(Lt<3)&&(Lt!=3||this.g&&(this.h.h||this.g.la()||hn(this.g)))){this.K||Lt!=4||Me==7||(Me==8||ee<=0?es(3):es(2)),os(this);var A=this.g.ca();this.X=A;var S=mm(this);if(this.o=A==200,zh(this.i,this.v,this.B,this.l,this.S,Lt,A),this.o){if(this.U&&!this.L){e:{if(this.g){var P,K=this.g;if((P=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(P)){var tt=P;break e}}tt=null}if(m=tt)ss(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ls(this,m);else{this.o=!1,this.m=3,Fe(12),Wn(this),hi(this);break t}}if(this.R){m=!0;let be;for(;!this.K&&this.C<S.length;)if(be=qh(this,S),be==an){Lt==4&&(this.m=4,Fe(14),m=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(be==Ue){this.m=4,Fe(15),ss(this.i,this.l,S,"[Invalid Chunk]"),m=!1;break}else ss(this.i,this.l,be,null),ls(this,be);if(Gh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||S.length!=0||this.h.h||(this.m=1,Fe(16),m=!1),this.o=this.o&&m,!m)ss(this.i,this.l,S,"[Invalid Chunked Response]"),Wn(this),hi(this);else if(S.length>0&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.aa&&!ct.P&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Oc(ct),ct.P=!0,Fe(11))}}else ss(this.i,this.l,S,null),ls(this,S);Lt==4&&Wn(this),this.o&&!this.K&&(Lt==4?td(this.j,this):(this.o=!1,as(this)))}else zs(this.g),A==400&&S.indexOf("Unknown SID")>0?(this.m=3,Fe(12)):(this.m=0,Fe(13)),Wn(this),hi(this)}}}catch{}};function mm(m){if(!Gh(m))return m.g.la();const A=hn(m.g);if(A==="")return"";let S="";const P=A.length,K=Li(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Wn(m),hi(m),"";m.h.i=new l.TextDecoder}for(let tt=0;tt<P;tt++)m.h.h=!0,S+=m.h.i.decode(A[tt],{stream:!(K&&tt==P-1)});return A.length=0,m.h.g+=S,m.C=0,m.h.g}function Gh(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function qh(m,A){var S=m.C,P=A.indexOf(`
`,S);return P==-1?an:(S=Number(A.substring(S,P)),isNaN(S)?Ue:(P+=1,P+S>A.length?an:(A=A.slice(P,P+S),m.C=P+S,A)))}Pi.prototype.cancel=function(){this.K=!0,Wn(this)};function as(m){m.T=Date.now()+m.H,Vo(m,m.H)}function Vo(m,A){if(m.D!=null)throw Error("WatchDog timer not null");m.D=is(f(m.aa,m),A)}function os(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Pi.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Na(this.i,this.B),this.M!=2&&(es(),Fe(17)),Wn(this),this.m=2,hi(this)):Vo(this,this.T-m)};function hi(m){m.j.I==0||m.K||td(m.j,m)}function Wn(m){os(m);var A=m.O;A&&typeof A.dispose=="function"&&A.dispose(),m.O=null,vc(m.V),m.g&&(A=m.g,m.g=null,A.abort(),A.dispose())}function ls(m,A){try{var S=m.j;if(S.I!=0&&(S.g==m||us(S.h,m))){if(!m.L&&us(S.h,m)&&S.I==3){try{var P=S.Ba.g.parse(A)}catch{P=null}if(Array.isArray(P)&&P.length==3){var K=P;if(K[0]==0){t:if(!S.v){if(S.g)if(S.g.F+3e3<m.F)qo(S),Cr(S);else break t;Ha(S),Fe(18)}}else S.xa=K[1],0<S.xa-S.K&&K[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=is(f(S.Va,S),6e3));cs(S.h)<=1&&S.ta&&(S.ta=void 0)}else gs(S,11)}else if((m.L||S.g==m)&&qo(S),!F(A))for(K=S.Ba.g.parse(A),A=0;A<K.length;A++){let ee=K[A];const be=ee[0];if(!(be<=S.K))if(S.K=be,ee=ee[1],S.I==2)if(ee[0]=="c"){S.M=ee[1],S.ba=ee[2];const pi=ee[3];pi!=null&&(S.ka=pi,S.j.info("VER="+S.ka));const ys=ee[4];ys!=null&&(S.za=ys,S.j.info("SVER="+S.za));const Vi=ee[5];Vi!=null&&typeof Vi=="number"&&Vi>0&&(P=1.5*Vi,S.O=P,S.j.info("backChannelRequestTimeoutMs_="+P)),P=S;const Fi=m.g;if(Fi){const Ga=Fi.g?Fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ga){var tt=P.h;tt.g||Ga.indexOf("spdy")==-1&&Ga.indexOf("quic")==-1&&Ga.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(wc(tt,tt.h),tt.h=null))}if(P.G){const $o=Fi.g?Fi.g.getResponseHeader("X-HTTP-Session-Id"):null;$o&&(P.wa=$o,se(P.J,P.G,$o))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-m.F,S.j.info("Handshake RTT: "+S.T+"ms")),P=S;var ct=m;if(P.na=id(P,P.L?P.ba:null,P.W),ct.L){Tc(P.h,ct);var Lt=ct,Me=P.O;Me&&(Lt.H=Me),Lt.D&&(os(Lt),as(Lt)),P.g=ct}else Jh(P);S.i.length>0&&ms(S)}else ee[0]!="stop"&&ee[0]!="close"||gs(S,7);else S.I==3&&(ee[0]=="stop"||ee[0]=="close"?ee[0]=="stop"?gs(S,7):Nc(S):ee[0]!="noop"&&S.l&&S.l.qa(ee),S.A=0)}}es(4)}catch{}}var je=class{constructor(m,A){this.g=m,this.map=A}};function Ac(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ec(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function cs(m){return m.h?1:m.g?m.g.size:0}function us(m,A){return m.h?m.h==A:m.g?m.g.has(A):!1}function wc(m,A){m.g?m.g.add(A):m.h=A}function Tc(m,A){m.h&&m.h==A?m.h=null:m.g&&m.g.has(A)&&m.g.delete(A)}Ac.prototype.cancel=function(){if(this.i=Sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Sc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let A=m.i;for(const S of m.g.values())A=A.concat(S.G);return A}return b(m.i)}var $h=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fo(m,A){if(m){m=m.split("&");for(let S=0;S<m.length;S++){const P=m[S].indexOf("=");let K,tt=null;P>=0?(K=m[S].substring(0,P),tt=m[S].substring(P+1)):K=m[S],A(K,tt?decodeURIComponent(tt.replace(/\+/g," ")):"")}}}function Qn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;m instanceof Qn?(this.l=m.l,on(this,m.j),this.o=m.o,this.g=m.g,br(this,m.u),this.h=m.h,xc(this,Wh(m.i)),this.m=m.m):m&&(A=String(m).match($h))?(this.l=!1,on(this,A[1]||"",!0),this.o=hs(A[2]||""),this.g=hs(A[3]||"",!0),br(this,A[4]),this.h=hs(A[5]||"",!0),xc(this,A[6]||"",!0),this.m=hs(A[7]||"")):(this.l=!1,this.i=new Er(null,this.l))}Qn.prototype.toString=function(){const m=[];var A=this.j;A&&m.push(Va(A,Uo,!0),":");var S=this.g;return(S||A=="file")&&(m.push("//"),(A=this.o)&&m.push(Va(A,Uo,!0),"@"),m.push(js(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&m.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(Va(S,S.charAt(0)=="/"?Cc:Xh,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",Va(S,Yh)),m.join("")},Qn.prototype.resolve=function(m){const A=Be(this);let S=!!m.j;S?on(A,m.j):S=!!m.o,S?A.o=m.o:S=!!m.g,S?A.g=m.g:S=m.u!=null;var P=m.h;if(S)br(A,m.u);else if(S=!!m.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var K=A.h.lastIndexOf("/");K!=-1&&(P=A.h.slice(0,K+1)+P)}if(K=P,K==".."||K==".")P="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){P=K.lastIndexOf("/",0)==0,K=K.split("/");const tt=[];for(let ct=0;ct<K.length;){const Lt=K[ct++];Lt=="."?P&&ct==K.length&&tt.push(""):Lt==".."?((tt.length>1||tt.length==1&&tt[0]!="")&&tt.pop(),P&&ct==K.length&&tt.push("")):(tt.push(Lt),P=!0)}P=tt.join("/")}else P=K}return S?A.h=P:S=m.i.toString()!=="",S?xc(A,Wh(m.i)):S=!!m.m,S&&(A.m=m.m),A};function Be(m){return new Qn(m)}function on(m,A,S){m.j=S?hs(A,!0):A,m.j&&(m.j=m.j.replace(/:$/,""))}function br(m,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);m.u=A}else m.u=null}function xc(m,A,S){A instanceof Er?(m.i=A,Bo(m.i,m.l)):(S||(A=Va(A,Ar)),m.i=new Er(A,m.l))}function se(m,A,S){m.i.set(A,S)}function La(m){return se(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function hs(m,A){return m?A?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Va(m,A,S){return typeof m=="string"?(m=encodeURI(m).replace(A,Fn),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Fn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Uo=/[#\/\?@]/g,Xh=/[#\?:]/g,Cc=/[#\?]/g,Ar=/[#\?@]/g,Yh=/#/g;function Er(m,A){this.h=this.g=null,this.i=m||null,this.j=!!A}function Un(m){m.g||(m.g=new Map,m.h=0,m.i&&Fo(m.i,function(A,S){m.add(decodeURIComponent(A.replace(/\+/g," ")),S)}))}i=Er.prototype,i.add=function(m,A){Un(this),this.i=null,m=wr(this,m);let S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(A),this.h+=1,this};function Kh(m,A){Un(m),A=wr(m,A),m.g.has(A)&&(m.i=null,m.h-=m.g.get(A).length,m.g.delete(A))}function Rc(m,A){return Un(m),A=wr(m,A),m.g.has(A)}i.forEach=function(m,A){Un(this),this.g.forEach(function(S,P){S.forEach(function(K){m.call(A,K,P,this)},this)},this)};function Ic(m,A){Un(m);let S=[];if(typeof A=="string")Rc(m,A)&&(S=S.concat(m.g.get(wr(m,A))));else for(m=Array.from(m.g.values()),A=0;A<m.length;A++)S=S.concat(m[A]);return S}i.set=function(m,A){return Un(this),this.i=null,m=wr(this,m),Rc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[A]),this.h+=1,this},i.get=function(m,A){return m?(m=Ic(this,m),m.length>0?String(m[0]):A):A};function jo(m,A,S){Kh(m,A),S.length>0&&(m.i=null,m.g.set(wr(m,A),b(S)),m.h+=S.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],A=Array.from(this.g.keys());for(let P=0;P<A.length;P++){var S=A[P];const K=js(S);S=Ic(this,S);for(let tt=0;tt<S.length;tt++){let ct=K;S[tt]!==""&&(ct+="="+js(S[tt])),m.push(ct)}}return this.i=m.join("&")};function Wh(m){const A=new Er;return A.i=m.i,m.g&&(A.g=new Map(m.g),A.h=m.h),A}function wr(m,A){return A=String(A),m.j&&(A=A.toLowerCase()),A}function Bo(m,A){A&&!m.j&&(Un(m),m.i=null,m.g.forEach(function(S,P){const K=P.toLowerCase();P!=K&&(Kh(this,P),jo(this,K,S))},m)),m.j=A}function ki(m,A){const S=new Mi;if(l.Image){const P=new Image;P.onload=p(di,S,"TestLoadImage: loaded",!0,A,P),P.onerror=p(di,S,"TestLoadImage: error",!1,A,P),P.onabort=p(di,S,"TestLoadImage: abort",!1,A,P),P.ontimeout=p(di,S,"TestLoadImage: timeout",!1,A,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=m}else A(!1)}function Dc(m,A){const S=new Mi,P=new AbortController,K=setTimeout(()=>{P.abort(),di(S,"TestPingServer: timeout",!1,A)},1e4);fetch(m,{signal:P.signal}).then(tt=>{clearTimeout(K),tt.ok?di(S,"TestPingServer: ok",!0,A):di(S,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(K),di(S,"TestPingServer: error",!1,A)})}function di(m,A,S,P,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),P(S)}catch{}}function Tr(){this.g=new Vh}function ds(m){this.i=m.Sb||null,this.h=m.ab||!1}g(ds,Fh),ds.prototype.g=function(){return new Fa(this.i,this.h)};function Fa(m,A){Ve.call(this),this.H=m,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Fa,Ve),i=Fa.prototype,i.open=function(m,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=A,this.readyState=1,Oi(this)},i.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(A.body=m),(this.H||l).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},i.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zo(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function zo(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}i.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var A=m.value?m.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!m.done}))&&(this.response=this.responseText+=A)}m.done?Sr(this):Oi(this),this.readyState==3&&zo(this)}},i.Oa=function(m){this.g&&(this.response=this.responseText=m,Sr(this))},i.Na=function(m){this.g&&(this.response=m,Sr(this))},i.ga=function(){this.g&&Sr(this)};function Sr(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Oi(m)}i.setRequestHeader=function(m,A){this.A.append(m,A)},i.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],A=this.h.entries();for(var S=A.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=A.next();return m.join(`\r
`)};function Oi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function fi(m){let A="";return Tt(m,function(S,P){A+=P,A+=":",A+=S,A+=`\r
`}),A}function Ua(m,A,S){t:{for(P in S){var P=!1;break t}P=!0}P||(S=fi(S),typeof m=="string"?S!=null&&js(S):se(m,A,S))}function oe(m){Ve.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(oe,Ve);var fs=/^https?$/i,Mc=["POST","PUT"];i=oe.prototype,i.Fa=function(m){this.H=m},i.ea=function(m,A,S,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);A=A?A.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(A,String(m),!0),this.B=!1}catch(tt){ja(this,tt);return}if(m=S||"",S=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var K in P)S.set(K,P[K]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const tt of P.keys())S.set(tt,P.get(tt));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(S.keys()).find(tt=>tt.toLowerCase()=="content-type"),K=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(Mc,A,void 0)>=0)||P||K||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,ct]of S)this.g.setRequestHeader(tt,ct);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(tt){ja(this,tt)}};function ja(m,A){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=A,m.o=5,Pc(m),Bs(m)}function Pc(m){m.A||(m.A=!0,Je(m,"complete"),Je(m,"error"))}i.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Je(this,"complete"),Je(this,"abort"),Bs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bs(this,!0)),oe.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ba(this):this.Xa())},i.Xa=function(){Ba(this)};function Ba(m){if(m.h&&typeof a<"u"){if(m.v&&Li(m)==4)setTimeout(m.Ca.bind(m),0);else if(Je(m,"readystatechange"),Li(m)==4){m.h=!1;try{const tt=m.ca();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var S;if(!(S=A)){var P;if(P=tt===0){let ct=String(m.D).match($h)[1]||null;!ct&&l.self&&l.self.location&&(ct=l.self.location.protocol.slice(0,-1)),P=!fs.test(ct?ct.toLowerCase():"")}S=P}if(S)Je(m,"complete"),Je(m,"success");else{m.o=6;try{var K=Li(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",Pc(m)}}finally{Bs(m)}}}}function Bs(m,A){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const S=m.g;m.g=null,A||Je(m,"ready");try{S.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Li(m){return m.g?m.g.readyState:0}i.ca=function(){try{return Li(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(m){if(this.g){var A=this.g.responseText;return m&&A.indexOf(m)==0&&(A=A.substring(m.length)),dm(A)}};function hn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function zs(m){const A={};m=(m.g&&Li(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<m.length;P++){if(F(m[P]))continue;var S=Hh(m[P]);const K=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const tt=A[K]||[];A[K]=tt,tt.push(S)}Mt(A,function(P){return P.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(m,A,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||A}function xr(m){this.za=0,this.i=[],this.j=new Mi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ps("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ps("baseRetryDelayMs",5e3,m),this.Za=ps("retryDelaySeedMs",1e4,m),this.Ta=ps("forwardChannelMaxRetries",2,m),this.va=ps("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ac(m&&m.concurrentRequestLimit),this.Ba=new Tr,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=xr.prototype,i.ka=8,i.I=1,i.connect=function(m,A,S,P){Fe(0),this.W=m,this.H=A||{},S&&P!==void 0&&(this.H.OSID=S,this.H.OAID=P),this.F=this.X,this.J=id(this,null,this.W),ms(this)};function Nc(m){if(Ho(m),m.I==3){var A=m.V++,S=Be(m.J);if(se(S,"SID",m.M),se(S,"RID",A),se(S,"TYPE","terminate"),za(m,S),A=new Pi(m,m.j,A),A.M=2,A.A=La(Be(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(A.A.toString(),"")}catch{}!S&&l.Image&&(new Image().src=A.A,S=!0),S||(A.g=sd(A.j,null),A.g.ea(A.A)),A.F=Date.now(),as(A)}nd(m)}function Cr(m){m.g&&(Oc(m),m.g.cancel(),m.g=null)}function Ho(m){Cr(m),m.v&&(l.clearTimeout(m.v),m.v=null),qo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function ms(m){if(!Ec(m.h)&&!m.m){m.m=!0;var A=m.Ea;G||R(),Y||(G(),Y=!0),D.add(A,m),m.D=0}}function Go(m,A){return cs(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=A.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=is(f(m.Ea,m,A),ed(m,m.D)),m.D++,!0)}i.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new Pi(this,this.j,m);let tt=this.o;if(this.U&&(tt?(tt=H(tt),lt(tt,this.U)):tt=this.U),this.u!==null||this.R||(K.J=tt,tt=null),this.S)t:{for(var A=0,S=0;S<this.i.length;S++){e:{var P=this.i[S];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break e}P=void 0}if(P===void 0)break;if(A+=P,A>4096){A=S;break t}if(A===4096||S===this.i.length-1){A=S+1;break t}}A=1e3}else A=1e3;A=Qh(this,K,A),S=Be(this.J),se(S,"RID",m),se(S,"CVER",22),this.G&&se(S,"X-HTTP-Session-Id",this.G),za(this,S),tt&&(this.R?A="headers="+js(fi(tt))+"&"+A:this.u&&Ua(S,this.u,tt)),wc(this.h,K),this.Ra&&se(S,"TYPE","init"),this.S?(se(S,"$req",A),se(S,"SID","null"),K.U=!0,rs(K,S,null)):rs(K,S,A),this.I=2}}else this.I==3&&(m?kc(this,m):this.i.length==0||Ec(this.h)||kc(this))};function kc(m,A){var S;A?S=A.l:S=m.V++;const P=Be(m.J);se(P,"SID",m.M),se(P,"RID",S),se(P,"AID",m.K),za(m,P),m.u&&m.o&&Ua(P,m.u,m.o),S=new Pi(m,m.j,S,m.D+1),m.u===null&&(S.J=m.o),A&&(m.i=A.G.concat(m.i)),A=Qh(m,S,1e3),S.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),wc(m.h,S),rs(S,P,A)}function za(m,A){m.H&&Tt(m.H,function(S,P){se(A,P,S)}),m.l&&Tt({},function(S,P){se(A,P,S)})}function Qh(m,A,S){S=Math.min(m.i.length,S);const P=m.l?f(m.l.Ka,m.l,m):null;t:{var K=m.i;let Lt=-1;for(;;){const Me=["count="+S];Lt==-1?S>0?(Lt=K[0].g,Me.push("ofs="+Lt)):Lt=0:Me.push("ofs="+Lt);let ee=!0;for(let be=0;be<S;be++){var tt=K[be].g;const pi=K[be].map;if(tt-=Lt,tt<0)Lt=Math.max(0,K[be].g-100),ee=!1;else try{tt="req"+tt+"_"||"";try{var ct=pi instanceof Map?pi:Object.entries(pi);for(const[ys,Vi]of ct){let Fi=Vi;u(Vi)&&(Fi=_r(Vi)),Me.push(tt+ys+"="+encodeURIComponent(Fi))}}catch(ys){throw Me.push(tt+"type="+encodeURIComponent("_badmap")),ys}}catch{P&&P(pi)}}if(ee){ct=Me.join("&");break t}}ct=void 0}return m=m.i.splice(0,S),A.G=m,ct}function Jh(m){if(!m.g&&!m.v){m.Y=1;var A=m.Da;G||R(),Y||(G(),Y=!0),D.add(A,m),m.A=0}}function Ha(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=is(f(m.Da,m),ed(m,m.A)),m.A++,!0)}i.Da=function(){if(this.v=null,Zh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=is(f(this.Wa,this),m)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Fe(10),Cr(this),Zh(this))};function Oc(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Zh(m){m.g=new Pi(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var A=Be(m.na);se(A,"RID","rpc"),se(A,"SID",m.M),se(A,"AID",m.K),se(A,"CI",m.F?"0":"1"),!m.F&&m.ia&&se(A,"TO",m.ia),se(A,"TYPE","xmlhttp"),za(m,A),m.u&&m.o&&Ua(A,m.u,m.o),m.O&&(m.g.H=m.O);var S=m.g;m=m.ba,S.M=1,S.A=La(Be(A)),S.u=null,S.R=!0,Lo(S,m)}i.Va=function(){this.C!=null&&(this.C=null,Cr(this),Ha(this),Fe(19))};function qo(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function td(m,A){var S=null;if(m.g==A){qo(m),Oc(m),m.g=null;var P=2}else if(us(m.h,A))S=A.G,Tc(m.h,A),P=1;else return;if(m.I!=0){if(A.o)if(P==1){S=A.u?A.u.length:0,A=Date.now()-A.F;var K=m.D;P=Oo(),Je(P,new ns(P,S)),ms(m)}else Jh(m);else if(K=A.m,K==3||K==0&&A.X>0||!(P==1&&Go(m,A)||P==2&&Ha(m)))switch(S&&S.length>0&&(A=m.h,A.i=A.i.concat(S)),K){case 1:gs(m,5);break;case 4:gs(m,10);break;case 3:gs(m,6);break;default:gs(m,2)}}}function ed(m,A){let S=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(S*=2),S*A}function gs(m,A){if(m.j.info("Error code "+A),A==2){var S=f(m.bb,m),P=m.Ua;const K=!P;P=new Qn(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||on(P,"https"),La(P),K?ki(P.toString(),S):Dc(P.toString(),S)}else Fe(2);m.I=0,m.l&&m.l.pa(A),nd(m),Ho(m)}i.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function nd(m){if(m.I=0,m.ja=[],m.l){const A=Sc(m.h);(A.length!=0||m.i.length!=0)&&(E(m.ja,A),E(m.ja,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.oa()}}function id(m,A,S){var P=S instanceof Qn?Be(S):new Qn(S);if(P.g!="")A&&(P.g=A+"."+P.g),br(P,P.u);else{var K=l.location;P=K.protocol,A=A?A+"."+K.hostname:K.hostname,K=+K.port;const tt=new Qn(null);P&&on(tt,P),A&&(tt.g=A),K&&br(tt,K),S&&(tt.h=S),P=tt}return S=m.G,A=m.wa,S&&A&&se(P,S,A),se(P,"VER",m.ka),za(m,P),P}function sd(m,A,S){if(A&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=m.Aa&&!m.ma?new oe(new ds({ab:S})):new oe(m.ma),A.Fa(m.L),A}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function rd(){}i=rd.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Rr(){}Rr.prototype.g=function(m,A){return new Mn(m,A)};function Mn(m,A){Ve.call(this),this.g=new xr(A),this.l=m,this.h=A&&A.messageUrlParams||null,m=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(m?m["X-WebChannel-Content-Type"]=A.messageContentType:m={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(m?m["X-WebChannel-Client-Profile"]=A.sa:m={"X-WebChannel-Client-Profile":A.sa}),this.g.U=m,(m=A&&A.Qb)&&!F(m)&&(this.g.u=m),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!F(A)&&(this.g.G=A,m=this.h,m!==null&&A in m&&(m=this.h,A in m&&delete m[A])),this.j=new Hs(this)}g(Mn,Ve),Mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){Nc(this.g)},Mn.prototype.o=function(m){var A=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.v&&(S={},S.__data__=_r(m),m=S);A.i.push(new je(A.Ya++,m)),A.I==3&&ms(A)},Mn.prototype.N=function(){this.g.l=null,delete this.j,Nc(this.g),delete this.g,Mn.Z.N.call(this)};function ad(m){un.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var A=m.__sm__;if(A){t:{for(const S in A){m=S;break t}m=void 0}(this.i=m)&&(m=this.i,A=A!==null&&m in A?A[m]:void 0),this.data=A}else this.data=m}g(ad,un);function od(){ui.call(this),this.status=1}g(od,ui);function Hs(m){this.g=m}g(Hs,rd),Hs.prototype.ra=function(){Je(this.g,"a")},Hs.prototype.qa=function(m){Je(this.g,new ad(m))},Hs.prototype.pa=function(m){Je(this.g,new od)},Hs.prototype.oa=function(){Je(this.g,"b")},Rr.prototype.createWebChannel=Rr.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,iI=function(){return new Rr},nI=function(){return Oo()},eI=De,Ov={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,Bf=ka,_c.COMPLETE="complete",tI=_c,Uh.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Pu=Uh,oe.prototype.listenOnce=oe.prototype.K,oe.prototype.getLastError=oe.prototype.Ha,oe.prototype.getLastErrorCode=oe.prototype.ya,oe.prototype.getStatus=oe.prototype.ca,oe.prototype.getResponseJson=oe.prototype.La,oe.prototype.getResponseText=oe.prototype.la,oe.prototype.send=oe.prototype.ea,oe.prototype.setWithCredentials=oe.prototype.Fa,ZR=oe}).apply(typeof _f<"u"?_f:typeof self<"u"?self:typeof window<"u"?window:{});class Tn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");let cc="12.8.0";function rj(i){cc=i}const Ao=new Y_("@firebase/firestore");function wl(){return Ao.logLevel}function ft(i,...t){if(Ao.logLevel<=Xt.DEBUG){const e=t.map(rb);Ao.debug(`Firestore (${cc}): ${i}`,...e)}}function gr(i,...t){if(Ao.logLevel<=Xt.ERROR){const e=t.map(rb);Ao.error(`Firestore (${cc}): ${i}`,...e)}}function Xl(i,...t){if(Ao.logLevel<=Xt.WARN){const e=t.map(rb);Ao.warn(`Firestore (${cc}): ${i}`,...e)}}function rb(i){if(typeof i=="string")return i;try{return(function(e){return JSON.stringify(e)})(i)}catch{return i}}function Dt(i,t,e){let n="Unexpected state";typeof t=="string"?n=t:e=t,sI(i,n,e)}function sI(i,t,e){let n=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(e!==void 0)try{n+=" CONTEXT: "+JSON.stringify(e)}catch{n+=" CONTEXT: "+e}throw gr(n),new Error(n)}function ie(i,t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,i||sI(t,s,n)}function Ot(i,t){return i}const at={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends Vs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ca{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class rI{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class aj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Tn.UNAUTHENTICATED)))}shutdown(){}}class oj{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class lj{constructor(t){this.t=t,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ie(this.o===void 0,42304);let n=this.i;const s=h=>this.i!==n?(n=this.i,e(h)):Promise.resolve();let a=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ca,t.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const h=a;t.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},u=h=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ca)}}),0),l()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((n=>this.i!==t?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ie(typeof n.accessToken=="string",31837,{l:n}),new rI(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ie(t===null||typeof t=="string",2055,{h:t}),new Tn(t)}}class cj{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class uj{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new cj(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class NS{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hj{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ie(this.o===void 0,3512);const n=a=>{a.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,ft("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable((()=>n(a)))};const s=a=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new NS(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(ie(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new NS(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function dj(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}class ab{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=dj(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<e&&(n+=t.charAt(s[a]%62))}return n}}function Yt(i,t){return i<t?-1:i>t?1:0}function Lv(i,t){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++){const s=i.charAt(n),a=t.charAt(n);if(s!==a)return zy(s)===zy(a)?Yt(s,a):zy(s)?1:-1}return Yt(i.length,t.length)}const fj=55296,pj=57343;function zy(i){const t=i.charCodeAt(0);return t>=fj&&t<=pj}function Yl(i,t,e){return i.length===t.length&&i.every(((n,s)=>e(n,t[s])))}const kS="__name__";class Ts{constructor(t,e,n){e===void 0?e=0:e>t.length&&Dt(637,{offset:e,range:t.length}),n===void 0?n=t.length-e:n>t.length-e&&Dt(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return Ts.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ts?t.forEach((n=>{e.push(n)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const a=Ts.compareSegments(t.get(s),e.get(s));if(a!==0)return a}return Yt(t.length,e.length)}static compareSegments(t,e){const n=Ts.isNumericId(t),s=Ts.isNumericId(e);return n&&!s?-1:!n&&s?1:n&&s?Ts.extractNumericId(t).compare(Ts.extractNumericId(e)):Lv(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return la.fromString(t.substring(4,t.length-2))}}class me extends Ts{construct(t,e,n){return new me(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new dt(at.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((s=>s.length>0)))}return new me(e)}static emptyPath(){return new me([])}}const mj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends Ts{construct(t,e,n){return new vn(t,e,n)}static isValidIdentifier(t){return mj.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kS}static keyField(){return new vn([kS])}static fromServerFormat(t){const e=[];let n="",s=0;const a=()=>{if(n.length===0)throw new dt(at.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let l=!1;for(;s<t.length;){const u=t[s];if(u==="\\"){if(s+1===t.length)throw new dt(at.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const h=t[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new dt(at.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=h,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(n+=u,s++):(a(),s++)}if(a(),l)throw new dt(at.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new vn(e)}static emptyPath(){return new vn([])}}class wt{constructor(t){this.path=t}static fromPath(t){return new wt(me.fromString(t))}static fromName(t){return new wt(me.fromString(t).popFirst(5))}static empty(){return new wt(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&me.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return me.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wt(new me(t.slice()))}}function aI(i,t,e){if(!e)throw new dt(at.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function gj(i,t,e,n){if(t===!0&&n===!0)throw new dt(at.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function OS(i){if(!wt.isDocumentKey(i))throw new dt(at.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function LS(i){if(wt.isDocumentKey(i))throw new dt(at.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function oI(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function jp(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Dt(12329,{type:typeof i})}function Kl(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new dt(at.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=jp(i);throw new dt(at.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}function Qe(i,t){const e={typeString:i};return t&&(e.value=t),e}function Ch(i,t){if(!oI(i))throw new dt(at.INVALID_ARGUMENT,"JSON must be an object");let e;for(const n in t)if(t[n]){const s=t[n].typeString,a="value"in t[n]?{value:t[n].value}:void 0;if(!(n in i)){e=`JSON missing required field: '${n}'`;break}const l=i[n];if(s&&typeof l!==s){e=`JSON field '${n}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){e=`Expected '${n}' field to equal '${a.value}'`;break}}if(e)throw new dt(at.INVALID_ARGUMENT,e);return!0}const VS=-62135596800,FS=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(t){return ge.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*FS);return new ge(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new dt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new dt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<VS)throw new dt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FS}_compareTo(t){return this.seconds===t.seconds?Yt(this.nanoseconds,t.nanoseconds):Yt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ch(t,ge._jsonSchema))return new ge(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-VS;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:Qe("string",ge._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};class Nt{static fromTimestamp(t){return new Nt(t)}static min(){return new Nt(new ge(0,0))}static max(){return new Nt(new ge(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ah=-1;function yj(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,s=Nt.fromTimestamp(n===1e9?new ge(e+1,0):new ge(e,n));return new ma(s,wt.empty(),t)}function vj(i){return new ma(i.readTime,i.key,ah)}class ma{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new ma(Nt.min(),wt.empty(),ah)}static max(){return new ma(Nt.max(),wt.empty(),ah)}}function _j(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=wt.comparator(i.documentKey,t.documentKey),e!==0?e:Yt(i.largestBatchId,t.largestBatchId))}const bj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Aj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function uc(i){if(i.code!==at.FAILED_PRECONDITION||i.message!==bj)throw i;ft("LocalStore","Unexpectedly lost primary lease")}class ot{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ot(((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(e,a).next(n,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ot?e:ot.resolve(e)}catch(e){return ot.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ot.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ot.reject(e)}static resolve(t){return new ot(((e,n)=>{e(t)}))}static reject(t){return new ot(((e,n)=>{n(t)}))}static waitFor(t){return new ot(((e,n)=>{let s=0,a=0,l=!1;t.forEach((u=>{++s,u.next((()=>{++a,l&&a===s&&e()}),(h=>n(h)))})),l=!0,a===s&&e()}))}static or(t){let e=ot.resolve(!1);for(const n of t)e=e.next((s=>s?ot.resolve(s):n()));return e}static forEach(t,e){const n=[];return t.forEach(((s,a)=>{n.push(e.call(this,s,a))})),this.waitFor(n)}static mapArray(t,e){return new ot(((n,s)=>{const a=t.length,l=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;e(t[f]).next((p=>{l[f]=p,++u,u===a&&n(l)}),(p=>s(p)))}}))}static doWhile(t,e){return new ot(((n,s)=>{const a=()=>{t()===!0?e().next((()=>{a()}),s):n()};a()}))}}function Ej(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function hc(i){return i.name==="IndexedDbTransactionError"}class Bp{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>e.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Bp.ce=-1;const ob=-1;function zp(i){return i==null}function dp(i){return i===0&&1/i==-1/0}function wj(i){return typeof i=="number"&&Number.isInteger(i)&&!dp(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const lI="";function Tj(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=US(t)),t=Sj(i.get(e),t);return US(t)}function Sj(i,t){let e=t;const n=i.length;for(let s=0;s<n;s++){const a=i.charAt(s);switch(a){case"\0":e+="";break;case lI:e+="";break;default:e+=a}}return e}function US(i){return i+lI+""}function jS(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Ca(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function cI(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}class xe{constructor(t,e){this.comparator=t,this.root=e||yn.EMPTY}insert(t,e){return new xe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(t){return new xe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,yn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return e+n.left.size;s<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bf(this.root,t,this.comparator,!1)}getReverseIterator(){return new bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bf(this.root,t,this.comparator,!0)}}class bf{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?n(t.key,e):1,e&&s&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class yn{constructor(t,e,n,s,a){this.key=t,this.value=e,this.color=n??yn.RED,this.left=s??yn.EMPTY,this.right=a??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,s,a){return new yn(t??this.key,e??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let s=this;const a=n(t,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(t,e,n),null):a===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,e,n,s,a){return this}insert(t,e,n){return new yn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rn{constructor(t){this.comparator=t,this.data=new xe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new BS(this.data.getIterator())}getIteratorFrom(t){return new BS(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((n=>{e=e.add(n)})),e}isEqual(t){if(!(t instanceof rn)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new rn(this.comparator);return e.data=t,e}}class BS{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class li{constructor(t){this.fields=t,t.sort(vn.comparator)}static empty(){return new li([])}unionWith(t){let e=new rn(vn.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new li(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Yl(this.fields,t.fields,((e,n)=>e.isEqual(n)))}}class uI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new uI("Invalid base64 string: "+a):a}})(t);return new bn(e)}static fromUint8Array(t){const e=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(t);return new bn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Yt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const xj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(i){if(ie(!!i,39018),typeof i=="string"){let t=0;const e=xj.exec(i);if(ie(!!e,46558,{timestamp:i}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Oe(i.seconds),nanos:Oe(i.nanos)}}function Oe(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ya(i){return typeof i=="string"?bn.fromBase64String(i):bn.fromUint8Array(i)}const hI="server_timestamp",dI="__type__",fI="__previous_value__",pI="__local_write_time__";function lb(i){return(i?.mapValue?.fields||{})[dI]?.stringValue===hI}function Hp(i){const t=i.mapValue.fields[fI];return lb(t)?Hp(t):t}function oh(i){const t=ga(i.mapValue.fields[pI].timestampValue);return new ge(t.seconds,t.nanos)}class Cj{constructor(t,e,n,s,a,l,u,h,f,p,g){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p,this.apiKey=g}}const fp="(default)";class lh{constructor(t,e){this.projectId=t,this.database=e||fp}static empty(){return new lh("","")}get isDefaultDatabase(){return this.database===fp}isEqual(t){return t instanceof lh&&t.projectId===this.projectId&&t.database===this.database}}function Rj(i,t){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new dt(at.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lh(i.options.projectId,t)}const mI="__type__",Ij="__max__",Af={mapValue:{}},gI="__vector__",pp="value";function va(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?lb(i)?4:Mj(i)?9007199254740991:Dj(i)?10:11:Dt(28295,{value:i})}function Os(i,t){if(i===t)return!0;const e=va(i);if(e!==va(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return oh(i).isEqual(oh(t));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=ga(s.timestampValue),u=ga(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(s,a){return ya(s.bytesValue).isEqual(ya(a.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(s,a){return Oe(s.geoPointValue.latitude)===Oe(a.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(a.geoPointValue.longitude)})(i,t);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Oe(s.integerValue)===Oe(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Oe(s.doubleValue),u=Oe(a.doubleValue);return l===u?dp(l)===dp(u):isNaN(l)&&isNaN(u)}return!1})(i,t);case 9:return Yl(i.arrayValue.values||[],t.arrayValue.values||[],Os);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(jS(l)!==jS(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!Os(l[h],u[h])))return!1;return!0})(i,t);default:return Dt(52216,{left:i})}}function ch(i,t){return(i.values||[]).find((e=>Os(e,t)))!==void 0}function Wl(i,t){if(i===t)return 0;const e=va(i),n=va(t);if(e!==n)return Yt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return Yt(i.booleanValue,t.booleanValue);case 2:return(function(a,l){const u=Oe(a.integerValue||a.doubleValue),h=Oe(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(i,t);case 3:return zS(i.timestampValue,t.timestampValue);case 4:return zS(oh(i),oh(t));case 5:return Lv(i.stringValue,t.stringValue);case 6:return(function(a,l){const u=ya(a),h=ya(l);return u.compareTo(h)})(i.bytesValue,t.bytesValue);case 7:return(function(a,l){const u=a.split("/"),h=l.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=Yt(u[f],h[f]);if(p!==0)return p}return Yt(u.length,h.length)})(i.referenceValue,t.referenceValue);case 8:return(function(a,l){const u=Yt(Oe(a.latitude),Oe(l.latitude));return u!==0?u:Yt(Oe(a.longitude),Oe(l.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return HS(i.arrayValue,t.arrayValue);case 10:return(function(a,l){const u=a.fields||{},h=l.fields||{},f=u[pp]?.arrayValue,p=h[pp]?.arrayValue,g=Yt(f?.values?.length||0,p?.values?.length||0);return g!==0?g:HS(f,p)})(i.mapValue,t.mapValue);case 11:return(function(a,l){if(a===Af.mapValue&&l===Af.mapValue)return 0;if(a===Af.mapValue)return 1;if(l===Af.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=l.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let g=0;g<h.length&&g<p.length;++g){const v=Lv(h[g],p[g]);if(v!==0)return v;const b=Wl(u[h[g]],f[p[g]]);if(b!==0)return b}return Yt(h.length,p.length)})(i.mapValue,t.mapValue);default:throw Dt(23264,{he:e})}}function zS(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Yt(i,t);const e=ga(i),n=ga(t),s=Yt(e.seconds,n.seconds);return s!==0?s:Yt(e.nanos,n.nanos)}function HS(i,t){const e=i.values||[],n=t.values||[];for(let s=0;s<e.length&&s<n.length;++s){const a=Wl(e[s],n[s]);if(a)return a}return Yt(e.length,n.length)}function Ql(i){return Vv(i)}function Vv(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(e){const n=ga(e);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(e){return ya(e).toBase64()})(i.bytesValue):"referenceValue"in i?(function(e){return wt.fromName(e).toString()})(i.referenceValue):"geoPointValue"in i?(function(e){return`geo(${e.latitude},${e.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(e){let n="[",s=!0;for(const a of e.values||[])s?s=!1:n+=",",n+=Vv(a);return n+"]"})(i.arrayValue):"mapValue"in i?(function(e){const n=Object.keys(e.fields||{}).sort();let s="{",a=!0;for(const l of n)a?a=!1:s+=",",s+=`${l}:${Vv(e.fields[l])}`;return s+"}"})(i.mapValue):Dt(61005,{value:i})}function zf(i){switch(va(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Hp(i);return t?16+zf(t):16;case 5:return 2*i.stringValue.length;case 6:return ya(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,a)=>s+zf(a)),0)})(i.arrayValue);case 10:case 11:return(function(n){let s=0;return Ca(n.fields,((a,l)=>{s+=a.length+zf(l)})),s})(i.mapValue);default:throw Dt(13486,{value:i})}}function GS(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function Fv(i){return!!i&&"integerValue"in i}function cb(i){return!!i&&"arrayValue"in i}function qS(i){return!!i&&"nullValue"in i}function $S(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Hf(i){return!!i&&"mapValue"in i}function Dj(i){return(i?.mapValue?.fields||{})[mI]?.stringValue===gI}function Gu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Ca(i.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gu(n))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Gu(i.arrayValue.values[e]);return t}return{...i}}function Mj(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Ij}class Kn{constructor(t){this.value=t}static empty(){return new Kn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Hf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gu(e)}setAll(t){let e=vn.emptyPath(),n={},s=[];t.forEach(((l,u)=>{if(!e.isImmediateParentOf(u)){const h=this.getFieldsMap(e);this.applyChanges(h,n,s),n={},s=[],e=u.popLast()}l?n[u.lastSegment()]=Gu(l):s.push(u.lastSegment())}));const a=this.getFieldsMap(e);this.applyChanges(a,n,s)}delete(t){const e=this.field(t.popLast());Hf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Os(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=e.mapValue.fields[t.get(n)];Hf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,n){Ca(e,((s,a)=>t[s]=a));for(const s of n)delete t[s]}clone(){return new Kn(Gu(this.value))}}function yI(i){const t=[];return Ca(i.fields,((e,n)=>{const s=new vn([e]);if(Hf(n)){const a=yI(n.mapValue).fields;if(a.length===0)t.push(s);else for(const l of a)t.push(s.child(l))}else t.push(s)})),new li(t)}class xn{constructor(t,e,n,s,a,l,u){this.key=t,this.documentType=e,this.version=n,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(t){return new xn(t,0,Nt.min(),Nt.min(),Nt.min(),Kn.empty(),0)}static newFoundDocument(t,e,n,s){return new xn(t,1,e,Nt.min(),n,s,0)}static newNoDocument(t,e){return new xn(t,2,e,Nt.min(),Nt.min(),Kn.empty(),0)}static newUnknownDocument(t,e){return new xn(t,3,e,Nt.min(),Nt.min(),Kn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof xn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mp{constructor(t,e){this.position=t,this.inclusive=e}}function XS(i,t,e){let n=0;for(let s=0;s<i.position.length;s++){const a=t[s],l=i.position[s];if(a.field.isKeyField()?n=wt.comparator(wt.fromName(l.referenceValue),e.key):n=Wl(l,e.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function YS(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!Os(i.position[e],t.position[e]))return!1;return!0}class uh{constructor(t,e="asc"){this.field=t,this.dir=e}}function Pj(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}class vI{}class Ke extends vI{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new kj(t,e,n):e==="array-contains"?new Vj(t,n):e==="in"?new Fj(t,n):e==="not-in"?new Uj(t,n):e==="array-contains-any"?new jj(t,n):new Ke(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new Oj(t,n):new Lj(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Wl(e,this.value)):e!==null&&va(this.value)===va(e)&&this.matchesComparison(Wl(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qi extends vI{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Qi(t,e)}matches(t){return _I(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _I(i){return i.op==="and"}function bI(i){return Nj(i)&&_I(i)}function Nj(i){for(const t of i.filters)if(t instanceof Qi)return!1;return!0}function Uv(i){if(i instanceof Ke)return i.field.canonicalString()+i.op.toString()+Ql(i.value);if(bI(i))return i.filters.map((t=>Uv(t))).join(",");{const t=i.filters.map((e=>Uv(e))).join(",");return`${i.op}(${t})`}}function AI(i,t){return i instanceof Ke?(function(n,s){return s instanceof Ke&&n.op===s.op&&n.field.isEqual(s.field)&&Os(n.value,s.value)})(i,t):i instanceof Qi?(function(n,s){return s instanceof Qi&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((a,l,u)=>a&&AI(l,s.filters[u])),!0):!1})(i,t):void Dt(19439)}function EI(i){return i instanceof Ke?(function(e){return`${e.field.canonicalString()} ${e.op} ${Ql(e.value)}`})(i):i instanceof Qi?(function(e){return e.op.toString()+" {"+e.getFilters().map(EI).join(" ,")+"}"})(i):"Filter"}class kj extends Ke{constructor(t,e,n){super(t,e,n),this.key=wt.fromName(n.referenceValue)}matches(t){const e=wt.comparator(t.key,this.key);return this.matchesComparison(e)}}class Oj extends Ke{constructor(t,e){super(t,"in",e),this.keys=wI("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Lj extends Ke{constructor(t,e){super(t,"not-in",e),this.keys=wI("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function wI(i,t){return(t.arrayValue?.values||[]).map((e=>wt.fromName(e.referenceValue)))}class Vj extends Ke{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return cb(e)&&ch(e.arrayValue,this.value)}}class Fj extends Ke{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&ch(this.value.arrayValue,e)}}class Uj extends Ke{constructor(t,e){super(t,"not-in",e)}matches(t){if(ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!ch(this.value.arrayValue,e)}}class jj extends Ke{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!cb(e)||!e.arrayValue.values)&&e.arrayValue.values.some((n=>ch(this.value.arrayValue,n)))}}class Bj{constructor(t,e=null,n=[],s=[],a=null,l=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.Te=null}}function KS(i,t=null,e=[],n=[],s=null,a=null,l=null){return new Bj(i,t,e,n,s,a,l)}function ub(i){const t=Ot(i);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((n=>Uv(n))).join(","),e+="|ob:",e+=t.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),zp(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((n=>Ql(n))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((n=>Ql(n))).join(",")),t.Te=e}return t.Te}function hb(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!Pj(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!AI(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!YS(i.startAt,t.startAt)&&YS(i.endAt,t.endAt)}function jv(i){return wt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class dc{constructor(t,e=null,n=[],s=[],a=null,l="F",u=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function zj(i,t,e,n,s,a,l,u){return new dc(i,t,e,n,s,a,l,u)}function TI(i){return new dc(i)}function WS(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Hj(i){return wt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function SI(i){return i.collectionGroup!==null}function qu(i){const t=Ot(i);if(t.Ie===null){t.Ie=[];const e=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),e.add(a.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new rn(vn.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(t).forEach((a=>{e.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new uh(a,n))})),e.has(vn.keyField().canonicalString())||t.Ie.push(new uh(vn.keyField(),n))}return t.Ie}function Ds(i){const t=Ot(i);return t.Ee||(t.Ee=Gj(t,qu(i))),t.Ee}function Gj(i,t){if(i.limitType==="F")return KS(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new uh(s.field,a)}));const e=i.endAt?new mp(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new mp(i.startAt.position,i.startAt.inclusive):null;return KS(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function Bv(i,t){const e=i.filters.concat([t]);return new dc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function qj(i,t){const e=i.explicitOrderBy.concat([t]);return new dc(i.path,i.collectionGroup,e,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function zv(i,t,e){return new dc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Gp(i,t){return hb(Ds(i),Ds(t))&&i.limitType===t.limitType}function xI(i){return`${ub(Ds(i))}|lt:${i.limitType}`}function Tl(i){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((s=>EI(s))).join(", ")}]`),zp(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Ql(s))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Ql(s))).join(",")),`Target(${n})`})(Ds(i))}; limitType=${i.limitType})`}function qp(i,t){return t.isFoundDocument()&&(function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):wt.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(i,t)&&(function(n,s){for(const a of qu(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(i,t)&&(function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0})(i,t)&&(function(n,s){return!(n.startAt&&!(function(l,u,h){const f=XS(l,u,h);return l.inclusive?f<=0:f<0})(n.startAt,qu(n),s)||n.endAt&&!(function(l,u,h){const f=XS(l,u,h);return l.inclusive?f>=0:f>0})(n.endAt,qu(n),s))})(i,t)}function $j(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function CI(i){return(t,e)=>{let n=!1;for(const s of qu(i)){const a=Xj(s,t,e);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function Xj(i,t,e){const n=i.field.isKeyField()?wt.comparator(t.key,e.key):(function(a,l,u){const h=l.data.field(a),f=u.data.field(a);return h!==null&&f!==null?Wl(h,f):Dt(42886)})(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return Dt(19790,{direction:i.dir})}}class Ro{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],t))return void(s[a]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return n.length===1?delete this.inner[e]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ca(this.inner,((e,n)=>{for(const[s,a]of n)t(s,a)}))}isEmpty(){return cI(this.inner)}size(){return this.innerSize}}const Yj=new xe(wt.comparator);function yr(){return Yj}const RI=new xe(wt.comparator);function Nu(...i){let t=RI;for(const e of i)t=t.insert(e.key,e);return t}function II(i){let t=RI;return i.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ho(){return $u()}function DI(){return $u()}function $u(){return new Ro((i=>i.toString()),((i,t)=>i.isEqual(t)))}const Kj=new xe(wt.comparator),Wj=new rn(wt.comparator);function Kt(...i){let t=Wj;for(const e of i)t=t.add(e);return t}const Qj=new rn(Yt);function Jj(){return Qj}function db(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dp(t)?"-0":t}}function MI(i){return{integerValue:""+i}}function Zj(i,t){return wj(t)?MI(t):db(i,t)}class $p{constructor(){this._=void 0}}function tB(i,t,e){return i instanceof gp?(function(s,a){const l={fields:{[dI]:{stringValue:hI},[pI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&lb(a)&&(a=Hp(a)),a&&(l.fields[fI]=a),{mapValue:l}})(e,t):i instanceof hh?NI(i,t):i instanceof dh?kI(i,t):(function(s,a){const l=PI(s,a),u=QS(l)+QS(s.Ae);return Fv(l)&&Fv(s.Ae)?MI(u):db(s.serializer,u)})(i,t)}function eB(i,t,e){return i instanceof hh?NI(i,t):i instanceof dh?kI(i,t):e}function PI(i,t){return i instanceof yp?(function(n){return Fv(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(t)?t:{integerValue:0}:null}class gp extends $p{}class hh extends $p{constructor(t){super(),this.elements=t}}function NI(i,t){const e=OI(t);for(const n of i.elements)e.some((s=>Os(s,n)))||e.push(n);return{arrayValue:{values:e}}}class dh extends $p{constructor(t){super(),this.elements=t}}function kI(i,t){let e=OI(t);for(const n of i.elements)e=e.filter((s=>!Os(s,n)));return{arrayValue:{values:e}}}class yp extends $p{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function QS(i){return Oe(i.integerValue||i.doubleValue)}function OI(i){return cb(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function nB(i,t){return i.field.isEqual(t.field)&&(function(n,s){return n instanceof hh&&s instanceof hh||n instanceof dh&&s instanceof dh?Yl(n.elements,s.elements,Os):n instanceof yp&&s instanceof yp?Os(n.Ae,s.Ae):n instanceof gp&&s instanceof gp})(i.transform,t.transform)}class iB{constructor(t,e){this.version=t,this.transformResults=e}}class Ms{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ms}static exists(t){return new Ms(void 0,t)}static updateTime(t){return new Ms(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Gf(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Xp{}function LI(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new FI(i.key,Ms.none()):new Rh(i.key,i.data,Ms.none());{const e=i.data,n=Kn.empty();let s=new rn(vn.comparator);for(let a of t.fields)if(!s.has(a)){let l=e.field(a);l===null&&a.length>1&&(a=a.popLast(),l=e.field(a)),l===null?n.delete(a):n.set(a,l),s=s.add(a)}return new Ra(i.key,n,new li(s.toArray()),Ms.none())}}function sB(i,t,e){i instanceof Rh?(function(s,a,l){const u=s.value.clone(),h=ZS(s.fieldTransforms,a,l.transformResults);u.setAll(h),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(i,t,e):i instanceof Ra?(function(s,a,l){if(!Gf(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=ZS(s.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(VI(s)),h.setAll(u),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(i,t,e):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,t,e)}function Xu(i,t,e,n){return i instanceof Rh?(function(a,l,u,h){if(!Gf(a.precondition,l))return u;const f=a.value.clone(),p=t1(a.fieldTransforms,h,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(i,t,e,n):i instanceof Ra?(function(a,l,u,h){if(!Gf(a.precondition,l))return u;const f=t1(a.fieldTransforms,h,l),p=l.data;return p.setAll(VI(a)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(i,t,e,n):(function(a,l,u){return Gf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(i,t,e)}function rB(i,t){let e=null;for(const n of i.fieldTransforms){const s=t.data.field(n.field),a=PI(n.transform,s||null);a!=null&&(e===null&&(e=Kn.empty()),e.set(n.field,a))}return e||null}function JS(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Yl(n,s,((a,l)=>nB(a,l)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Rh extends Xp{constructor(t,e,n,s=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ra extends Xp{constructor(t,e,n,s,a=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function VI(i){const t=new Map;return i.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}})),t}function ZS(i,t,e){const n=new Map;ie(i.length===e.length,32656,{Ve:e.length,de:i.length});for(let s=0;s<e.length;s++){const a=i[s],l=a.transform,u=t.data.field(a.field);n.set(a.field,eB(l,u,e[s]))}return n}function t1(i,t,e){const n=new Map;for(const s of i){const a=s.transform,l=e.data.field(s.field);n.set(s.field,tB(a,l,t))}return n}class FI extends Xp{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aB extends Xp{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oB{constructor(t,e,n,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(t.key)&&sB(a,t,n[s])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Xu(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Xu(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=DI();return this.mutations.forEach((s=>{const a=t.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=e.has(s.key)?null:u;const h=LI(l,u);h!==null&&n.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(Nt.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Kt())}isEqual(t){return this.batchId===t.batchId&&Yl(this.mutations,t.mutations,((e,n)=>JS(e,n)))&&Yl(this.baseMutations,t.baseMutations,((e,n)=>JS(e,n)))}}class fb{constructor(t,e,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=s}static from(t,e,n){ie(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let s=(function(){return Kj})();const a=t.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,n[l].version);return new fb(t,e,n,s)}}class lB{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class cB{constructor(t,e){this.count=t,this.unchangedNames=e}}var Xe,Jt;function uB(i){switch(i){case at.OK:return Dt(64938);case at.CANCELLED:case at.UNKNOWN:case at.DEADLINE_EXCEEDED:case at.RESOURCE_EXHAUSTED:case at.INTERNAL:case at.UNAVAILABLE:case at.UNAUTHENTICATED:return!1;case at.INVALID_ARGUMENT:case at.NOT_FOUND:case at.ALREADY_EXISTS:case at.PERMISSION_DENIED:case at.FAILED_PRECONDITION:case at.ABORTED:case at.OUT_OF_RANGE:case at.UNIMPLEMENTED:case at.DATA_LOSS:return!0;default:return Dt(15467,{code:i})}}function UI(i){if(i===void 0)return gr("GRPC error has no .code"),at.UNKNOWN;switch(i){case Xe.OK:return at.OK;case Xe.CANCELLED:return at.CANCELLED;case Xe.UNKNOWN:return at.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return at.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return at.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return at.INTERNAL;case Xe.UNAVAILABLE:return at.UNAVAILABLE;case Xe.UNAUTHENTICATED:return at.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return at.INVALID_ARGUMENT;case Xe.NOT_FOUND:return at.NOT_FOUND;case Xe.ALREADY_EXISTS:return at.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return at.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return at.FAILED_PRECONDITION;case Xe.ABORTED:return at.ABORTED;case Xe.OUT_OF_RANGE:return at.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return at.UNIMPLEMENTED;case Xe.DATA_LOSS:return at.DATA_LOSS;default:return Dt(39323,{code:i})}}(Jt=Xe||(Xe={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";function hB(){return new TextEncoder}const dB=new la([4294967295,4294967295],0);function e1(i){const t=hB().encode(i),e=new JR;return e.update(t),new Uint8Array(e.digest())}function n1(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new la([e,n],0),new la([s,a],0)]}class pb{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new ku(`Invalid padding: ${e}`);if(n<0)throw new ku(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new ku(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new ku(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=la.fromNumber(this.ge)}ye(t,e,n){let s=t.add(e.multiply(la.fromNumber(n)));return s.compare(dB)===1&&(s=new la([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=e1(t),[n,s]=n1(e);for(let a=0;a<this.hashCount;a++){const l=this.ye(n,s,a);if(!this.we(l))return!1}return!0}static create(t,e,n){const s=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),l=new pb(a,s,e);return n.forEach((u=>l.insert(u))),l}insert(t){if(this.ge===0)return;const e=e1(t),[n,s]=n1(e);for(let a=0;a<this.hashCount;a++){const l=this.ye(n,s,a);this.be(l)}}be(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yp{constructor(t,e,n,s,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const s=new Map;return s.set(t,Ih.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Yp(Nt.min(),s,new xe(Yt),yr(),Kt())}}class Ih{constructor(t,e,n,s,a){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Ih(n,e,Kt(),Kt(),Kt())}}class qf{constructor(t,e,n,s){this.Se=t,this.removedTargetIds=e,this.key=n,this.De=s}}class jI{constructor(t,e){this.targetId=t,this.Ce=e}}class BI{constructor(t,e,n=bn.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=s}}class i1{constructor(){this.ve=0,this.Fe=s1(),this.Me=bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Kt(),e=Kt(),n=Kt();return this.Fe.forEach(((s,a)=>{switch(a){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:n=n.add(s);break;default:Dt(38017,{changeType:a})}})),new Ih(this.Me,this.xe,t,e,n)}Ke(){this.Oe=!1,this.Fe=s1()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,ie(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class fB{constructor(t){this.Ge=t,this.ze=new Map,this.je=yr(),this.He=Ef(),this.Je=Ef(),this.Ze=new xe(Yt)}Xe(t){for(const e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const n=this.nt(e);switch(t.state){case 0:this.rt(e)&&n.Le(t.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(t.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(n.Qe(),n.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),n.Le(t.resumeToken));break;default:Dt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((n,s)=>{this.rt(s)&&e(s)}))}st(t){const e=t.targetId,n=t.Ce.count,s=this.ot(e);if(s){const a=s.target;if(jv(a))if(n===0){const l=new wt(a.path);this.et(e,l,xn.newNoDocument(l,Nt.min()))}else ie(n===1,20013,{expectedCount:n});else{const l=this._t(e);if(l!==n){const u=this.ut(t),h=u?this.ct(u,t,l):1;if(h!==0){this.it(e);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,f)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=e;let l,u;try{l=ya(n).toUint8Array()}catch(h){if(h instanceof uI)return Xl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new pb(l,s,a)}catch(h){return Xl(h instanceof ku?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(t,e,n){return e.Ce.count===n-this.Pt(t,e.targetId)?0:2}Pt(t,e){const n=this.Ge.getRemoteKeysForTarget(e);let s=0;return n.forEach((a=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.mightContain(u)||(this.et(e,a,null),s++)})),s}Tt(t){const e=new Map;this.ze.forEach(((a,l)=>{const u=this.ot(l);if(u){if(a.current&&jv(u.target)){const h=new wt(u.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,xn.newNoDocument(h,t))}a.Be&&(e.set(l,a.ke()),a.Ke())}}));let n=Kt();this.Je.forEach(((a,l)=>{let u=!0;l.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(t)));const s=new Yp(t,e,this.Ze,this.je,n);return this.je=yr(),this.He=Ef(),this.Je=Ef(),this.Ze=new xe(Yt),s}Ye(t,e){if(!this.rt(t))return;const n=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,n),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,n){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.qe(e,1):s.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),n&&(this.je=this.je.insert(e,n))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new i1,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new rn(Yt),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new rn(Yt),this.He=this.He.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ft("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new i1),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Ef(){return new xe(wt.comparator)}function s1(){return new xe(wt.comparator)}const pB={asc:"ASCENDING",desc:"DESCENDING"},mB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gB={and:"AND",or:"OR"};class yB{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Hv(i,t){return i.useProto3Json||zp(t)?t:{value:t}}function vp(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zI(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function vB(i,t){return vp(i,t.toTimestamp())}function Ps(i){return ie(!!i,49232),Nt.fromTimestamp((function(e){const n=ga(e);return new ge(n.seconds,n.nanos)})(i))}function mb(i,t){return Gv(i,t).canonicalString()}function Gv(i,t){const e=(function(s){return new me(["projects",s.projectId,"databases",s.database])})(i).child("documents");return t===void 0?e:e.child(t)}function HI(i){const t=me.fromString(i);return ie(YI(t),10190,{key:t.toString()}),t}function qv(i,t){return mb(i.databaseId,t.path)}function Hy(i,t){const e=HI(t);if(e.get(1)!==i.databaseId.projectId)throw new dt(at.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new dt(at.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new wt(qI(e))}function GI(i,t){return mb(i.databaseId,t)}function _B(i){const t=HI(i);return t.length===4?me.emptyPath():qI(t)}function $v(i){return new me(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function qI(i){return ie(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function r1(i,t,e){return{name:qv(i,t),fields:e.value.mapValue.fields}}function bB(i,t){let e;if("targetChange"in t){t.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Dt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=(function(f,p){return f.useProto3Json?(ie(p===void 0||typeof p=="string",58123),bn.fromBase64String(p||"")):(ie(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),bn.fromUint8Array(p||new Uint8Array))})(i,t.targetChange.resumeToken),l=t.targetChange.cause,u=l&&(function(f){const p=f.code===void 0?at.UNKNOWN:UI(f.code);return new dt(p,f.message||"")})(l);e=new BI(n,s,a,u||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const s=Hy(i,n.document.name),a=Ps(n.document.updateTime),l=n.document.createTime?Ps(n.document.createTime):Nt.min(),u=new Kn({mapValue:{fields:n.document.fields}}),h=xn.newFoundDocument(s,a,l,u),f=n.targetIds||[],p=n.removedTargetIds||[];e=new qf(f,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const s=Hy(i,n.document),a=n.readTime?Ps(n.readTime):Nt.min(),l=xn.newNoDocument(s,a),u=n.removedTargetIds||[];e=new qf([],u,l.key,l)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const s=Hy(i,n.document),a=n.removedTargetIds||[];e=new qf([],a,s,null)}else{if(!("filter"in t))return Dt(11601,{Vt:t});{t.filter;const n=t.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,l=new cB(s,a),u=n.targetId;e=new jI(u,l)}}return e}function AB(i,t){let e;if(t instanceof Rh)e={update:r1(i,t.key,t.value)};else if(t instanceof FI)e={delete:qv(i,t.key)};else if(t instanceof Ra)e={update:r1(i,t.key,t.data),updateMask:DB(t.fieldMask)};else{if(!(t instanceof aB))return Dt(16599,{dt:t.type});e={verify:qv(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((n=>(function(a,l){const u=l.transform;if(u instanceof gp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof dh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof yp)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw Dt(20930,{transform:l.transform})})(0,n)))),t.precondition.isNone||(e.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:vB(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Dt(27497)})(i,t.precondition)),e}function EB(i,t){return i&&i.length>0?(ie(t!==void 0,14353),i.map((e=>(function(s,a){let l=s.updateTime?Ps(s.updateTime):Ps(a);return l.isEqual(Nt.min())&&(l=Ps(a)),new iB(l,s.transformResults||[])})(e,t)))):[]}function wB(i,t){return{documents:[GI(i,t.path)]}}function TB(i,t){const e={structuredQuery:{}},n=t.path;let s;t.collectionGroup!==null?(s=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=GI(i,s);const a=(function(f){if(f.length!==0)return XI(Qi.create(f,"and"))})(t.filters);a&&(e.structuredQuery.where=a);const l=(function(f){if(f.length!==0)return f.map((p=>(function(v){return{field:Sl(v.field),direction:CB(v.dir)}})(p)))})(t.orderBy);l&&(e.structuredQuery.orderBy=l);const u=Hv(i,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{ft:e,parent:s}}function SB(i){let t=_B(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let s=null;if(n>0){ie(n===1,65062);const p=e.from[0];p.allDescendants?s=p.collectionId:t=t.child(p.collectionId)}let a=[];e.where&&(a=(function(g){const v=$I(g);return v instanceof Qi&&bI(v)?v.getFilters():[v]})(e.where));let l=[];e.orderBy&&(l=(function(g){return g.map((v=>(function(E){return new uh(xl(E.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(e.orderBy));let u=null;e.limit&&(u=(function(g){let v;return v=typeof g=="object"?g.value:g,zp(v)?null:v})(e.limit));let h=null;e.startAt&&(h=(function(g){const v=!!g.before,b=g.values||[];return new mp(b,v)})(e.startAt));let f=null;return e.endAt&&(f=(function(g){const v=!g.before,b=g.values||[];return new mp(b,v)})(e.endAt)),zj(t,s,l,a,u,"F",h,f)}function xB(i,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function $I(i){return i.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=xl(e.unaryFilter.field);return Ke.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=xl(e.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xl(e.unaryFilter.field);return Ke.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=xl(e.unaryFilter.field);return Ke.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}})(i):i.fieldFilter!==void 0?(function(e){return Ke.create(xl(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(e){return Qi.create(e.compositeFilter.filters.map((n=>$I(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}})(e.compositeFilter.op))})(i):Dt(30097,{filter:i})}function CB(i){return pB[i]}function RB(i){return mB[i]}function IB(i){return gB[i]}function Sl(i){return{fieldPath:i.canonicalString()}}function xl(i){return vn.fromServerFormat(i.fieldPath)}function XI(i){return i instanceof Ke?(function(e){if(e.op==="=="){if($S(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NAN"}};if(qS(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if($S(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NOT_NAN"}};if(qS(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sl(e.field),op:RB(e.op),value:e.value}}})(i):i instanceof Qi?(function(e){const n=e.getFilters().map((s=>XI(s)));return n.length===1?n[0]:{compositeFilter:{op:IB(e.op),filters:n}}})(i):Dt(54877,{filter:i})}function DB(i){const t=[];return i.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function YI(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function KI(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class ra{constructor(t,e,n,s,a=Nt.min(),l=Nt.min(),u=bn.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(t){return new ra(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ra(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class MB{constructor(t){this.yt=t}}function PB(i){const t=SB({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?zv(t,t.limit,"L"):t}class NB{constructor(){this.Sn=new kB}addToCollectionParentIndex(t,e){return this.Sn.add(e),ot.resolve()}getCollectionParents(t,e){return ot.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return ot.resolve()}deleteFieldIndex(t,e){return ot.resolve()}deleteAllFieldIndexes(t){return ot.resolve()}createTargetIndexes(t,e){return ot.resolve()}getDocumentsMatchingTarget(t,e){return ot.resolve(null)}getIndexType(t,e){return ot.resolve(0)}getFieldIndexes(t,e){return ot.resolve([])}getNextCollectionGroupToUpdate(t){return ot.resolve(null)}getMinOffset(t,e){return ot.resolve(ma.min())}getMinOffsetFromCollectionGroup(t,e){return ot.resolve(ma.min())}updateCollectionGroup(t,e,n){return ot.resolve()}updateIndexEntries(t,e){return ot.resolve()}}class kB{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e]||new rn(me.comparator),a=!s.has(n);return this.index[e]=s.add(n),a}has(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e];return s&&s.has(n)}getEntries(t){return(this.index[t]||new rn(me.comparator)).toArray()}}const a1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WI=41943040;class Yn{static withCacheSize(t){return new Yn(t,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(WI,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);class Jl{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new Jl(0)}static ar(){return new Jl(-1)}}const o1="LruGarbageCollector",OB=1048576;function l1([i,t],[e,n]){const s=Yt(i,e);return s===0?Yt(t,n):s}class LB{constructor(t){this.Pr=t,this.buffer=new rn(l1),this.Tr=0}Ir(){return++this.Tr}Er(t){const e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{const n=this.buffer.last();l1(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}}class VB{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){ft(o1,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){hc(e)?ft(o1,"Ignoring IndexedDB error during garbage collection: ",e):await uc(e)}await this.Ar(3e5)}))}}class FB{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((n=>Math.floor(e/100*n)))}nthSequenceNumber(t,e){if(e===0)return ot.resolve(Bp.ce);const n=new LB(e);return this.Vr.forEachTarget(t,(s=>n.Er(s.sequenceNumber))).next((()=>this.Vr.mr(t,(s=>n.Er(s))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.Vr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(a1)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a1):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let n,s,a,l,u,h,f;const p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,l=Date.now(),this.nthSequenceNumber(t,s)))).next((g=>(n=g,u=Date.now(),this.removeTargets(t,n,e)))).next((g=>(a=g,h=Date.now(),this.removeOrphanedDocuments(t,n)))).next((g=>(f=Date.now(),wl()<=Xt.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:g}))))}}function UB(i,t){return new FB(i,t)}class jB{constructor(){this.changes=new Ro((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,xn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?ot.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class BB{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class zB{constructor(t,e,n,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=s}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(n=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(n!==null&&Xu(n.mutation,s,li.empty(),ge.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.getLocalViewOfDocuments(t,n,Kt()).next((()=>n))))}getLocalViewOfDocuments(t,e,n=Kt()){const s=ho();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,n).next((a=>{let l=Nu();return a.forEach(((u,h)=>{l=l.insert(u,h.overlayedDocument)})),l}))))}getOverlayedDocuments(t,e){const n=ho();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Kt())))}populateOverlays(t,e,n){const s=[];return n.forEach((a=>{e.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(t,s).next((a=>{a.forEach(((l,u)=>{e.set(l,u)}))}))}computeViews(t,e,n,s){let a=yr();const l=$u(),u=(function(){return $u()})();return e.forEach(((h,f)=>{const p=n.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof Ra)?a=a.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),Xu(p.mutation,f,p.mutation.getFieldMask(),ge.now())):l.set(f.key,li.empty())})),this.recalculateAndSaveOverlays(t,a).next((h=>(h.forEach(((f,p)=>l.set(f,p))),e.forEach(((f,p)=>u.set(f,new BB(p,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(t,e){const n=$u();let s=new xe(((l,u)=>l-u)),a=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((l=>{for(const u of l)u.keys().forEach((h=>{const f=e.get(h);if(f===null)return;let p=n.get(h)||li.empty();p=u.applyToLocalView(f,p),n.set(h,p);const g=(s.get(u.batchId)||Kt()).add(h);s=s.insert(u.batchId,g)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,g=DI();p.forEach((v=>{if(!a.has(v)){const b=LI(e.get(v),n.get(v));b!==null&&g.set(v,b),a=a.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(t,f,g))}return ot.waitFor(l)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,e,n,s){return Hj(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):SI(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,s):this.getDocumentsMatchingCollectionQuery(t,e,n,s)}getNextDocuments(t,e,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,s-a.size):ot.resolve(ho());let u=ah,h=a;return l.next((f=>ot.forEach(f,((p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),a.get(p)?ot.resolve():this.remoteDocumentCache.getEntry(t,p).next((v=>{h=h.insert(p,v)}))))).next((()=>this.populateOverlays(t,f,a))).next((()=>this.computeViews(t,h,f,Kt()))).next((p=>({batchId:u,changes:II(p)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new wt(e)).next((n=>{let s=Nu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,s){const a=e.collectionGroup;let l=Nu();return this.indexManager.getCollectionParents(t,a).next((u=>ot.forEach(u,(h=>{const f=(function(g,v){return new dc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(e,h.child(a));return this.getDocumentsMatchingCollectionQuery(t,f,n,s).next((p=>{p.forEach(((g,v)=>{l=l.insert(g,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(t,e,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,a,s)))).next((l=>{a.forEach(((h,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,xn.newInvalidDocument(p)))}));let u=Nu();return l.forEach(((h,f)=>{const p=a.get(h);p!==void 0&&Xu(p.mutation,f,li.empty(),ge.now()),qp(e,f)&&(u=u.insert(h,f))})),u}))}}class HB{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return ot.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Ps(s.createTime)}})(e)),ot.resolve()}getNamedQuery(t,e){return ot.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(s){return{name:s.name,query:PB(s.bundledQuery),readTime:Ps(s.readTime)}})(e)),ot.resolve()}}class GB{constructor(){this.overlays=new xe(wt.comparator),this.Lr=new Map}getOverlay(t,e){return ot.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ho();return ot.forEach(e,(s=>this.getOverlay(t,s).next((a=>{a!==null&&n.set(s,a)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((s,a)=>{this.bt(t,e,a)})),ot.resolve()}removeOverlaysForBatchId(t,e,n){const s=this.Lr.get(n);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(n)),ot.resolve()}getOverlaysForCollection(t,e,n){const s=ho(),a=e.length+1,l=new wt(e.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>n&&s.set(h.getKey(),h)}return ot.resolve(s)}getOverlaysForCollectionGroup(t,e,n,s){let a=new xe(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>n){let p=a.get(f.largestBatchId);p===null&&(p=ho(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=ho(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>u.set(f,p))),!(u.size()>=s)););return ot.resolve(u)}bt(t,e,n){const s=this.overlays.get(n.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(n.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new lB(e,n));let a=this.Lr.get(e);a===void 0&&(a=Kt(),this.Lr.set(e,a)),this.Lr.set(e,a.add(n.key))}}class qB{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(t){return ot.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,ot.resolve()}}class gb{constructor(){this.kr=new rn(cn.Kr),this.qr=new rn(cn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){const n=new cn(t,e);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(t,e){t.forEach((n=>this.addReference(n,e)))}removeReference(t,e){this.Wr(new cn(t,e))}Qr(t,e){t.forEach((n=>this.removeReference(n,e)))}Gr(t){const e=new wt(new me([])),n=new cn(e,t),s=new cn(e,t+1),a=[];return this.qr.forEachInRange([n,s],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const e=new wt(new me([])),n=new cn(e,t),s=new cn(e,t+1);let a=Kt();return this.qr.forEachInRange([n,s],(l=>{a=a.add(l.key)})),a}containsKey(t){const e=new cn(t,0),n=this.kr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class cn{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return wt.comparator(t.key,e.key)||Yt(t.Hr,e.Hr)}static Ur(t,e){return Yt(t.Hr,e.Hr)||wt.comparator(t.key,e.key)}}class $B{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new rn(cn.Kr)}checkEmpty(t){return ot.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new oB(a,e,n,s);this.mutationQueue.push(l);for(const u of s)this.Jr=this.Jr.add(new cn(u.key,a)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return ot.resolve(l)}lookupMutationBatch(t,e){return ot.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,s=this.Xr(n),a=s<0?0:s;return ot.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(this.mutationQueue.length===0?ob:this.Yn-1)}getAllMutationBatches(t){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new cn(e,0),s=new cn(e,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([n,s],(l=>{const u=this.Zr(l.Hr);a.push(u)})),ot.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new rn(Yt);return e.forEach((s=>{const a=new cn(s,0),l=new cn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(u=>{n=n.add(u.Hr)}))})),ot.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,s=n.length+1;let a=n;wt.isDocumentKey(a)||(a=a.child(""));const l=new cn(new wt(a),0);let u=new rn(Yt);return this.Jr.forEachWhile((h=>{const f=h.key.path;return!!n.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Hr)),!0)}),l),ot.resolve(this.Yr(u))}Yr(t){const e=[];return t.forEach((n=>{const s=this.Zr(n);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){ie(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return ot.forEach(e.mutations,(s=>{const a=new cn(s.key,e.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Jr=n}))}nr(t){}containsKey(t,e){const n=new cn(e,0),s=this.Jr.firstAfterOrEqual(n);return ot.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,ot.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class XB{constructor(t){this.ti=t,this.docs=(function(){return new xe(wt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,s=this.docs.get(n),a=s?s.size:0,l=this.ti(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return ot.resolve(n?n.document.mutableCopy():xn.newInvalidDocument(e))}getEntries(t,e){let n=yr();return e.forEach((s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():xn.newInvalidDocument(s))})),ot.resolve(n)}getDocumentsMatchingQuery(t,e,n,s){let a=yr();const l=e.path,u=new wt(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||_j(vj(p),n)<=0||(s.has(p.key)||qp(e,p))&&(a=a.insert(p.key,p.mutableCopy()))}return ot.resolve(a)}getAllFromCollectionGroup(t,e,n,s){Dt(9500)}ni(t,e){return ot.forEach(this.docs,(n=>e(n)))}newChangeBuffer(t){return new YB(this)}getSize(t){return ot.resolve(this.size)}}class YB extends jB{constructor(t){super(),this.Mr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?e.push(this.Mr.addEntry(t,s)):this.Mr.removeEntry(n)})),ot.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}}class KB{constructor(t){this.persistence=t,this.ri=new Ro((e=>ub(e)),hb),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.ii=0,this.si=new gb,this.targetCount=0,this.oi=Jl._r()}forEachTarget(t,e){return this.ri.forEach(((n,s)=>e(s))),ot.resolve()}getLastRemoteSnapshotVersion(t){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ot.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ii&&(this.ii=e),ot.resolve()}lr(t){this.ri.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.oi=new Jl(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,ot.resolve()}updateTargetData(t,e){return this.lr(e),ot.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,ot.resolve()}removeTargets(t,e,n){let s=0;const a=[];return this.ri.forEach(((l,u)=>{u.sequenceNumber<=e&&n.get(u.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(t,u.targetId)),s++)})),ot.waitFor(a).next((()=>s))}getTargetCount(t){return ot.resolve(this.targetCount)}getTargetData(t,e){const n=this.ri.get(e)||null;return ot.resolve(n)}addMatchingKeys(t,e,n){return this.si.$r(e,n),ot.resolve()}removeMatchingKeys(t,e,n){this.si.Qr(e,n);const s=this.persistence.referenceDelegate,a=[];return s&&e.forEach((l=>{a.push(s.markPotentiallyOrphaned(t,l))})),ot.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),ot.resolve()}getMatchingKeysForTargetId(t,e){const n=this.si.jr(e);return ot.resolve(n)}containsKey(t,e){return ot.resolve(this.si.containsKey(e))}}class QI{constructor(t,e){this._i={},this.overlays={},this.ai=new Bp(0),this.ui=!1,this.ui=!0,this.ci=new qB,this.referenceDelegate=t(this),this.li=new KB(this),this.indexManager=new NB,this.remoteDocumentCache=(function(s){return new XB(s)})((n=>this.referenceDelegate.hi(n))),this.serializer=new MB(e),this.Pi=new HB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new GB,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this._i[t.toKey()];return n||(n=new $B(e,this.referenceDelegate),this._i[t.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,n){ft("MemoryPersistence","Starting transaction:",t);const s=new WB(this.ai.next());return this.referenceDelegate.Ti(),n(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(t,e){return ot.or(Object.values(this._i).map((n=>()=>n.containsKey(t,e))))}}class WB extends Aj{constructor(t){super(),this.currentSequenceNumber=t}}class yb{constructor(t){this.persistence=t,this.Ri=new gb,this.Ai=null}static Vi(t){return new yb(t)}get di(){if(this.Ai)return this.Ai;throw Dt(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.di.delete(n.toString()),ot.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.di.add(n.toString()),ot.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),ot.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((s=>this.di.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>n.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.di,(n=>{const s=wt.fromPath(n);return this.mi(t,s).next((a=>{a||e.removeEntry(s,Nt.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((n=>{n?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return ot.or([()=>ot.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class _p{constructor(t,e){this.persistence=t,this.fi=new Ro((n=>Tj(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=UB(this,e)}static Vi(t,e){return new _p(t,e)}Ti(){}Ii(t){return ot.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>e.next((s=>n+s))))}pr(t){let e=0;return this.mr(t,(n=>{e++})).next((()=>e))}mr(t,e){return ot.forEach(this.fi,((n,s)=>this.wr(t,n,s).next((a=>a?ot.resolve():e(s)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(t,(l=>this.wr(t,l,e).next((u=>{u||(n++,a.removeEntry(l,Nt.min()))})))).next((()=>a.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),ot.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.fi.set(n,t.currentSequenceNumber),ot.resolve()}removeReference(t,e,n){return this.fi.set(n,t.currentSequenceNumber),ot.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),ot.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=zf(t.data.value)),e}wr(t,e,n){return ot.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.fi.get(e);return ot.resolve(s!==void 0&&s>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class vb{constructor(t,e,n,s){this.targetId=t,this.fromCache=e,this.Ts=n,this.Is=s}static Es(t,e){let n=Kt(),s=Kt();for(const a of e.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new vb(t,e.fromCache,n,s)}}class QB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class JB{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return xF()?8:Ej(In())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,s){const a={result:null};return this.gs(t,e).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(t,e,s,n).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new QB;return this.ys(t,e,l).next((u=>{if(a.result=u,this.As)return this.ws(t,e,l,u.size)}))})).next((()=>a.result))}ws(t,e,n,s){return n.documentReadCount<this.Vs?(wl()<=Xt.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Tl(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ot.resolve()):(wl()<=Xt.DEBUG&&ft("QueryEngine","Query:",Tl(e),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ds*s?(wl()<=Xt.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Tl(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ds(e))):ot.resolve())}gs(t,e){if(WS(e))return ot.resolve(null);let n=Ds(e);return this.indexManager.getIndexType(t,n).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=zv(e,null,"F"),n=Ds(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((a=>{const l=Kt(...a);return this.fs.getDocuments(t,l).next((u=>this.indexManager.getMinOffset(t,n).next((h=>{const f=this.bs(e,u);return this.Ss(e,f,l,h.readTime)?this.gs(t,zv(e,null,"F")):this.Ds(t,f,e,h)}))))})))))}ps(t,e,n,s){return WS(e)||s.isEqual(Nt.min())?ot.resolve(null):this.fs.getDocuments(t,n).next((a=>{const l=this.bs(e,a);return this.Ss(e,l,n,s)?ot.resolve(null):(wl()<=Xt.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Tl(e)),this.Ds(t,l,e,yj(s,ah)).next((u=>u)))}))}bs(t,e){let n=new rn(CI(t));return e.forEach(((s,a)=>{qp(t,a)&&(n=n.add(a))})),n}Ss(t,e,n,s){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(t,e,n){return wl()<=Xt.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Tl(e)),this.fs.getDocumentsMatchingQuery(t,e,ma.min(),n)}Ds(t,e,n,s){return this.fs.getDocumentsMatchingQuery(t,n,s).next((a=>(e.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const _b="LocalStore",ZB=3e8;class t6{constructor(t,e,n,s){this.persistence=t,this.Cs=e,this.serializer=s,this.vs=new xe(Yt),this.Fs=new Ro((a=>ub(a)),hb),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(n)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new zB(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}}function e6(i,t,e,n){return new t6(i,t,e,n)}async function JI(i,t){const e=Ot(i);return await e.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return e.mutationQueue.getAllMutationBatches(n).next((a=>(s=a,e.Os(t),e.mutationQueue.getAllMutationBatches(n)))).next((a=>{const l=[],u=[];let h=Kt();for(const f of s){l.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of a){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return e.localDocuments.getDocuments(n,h).next((f=>({Ns:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function n6(i,t){const e=Ot(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=t.batch.keys(),a=e.xs.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,p){const g=f.batch,v=g.keys();let b=ot.resolve();return v.forEach((E=>{b=b.next((()=>p.getEntry(h,E))).next((w=>{const x=f.docVersions.get(E);ie(x!==null,48541),w.version.compareTo(x)<0&&(g.applyToRemoteDocument(w,f),w.isValidDocument()&&(w.setReadTime(f.commitVersion),p.addEntry(w)))}))})),b.next((()=>u.mutationQueue.removeMutationBatch(h,g)))})(e,n,t,a).next((()=>a.apply(n))).next((()=>e.mutationQueue.performConsistencyCheck(n))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(n,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let h=Kt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(t)))).next((()=>e.localDocuments.getDocuments(n,s)))}))}function ZI(i){const t=Ot(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function i6(i,t){const e=Ot(i),n=t.snapshotVersion;let s=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=e.xs.newChangeBuffer({trackRemovals:!0});s=e.vs;const u=[];t.targetChanges.forEach(((p,g)=>{const v=s.get(g);if(!v)return;u.push(e.li.removeMatchingKeys(a,p.removedDocuments,g).next((()=>e.li.addMatchingKeys(a,p.addedDocuments,g))));let b=v.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(g)!==null?b=b.withResumeToken(bn.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,n)),s=s.insert(g,b),(function(w,x,C){return w.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=ZB?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(v,b,p)&&u.push(e.li.updateTargetData(a,b))}));let h=yr(),f=Kt();if(t.documentUpdates.forEach((p=>{t.resolvedLimboDocuments.has(p)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(a,p))})),u.push(s6(a,l,t.documentUpdates).next((p=>{h=p.Bs,f=p.Ls}))),!n.isEqual(Nt.min())){const p=e.li.getLastRemoteSnapshotVersion(a).next((g=>e.li.setTargetsMetadata(a,a.currentSequenceNumber,n)));u.push(p)}return ot.waitFor(u).next((()=>l.apply(a))).next((()=>e.localDocuments.getLocalViewOfDocuments(a,h,f))).next((()=>h))})).then((a=>(e.vs=s,a)))}function s6(i,t,e){let n=Kt(),s=Kt();return e.forEach((a=>n=n.add(a))),t.getEntries(i,n).next((a=>{let l=yr();return e.forEach(((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(Nt.min())?(t.removeEntry(u,h.readTime),l=l.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(h),l=l.insert(u,h)):ft(_b,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{Bs:l,Ls:s}}))}function r6(i,t){const e=Ot(i);return e.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=ob),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function a6(i,t){const e=Ot(i);return e.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return e.li.getTargetData(n,t).next((a=>a?(s=a,ot.resolve(s)):e.li.allocateTargetId(n).next((l=>(s=new ra(t,l,"TargetPurposeListen",n.currentSequenceNumber),e.li.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=e.vs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.vs=e.vs.insert(n.targetId,n),e.Fs.set(t,n.targetId)),n}))}async function Xv(i,t,e){const n=Ot(i),s=n.vs.get(t),a=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",a,(l=>n.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!hc(l))throw l;ft(_b,`Failed to update sequence numbers for target ${t}: ${l}`)}n.vs=n.vs.remove(t),n.Fs.delete(s.target)}function c1(i,t,e){const n=Ot(i);let s=Nt.min(),a=Kt();return n.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,f,p){const g=Ot(h),v=g.Fs.get(p);return v!==void 0?ot.resolve(g.vs.get(v)):g.li.getTargetData(f,p)})(n,l,Ds(t)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(l,u.targetId).next((h=>{a=h}))})).next((()=>n.Cs.getDocumentsMatchingQuery(l,t,e?s:Nt.min(),e?a:Kt()))).next((u=>(o6(n,$j(t),u),{documents:u,ks:a})))))}function o6(i,t,e){let n=i.Ms.get(t)||Nt.min();e.forEach(((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),i.Ms.set(t,n)}class u1{constructor(){this.activeTargetIds=Jj()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class l6{constructor(){this.vo=new u1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,n){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new u1,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class c6{Mo(t){}shutdown(){}}const h1="ConnectivityMonitor";class d1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ft(h1,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){ft(h1,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let wf=null;function Yv(){return wf===null?wf=(function(){return 268435456+Math.round(2147483648*Math.random())})():wf++,"0x"+wf.toString(16)}const Gy="RestConnection",u6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class h6{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${n}/databases/${s}`,this.$o=this.databaseId.database===fp?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(t,e,n,s,a){const l=Yv(),u=this.Qo(t,e.toUriEncodedString());ft(Gy,`Sending RPC '${t}' ${l}:`,u,n);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,s,a);const{host:f}=new URL(u),p=So(f);return this.zo(t,u,h,n,p).then((g=>(ft(Gy,`Received RPC '${t}' ${l}: `,g),g)),(g=>{throw Xl(Gy,`RPC '${t}' ${l} failed with error: `,g,"url: ",u,"request:",n),g}))}jo(t,e,n,s,a,l){return this.Wo(t,e,n,s,a)}Go(t,e,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,a)=>t[a]=s)),n&&n.headers.forEach(((s,a)=>t[a]=s))}Qo(t,e){const n=u6[t];let s=`${this.qo}/v1/${e}:${n}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class d6{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}const En="WebChannelConnection",wu=(i,t,e)=>{i.listen(t,(n=>{try{e(n)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Fl extends h6{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Fl.c_){const t=nI();wu(t,eI.STAT_EVENT,(e=>{e.stat===Ov.PROXY?ft(En,"STAT_EVENT: detected buffering proxy"):e.stat===Ov.NOPROXY&&ft(En,"STAT_EVENT: detected no buffering proxy")})),Fl.c_=!0}}zo(t,e,n,s,a){const l=Yv();return new Promise(((u,h)=>{const f=new ZR;f.setWithCredentials(!0),f.listenOnce(tI.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Bf.NO_ERROR:const g=f.getResponseJson();ft(En,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(g)),u(g);break;case Bf.TIMEOUT:ft(En,`RPC '${t}' ${l} timed out`),h(new dt(at.DEADLINE_EXCEEDED,"Request time out"));break;case Bf.HTTP_ERROR:const v=f.getStatus();if(ft(En,`RPC '${t}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const E=b?.error;if(E&&E.status&&E.message){const w=(function(C){const N=C.toLowerCase().replace(/_/g,"-");return Object.values(at).indexOf(N)>=0?N:at.UNKNOWN})(E.status);h(new dt(w,E.message))}else h(new dt(at.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new dt(at.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{l_:t,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ft(En,`RPC '${t}' ${l} completed.`)}}));const p=JSON.stringify(s);ft(En,`RPC '${t}' ${l} sending request:`,s),f.send(e,"POST",p,n,15)}))}T_(t,e,n){const s=Yv(),a=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,e,n),u.encodeInitMessageHeaders=!0;const f=a.join("");ft(En,`Creating RPC '${t}' stream ${s}: ${f}`,u);const p=l.createWebChannel(f,u);this.I_(p);let g=!1,v=!1;const b=new d6({Ho:E=>{v?ft(En,`Not sending because RPC '${t}' stream ${s} is closed:`,E):(g||(ft(En,`Opening RPC '${t}' stream ${s} transport.`),p.open(),g=!0),ft(En,`RPC '${t}' stream ${s} sending:`,E),p.send(E))},Jo:()=>p.close()});return wu(p,Pu.EventType.OPEN,(()=>{v||(ft(En,`RPC '${t}' stream ${s} transport opened.`),b.i_())})),wu(p,Pu.EventType.CLOSE,(()=>{v||(v=!0,ft(En,`RPC '${t}' stream ${s} transport closed`),b.o_(),this.E_(p))})),wu(p,Pu.EventType.ERROR,(E=>{v||(v=!0,Xl(En,`RPC '${t}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),b.o_(new dt(at.UNAVAILABLE,"The operation could not be completed")))})),wu(p,Pu.EventType.MESSAGE,(E=>{if(!v){const w=E.data[0];ie(!!w,16349);const x=w,C=x?.error||x[0]?.error;if(C){ft(En,`RPC '${t}' stream ${s} received error:`,C);const N=C.status;let O=(function(Y){const D=Xe[Y];if(D!==void 0)return UI(D)})(N),U=C.message;O===void 0&&(O=at.INTERNAL,U="Unknown error status: "+N+" with message "+C.message),v=!0,b.o_(new dt(O,U)),p.close()}else ft(En,`RPC '${t}' stream ${s} received:`,w),b.__(w)}})),Fl.u_(),setTimeout((()=>{b.s_()}),0),b}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,n){super.Go(t,e,n),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return iI()}}function f6(i){return new Fl(i)}function qy(){return typeof document<"u"?document:null}function Kp(i){return new yB(i,!0)}Fl.c_=!1;class tD{constructor(t,e,n=1e3,s=1.5,a=6e4){this.Ci=t,this.timerId=e,this.R_=n,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const e=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-n);s>0&&ft("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const f1="PersistentStream";class eD{constructor(t,e,n,s,a,l,u,h){this.Ci=t,this.b_=n,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tD(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===at.RESOURCE_EXHAUSTED?(gr(e.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===at.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===e&&this.G_(n,s)}),(n=>{t((()=>{const s=new dt(at.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(t,e){const n=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ft(f1,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(ft(f1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class p6 extends eD{constructor(t,e,n,s,a,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,s,l),this.serializer=a}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=bB(this.serializer,t),n=(function(a){if(!("targetChange"in a))return Nt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Nt.min():l.readTime?Ps(l.readTime):Nt.min()})(t);return this.listener.J_(e,n)}Z_(t){const e={};e.database=$v(this.serializer),e.addTarget=(function(a,l){let u;const h=l.target;if(u=jv(h)?{documents:wB(a,h)}:{query:TB(a,h).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=zI(a,l.resumeToken);const f=Hv(a,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Nt.min())>0){u.readTime=vp(a,l.snapshotVersion.toTimestamp());const f=Hv(a,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,t);const n=xB(this.serializer,t);n&&(e.labels=n),this.K_(e)}X_(t){const e={};e.database=$v(this.serializer),e.removeTarget=t,this.K_(e)}}class m6 extends eD{constructor(t,e,n,s,a,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,s,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}H_(t){return ie(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ie(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ie(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=EB(t.writeResults,t.commitTime),n=Ps(t.commitTime);return this.listener.na(n,e)}ra(){const t={};t.database=$v(this.serializer),this.K_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((n=>AB(this.serializer,n)))};this.K_(e)}}class g6{}class y6 extends g6{constructor(t,e,n,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new dt(at.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(t,Gv(e,n),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new dt(at.UNKNOWN,a.toString())}))}jo(t,e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.jo(t,Gv(e,n),s,l,u,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new dt(at.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function v6(i,t,e,n){return new y6(i,t,e,n)}class _6{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gr(e),this.aa=!1):ft("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Eo="RemoteStore";class b6{constructor(t,e,n,s,a){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{n.enqueueAndForget((async()=>{Io(this)&&(ft(Eo,"Restarting streams for network reachability change."),await(async function(h){const f=Ot(h);f.Ea.add(4),await Dh(f),f.Va.set("Unknown"),f.Ea.delete(4),await Wp(f)})(this))}))})),this.Va=new _6(n,s)}}async function Wp(i){if(Io(i))for(const t of i.Ra)await t(!0)}async function Dh(i){for(const t of i.Ra)await t(!1)}function nD(i,t){const e=Ot(i);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),wb(e)?Eb(e):fc(e).O_()&&Ab(e,t))}function bb(i,t){const e=Ot(i),n=fc(e);e.Ia.delete(t),n.O_()&&iD(e,t),e.Ia.size===0&&(n.O_()?n.L_():Io(e)&&e.Va.set("Unknown"))}function Ab(i,t){if(i.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Nt.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}fc(i).Z_(t)}function iD(i,t){i.da.$e(t),fc(i).X_(t)}function Eb(i){i.da=new fB({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),fc(i).start(),i.Va.ua()}function wb(i){return Io(i)&&!fc(i).x_()&&i.Ia.size>0}function Io(i){return Ot(i).Ea.size===0}function sD(i){i.da=void 0}async function A6(i){i.Va.set("Online")}async function E6(i){i.Ia.forEach(((t,e)=>{Ab(i,t)}))}async function w6(i,t){sD(i),wb(i)?(i.Va.ha(t),Eb(i)):i.Va.set("Unknown")}async function T6(i,t,e){if(i.Va.set("Online"),t instanceof BI&&t.state===2&&t.cause)try{await(async function(s,a){const l=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.da.removeTarget(u))})(i,t)}catch(n){ft(Eo,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await bp(i,n)}else if(t instanceof qf?i.da.Xe(t):t instanceof jI?i.da.st(t):i.da.tt(t),!e.isEqual(Nt.min()))try{const n=await ZI(i.localStore);e.compareTo(n)>=0&&await(function(a,l){const u=a.da.Tt(l);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(h.resumeToken,l))}})),u.targetMismatches.forEach(((h,f)=>{const p=a.Ia.get(h);if(!p)return;a.Ia.set(h,p.withResumeToken(bn.EMPTY_BYTE_STRING,p.snapshotVersion)),iD(a,h);const g=new ra(p.target,h,f,p.sequenceNumber);Ab(a,g)})),a.remoteSyncer.applyRemoteEvent(u)})(i,e)}catch(n){ft(Eo,"Failed to raise snapshot:",n),await bp(i,n)}}async function bp(i,t,e){if(!hc(t))throw t;i.Ea.add(1),await Dh(i),i.Va.set("Offline"),e||(e=()=>ZI(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ft(Eo,"Retrying IndexedDB access"),await e(),i.Ea.delete(1),await Wp(i)}))}function rD(i,t){return t().catch((e=>bp(i,e,t)))}async function Qp(i){const t=Ot(i),e=_a(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ob;for(;S6(t);)try{const s=await r6(t.localStore,n);if(s===null){t.Ta.length===0&&e.L_();break}n=s.batchId,x6(t,s)}catch(s){await bp(t,s)}aD(t)&&oD(t)}function S6(i){return Io(i)&&i.Ta.length<10}function x6(i,t){i.Ta.push(t);const e=_a(i);e.O_()&&e.Y_&&e.ea(t.mutations)}function aD(i){return Io(i)&&!_a(i).x_()&&i.Ta.length>0}function oD(i){_a(i).start()}async function C6(i){_a(i).ra()}async function R6(i){const t=_a(i);for(const e of i.Ta)t.ea(e.mutations)}async function I6(i,t,e){const n=i.Ta.shift(),s=fb.from(n,t,e);await rD(i,(()=>i.remoteSyncer.applySuccessfulWrite(s))),await Qp(i)}async function D6(i,t){t&&_a(i).Y_&&await(async function(n,s){if((function(l){return uB(l)&&l!==at.ABORTED})(s.code)){const a=n.Ta.shift();_a(n).B_(),await rD(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Qp(n)}})(i,t),aD(i)&&oD(i)}async function p1(i,t){const e=Ot(i);e.asyncQueue.verifyOperationInProgress(),ft(Eo,"RemoteStore received new credentials");const n=Io(e);e.Ea.add(3),await Dh(e),n&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Wp(e)}async function M6(i,t){const e=Ot(i);t?(e.Ea.delete(2),await Wp(e)):t||(e.Ea.add(2),await Dh(e),e.Va.set("Unknown"))}function fc(i){return i.ma||(i.ma=(function(e,n,s){const a=Ot(e);return a.sa(),new p6(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(i.datastore,i.asyncQueue,{Zo:A6.bind(null,i),Yo:E6.bind(null,i),t_:w6.bind(null,i),J_:T6.bind(null,i)}),i.Ra.push((async t=>{t?(i.ma.B_(),wb(i)?Eb(i):i.Va.set("Unknown")):(await i.ma.stop(),sD(i))}))),i.ma}function _a(i){return i.fa||(i.fa=(function(e,n,s){const a=Ot(e);return a.sa(),new m6(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:C6.bind(null,i),t_:D6.bind(null,i),ta:R6.bind(null,i),na:I6.bind(null,i)}),i.Ra.push((async t=>{t?(i.fa.B_(),await Qp(i)):(await i.fa.stop(),i.Ta.length>0&&(ft(Eo,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Tb{constructor(t,e,n,s,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,s,a){const l=Date.now()+n,u=new Tb(t,e,l,s,a);return u.start(n),u}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dt(at.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sb(i,t){if(gr("AsyncQueue",`${t}: ${i}`),hc(i))return new dt(at.UNAVAILABLE,`${t}: ${i}`);throw i}class Ul{static emptySet(t){return new Ul(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||wt.comparator(e.key,n.key):(e,n)=>wt.comparator(e.key,n.key),this.keyedMap=Nu(),this.sortedSet=new xe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ul)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new Ul;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class m1{constructor(){this.ga=new xe(wt.comparator)}track(t){const e=t.doc.key,n=this.ga.get(e);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(e,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(e):t.type===1&&n.type===2?this.ga=this.ga.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Dt(63341,{Vt:t,pa:n}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Zl{constructor(t,e,n,s,a,l,u,h,f){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(t,e,n,s,a){const l=[];return e.forEach((u=>{l.push({type:0,doc:u})})),new Zl(t,e,Ul.emptySet(e),l,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gp(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==n[s].type||!e[s].doc.isEqual(n[s].doc))return!1;return!0}}class P6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class N6{constructor(){this.queries=g1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=Ot(e),a=s.queries;s.queries=g1(),a.forEach(((l,u)=>{for(const h of u.ba)h.onError(n)}))})(this,new dt(at.ABORTED,"Firestore shutting down"))}}function g1(){return new Ro((i=>xI(i)),Gp)}async function k6(i,t){const e=Ot(i);let n=3;const s=t.query;let a=e.queries.get(s);a?!a.Sa()&&t.Da()&&(n=2):(a=new P6,n=t.Da()?0:1);try{switch(n){case 0:a.wa=await e.onListen(s,!0);break;case 1:a.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(l){const u=Sb(l,`Initialization of query '${Tl(t.query)}' failed`);return void t.onError(u)}e.queries.set(s,a),a.ba.push(t),t.va(e.onlineState),a.wa&&t.Fa(a.wa)&&xb(e)}async function O6(i,t){const e=Ot(i),n=t.query;let s=3;const a=e.queries.get(n);if(a){const l=a.ba.indexOf(t);l>=0&&(a.ba.splice(l,1),a.ba.length===0?s=t.Da()?0:1:!a.Sa()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function L6(i,t){const e=Ot(i);let n=!1;for(const s of t){const a=s.query,l=e.queries.get(a);if(l){for(const u of l.ba)u.Fa(s)&&(n=!0);l.wa=s}}n&&xb(e)}function V6(i,t,e){const n=Ot(i),s=n.queries.get(t);if(s)for(const a of s.ba)a.onError(e);n.queries.delete(t)}function xb(i){i.Ca.forEach((t=>{t.next()}))}var Kv,y1;(y1=Kv||(Kv={})).Ma="default",y1.Cache="cache";class F6{constructor(t,e,n){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const s of t.docChanges)s.type!==3&&n.push(s);t=new Zl(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const n=e!=="Offline";return(!this.options.Ka||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Zl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Kv.Cache}}class lD{constructor(t){this.key=t}}class cD{constructor(t){this.key=t}}class U6{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Kt(),this.mutatedKeys=Kt(),this.eu=CI(t),this.tu=new Ul(this.eu)}get nu(){return this.Za}ru(t,e){const n=e?e.iu:new m1,s=e?e.tu:this.tu;let a=e?e.mutatedKeys:this.mutatedKeys,l=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((p,g)=>{const v=s.get(p),b=qp(this.query,g)?g:null,E=!!v&&this.mutatedKeys.has(v.key),w=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let x=!1;v&&b?v.data.isEqual(b.data)?E!==w&&(n.track({type:3,doc:b}),x=!0):this.su(v,b)||(n.track({type:2,doc:b}),x=!0,(h&&this.eu(b,h)>0||f&&this.eu(b,f)<0)&&(u=!0)):!v&&b?(n.track({type:0,doc:b}),x=!0):v&&!b&&(n.track({type:1,doc:v}),x=!0,(h||f)&&(u=!0)),x&&(b?(l=l.add(b),a=w?a.add(p):a.delete(p)):(l=l.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),a=a.delete(p.key),n.track({type:1,doc:p})}return{tu:l,iu:n,Ss:u,mutatedKeys:a}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,s){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort(((p,g)=>(function(b,E){const w=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Vt:x})}};return w(b)-w(E)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(n),s=s??!1;const u=e&&!s?this._u():[],h=this.Ya.size===0&&this.current&&!s?1:0,f=h!==this.Xa;return this.Xa=h,l.length!==0||f?{snapshot:new Zl(this.query,t.tu,a,l,t.mutatedKeys,h===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new m1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Kt(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))}));const e=[];return t.forEach((n=>{this.Ya.has(n)||e.push(new cD(n))})),this.Ya.forEach((n=>{t.has(n)||e.push(new lD(n))})),e}cu(t){this.Za=t.ks,this.Ya=Kt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Cb="SyncEngine";class j6{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class B6{constructor(t){this.key=t,this.hu=!1}}class z6{constructor(t,e,n,s,a,l){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ro((u=>xI(u)),Gp),this.Iu=new Map,this.Eu=new Set,this.Ru=new xe(wt.comparator),this.Au=new Map,this.Vu=new gb,this.du={},this.mu=new Map,this.fu=Jl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function H6(i,t,e=!0){const n=mD(i);let s;const a=n.Tu.get(t);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await uD(n,t,e,!0),s}async function G6(i,t){const e=mD(i);await uD(e,t,!0,!1)}async function uD(i,t,e,n){const s=await a6(i.localStore,Ds(t)),a=s.targetId,l=i.sharedClientState.addLocalQueryTarget(a,e);let u;return n&&(u=await q6(i,t,a,l==="current",s.resumeToken)),i.isPrimaryClient&&e&&nD(i.remoteStore,s),u}async function q6(i,t,e,n,s){i.pu=(g,v,b)=>(async function(w,x,C,N){let O=x.view.ru(C);O.Ss&&(O=await c1(w.localStore,x.query,!1).then((({documents:D})=>x.view.ru(D,O))));const U=N&&N.targetChanges.get(x.targetId),G=N&&N.targetMismatches.get(x.targetId)!=null,Y=x.view.applyChanges(O,w.isPrimaryClient,U,G);return _1(w,x.targetId,Y.au),Y.snapshot})(i,g,v,b);const a=await c1(i.localStore,t,!0),l=new U6(t,a.ks),u=l.ru(a.documents),h=Ih.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",s),f=l.applyChanges(u,i.isPrimaryClient,h);_1(i,e,f.au);const p=new j6(t,e,l);return i.Tu.set(t,p),i.Iu.has(e)?i.Iu.get(e).push(t):i.Iu.set(e,[t]),f.snapshot}async function $6(i,t,e){const n=Ot(i),s=n.Tu.get(t),a=n.Iu.get(s.targetId);if(a.length>1)return n.Iu.set(s.targetId,a.filter((l=>!Gp(l,t)))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Xv(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),e&&bb(n.remoteStore,s.targetId),Wv(n,s.targetId)})).catch(uc)):(Wv(n,s.targetId),await Xv(n.localStore,s.targetId,!0))}async function X6(i,t){const e=Ot(i),n=e.Tu.get(t),s=e.Iu.get(n.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),bb(e.remoteStore,n.targetId))}async function Y6(i,t,e){const n=e5(i);try{const s=await(function(l,u){const h=Ot(l),f=ge.now(),p=u.reduce(((b,E)=>b.add(E.key)),Kt());let g,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let E=yr(),w=Kt();return h.xs.getEntries(b,p).next((x=>{E=x,E.forEach(((C,N)=>{N.isValidDocument()||(w=w.add(C))}))})).next((()=>h.localDocuments.getOverlayedDocuments(b,E))).next((x=>{g=x;const C=[];for(const N of u){const O=rB(N,g.get(N.key).overlayedDocument);O!=null&&C.push(new Ra(N.key,O,yI(O.value.mapValue),Ms.exists(!0)))}return h.mutationQueue.addMutationBatch(b,f,C,u)})).next((x=>{v=x;const C=x.applyToLocalDocumentSet(g,w);return h.documentOverlayCache.saveOverlays(b,x.batchId,C)}))})).then((()=>({batchId:v.batchId,changes:II(g)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(s.batchId),(function(l,u,h){let f=l.du[l.currentUser.toKey()];f||(f=new xe(Yt)),f=f.insert(u,h),l.du[l.currentUser.toKey()]=f})(n,s.batchId,e),await Mh(n,s.changes),await Qp(n.remoteStore)}catch(s){const a=Sb(s,"Failed to persist write");e.reject(a)}}async function hD(i,t){const e=Ot(i);try{const n=await i6(e.localStore,t);t.targetChanges.forEach(((s,a)=>{const l=e.Au.get(a);l&&(ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?ie(l.hu,14607):s.removedDocuments.size>0&&(ie(l.hu,42227),l.hu=!1))})),await Mh(e,n,t)}catch(n){await uc(n)}}function v1(i,t,e){const n=Ot(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const s=[];n.Tu.forEach(((a,l)=>{const u=l.view.va(t);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const h=Ot(l);h.onlineState=u;let f=!1;h.queries.forEach(((p,g)=>{for(const v of g.ba)v.va(u)&&(f=!0)})),f&&xb(h)})(n.eventManager,t),s.length&&n.Pu.J_(s),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function K6(i,t,e){const n=Ot(i);n.sharedClientState.updateQueryState(t,"rejected",e);const s=n.Au.get(t),a=s&&s.key;if(a){let l=new xe(wt.comparator);l=l.insert(a,xn.newNoDocument(a,Nt.min()));const u=Kt().add(a),h=new Yp(Nt.min(),new Map,new xe(Yt),l,u);await hD(n,h),n.Ru=n.Ru.remove(a),n.Au.delete(t),Rb(n)}else await Xv(n.localStore,t,!1).then((()=>Wv(n,t,e))).catch(uc)}async function W6(i,t){const e=Ot(i),n=t.batch.batchId;try{const s=await n6(e.localStore,t);fD(e,n,null),dD(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await Mh(e,s)}catch(s){await uc(s)}}async function Q6(i,t,e){const n=Ot(i);try{const s=await(function(l,u){const h=Ot(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next((g=>(ie(g!==null,37113),p=g.keys(),h.mutationQueue.removeMutationBatch(f,g)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(n.localStore,t);fD(n,t,e),dD(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await Mh(n,s)}catch(s){await uc(s)}}function dD(i,t){(i.mu.get(t)||[]).forEach((e=>{e.resolve()})),i.mu.delete(t)}function fD(i,t,e){const n=Ot(i);let s=n.du[n.currentUser.toKey()];if(s){const a=s.get(t);a&&(e?a.reject(e):a.resolve(),s=s.remove(t)),n.du[n.currentUser.toKey()]=s}}function Wv(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Iu.get(t))i.Tu.delete(n),e&&i.Pu.yu(n,e);i.Iu.delete(t),i.isPrimaryClient&&i.Vu.Gr(t).forEach((n=>{i.Vu.containsKey(n)||pD(i,n)}))}function pD(i,t){i.Eu.delete(t.path.canonicalString());const e=i.Ru.get(t);e!==null&&(bb(i.remoteStore,e),i.Ru=i.Ru.remove(t),i.Au.delete(e),Rb(i))}function _1(i,t,e){for(const n of e)n instanceof lD?(i.Vu.addReference(n.key,t),J6(i,n)):n instanceof cD?(ft(Cb,"Document no longer in limbo: "+n.key),i.Vu.removeReference(n.key,t),i.Vu.containsKey(n.key)||pD(i,n.key)):Dt(19791,{wu:n})}function J6(i,t){const e=t.key,n=e.path.canonicalString();i.Ru.get(e)||i.Eu.has(n)||(ft(Cb,"New document in limbo: "+e),i.Eu.add(n),Rb(i))}function Rb(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const e=new wt(me.fromString(t)),n=i.fu.next();i.Au.set(n,new B6(e)),i.Ru=i.Ru.insert(e,n),nD(i.remoteStore,new ra(Ds(TI(e.path)),n,"TargetPurposeLimboResolution",Bp.ce))}}async function Mh(i,t,e){const n=Ot(i),s=[],a=[],l=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,h)=>{l.push(n.pu(h,t,e).then((f=>{if((f||e)&&n.isPrimaryClient){const p=f?!f.fromCache:e?.targetChanges.get(h.targetId)?.current;n.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(f){s.push(f);const p=vb.Es(h.targetId,f);a.push(p)}})))})),await Promise.all(l),n.Pu.J_(s),await(async function(h,f){const p=Ot(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>ot.forEach(f,(v=>ot.forEach(v.Ts,(b=>p.persistence.referenceDelegate.addReference(g,v.targetId,b))).next((()=>ot.forEach(v.Is,(b=>p.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))))))}catch(g){if(!hc(g))throw g;ft(_b,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const b=p.vs.get(v),E=b.snapshotVersion,w=b.withLastLimboFreeSnapshotVersion(E);p.vs=p.vs.insert(v,w)}}})(n.localStore,a))}async function Z6(i,t){const e=Ot(i);if(!e.currentUser.isEqual(t)){ft(Cb,"User change. New user:",t.toKey());const n=await JI(e.localStore,t);e.currentUser=t,(function(a,l){a.mu.forEach((u=>{u.forEach((h=>{h.reject(new dt(at.CANCELLED,l))}))})),a.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Mh(e,n.Ns)}}function t5(i,t){const e=Ot(i),n=e.Au.get(t);if(n&&n.hu)return Kt().add(n.key);{let s=Kt();const a=e.Iu.get(t);if(!a)return s;for(const l of a){const u=e.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function mD(i){const t=Ot(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=hD.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=t5.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=K6.bind(null,t),t.Pu.J_=L6.bind(null,t.eventManager),t.Pu.yu=V6.bind(null,t.eventManager),t}function e5(i){const t=Ot(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=W6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Q6.bind(null,t),t}class Ap{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Kp(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return e6(this.persistence,new JB,t.initialUser,this.serializer)}Cu(t){return new QI(yb.Vi,this.serializer)}Du(t){return new l6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ap.provider={build:()=>new Ap};class n5 extends Ap{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){ie(this.persistence.referenceDelegate instanceof _p,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new VB(n,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new QI((n=>_p.Vi(n,e)),this.serializer)}}class Qv{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>v1(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Z6.bind(null,this.syncEngine),await M6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new N6})()}createDatastore(t){const e=Kp(t.databaseInfo.databaseId),n=f6(t.databaseInfo);return v6(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return(function(n,s,a,l,u){return new b6(n,s,a,l,u)})(this.localStore,this.datastore,t.asyncQueue,(e=>v1(this.syncEngine,e,0)),(function(){return d1.v()?new d1:new c6})())}createSyncEngine(t,e){return(function(s,a,l,u,h,f,p){const g=new z6(s,a,l,u,h,f);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const n=Ot(e);ft(Eo,"RemoteStore shutting down."),n.Ea.add(5),await Dh(n),n.Aa.shutdown(),n.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qv.provider={build:()=>new Qv};class i5{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):gr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const ba="FirestoreClient";class s5{constructor(t,e,n,s,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this._databaseInfo=s,this.user=Tn.UNAUTHENTICATED,this.clientId=ab.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async l=>{ft(ba,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(n,(l=>(ft(ba,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Sb(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function $y(i,t){i.asyncQueue.verifyOperationInProgress(),ft(ba,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener((async s=>{n.isEqual(s)||(await JI(t.localStore,s),n=s)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function b1(i,t){i.asyncQueue.verifyOperationInProgress();const e=await r5(i);ft(ba,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener((n=>p1(t.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,s)=>p1(t.remoteStore,s))),i._onlineComponents=t}async function r5(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ft(ba,"Using user provided OfflineComponentProvider");try{await $y(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===at.FAILED_PRECONDITION||s.code===at.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;Xl("Error using user provided cache. Falling back to memory cache: "+e),await $y(i,new Ap)}}else ft(ba,"Using default OfflineComponentProvider"),await $y(i,new n5(void 0));return i._offlineComponents}async function gD(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ft(ba,"Using user provided OnlineComponentProvider"),await b1(i,i._uninitializedComponentsProvider._online)):(ft(ba,"Using default OnlineComponentProvider"),await b1(i,new Qv))),i._onlineComponents}function a5(i){return gD(i).then((t=>t.syncEngine))}async function o5(i){const t=await gD(i),e=t.eventManager;return e.onListen=H6.bind(null,t.syncEngine),e.onUnlisten=$6.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=G6.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=X6.bind(null,t.syncEngine),e}function l5(i,t,e={}){const n=new ca;return i.asyncQueue.enqueueAndForget((async()=>(function(a,l,u,h,f){const p=new i5({next:v=>{p.Nu(),l.enqueueAndForget((()=>O6(a,g))),v.fromCache&&h.source==="server"?f.reject(new dt(at.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new F6(u,p,{includeMetadataChanges:!0,Ka:!0});return k6(a,g)})(await o5(i),i.asyncQueue,t,e,n))),n.promise}function c5(i,t){const e=new ca;return i.asyncQueue.enqueueAndForget((async()=>Y6(await a5(i),t,e))),e.promise}function yD(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}const u5="ComponentProvider",A1=new Map;function h5(i,t,e,n,s){return new Cj(i,t,e,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,yD(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,n)}const vD="firestore.googleapis.com",E1=!0;class w1{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new dt(at.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vD,this.ssl=E1}else this.host=t.host,this.ssl=t.ssl??E1;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=WI;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<OB)throw new dt(at.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}gj("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yD(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new dt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new dt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new dt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Jp{constructor(t,e,n,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new dt(at.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new dt(at.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w1(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new aj;switch(n.type){case"firstParty":return new uj(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new dt(at.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=A1.get(e);n&&(ft(u5,"Removing Datastore"),A1.delete(e),n.terminate())})(this),Promise.resolve()}}function d5(i,t,e,n={}){i=Kl(i,Jp);const s=So(t),a=i._getSettings(),l={...a,emulatorOptions:i._getEmulatorOptions()},u=`${t}:${e}`;s&&($_(`https://${u}`),X_("Firestore",!0)),a.host!==vD&&a.host!==u&&Xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:u,ssl:s,emulatorOptions:n};if(!yo(h,l)&&(i._setSettings(h),n.mockUserToken)){let f,p;if(typeof n.mockUserToken=="string")f=n.mockUserToken,p=Tn.MOCK_USER;else{f=dR(n.mockUserToken,i._app?.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new dt(at.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Tn(g)}i._authCredentials=new oj(new rI(f,p))}}class Do{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Do(this.firestore,t,this._query)}}class sn{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new sn(this.firestore,t,this._key)}toJSON(){return{type:sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(Ch(e,sn._jsonSchema))return new sn(t,n||null,new wt(me.fromString(e.referencePath)))}}sn._jsonSchemaVersion="firestore/documentReference/1.0",sn._jsonSchema={type:Qe("string",sn._jsonSchemaVersion),referencePath:Qe("string")};class ua extends Do{constructor(t,e,n){super(t,e,TI(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new sn(this.firestore,null,new wt(t))}withConverter(t){return new ua(this.firestore,t,this._path)}}function _D(i,t,...e){if(i=_n(i),aI("collection","path",t),i instanceof Jp){const n=me.fromString(t,...e);return LS(n),new ua(i,null,n)}{if(!(i instanceof sn||i instanceof ua))throw new dt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(me.fromString(t,...e));return LS(n),new ua(i.firestore,null,n)}}function bD(i,t,...e){if(i=_n(i),arguments.length===1&&(t=ab.newId()),aI("doc","path",t),i instanceof Jp){const n=me.fromString(t,...e);return OS(n),new sn(i,null,new wt(n))}{if(!(i instanceof sn||i instanceof ua))throw new dt(at.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(me.fromString(t,...e));return OS(n),new sn(i.firestore,i instanceof ua?i.converter:null,new wt(n))}}const T1="AsyncQueue";class S1{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tD(this,"async_queue_retry"),this._c=()=>{const n=qy();n&&ft(T1,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const e=qy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=qy();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!hc(t))throw t;ft(T1,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,gr("INTERNAL UNHANDLED ERROR: ",x1(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=Tb.createAndSchedule(this,t,e,n,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Dt(47125,{Pc:x1(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,n)=>e.targetTimeMs-n.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function x1(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}class Zp extends Jp{constructor(t,e,n,s){super(t,e,n,s),this.type="firestore",this._queue=new S1,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new S1(t),this._firestoreClient=void 0,await t}}}function f5(i,t){const e=typeof i=="object"?i:W_(),n=typeof i=="string"?i:fp,s=Lp(e,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=cR("firestore");a&&d5(s,...a)}return s}function AD(i){if(i._terminated)throw new dt(at.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||p5(i),i._firestoreClient}function p5(i){const t=i._freezeSettings(),e=h5(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new s5(i._authCredentials,i._appCheckCredentials,i._queue,e,i._componentsProvider&&(function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}})(i._componentsProvider))}class Ci{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ci(bn.fromBase64String(t))}catch(e){throw new dt(at.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ci(bn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ch(t,Ci._jsonSchema))return Ci.fromBase64String(t.bytes)}}Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:Qe("string",Ci._jsonSchemaVersion),bytes:Qe("string")};class Ib{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new dt(at.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Db{constructor(t){this._methodName=t}}class Ns{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new dt(at.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new dt(at.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Yt(this._lat,t._lat)||Yt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ns._jsonSchemaVersion}}static fromJSON(t){if(Ch(t,Ns._jsonSchema))return new Ns(t.latitude,t.longitude)}}Ns._jsonSchemaVersion="firestore/geoPoint/1.0",Ns._jsonSchema={type:Qe("string",Ns._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};class Yi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ch(t,Yi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Yi(t.vectorValues);throw new dt(at.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:Qe("string",Yi._jsonSchemaVersion),vectorValues:Qe("object")};const m5=/^__.*__$/;class g5{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Ra(t,this.data,this.fieldMask,e,this.fieldTransforms):new Rh(t,this.data,e,this.fieldTransforms)}}class ED{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Ra(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function wD(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{dataSource:i})}}class Mb{constructor(t,e,n,s,a,l){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new Mb({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){const e=this.path?.child(t),n=this.contextWith({path:e,arrayElement:!1});return n.validatePathSegment(t),n}childContextForFieldPath(t){const e=this.path?.child(t),n=this.contextWith({path:e,arrayElement:!1});return n.validatePath(),n}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Ep(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(wD(this.dataSource)&&m5.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class y5{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Kp(t)}createContext(t,e,n,s=!1){return new Mb({dataSource:t,methodName:e,targetDoc:n,path:vn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pb(i){const t=i._freezeSettings(),e=Kp(i._databaseId);return new y5(i._databaseId,!!t.ignoreUndefinedProperties,e)}function v5(i,t,e,n,s,a={}){const l=i.createContext(a.merge||a.mergeFields?2:0,t,e,s);Nb("Data must be an object, but it was:",l,n);const u=TD(n,l);let h,f;if(a.merge)h=new li(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const v=tc(t,g,e);if(!l.contains(v))throw new dt(at.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);CD(p,v)||p.push(v)}h=new li(p),f=l.fieldTransforms.filter((g=>h.covers(g.field)))}else h=null,f=l.fieldTransforms;return new g5(new Kn(u),h,f)}class tm extends Db{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof tm}}function _5(i,t,e,n){const s=i.createContext(1,t,e);Nb("Data must be an object, but it was:",s,n);const a=[],l=Kn.empty();Ca(n,((h,f)=>{const p=xD(t,h,e);f=_n(f);const g=s.childContextForFieldPath(p);if(f instanceof tm)a.push(p);else{const v=Ph(f,g);v!=null&&(a.push(p),l.set(p,v))}}));const u=new li(a);return new ED(l,u,s.fieldTransforms)}function b5(i,t,e,n,s,a){const l=i.createContext(1,t,e),u=[tc(t,n,e)],h=[s];if(a.length%2!=0)throw new dt(at.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)u.push(tc(t,a[v])),h.push(a[v+1]);const f=[],p=Kn.empty();for(let v=u.length-1;v>=0;--v)if(!CD(f,u[v])){const b=u[v];let E=h[v];E=_n(E);const w=l.childContextForFieldPath(b);if(E instanceof tm)f.push(b);else{const x=Ph(E,w);x!=null&&(f.push(b),p.set(b,x))}}const g=new li(f);return new ED(p,g,l.fieldTransforms)}function A5(i,t,e,n=!1){return Ph(e,i.createContext(n?4:3,t))}function Ph(i,t){if(SD(i=_n(i)))return Nb("Unsupported field value:",t,i),TD(i,t);if(i instanceof Db)return(function(n,s){if(!wD(s.dataSource))throw s.createError(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(n,s){const a=[];let l=0;for(const u of n){let h=Ph(u,s.childContextForArray(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}})(i,t)}return(function(n,s){if((n=_n(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Zj(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=ge.fromDate(n);return{timestampValue:vp(s.serializer,a)}}if(n instanceof ge){const a=new ge(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:vp(s.serializer,a)}}if(n instanceof Ns)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ci)return{bytesValue:zI(s.serializer,n._byteString)};if(n instanceof sn){const a=s.databaseId,l=n.firestore._databaseId;if(!l.isEqual(a))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:mb(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Yi)return(function(l,u){const h=l instanceof Yi?l.toArray():l;return{mapValue:{fields:{[mI]:{stringValue:gI},[pp]:{arrayValue:{values:h.map((p=>{if(typeof p!="number")throw u.createError("VectorValues must only contain numeric values.");return db(u.serializer,p)}))}}}}}})(n,s);if(KI(n))return n._toProto(s.serializer);throw s.createError(`Unsupported field value: ${jp(n)}`)})(i,t)}function TD(i,t){const e={};return cI(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ca(i,((n,s)=>{const a=Ph(s,t.childContextForField(n));a!=null&&(e[n]=a)})),{mapValue:{fields:e}}}function SD(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ge||i instanceof Ns||i instanceof Ci||i instanceof sn||i instanceof Db||i instanceof Yi||KI(i))}function Nb(i,t,e){if(!SD(e)||!oI(e)){const n=jp(e);throw n==="an object"?t.createError(i+" a custom object"):t.createError(i+" "+n)}}function tc(i,t,e){if((t=_n(t))instanceof Ib)return t._internalPath;if(typeof t=="string")return xD(i,t);throw Ep("Field path arguments must be of type string or ",i,!1,void 0,e)}const E5=new RegExp("[~\\*/\\[\\]]");function xD(i,t,e){if(t.search(E5)>=0)throw Ep(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new Ib(...t.split("."))._internalPath}catch{throw Ep(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function Ep(i,t,e,n,s){const a=n&&!n.isEmpty(),l=s!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${n}`),l&&(h+=` in document ${s}`),h+=")"),new dt(at.INVALID_ARGUMENT,u+i+h)}function CD(i,t){return i.some((e=>e.isEqual(t)))}class w5{convertValue(t,e="none"){switch(va(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ya(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Ca(t,((s,a)=>{n[s]=this.convertValue(a,e)})),n}convertVectorValue(t){const e=t.fields?.[pp].arrayValue?.values?.map((n=>Oe(n.doubleValue)));return new Yi(e)}convertGeoPoint(t){return new Ns(Oe(t.latitude),Oe(t.longitude))}convertArray(t,e){return(t.values||[]).map((n=>this.convertValue(n,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Hp(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(oh(t));default:return null}}convertTimestamp(t){const e=ga(t);return new ge(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=me.fromString(t);ie(YI(n),9688,{name:t});const s=new lh(n.get(1),n.get(3)),a=new wt(n.popFirst(5));return s.isEqual(e)||gr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}class T5 extends w5{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ci(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new sn(this.firestore,null,e)}}const C1="@firebase/firestore",R1="4.10.0";class RD{constructor(t,e,n,s,a){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new S5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){const e=this._document.data.field(tc("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class S5 extends RD{data(){return super.data()}}function x5(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new dt(at.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kb{}class ID extends kb{}function C5(i,t,...e){let n=[];t instanceof kb&&n.push(t),n=n.concat(e),(function(a){const l=a.filter((h=>h instanceof Lb)).length,u=a.filter((h=>h instanceof Ob)).length;if(l>1||l>0&&u>0)throw new dt(at.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)i=s._apply(i);return i}class Ob extends ID{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new Ob(t,e,n)}_apply(t){const e=this._parse(t);return DD(t._query,e),new Do(t.firestore,t.converter,Bv(t._query,e))}_parse(t){const e=Pb(t.firestore);return(function(a,l,u,h,f,p,g){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new dt(at.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){D1(g,p);const E=[];for(const w of g)E.push(I1(h,a,w));v={arrayValue:{values:E}}}else v=I1(h,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||D1(g,p),v=A5(u,l,g,p==="in"||p==="not-in");return Ke.create(f,p,v)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class Lb extends kb{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Lb(t,e)}_parse(t){const e=this._queryConstraints.map((n=>n._parse(t))).filter((n=>n.getFilters().length>0));return e.length===1?e[0]:Qi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(s,a){let l=s;const u=a.getFlattenedFilters();for(const h of u)DD(l,h),l=Bv(l,h)})(t._query,e),new Do(t.firestore,t.converter,Bv(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vb extends ID{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Vb(t,e)}_apply(t){const e=(function(s,a,l){if(s.startAt!==null)throw new dt(at.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new dt(at.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uh(a,l)})(t._query,this._field,this._direction);return new Do(t.firestore,t.converter,qj(t._query,e))}}function R5(i,t="asc"){const e=t,n=tc("orderBy",i);return Vb._create(n,e)}function I1(i,t,e){if(typeof(e=_n(e))=="string"){if(e==="")throw new dt(at.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SI(t)&&e.indexOf("/")!==-1)throw new dt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const n=t.path.child(me.fromString(e));if(!wt.isDocumentKey(n))throw new dt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return GS(i,new wt(n))}if(e instanceof sn)return GS(i,e._key);throw new dt(at.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jp(e)}.`)}function D1(i,t){if(!Array.isArray(i)||i.length===0)throw new dt(at.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function DD(i,t){const e=(function(s,a){for(const l of s)for(const u of l.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(i.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new dt(at.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new dt(at.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function I5(i,t,e){let n;return n=i?i.toFirestore(t):t,n}class Tf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class jl extends RD{constructor(t,e,n,s,a,l){super(t,e,n,s,l),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new $f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(tc("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(at.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=jl._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}jl._jsonSchemaVersion="firestore/documentSnapshot/1.0",jl._jsonSchema={type:Qe("string",jl._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class $f extends jl{data(t={}){return super.data(t)}}class Bl{constructor(t,e,n,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Tf(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new $f(this._firestore,this._userDataWriter,n.key,n,new Tf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dt(at.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const h=new $f(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Tf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const h=new $f(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Tf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:D5(u.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(at.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Bl._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ab.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(e.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function D5(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:i})}}Bl._jsonSchemaVersion="firestore/querySnapshot/1.0",Bl._jsonSchema={type:Qe("string",Bl._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};function M5(i){i=Kl(i,Do);const t=Kl(i.firestore,Zp),e=AD(t),n=new T5(t);return x5(i._query),l5(e,i._query).then((s=>new Bl(t,n,i,s)))}function P5(i,t,e,...n){i=Kl(i,sn);const s=Kl(i.firestore,Zp),a=Pb(s);let l;return l=typeof(t=_n(t))=="string"||t instanceof Ib?b5(a,"updateDoc",i._key,t,e,n):_5(a,"updateDoc",i._key,t),MD(s,[l.toMutation(i._key,Ms.exists(!0))])}function N5(i,t){const e=Kl(i.firestore,Zp),n=bD(i),s=I5(i.converter,t),a=Pb(i.firestore);return MD(e,[v5(a,"addDoc",n._key,s,i.converter!==null,{}).toMutation(n._key,Ms.exists(!1))]).then((()=>n))}function MD(i,t){const e=AD(i);return c5(e,t)}(function(t,e=!0){rj(xo),vo(new pa("firestore",((n,{instanceIdentifier:s,options:a})=>{const l=n.getProvider("app").getImmediate(),u=new Zp(new lj(n.getProvider("auth-internal")),new hj(l,n.getProvider("app-check-internal")),Rj(l,s),l);return a={useFetchStreams:e,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),Cs(C1,R1,t),Cs(C1,R1,"esm2020")})();const PD="firebasestorage.googleapis.com",k5="storageBucket",O5=120*1e3,L5=600*1e3;class Fs extends Vs{constructor(t,e,n=0){super(Xy(t),`Firebase Storage: ${e} (${Xy(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Xy(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ls;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ls||(Ls={}));function Xy(i){return"storage/"+i}function V5(){const i="An unknown error occurred, please check the error payload for server response.";return new Fs(Ls.UNKNOWN,i)}function F5(){return new Fs(Ls.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U5(){return new Fs(Ls.CANCELED,"User canceled the upload/download.")}function j5(i){return new Fs(Ls.INVALID_URL,"Invalid URL '"+i+"'.")}function B5(i){return new Fs(Ls.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function M1(i){return new Fs(Ls.INVALID_ARGUMENT,i)}function ND(){return new Fs(Ls.APP_DELETED,"The Firebase app was deleted.")}function z5(i){return new Fs(Ls.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Xi{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=Xi.makeFromUrl(t,e)}catch{return new Xi(t,"")}if(n.path==="")return n;throw B5(t)}static makeFromUrl(t,e){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),h={bucket:1,path:3};function f(U){U.path_=decodeURIComponent(U.path)}const p="v[A-Za-z0-9_]+",g=e.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${p}/b/${s}/o${v}`,"i"),E={bucket:1,path:3},w=e===PD?"(?:storage.googleapis.com|storage.cloud.google.com)":e,x="([^?#]*)",C=new RegExp(`^https?://${w}/${s}/${x}`,"i"),O=[{regex:u,indices:h,postModify:a},{regex:b,indices:E,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let U=0;U<O.length;U++){const G=O[U],Y=G.regex.exec(t);if(Y){const D=Y[G.indices.bucket];let R=Y[G.indices.path];R||(R=""),n=new Xi(D,R),G.postModify(n);break}}if(n==null)throw j5(t);return n}}class H5{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function G5(i,t,e){let n=1,s=null,a=null,l=!1,u=0;function h(){return u===2}let f=!1;function p(...x){f||(f=!0,t.apply(null,x))}function g(x){s=setTimeout(()=>{s=null,i(b,h())},x)}function v(){a&&clearTimeout(a)}function b(x,...C){if(f){v();return}if(x){v(),p.call(null,x,...C);return}if(h()||l){v(),p.call(null,x,...C);return}n<64&&(n*=2);let O;u===1?(u=2,O=0):O=(n+Math.random())*1e3,g(O)}let E=!1;function w(x){E||(E=!0,v(),!f&&(s!==null?(x||(u=2),clearTimeout(s),g(0)):x||(u=1)))}return g(0),a=setTimeout(()=>{l=!0,w(!0)},e),w}function q5(i){i(!1)}function $5(i){return i!==void 0}function P1(i,t,e,n){if(n<t)throw M1(`Invalid value for '${i}'. Expected ${t} or greater.`);if(n>e)throw M1(`Invalid value for '${i}'. Expected ${e} or less.`)}function X5(i){const t=encodeURIComponent;let e="?";for(const n in i)if(i.hasOwnProperty(n)){const s=t(n)+"="+t(i[n]);e=e+s+"&"}return e=e.slice(0,-1),e}var wp;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(wp||(wp={}));function Y5(i,t){const e=i>=500&&i<600,s=[408,429].indexOf(i)!==-1,a=t.indexOf(i)!==-1;return e||s||a}class K5{constructor(t,e,n,s,a,l,u,h,f,p,g,v=!0,b=!1){this.url_=t,this.method_=e,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=g,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,w)=>{this.resolve_=E,this.reject_=w,this.start_()})}start_(){const t=(n,s)=>{if(s){n(!1,new Sf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const u=a.getErrorCode()===wp.NO_ERROR,h=a.getStatus();if(!u||Y5(h,this.additionalRetryCodes_)&&this.retry){const p=a.getErrorCode()===wp.ABORT;n(!1,new Sf(!1,null,p));return}const f=this.successCodes_.indexOf(h)!==-1;n(!0,new Sf(f,a))})},e=(n,s)=>{const a=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());$5(h)?a(h):a()}catch(h){l(h)}else if(u!==null){const h=V5();h.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,h)):l(h)}else if(s.canceled){const h=this.appDelete_?ND():U5();l(h)}else{const h=F5();l(h)}};this.canceled_?e(!1,new Sf(!1,null,!0)):this.backoffId_=G5(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&q5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sf{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function W5(i,t){t!==null&&t.length>0&&(i.Authorization="Firebase "+t)}function Q5(i,t){i["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function J5(i,t){t&&(i["X-Firebase-GMPID"]=t)}function Z5(i,t){t!==null&&(i["X-Firebase-AppCheck"]=t)}function tz(i,t,e,n,s,a,l=!0,u=!1){const h=X5(i.urlParams),f=i.url+h,p=Object.assign({},i.headers);return J5(p,t),W5(p,e),Q5(p,a),Z5(p,n),new K5(f,i.method,p,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,s,l,u)}function ez(i){if(i.length===0)return null;const t=i.lastIndexOf("/");return t===-1?"":i.slice(0,t)}function nz(i){const t=i.lastIndexOf("/",i.length-2);return t===-1?i:i.slice(t+1)}class Tp{constructor(t,e){this._service=t,e instanceof Xi?this._location=e:this._location=Xi.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Tp(t,e)}get root(){const t=new Xi(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nz(this._location.path)}get storage(){return this._service}get parent(){const t=ez(this._location.path);if(t===null)return null;const e=new Xi(this._location.bucket,t);return new Tp(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw z5(t)}}function N1(i,t){const e=t?.[k5];return e==null?null:Xi.makeFromBucketSpec(e,i)}function iz(i,t,e,n={}){i.host=`${t}:${e}`;const s=So(t);s&&($_(`https://${i.host}/b`),X_("Storage",!0)),i._isUsingEmulator=!0,i._protocol=s?"https":"http";const{mockUserToken:a}=n;a&&(i._overrideAuthToken=typeof a=="string"?a:dR(a,i.app.options.projectId))}class sz{constructor(t,e,n,s,a,l=!1){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=PD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=O5,this._maxUploadRetryTime=L5,this._requests=new Set,s!=null?this._bucket=Xi.makeFromBucketSpec(s,this._host):this._bucket=N1(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Xi.makeFromBucketSpec(this._url,t):this._bucket=N1(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){P1("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){P1("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Tp(this,t)}_makeRequest(t,e,n,s,a=!0){if(this._deleted)return new H5(ND());{const l=tz(t,this._appId,n,s,e,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(t,e){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,s).getPromise()}}const k1="@firebase/storage",O1="0.14.0";const kD="storage";function rz(i=W_(),t){i=_n(i);const n=Lp(i,kD).getImmediate({identifier:t}),s=cR("storage");return s&&az(n,...s),n}function az(i,t,e,n={}){iz(i,t,e,n)}function oz(i,{instanceIdentifier:t}){const e=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),s=i.getProvider("app-check-internal");return new sz(e,n,s,t,xo)}function lz(){vo(new pa(kD,oz,"PUBLIC").setMultipleInstances(!0)),Cs(k1,O1,""),Cs(k1,O1,"esm2020")}lz();const cz={apiKey:"AIzaSyB40rvP4fSi7PnElBZvs5De-erZJxU2fY0",authDomain:"kibele-5c1fc.firebaseapp.com",projectId:"kibele-5c1fc",storageBucket:"kibele-5c1fc.firebasestorage.app",messagingSenderId:"1013894512687",appId:"1:1013894512687:web:544ca5e62e208b32d986da"},Fb=mR(cz),L1=ej(Fb),Ub=f5(Fb);rz(Fb);const uz=()=>{const i=Ip(),[t,e]=B.useState(""),[n,s]=B.useState(""),[a,l]=B.useState(""),[u,h]=B.useState(!1),[f,p]=B.useState(!1),g=async v=>{v.preventDefault(),h(!0),l("");const b=`${t.toLowerCase().replace(/[^a-z0-9]/g,"")}@kibele.app`;let E=n;n.length<6&&(E=n+"kibele".slice(0,6-n.length));try{f?await BU(L1,b,E):await zU(L1,b,E),localStorage.setItem("isAuthenticated","true"),i("/")}catch(w){console.error("Auth failed",w),w.code==="auth/weak-password"?l("Password should be at least 6 characters"):w.code==="auth/email-already-in-use"?l("Username already taken"):w.code==="auth/user-not-found"||w.code==="auth/wrong-password"||w.code==="auth/invalid-credential"?l("Invalid username or password"):l(w.message||"Authentication failed")}finally{h(!1)}};return k.jsxs("div",{className:"bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white overflow-hidden h-screen w-screen relative selection:bg-primary/30 flex items-center justify-center",children:[k.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:k.jsx("div",{className:"absolute inset-[-50%] w-[200%] h-[200%] bg-dot-pattern bg-[length:32px_32px] opacity-[0.08] dark:opacity-[0.15]"})}),k.jsxs("div",{className:"absolute inset-0 overflow-hidden z-0 pointer-events-none select-none",children:[k.jsx(xi.div,{initial:{opacity:0,scale:.8},animate:{opacity:.4,scale:1},transition:{duration:1,delay:.2},className:"absolute -top-10 -left-10 w-64 h-80 rotate-[-12deg] blur-[2px] rounded-lg overflow-hidden border-4 border-white dark:border-white/10 shadow-xl",children:k.jsx("img",{alt:"Decoration",className:"w-full h-full object-cover",src:"https://lh3.googleusercontent.com/aida-public/AB6AXuB2ssva_Q-kBVxlILnyHkmkCFSjAJG9--Xlzuk5f_JEP7-FDwK0iR7oMu9Xct6HGaT8nWbHOvlJ3etGfyM8V17oW-y8A-MqN2E7BtGI34u6ahNggK1_sfuLVspu8sai0JDO7DQ_dCf3OTD_6uh4qAeSGKZzzqSNwpfDBLObza_4tAtQkdrU8v5bo8KA1UrNLX5im3nqnTTvgoZmtZXWWlgoPH2F7_vqFVfAWuQUtGpSR5jL0EAEBMi6Z5ha-nMerVeluWj7bh_yVyw"})}),k.jsx(xi.div,{initial:{opacity:0,y:50},animate:{opacity:.5,y:0},transition:{duration:1,delay:.4},className:"absolute bottom-10 left-20 w-80 h-60 rotate-[6deg] blur-[1px] rounded-lg overflow-hidden border-4 border-white dark:border-white/10 shadow-2xl",children:k.jsx("img",{alt:"Decoration",className:"w-full h-full object-cover",src:"https://lh3.googleusercontent.com/aida-public/AB6AXuDUNvqs_sebdU66YhjWqqYMlTOKw-zJbnuGmRWEtW8RjJfGp57G-18DJdT7pelfThl718I5_I-inTZxHxU1YKpiSpzHBBfDrdwz4TjlhFlVDd_UPAA8qA4KHc9IYxDl1ylgQH8sztNmkl580kXICtSx268GerZX7cDXnjNHOPplaRaWj0EbO1NU5bcl5LVBP97nUDkP_VI1G2Zngj_YjPQn9-oqmF5D5kVWLefsEFOUKQkn5D3iLuBNA7e5S8CXtxq2yalfEkmNE58"})}),k.jsx(xi.div,{initial:{opacity:0,x:50},animate:{opacity:.4,x:0},transition:{duration:1,delay:.3},className:"absolute top-20 -right-20 w-72 h-72 rotate-[15deg] blur-[2px] rounded-lg overflow-hidden border-4 border-white dark:border-white/10 shadow-xl",children:k.jsx("img",{alt:"Decoration",className:"w-full h-full object-cover",src:"https://lh3.googleusercontent.com/aida-public/AB6AXuBOADySubwmjzJovbvJ3ku44p-jUKaIKrIMWwXIGU7ykWGEAH8a8lXTLBZt5j5Em6hpVDp41yl3jKIqx54bkypf0MM-QyslJhjryKuH3_OmgIaD94ONuDthCVZqOilxuqunUygbksEnXqa6uSPEZGATBEdNhRs_GAaxyoH-XmOGYK5wC0m70baTsgrYKRYfI4EmbR4RA2V5iDUuIhVj_ZyLc8jOAR3yFKHivarci-laRvjWGYemvIxNW6kAhXa4xc-SpvJQJT7jYqE"})}),k.jsx(xi.div,{initial:{opacity:0},animate:{opacity:.3},transition:{duration:1,delay:.6},className:"absolute top-1/2 right-10 w-56 h-80 -translate-y-1/2 rotate-[-8deg] blur-[3px] rounded-lg overflow-hidden border-4 border-white dark:border-white/10 shadow-xl",children:k.jsx("img",{alt:"Decoration",className:"w-full h-full object-cover",src:"https://lh3.googleusercontent.com/aida-public/AB6AXuCmaXQ1ctEJCIQql2-9JWNJdIf4XHIt4pAFnE9m1uqktEK1bWw1dJuxu_e_5-5876eSGHGjDDVU0wJHjlrQwB87Bmm2P1XKUkQnWfHjmjvrw9gU4McLvaYFz8UKJC4UCMKi2956iJ3aIu7rPBUFLOLcBTHBOxjMotr2CoLa2nHqafZ2J_60DH0Q1LHjZd4ukz2k--xQddUsaVXJvOQfTyedyatYjjhnbc4KstS3LeI44wwl0DjdW0jCqTaSY9hJb57_NkYz31kLDdI"})})]}),k.jsxs(xi.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"relative z-10 w-full max-w-md px-6",children:[k.jsxs("div",{className:"bg-white/90 dark:bg-[#1c1f21]/95 backdrop-blur-xl border border-gray-200 dark:border-white/10 rounded-2xl shadow-[0_30px_60px_-12px_rgba(0,0,0,0.1)] dark:shadow-[0_30px_60px_-12px_rgba(0,0,0,0.5)] p-8 md:p-10",children:[k.jsxs("div",{className:"text-center mb-8",children:[k.jsx("div",{className:"inline-flex items-center justify-center size-12 bg-primary/10 rounded-xl mb-4 text-primary",children:k.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"24px"},children:"palette"})}),k.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Studio Access"}),k.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 font-medium",children:"Enter your personal workspace"})]}),k.jsxs("form",{className:"space-y-5",onSubmit:g,children:[k.jsxs("div",{className:"space-y-1.5",children:[k.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider pl-1",htmlFor:"username",children:"Username"}),k.jsxs("div",{className:"relative group",children:[k.jsx("input",{id:"username",type:"text",placeholder:"kibele",value:t,onChange:v=>e(v.target.value),className:"block w-full rounded-lg border-gray-200 dark:border-gray-700 bg-white dark:bg-black/20 text-slate-900 dark:text-white px-4 py-3 focus:border-primary focus:ring-primary/20 dark:focus:ring-primary/20 transition-colors shadow-sm text-sm"}),k.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none text-gray-400 group-focus-within:text-primary transition-colors",children:k.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"20px"},children:"person"})})]})]}),k.jsxs("div",{className:"space-y-1.5",children:[k.jsxs("div",{className:"flex items-center justify-between pl-1",children:[k.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",htmlFor:"password",children:"Password"}),!f&&k.jsx("a",{href:"#",className:"text-xs font-semibold text-primary hover:text-primary/80 transition-colors",children:"Forgot?"})]}),k.jsxs("div",{className:"relative group",children:[k.jsx("input",{id:"password",type:"password",placeholder:"",value:n,onChange:v=>s(v.target.value),className:"block w-full rounded-lg border-gray-200 dark:border-gray-700 bg-white dark:bg-black/20 text-slate-900 dark:text-white px-4 py-3 focus:border-primary focus:ring-primary/20 dark:focus:ring-primary/20 transition-colors shadow-sm text-sm"}),k.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none text-gray-400 group-focus-within:text-primary transition-colors",children:k.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"20px"},children:"lock"})})]})]}),a&&k.jsx("p",{className:"text-red-500 text-xs text-center font-bold",children:a}),k.jsxs("button",{type:"submit",disabled:u,className:`w-full flex items-center justify-center gap-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 py-3 rounded-lg font-bold text-sm hover:bg-slate-800 dark:hover:bg-gray-100 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 mt-2 ${u?"opacity-70 cursor-wait":""}`,children:[k.jsx("span",{children:u?"Processing...":f?"Create Account":"Sign In"}),!u&&k.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"18px"},children:"arrow_forward"})]})]}),k.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-white/5 text-center",children:k.jsx("button",{onClick:()=>{p(!f),l("")},className:"text-xs text-gray-500 dark:text-gray-400 font-medium hover:text-primary transition-colors focus:outline-none",children:f?"Already have an account? Sign In":k.jsxs("span",{children:["New to the studio? ",k.jsx("span",{className:"text-primary hover:underline decoration-2 underline-offset-2",children:"Request access"})]})})})]}),k.jsx("div",{className:"text-center mt-6 opacity-40 hover:opacity-100 transition-opacity",children:k.jsx("span",{className:"text-[10px] font-bold tracking-widest text-gray-500 uppercase",children:"Artistic Workspace v2.0"})})]})]})},hz=()=>k.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:k.jsx("div",{className:"absolute inset-[-50%] w-[200%] h-[200%] bg-dot-pattern bg-[length:32px_32px] opacity-[0.08] dark:opacity-[0.15]"})}),dz=({children:i})=>k.jsxs("div",{className:"relative w-full h-screen overflow-hidden bg-background-light dark:bg-background-dark text-slate-900 dark:text-white font-display selection:bg-primary/30",children:[k.jsx(hz,{}),k.jsx("div",{className:"relative z-10 w-full h-full overflow-y-auto overflow-x-hidden no-scrollbar",children:i})]}),fz=({project:i})=>{const t=Ip();return k.jsxs(xi.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},whileHover:{y:-5},transition:{duration:.3},onClick:()=>t(`/project/${i.id}`),className:"break-inside-avoid mb-6 group relative rounded-xl overflow-hidden shadow-[0_12px_40px_-12px_rgba(60,107,124,0.12)] hover:shadow-[0_20px_50px_-12px_rgba(60,107,124,0.25)] cursor-pointer bg-white dark:bg-[#25282a] border border-transparent dark:border-white/5",children:[k.jsx("div",{className:`w-full ${i.aspectRatio} bg-gray-100 dark:bg-gray-800 relative overflow-hidden`,children:k.jsx("img",{src:i.image,alt:i.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"})}),k.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-5 bg-white/90 dark:bg-[#1c1f21]/90 backdrop-blur-md border-t border-white/20 translate-y-[101%] group-hover:translate-y-0 transition-transform duration-300 ease-[cubic-bezier(0.23,1,0.32,1)]",children:[k.jsx("h3",{className:"text-[#131516] dark:text-white text-lg font-bold leading-tight",children:i.title}),k.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[k.jsx("span",{className:"px-2 py-0.5 rounded-md bg-gray-100 dark:bg-gray-700 text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:i.font}),k.jsx("span",{className:"w-3 h-3 rounded-full border border-black/10",style:{backgroundColor:i.color}}),k.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium ml-auto",children:i.date})]})]})]})},jb="projects",pz=[{id:"1",title:"Vogue Redesign",font:"Garamond",color:"#FF4500",date:"Oct 2023",aspectRatio:"aspect-[3/4]",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuB2ssva_Q-kBVxlILnyHkmkCFSjAJG9--Xlzuk5f_JEP7-FDwK0iR7oMu9Xct6HGaT8nWbHOvlJ3etGfyM8V17oW-y8A-MqN2E7BtGI34u6ahNggK1_sfuLVspu8sai0JDO7DQ_dCf3OTD_6uh4qAeSGKZzzqSNwpfDBLObza_4tAtQkdrU8v5bo8KA1UrNLX5im3nqnTTvgoZmtZXWWlgoPH2F7_vqFVfAWuQUtGpSR5jL0EAEBMi6Z5ha-nMerVeluWj7bh_yVyw"},{id:"2",title:"Fintech Dashboard",font:"Inter",color:"#3C6B7C",date:"Nov 2023",aspectRatio:"aspect-video",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuDUNvqs_sebdU66YhjWqqYMlTOKw-zJbnuGmRWEtW8RjJfGp57G-18DJdT7pelfThl718I5_I-inTZxHxU1YKpiSpzHBBfDrdwz4TjlhFlVDd_UPAA8qA4KHc9IYxDl1ylgQH8sztNmkl580kXICtSx268GerZX7cDXnjNHOPplaRaWj0EbO1NU5bcl5LVBP97nUDkP_VI1G2Zngj_YjPQn9-oqmF5D5kVWLefsEFOUKQkn5D3iLuBNA7e5S8CXtxq2yalfEkmNE58"},{id:"3",title:"Coffee Brand",font:"Hand-drawn",color:"#1C1F21",date:"Dec 2023",aspectRatio:"aspect-square",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuBOADySubwmjzJovbvJ3ku44p-jUKaIKrIMWwXIGU7ykWGEAH8a8lXTLBZt5j5Em6hpVDp41yl3jKIqx54bkypf0MM-QyslJhjryKuH3_OmgIaD94ONuDthCVZqOilxuqunUygbksEnXqa6uSPEZGATBEdNhRs_GAaxyoH-XmOGYK5wC0m70baTsgrYKRYfI4EmbR4RA2V5iDUuIhVj_ZyLc8jOAR3yFKHivarci-laRvjWGYemvIxNW6kAhXa4xc-SpvJQJT7jYqE"},{id:"4",title:"Botanical Illustration",font:"Caslon",color:"#4A7C59",date:"Jan 2024",aspectRatio:"aspect-[2/3]",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCmaXQ1ctEJCIQql2-9JWNJdIf4XHIt4pAFnE9m1uqktEK1bWw1dJuxu_e_5-5876eSGHGjDDVU0wJHjlrQwB87Bmm2P1XKUkQnWfHjmjvrw9gU4McLvaYFz8UKJC4UCMKi2956iJ3aIu7rPBUFLOLcBTHBOxjMotr2CoLa2nHqafZ2J_60DH0Q1LHjZd4ukz2k--xQddUsaVXJvOQfTyedyatYjjhnbc4KstS3LeI44wwl0DjdW0jCqTaSY9hJb57_NkYz31kLDdI"},{id:"5",title:"Tech Startup Identity",font:"Helvetica",color:"#0055FF",date:"Feb 2024",aspectRatio:"aspect-video",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCezIh2-1IsivwI6pmD0cKdYR7BMJ64Rtiuf0XnHznY63ThHjpdT3GIFLgClAWiNozqdMDaU7YIGYv5V0Leww14icrJQNuwi0KUisn3vKjGpUxag5_CVdEmbWGiOeuzl3LdxrQFeA_0jQAlZWvhXmyZqVJuPG7aN123BNo-g_4PDVFSBsTWiuIp1EHgBnHISoV8E4EmlZRgikaKHcoG_3sg9PyR7rjHf4MAzgzIhqz6HooGDSl69vjWwfi-5tAyRYIGV6lVmFecszI"},{id:"6",title:"Furniture Concept",font:"DM Sans",color:"#8B4513",date:"Mar 2024",aspectRatio:"aspect-square",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuAciY1uohz9k3LPda8wowUjj4U0H8bOkWYdNokLc7dn1opC2g4-40Hixg5NTQL4YJhkM-Stogx76rX96xNlaXlekTT4PkfzntIelfGTzk6cmuEe71Y7B3frrA5v0adcNt_tmCWkyuYdllbEBG_LngBCRhOI6MX1Oc0sD83pDFZmUSIjrstXOL66qDcf9DmCIhMiuBkbzhgtL4Ffb1HBwM-NNF1a3uOuiELPTCgKGH9aij8WmJ8XFHsjqn6DWMVmYLMpJktebmflGVc"},{id:"7",title:"City Wayfinding",font:"Manrope",color:"#FFD700",date:"Apr 2024",aspectRatio:"aspect-[4/3]",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuAflQ-kWjFbs28oy7Prpv4HbMW542AXLdNsfH_WzTIb2VsT8yuf_QokBlopIAWE0aGefBLWhYpIfvkvp1t0rdgjwfNSkJSdR2OU15ew-n-7zljfNJZWZvROqi67Tx2bfBFbNZJ0qP92P_WkX7zuBvxB-aZ0-yfwvpqiviZhAkOSoGG7uqUfVqO-r4RsYFvkXDliRfSWFhvBYCCVRu1-f4QCWS_79Klpc4evfy_LOTwpg8J0z1zEWnnj5c0wiK5EIwX2CnrCXxv7XI8"},{id:"8",title:"3D Assets",font:"Blender",color:"#6C63FF",date:"May 2024",aspectRatio:"aspect-square",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuBLsu-cN8iNtBVl-OJ88WNQ7BVA1I7FncHGhb36MhlsDQdcBI6I2JpyBuC94XGRAvuv6zy0ufI4q7JSFcnb_E9XRlYQGsuMTkdmyqY1Mho9XvizfxwGP1JYg6WSpILeI2mk_TLktOV1MA-ElDZW_1yOsi3lQ0gUlbZrN4brj0tv2-67T0LXW1k-_ARJ6oY71sVAttoIsxltJ7oV4ldmWbRiRfMqeBV7giXOv5wafFmELHOY0W5Ghyb-R2fZSy5ZTpEL4zYzLsGT8WI"}],V1=async()=>{try{const i=C5(_D(Ub,jb),R5("createdAt","desc")),e=(await M5(i)).docs.map(n=>({id:n.id,...n.data()}));return e.length===0?[]:e}catch(i){return console.error("Error fetching projects:",i),pz}},F1=async i=>{try{return(await N5(_D(Ub,jb),{...i,createdAt:ge.now()})).id}catch(t){throw console.error("Error adding project:",t),t}},mz=async(i,t)=>{try{const e=bD(Ub,jb,i);await P5(e,{position:t})}catch(e){throw console.error("Error updating project position:",e),e}},gz=({project:i,scale:t,initialPosition:e,onPositionChange:n})=>{const[s,a]=B.useState(e||{x:Math.random()*500,y:Math.random()*500}),[l,u]=B.useState(!1);B.useEffect(()=>{e&&a(v=>(Math.abs(v.x-e.x)>1||Math.abs(v.y-e.y)>1)&&!l?e:v)},[e,l]);const h=B.useRef(null),f=B.useRef(null),p=v=>{v.stopPropagation(),v.preventDefault(),u(!0),h.current={x:v.clientX,y:v.clientY},f.current={...s};const b=w=>{if(!h.current||!f.current)return;const x=(w.clientX-h.current.x)/t,C=(w.clientY-h.current.y)/t;a({x:f.current.x+x,y:f.current.y+C})},E=w=>{if(u(!1),window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",E),h.current&&f.current){const x=(w.clientX-h.current.x)/t,C=(w.clientY-h.current.y)/t,N=f.current.x+x,O=f.current.y+C;Math.sqrt(Math.pow(w.clientX-h.current.x,2)+Math.pow(w.clientY-h.current.y,2))>5&&(mz(i.id,{x:N,y:O}),n&&n(i.id,{x:N,y:O}))}};window.addEventListener("mousemove",b),window.addEventListener("mouseup",E)},g=v=>{h.current&&Math.sqrt(Math.pow(v.clientX-h.current.x,2)+Math.pow(v.clientY-h.current.y,2))>5&&(v.stopPropagation(),v.preventDefault())};return k.jsx("div",{className:`absolute select-none will-change-transform ${l?"z-50 cursor-grabbing scale-105 shadow-2xl":"z-10 cursor-grab hover:z-20"}`,style:{top:0,left:0,transform:`translate(${s.x}px, ${s.y}px)`,transition:l?"none":"transform 0.1s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.2s"},onMouseDown:p,onClickCapture:g,children:k.jsx(fz,{project:i})})},yz=({onSearch:i})=>k.jsx("div",{className:"fixed top-0 left-0 right-0 p-6 flex justify-center items-start z-50 pointer-events-none",children:k.jsxs("div",{className:"w-full max-w-5xl flex items-center justify-between gap-4 pointer-events-auto",children:[k.jsx("div",{className:"hidden md:flex items-center gap-3 opacity-90 hover:opacity-100 transition-opacity cursor-pointer",children:k.jsx("img",{src:"/Kibele/logo.svg",alt:"Kibele Logo",className:"h-8 w-auto"})}),k.jsx("div",{className:"flex-1 max-w-lg mx-auto",children:k.jsxs("div",{className:"group relative",children:[k.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary/20 via-primary/10 to-transparent rounded-full blur-md opacity-0 group-hover:opacity-100 transition duration-700"}),k.jsxs("div",{className:"relative flex items-center bg-white/90 dark:bg-[#1c1f21]/90 backdrop-blur-xl border border-black/5 dark:border-white/10 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.04)] h-12 md:h-14 px-2 transition-all duration-300 focus-within:ring-4 focus-within:ring-primary/10 focus-within:border-primary/30",children:[k.jsx("div",{className:"pl-3 md:pl-4 text-gray-400 dark:text-gray-500",children:k.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"search"})}),k.jsx("input",{type:"text",placeholder:"Search projects (e.g., Project Name + font)",className:"w-full bg-transparent border-none focus:ring-0 text-[#131516] dark:text-slate-200 placeholder:text-gray-400 text-sm md:text-base font-medium h-full px-3 truncate",autoComplete:"off",onChange:t=>i(t.target.value)}),k.jsx("div",{className:"hidden sm:flex items-center pr-2 gap-1 text-xs text-gray-400 font-medium",children:k.jsx("kbd",{className:"hidden lg:inline-flex items-center justify-center px-2 py-1 rounded border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-[10px] font-bold text-gray-500",children:"K"})}),k.jsx("button",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors",children:k.jsx("span",{className:"material-symbols-outlined text-xl",children:"tune"})})]})]})}),k.jsx("div",{className:"flex items-center justify-end gap-3",children:k.jsx("button",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-white dark:bg-gray-800 border-2 border-white dark:border-gray-700 shadow-sm flex items-center justify-center overflow-hidden hover:scale-105 transition-all cursor-pointer group",children:k.jsx("img",{alt:"Eren Sukibeleyarman Profile",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100",src:"https://lh3.googleusercontent.com/aida-public/AB6AXuB6NUKfdiMUTuBDlxMwItAPE_Sf0v_mQCuK8syPb9-SnDqCzDWeyM4h8HIiq67J0QOuC7akiVT4qc_r9W5yTO7mVGl_dyep08ikS_2CuJoURke-mc4QvJ0AuLZOpjbRw8BFMEJBeAGv6TRtxiyB0hA7cgkcU8AQwI-bSItdZm1jnARmG4dpWK88s-44PG1l2aQ-FuHTWtOg7GqiSbJA1WRWIK6hhhkLn-vBpw5INbIDCRbJZCrzksgbUxdh_TDUTtpF3Sf-Ow7oAVA"})})})]})}),vz=({onAddClick:i,scale:t=1,position:e={x:0,y:0},onNavigate:n})=>{const s=B.useRef(null),a=l=>{if(!n||!e||!s.current)return;const u=s.current.getBoundingClientRect(),h=l.clientX-u.left,f=l.clientY-u.top,p=u.width/2,g=u.height/2,v=h-p,b=f-g,E=v*20,w=b*20;n({x:e.x-E,y:e.y-w})};return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"fixed right-6 bottom-6 md:right-10 md:bottom-10 z-50 flex flex-col items-center gap-4 select-none",children:k.jsxs("button",{onClick:i,className:"group relative flex items-center justify-center w-14 h-14 md:w-16 md:h-16 rounded-2xl bg-primary text-white shadow-[0_8px_30px_rgb(60,107,124,0.4)] hover:shadow-[0_15px_35px_rgb(60,107,124,0.5)] hover:-translate-y-1 active:scale-95 transition-all duration-300",children:[k.jsx("span",{className:"material-symbols-outlined text-3xl md:text-4xl transition-transform duration-300 group-hover:rotate-90",children:"add"}),k.jsx("span",{className:"absolute right-full mr-5 bg-[#131516] text-white text-xs font-bold py-1.5 px-3 rounded-lg opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all whitespace-nowrap shadow-lg",children:"Add Project"})]})}),k.jsx("div",{className:"fixed left-6 bottom-6 md:left-10 md:bottom-10 z-50 hidden md:block select-none",children:k.jsxs("div",{ref:s,onClick:a,className:"w-48 h-32 bg-white/80 dark:bg-[#1c1f21]/80 backdrop-blur-md rounded-xl border border-gray-200 dark:border-white/10 shadow-[0_8px_30px_rgb(0,0,0,0.08)] p-1.5 relative overflow-hidden group hover:bg-white dark:hover:bg-[#1c1f21] transition-colors cursor-crosshair active:cursor-grabbing",children:[k.jsxs("div",{className:"w-full h-full bg-background-light dark:bg-background-dark rounded-lg relative overflow-hidden opacity-80 pointer-events-none",children:[k.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-primary/20 rounded-full blur-xl"}),k.jsx("div",{className:"absolute bg-primary/10 border border-primary/50 shadow-sm rounded-sm backdrop-blur-[1px] transition-all duration-100",style:{top:"50%",left:"50%",width:`${Math.max(20,100/t)}%`,height:`${Math.max(20,60/t)}%`,transform:`translate(-50%, -50%) translate(${-e.x*.05}px, ${-e.y*.05}px)`}})]}),k.jsx("span",{className:"absolute bottom-3 right-3 text-[9px] font-bold text-gray-400 tracking-widest pointer-events-none select-none",children:"NAVIGATOR"})]})}),k.jsxs("div",{className:"fixed bottom-10 left-1/2 -translate-x-1/2 bg-[#131516]/80 dark:bg-white/10 backdrop-blur-md text-white px-4 py-1.5 rounded-full text-xs font-bold tracking-wide pointer-events-none opacity-0 md:opacity-100 shadow-lg transition-opacity select-none",children:[Math.round(t*100),"%"]})]})};var Yu={};Yu.d=(i,t)=>{for(var e in t)Yu.o(t,e)&&!Yu.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};Yu.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var Pt=globalThis.pdfjsLib={};Yu.d(Pt,{AbortException:()=>Aa,AnnotationEditorLayer:()=>ar,AnnotationEditorParamsType:()=>Qt,AnnotationEditorType:()=>Ut,AnnotationEditorUIManager:()=>Ea,AnnotationLayer:()=>f9,AnnotationMode:()=>ia,ColorPicker:()=>Si,DOMSVGFactory:()=>Jb,DrawLayer:()=>Nn,FeatureTest:()=>Vn,GlobalWorkerOptions:()=>Wu,ImageKind:()=>Xf,InvalidPDFException:()=>Zv,MissingPDFException:()=>fh,OPS:()=>qi,OutputScale:()=>t_,PDFDataRangeTransport:()=>ZD,PDFDateString:()=>VD,PDFWorker:()=>Hl,PasswordResponses:()=>Ez,PermissionFlag:()=>Az,PixelsPerInch:()=>ec,RenderingCancelledException:()=>Hb,TextLayer:()=>kn,TouchManager:()=>om,UnexpectedResponseException:()=>Sp,Util:()=>_t,VerbosityLevel:()=>em,XfaLayer:()=>eM,build:()=>XH,createValidAbsoluteUrl:()=>xz,fetchData:()=>rm,getDocument:()=>FH,getFilenameFromUrl:()=>Oz,getPdfFilenameFromUrl:()=>Lz,getXfaPageViewport:()=>Vz,isDataScheme:()=>am,isPdfFile:()=>Gb,noContextMenu:()=>Ji,normalizeUnicode:()=>Pz,setLayerDimensions:()=>wo,shadow:()=>zt,stopEvent:()=>oi,version:()=>$H});const Cn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),OD=[1,0,0,1,0,0],Jv=[.001,0,0,.001,0,0],_z=1e7,Yy=1.35,ri={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ia={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},bz="pdfjs_internal_editor_",Ut={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Qt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Az={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},wn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},tn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Tu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},em={ERRORS:0,WARNINGS:1,INFOS:5},qi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Ez={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let nm=em.WARNINGS;function wz(i){Number.isInteger(i)&&(nm=i)}function Tz(){return nm}function im(i){nm>=em.INFOS&&console.log(`Info: ${i}`)}function jt(i){nm>=em.WARNINGS&&console.log(`Warning: ${i}`)}function fe(i){throw new Error(i)}function We(i,t){i||fe(t)}function Sz(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xz(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"&&(e.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),e.tryConvertEncoding))try{i=Mz(i)}catch{}const n=t?new URL(i,t):new URL(i);if(Sz(n))return n}catch{}return null}function zt(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Ia=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class U1 extends Ia{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Ky extends Ia{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Zv extends Ia{constructor(t){super(t,"InvalidPDFException")}}class fh extends Ia{constructor(t){super(t,"MissingPDFException")}}class Sp extends Ia{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class Cz extends Ia{constructor(t){super(t,"FormatError")}}class Aa extends Ia{constructor(t){super(t,"AbortException")}}function LD(i){(typeof i!="object"||i?.length===void 0)&&fe("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const a=Math.min(s+e,t),l=i.subarray(s,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function sm(i){typeof i!="string"&&fe("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function Rz(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function Bb(i){const t=Object.create(null);for(const[e,n]of i)t[e]=n;return t}function Iz(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function Dz(){try{return new Function(""),!0}catch{return!1}}class Vn{static get isLittleEndian(){return zt(this,"isLittleEndian",Iz())}static get isEvalSupported(){return zt(this,"isEvalSupported",Dz())}static get isOffscreenCanvasSupported(){return zt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return zt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?zt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):zt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return zt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Wy=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));class _t{static makeHexColor(t,e,n){return`#${Wy[t]}${Wy[e]}${Wy[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,a=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,a]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),l=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],a[0],l[0]),Math.min(n[1],s[1],a[1],l[1]),Math.max(n[0],s[0],a[0],l[0]),Math.max(n[1],s[1],a[1],l[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],l=t[2]*e[1]+t[3]*e[3],u=(n+l)/2,h=Math.sqrt((n+l)**2-4*(n*l-a*s))/2,f=u+h||1,p=u-h||1;return[Math.sqrt(f),Math.sqrt(p)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,s,l]}static#t(t,e,n,s,a,l,u,h,f,p){if(f<=0||f>=1)return;const g=1-f,v=f*f,b=v*f,E=g*(g*(g*t+3*f*e)+3*v*n)+b*s,w=g*(g*(g*a+3*f*l)+3*v*u)+b*h;p[0]=Math.min(p[0],E),p[1]=Math.min(p[1],w),p[2]=Math.max(p[2],E),p[3]=Math.max(p[3],w)}static#e(t,e,n,s,a,l,u,h,f,p,g,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,s,a,l,u,h,-g/p,v);return}const b=p**2-4*g*f;if(b<0)return;const E=Math.sqrt(b),w=2*f;this.#t(t,e,n,s,a,l,u,h,(-p+E)/w,v),this.#t(t,e,n,s,a,l,u,h,(-p-E)/w,v)}static bezierBoundingBox(t,e,n,s,a,l,u,h,f){return f?(f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h)):f=[Math.min(t,u),Math.min(e,h),Math.max(t,u),Math.max(e,h)],this.#e(t,n,a,u,e,s,l,h,3*(-t+3*(n-a)+u),6*(t-2*n+a),3*(n-t),f),this.#e(t,n,a,u,e,s,l,h,3*(-e+3*(s-l)+h),6*(e-2*s+l),3*(s-e),f),f}}function Mz(i){return decodeURIComponent(escape(i))}let Qy=null,j1=null;function Pz(i){return Qy||(Qy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,j1=new Map([["","t"]])),i.replaceAll(Qy,(t,e,n)=>e?e.normalize("NFKC"):j1.get(n))}function Nz(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),LD(i)}const zb="pdfjs_internal_id_";function kz(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(LD(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});const rr="http://www.w3.org/2000/svg";class ec{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function rm(i,t="text"){if(Ou(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Nh{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:a=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,g,v,b;switch(s%=360,s<0&&(s+=360),s){case 180:p=-1,g=0,v=0,b=1;break;case 90:p=0,g=1,v=1,b=0;break;case 270:p=0,g=-1,v=-1,b=0;break;case 0:p=1,g=0,v=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,b=-b);let E,w,x,C;p===0?(E=Math.abs(f-t[1])*n+a,w=Math.abs(h-t[0])*n+l,x=(t[3]-t[1])*n,C=(t[2]-t[0])*n):(E=Math.abs(h-t[0])*n+a,w=Math.abs(f-t[1])*n+l,x=(t[2]-t[0])*n,C=(t[3]-t[1])*n),this.transform=[p*n,g*n,v*n,b*n,E-p*n*h-v*n*f,w-g*n*h-b*n*f],this.width=x,this.height=C}get rawDims(){const{userUnit:t,viewBox:e}=this,n=e.map(s=>s*t);return zt(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new Nh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(t,e){return _t.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=_t.applyTransform([t[0],t[1]],this.transform),n=_t.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return _t.applyInverseTransform([t,e],this.transform)}}class Hb extends Ia{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function am(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Gb(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Oz(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Lz(i,t="document.pdf"){if(typeof i!="string")return t;if(am(i))return jt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(i);let a=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch{}return a||t}class B1{started=Object.create(null);times=[];time(t){t in this.started&&jt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||jt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-s}ms
`);return t.join("")}}function Ou(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function Ji(i){i.preventDefault()}function oi(i){i.preventDefault(),i.stopPropagation()}class VD{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(l+=p,u+=g):f==="+"&&(l-=p,u-=g),new Date(Date.UTC(n,s,a,l,u,h))}}function Vz(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new Nh({viewBox:a,userUnit:1,scale:t,rotation:e})}function qb(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(jt(`Not a valid color format: "${i}"`),[0,0,0])}function Fz(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,qb(n))}t.remove()}function we(i){const{a:t,b:e,c:n,d:s,e:a,f:l}=i.getTransform();return[t,e,n,s,a,l]}function Es(i){const{a:t,b:e,c:n,d:s,e:a,f:l}=i.getTransform().invertSelf();return[t,e,n,s,a,l]}function wo(i,t,e=!1,n=!0){if(t instanceof Nh){const{pageWidth:s,pageHeight:a}=t.rawDims,{style:l}=i,u=Vn.isCSSRoundSupported,h=`var(--scale-factor) * ${s}px`,f=`var(--scale-factor) * ${a}px`,p=u?`round(down, ${h}, var(--scale-round-x, 1px))`:`calc(${h})`,g=u?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=g):(l.width=g,l.height=p)}n&&i.setAttribute("data-main-rotation",t.rotation)}class t_{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class Ku{#t=null;#e=null;#n;#i=null;#r=null;static#s=null;constructor(t){this.#n=t,Ku.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",Ji,{signal:e}),t.addEventListener("pointerdown",Ku.#l,{signal:e});const n=this.#i=document.createElement("div");n.className="buttons",t.append(n);const s=this.#n.toolbarPosition;if(s){const{style:a}=t,l=this.#n._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),t}get div(){return this.#t}static#l(t){t.stopPropagation()}#o(t){this.#n._focusEventsAllowed=!1,oi(t)}#u(t){this.#n._focusEventsAllowed=!0,oi(t)}#c(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#o.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ji,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown()}#d(){const{editorType:t,_uiManager:e}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",Ku.#s[t]),this.#c(n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),this.#i.append(n)}get#h(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#c(e),this.#i.prepend(e,this.#h),this.#r=t}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#c(e),this.#i.prepend(e,this.#h)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Uz{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ji,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#r(t,e){let n=0,s=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const u=a.x+(e?a.width:0);if(l>n){s=u,n=l;continue}e?u>s&&(s=u):u<s&&(s=u)}return[e?1-s:s,n]}show(t,e,n){const[s,a]=this.#r(e,n),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#n._signal;t.addEventListener("contextmenu",Ji,{signal:n}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#t.append(t)}}function xp(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}class jz{#t=0;get id(){return`${bz}${this.#t++}`}}class $b{#t=Nz();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return zt(this,"_isSVGFittingCanvas",a)}async#i(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let s;if(typeof e=="string"?(n.url=e,s=await rm(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const a=$b._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const g=n.svgUrl=l.result;u.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=l.onerror=p});l.readAsDataURL(s),await h}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){jt(s),n=null}return this.#n.set(t,n),n&&this.#n.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:s,type:a}=t;return this.#i(`${e}_${n}_${s}_${a}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const n=await e;return this.#i(t,n)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n?.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,n),this.#n.set(n.id,n),n}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=s.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class Bz{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(s&&t(),this.#e)return;const h={cmd:t,undo:e,post:n,type:a};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(l&&this.#t[this.#i].type===a){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class kh{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Vn.platform;for(const[n,s,a={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:s,options:{bubbles:a=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(s.bind(t,...l,e)(),a||oi(e))}}class Xb{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Fz(t),zt(this,"_colors",t)}convert(t){const e=qb(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((a,l)=>a===e[l]))return Xb._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?_t.makeHexColor(...e):t}}class Ea{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#r=null;#s=null;#l=null;#o=new Bz;#u=null;#c=null;#d=0;#h=new Set;#f=null;#a=null;#p=new Set;_editorUndoBar=null;#g=!1;#m=!1;#y=!1;#b=null;#v=null;#A=null;#w=null;#S=!1;#C=null;#I=new jz;#E=!1;#R=!1;#x=null;#M=null;#k=null;#L=null;#T=Ut.NONE;#_=new Set;#N=null;#B=null;#z=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#O=null;#F=null;#G=null;#P=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ea.prototype,e=l=>l.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return zt(this,"_keyboardManager",new kh([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#F.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,n,s,a,l,u,h,f,p,g,v,b){const E=this._signal=this.#t.signal;this.#F=t,this.#G=e,this.#r=n,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:E}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),s._on("setpreference",this.onSetPreference.bind(this),{signal:E}),s._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:E}),this.#et(),this.#rt(),this.#Y(),this.#s=a.annotationStorage,this.#b=a.filterFactory,this.#B=l,this.#w=u||null,this.#g=h,this.#m=f,this.#y=p,this.#L=g||null,this.viewParameters={realScale:ec.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=b!==!1}destroy(){this.#P?.resolve(),this.#P=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#e=null,this.#_.clear(),this.#o.destroy(),this.#r?.destroy(),this.#C?.hide(),this.#C=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#O&&(clearTimeout(this.#O),this.#O=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#L}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return zt(this,"hcmFilter",this.#B?this.#b.addHCMFilter(this.#B.foreground,this.#B.background):"none")}get direction(){return zt(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return zt(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return zt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=t}setMainHighlightColorPicker(t){this.#k=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#y=e)}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#F.focus()}findParent(t,e){for(const n of this.#i.values()){const{x:s,y:a,width:l,height:u}=n.div.getBoundingClientRect();if(t>=s&&t<=s+l&&e>=a&&e<=a+u)return n}return null}disableUserSelect(t=!1){this.#G.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ec.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#U({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#X(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#i.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:l}=e,u=e.toString(),f=this.#U(e).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;e.empty();const g=this.#X(f),v=this.#T===Ut.NONE,b=()=>{g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:l,text:u}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(Ut.HIGHLIGHT,b);return}b()}#Z(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#U(t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#C||=new Uz(this),this.#C.show(n,s,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#tt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#C?.hide(),this.#N=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#N)return;const s=this.#U(t).closest(".textLayer");if(!s){this.#N&&(this.#C?.hide(),this.#N=null,this.#D({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#N=e,this.#D({hasSelectedText:!0}),!(this.#T!==Ut.HIGHLIGHT&&this.#T!==Ut.NONE)&&(this.#T===Ut.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#T===Ut.HIGHLIGHT?this.#X(s):null;a?.toggleDrawing();const l=new AbortController,u=this.combinedSignal(l),h=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),a?.toggleDrawing(!0),f.type==="pointerup"&&this.#$("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}}#$(t=""){this.#T===Ut.HIGHLIGHT?this.highlightSelection(t):this.#g&&this.#Z()}#et(){document.addEventListener("selectionchange",this.#tt.bind(this),{signal:this._signal})}#nt(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#it(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#$("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#_)if(e.div.contains(t)){this.#M=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#M)return;const[t,e]=this.#M;this.#M=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Y(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#st(){this.#x?.abort(),this.#x=null}#K(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#W(){this.#u?.abort(),this.#u=null}#rt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Y(),this.#K()}removeEditListeners(){this.#st(),this.#W()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#a)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#a)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#_){const s=n.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of this.#a)if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){jt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const h of n){const f=await s.deserialize(h);if(!f)return;a.push(f)}const l=()=>{for(const h of a)this.#Q(h);this.#J(a)},u=()=>{for(const h of a)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(a){jt(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Ut.NONE&&!this.isEditorHandlingKeyboard&&Ea._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#$("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([n,s])=>this.#H[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,t)}),this.#T===Ut.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#j([[Qt.HIGHLIGHT_FREE,!0]]))}#j(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#nt(),this.#K(),this.#D({isEditing:this.#T!==Ut.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#it(),this.#W(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#a){this.#a=t;for(const e of this.#a)this.#j(e.defaultPropertiesToUpdate)}}getId(){return this.#I.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#i.set(t.pageIndex,t),this.#E?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,n=!1){if(this.#T!==t&&!(this.#P&&(await this.#P.promise,!this.#P))){if(this.#P=Promise.withResolvers(),this.#T=t,t===Ut.NONE){this.setEditingState(!1),this.#ot(),this._editorUndoBar?.hide(),this.#P.resolve();return}this.setEditingState(!0),await this.#at(),this.unselectAll();for(const s of this.#i.values())s.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),this.#P.resolve();return}for(const s of this.#n.values())s.annotationElementId===e?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#P.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#a){switch(t){case Qt.CREATE:this.currentLayer.addNewEditor();return;case Qt.HIGHLIGHT_DEFAULT_COLOR:this.#k?.updateColor(e);break;case Qt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#z||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const n of this.#_)n.updateParams(t,e);for(const n of this.#a)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const a of this.#n.values())a.editorType===t&&a.show(e);(this.#z?.get(Qt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#j([[Qt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#R!==t){this.#R=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#at(){if(!this.#E){this.#E=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ot(){if(this.unselectAll(),this.#E){this.#E=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const n of this.#n.values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#n.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#h.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#h.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#h.has(t)}removeDeletedAnnotationElement(t){this.#h.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Q(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#j(t.propertiesToUpdate))}get#lt(){let t=null;for(t of this.#_);return t}updateUI(t){this.#lt===t&&this.#j(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#j(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#_.has(t)){this.#_.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#_.add(t),t.select(),this.#j(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.#c?.commitOrRemove();for(const e of this.#_)e!==t&&e.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#j(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#D({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(t){this.#o.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}cleanUndoStack(t){this.#o.cleanType(t)}#q(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#_],n=()=>{this._editorUndoBar?.show(s,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},s=()=>{for(const a of e)this.#Q(a)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#J(t){for(const e of this.#_)e.unselect();this.#_.clear();for(const e of t)e.isEmpty()||(this.#_.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#J(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==Ut.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=t,this.#V[1]+=e;const[s,a]=this.#V,l=[...this.#_],u=1e3;this.#O&&clearTimeout(this.#O),this.#O=setTimeout(()=>{this.#O=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&h.translateInPage(s,a)},undo:()=>{for(const h of l)this.#n.has(h.id)&&h.translateInPage(-s,-a)},mustExec:!1})},u);for(const h of l)h.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#_)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let e=!1;for(const[{x:s,y:a,pageIndex:l},u]of t)u.newX=s,u.newY=a,u.newPageIndex=l,e||=s!==u.savedX||a!==u.savedY||l!==u.savedPageIndex;if(!e)return!1;const n=(s,a,l,u)=>{if(this.#n.has(s.id)){const h=this.#i.get(u);h?s._setParentAndPosition(h,a,l):(s.pageIndex=u,s.x=a,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:l,newPageIndex:u}]of t)n(s,a,l,u)},undo:()=>{for(const[s,{savedX:a,savedY:l,savedPageIndex:u}]of t)n(s,a,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#f)for(const n of this.#f.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}get imageManager(){return zt(this,"imageManager",new $b)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:a,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,g,v)=>({x:(p-s)/l,y:1-(f+g-n)/a,width:v/l,height:g/a});break;case"180":u=(f,p,g,v)=>({x:1-(f+g-n)/a,y:1-(p+v-s)/l,width:g/a,height:v/l});break;case"270":u=(f,p,g,v)=>({x:1-(p+v-s)/l,y:(f-n)/a,width:v/l,height:g/a});break;default:u=(f,p,g,v)=>({x:(f-n)/a,y:(p-s)/l,width:g/a,height:v/l});break}const h=[];for(let f=0,p=e.rangeCount;f<p;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:b,width:E,height:w}of g.getClientRects())E===0||w===0||h.push(u(v,b,E,w))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#l||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const e=this.#l?.get(t.data.id);if(!e)return;const n=this.#s.getRawValue(e);n&&(this.#T===Ut.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}}class Ss{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#l=!1;#o=null;#u=null;#c=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#u=t,this.#h=t._uiManager.useNewAltTextFlow,Ss.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ss._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ss.#f.missing),e.setAttribute("data-l10n-id",Ss.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;t.addEventListener("contextmenu",Ji,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#h&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#a}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#l=!0,s(a))},{signal:n}),await this.#p(),t}get#a(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await Ss._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#u.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#c===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(this.#c=n,this.#d=s),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#a}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ss.#f[this.#a]),this.#i?.setAttribute("data-l10n-id",Ss.#f[`${this.#a}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#u.id}`;const s=100,a=this.#u._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#u.getImageForAltText()?.setAttribute("aria-describedby",e.id)}}class om{#t;#e=!1;#n=null;#i;#r;#s;#l;#o;#u=null;#c;#d=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#n=n,this.#i=e,this.#r=s,this.#s=a,this.#l=l,this.#c=new AbortController,this.#o=AbortSignal.any([u,this.#c.signal]),t.addEventListener("touchstart",this.#h.bind(this),{passive:!1,signal:this.#o})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return zt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}#h(t){if(this.#i?.()||t.touches.length<2)return;if(!this.#d){this.#d=new AbortController;const s=AbortSignal.any([this.#o,this.#d.signal]),a=this.#t,l={signal:s,passive:!1};a.addEventListener("touchmove",this.#f.bind(this),l),a.addEventListener("touchend",this.#a.bind(this),l),a.addEventListener("touchcancel",this.#a.bind(this),l),this.#r?.()}if(oi(t),t.touches.length!==2||this.#n?.()){this.#u=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#u={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#f(t){if(!this.#u||t.touches.length!==2)return;let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:a}=e,{screenX:l,screenY:u}=n,h=this.#u,{touch0X:f,touch0Y:p,touch1X:g,touch1Y:v}=h,b=g-f,E=v-p,w=l-s,x=u-a,C=Math.hypot(w,x)||1,N=Math.hypot(b,E)||1;if(!this.#e&&Math.abs(N-C)<=om.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=a,h.touch1X=l,h.touch1Y=u,t.preventDefault(),!this.#e){this.#e=!0;return}const O=[(s+l)/2,(a+u)/2];this.#s?.(O,N,C)}#a(t){this.#d.abort(),this.#d=null,this.#l?.(),this.#u&&(t.preventDefault(),this.#u=null,this.#e=!1)}destroy(){this.#c?.abort(),this.#c=null}}class Rt{#t=null;#e=null;#n=null;#i=!1;#r=null;#s="";#l=!1;#o=null;#u=null;#c=null;#d=null;#h="";#f=!1;#a=null;#p=!1;#g=!1;#m=!1;#y=null;#b=0;#v=0;#A=null;#w=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#C=Rt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Xb;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Rt.prototype._resizeWithKeyboard,e=Ea.TRANSLATE_SMALL,n=Ea.TRANSLATE_BIG;return zt(this,"_resizerKeyboardManager",new kh([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Rt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,l];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return zt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new zz({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Rt._l10n??=t,Rt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Rt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Rt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#U(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[a,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/a,this.y=(e+s)/l,this.fixAndSetPosition()}#I([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#I(this.parentDimensions,t,e)}translateInPage(t,e){this.#a||=[this.x,this.y,this.width,this.height],this.#I(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#a||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[s,a]}=this;if(this.x+=t/s,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,f]=this.getBaseTranslation();l+=h,u+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#a&&(this.#a[0]!==this.x||this.#a[1]!==this.y)}get _hasBeenResized(){return!!this.#a&&(this.#a[2]!==this.width||this.#a[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Rt,s=n/t,a=n/e;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:a,y:l,width:u,height:h}=this;if(u*=n,h*=s,a*=n,l*=s,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(n-u,a)),l=Math.max(0,Math.min(s-h,l));break;case 90:a=Math.max(0,Math.min(n-h,a)),l=Math.min(s,Math.max(u,l));break;case 180:a=Math.min(n,Math.max(u,a)),l=Math.min(s,Math.max(h,l));break;case 270:a=Math.min(n,Math.max(h,a)),l=Math.max(0,Math.min(s-u,l));break}this.x=a/=n,this.y=l/=s;const[f,p]=this.getBaseTranslation();a+=f,l+=p,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#E(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Rt.#E(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Rt.#E(t,e,360-this.parentRotation)}#R(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/n).toFixed(2)}%`,this.#l||(a.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),a=!this.#l&&e.endsWith("%");if(s&&a)return;const[l,u]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!this.#l&&!a&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#x(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");this.#o.append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",this.#M.bind(this,n),{signal:e}),s.addEventListener("contextmenu",Ji,{signal:e}),s.tabIndex=-1}this.div.prepend(this.#o)}#M(t,e){e.preventDefault();const{isMac:n}=Vn.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#n?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#u=[e.screenX,e.screenY];const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#T.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",oi,{passive:!1,signal:l}),window.addEventListener("contextmenu",Ji,{signal:l}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#L()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#k(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e;const[a,l]=this.parentDimensions;this.setDims(a*n,l*s),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#c)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=this.#c;this.#c=null;const a=this.x,l=this.y,u=this.width,h=this.height;a===t&&l===e&&u===n&&h===s||this.addCommands({cmd:this.#k.bind(this,a,l,u,h),undo:this.#k.bind(this,t,e,n,s),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#T(t,e){const[n,s]=this.parentDimensions,a=this.x,l=this.y,u=this.width,h=this.height,f=Rt.MIN_SIZE/n,p=Rt.MIN_SIZE/s,g=this.#R(this.rotation),v=($,Z)=>[g[0]*$+g[2]*Z,g[1]*$+g[3]*Z],b=this.#R(360-this.rotation),E=($,Z)=>[b[0]*$+b[2]*Z,b[1]*$+b[3]*Z];let w,x,C=!1,N=!1;switch(t){case"topLeft":C=!0,w=($,Z)=>[0,0],x=($,Z)=>[$,Z];break;case"topMiddle":w=($,Z)=>[$/2,0],x=($,Z)=>[$/2,Z];break;case"topRight":C=!0,w=($,Z)=>[$,0],x=($,Z)=>[0,Z];break;case"middleRight":N=!0,w=($,Z)=>[$,Z/2],x=($,Z)=>[0,Z/2];break;case"bottomRight":C=!0,w=($,Z)=>[$,Z],x=($,Z)=>[0,0];break;case"bottomMiddle":w=($,Z)=>[$/2,Z],x=($,Z)=>[$/2,0];break;case"bottomLeft":C=!0,w=($,Z)=>[0,Z],x=($,Z)=>[$,0];break;case"middleLeft":N=!0,w=($,Z)=>[0,Z/2],x=($,Z)=>[$,Z/2];break}const O=w(u,h),U=x(u,h);let G=v(...U);const Y=Rt._round(a+G[0]),D=Rt._round(l+G[1]);let R=1,M=1,L,V;if(e.fromKeyboard)({deltaX:L,deltaY:V}=e);else{const{screenX:$,screenY:Z}=e,[ut,Tt]=this.#u;[L,V]=this.screenToPageTranslation($-ut,Z-Tt),this.#u[0]=$,this.#u[1]=Z}if([L,V]=E(L/n,V/s),C){const $=Math.hypot(u,h);R=M=Math.max(Math.min(Math.hypot(U[0]-O[0]-L,U[1]-O[1]-V)/$,1/u,1/h),f/u,p/h)}else N?R=Math.max(f,Math.min(1,Math.abs(U[0]-O[0]-L)))/u:M=Math.max(p,Math.min(1,Math.abs(U[1]-O[1]-V)))/h;const z=Rt._round(u*R),F=Rt._round(h*M);G=v(...x(z,F));const bt=Y-G[0],Bt=D-G[1];this.#a||=[this.x,this.y,this.width,this.height],this.width=z,this.height=F,this.x=bt,this.y=Bt,this.setDims(n*z,s*F),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#g?this._editToolbar:(this._editToolbar=new Ku(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(Ss.initialize(Rt._l10n),this.#n=new Ss(this),this.#t&&(this.#n.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#V();const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),xp(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#w||=new om({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#_.bind(this),onPinching:this.#N.bind(this),onPinchEnd:this.#B.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),this.div}#_(){this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#N(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=this.#R(this.rotation),u=(Y,D)=>[l[0]*Y+l[2]*D,l[1]*Y+l[3]*D],[h,f]=this.parentDimensions,p=this.x,g=this.y,v=this.width,b=this.height,E=Rt.MIN_SIZE/h,w=Rt.MIN_SIZE/f;a=Math.max(Math.min(a,1/v,1/b),E/v,w/b);const x=Rt._round(v*a),C=Rt._round(b*a);if(x===v&&C===b)return;this.#a||=[p,g,v,b];const N=u(v/2,b/2),O=Rt._round(p+N[0]),U=Rt._round(g+N[1]),G=u(x/2,C/2);this.x=O-G[0],this.y=U-G[1],this.width=x,this.height=C,this.setDims(h*x,f*C),this.fixAndSetPosition(),this._onResizing()}#B(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#L()}pointerdown(t){const{isMac:e}=Vn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#H(t);return}this.#z(t)}get isSelected(){return this._uiManager.isSelected(this)}#z(t){const{isMac:e}=Vn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:a},u=f=>{s.abort(),this.#r=null,this.#f=!1,this._uiManager.endDragSession()||this.#z(f),n&&this._onStopDragging()};e&&(this.#b=t.clientX,this.#v=t.clientY,this.#r=t.pointerId,this.#s=t.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:p,clientY:g,pointerId:v}=f;if(v!==this.#r){oi(f);return}const[b,E]=this.screenToPageTranslation(p-this.#b,g-this.#v);this.#b=p,this.#v=g,this._uiManager.dragSelectedEditors(b,E)},l),window.addEventListener("touchmove",oi,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#s&&(this.#w||f.isPrimary)&&u(f),oi(f)},l));const h=f=>{if(!this.#r||this.#r===f.pointerId){u(f);return}oi(f)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[a,l]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/s,p=e/s,g=this.x*a,v=this.y*l,b=this.width*a,E=this.height*l;switch(n){case 0:return[g+f+u,l-v-p-E+h,g+f+b+u,l-v-p+h];case 90:return[g+p+u,l-v+f+h,g+p+E+u,l-v+f+b+h];case 180:return[g-f-b+u,l-v+p+h,g-f+u,l-v+p+E+h];case 270:return[g-p-E+u,l-v-f-b+h,g-p+u,l-v-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,a,l]=t,u=a-n,h=l-s;switch(this.rotation){case 0:return[n,e-l,u,h];case 90:return[n,e-s,h,u];case 180:return[a,e-s,u,h];case 270:return[a,e-l,h,u];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){this.#g=!0}disableEditMode(){this.#g=!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&s>0&&t<a&&n>0}#V(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#V()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){fe("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,s.#t=t.accessibilityData;const[a,l]=s.pageDimensions,[u,h,f,p]=s.getRectInCurrentCoords(t.rect,l);return s.x=u/a,s.y=h/l,s.width=f/a,s.height=p/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#U(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#w?.destroy(),this.#w=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#x(),this.#o.classList.remove("hidden"),xp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#o.children;if(!this.#e){this.#e=Array.from(e);const l=this.#O.bind(this),u=this.#F.bind(this),h=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#G.bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",Rt._l10nResizer[p])}}const n=this.#e[0];let s=0;for(const l of e){if(l===n)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==s){if(a<s)for(let u=0;u<s-a;u++)this.#o.append(this.#o.firstChild);else if(a>s)for(let u=0;u<a-s;u++)this.#o.firstChild.before(this.#o.lastChild);let l=0;for(const u of e){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Rt._l10nResizer[f])}}this.#P(0),this.#m=!0,this.#o.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#O(t){Rt._resizerKeyboardManager.exec(this,t)}#F(t){this.#m&&t.relatedTarget?.parentNode!==this.#o&&this.#U()}#G(t){this.#h=this.#m?t:""}#P(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#m&&this.#T(this.#h,{deltaX:t,deltaY:e,fromKeyboard:!0})}#U(){this.#m=!1,this.#P(-1),this.#L()}_stopResizingWithKeyboard(){this.#U(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#l=!0;const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:n}=t;let s=this.#A.get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(n),this.#A.size===0&&(this.#A=null)},Rt._telemetryTimeout),this.#A.set(n,s);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class zz extends Rt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const z1=3285377520,wi=4294901760,ws=65535;class FD{constructor(t){this.h1=t?t&4294967295:z1,this.h2=t?t&4294967295:z1}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,x=t.length;w<x;w++){const C=t.charCodeAt(w);C<=255?e[n++]=C:(e[n++]=C>>>8,e[n++]=C&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,a=n-s*4,l=new Uint32Array(e.buffer,0,s);let u=0,h=0,f=this.h1,p=this.h2;const g=3432918353,v=461845907,b=g&ws,E=v&ws;for(let w=0;w<s;w++)w&1?(u=l[w],u=u*g&wi|u*b&ws,u=u<<15|u>>>17,u=u*v&wi|u*E&ws,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[w],h=h*g&wi|h*b&ws,h=h<<15|h>>>17,h=h*v&wi|h*E&ws,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,a){case 3:u^=e[s*4+2]<<16;case 2:u^=e[s*4+1]<<8;case 1:u^=e[s*4],u=u*g&wi|u*b&ws,u=u<<15|u>>>17,u=u*v&wi|u*E&ws,s&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&wi|t*36045&ws,e=e*4283543511&wi|((e<<16|t>>>16)*2950163797&wi)>>>16,t^=e>>>1,t=t*444984403&wi|t*60499&ws,e=e*3301882366&wi|((e<<16|t>>>16)*3120437893&wi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const e_=Object.freeze({map:null,hash:"",transfer:void 0});class Yb{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof Rt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let s=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(s=!0,n[a]=l);else s=!0,this.#n.set(t,e);s&&this.#i(),e instanceof Rt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}getAll(){return this.#n.size>0?Bb(this.#n):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new UD(this)}get serializable(){if(this.#n.size===0)return e_;const t=new Map,e=new FD,n=[],s=Object.create(null);let a=!1;for(const[l,u]of this.#n){const h=u instanceof Rt?u.serialize(!1,s):u;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:e_}get editorStats(){let t=null;const e=new Map;for(const n of this.#n.values()){if(!(n instanceof Rt))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:a}=s;e.has(a)||e.set(a,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const l=t[a]||=new Map;for(const[u,h]of Object.entries(s)){if(u==="type")continue;let f=l.get(u);f||(f=new Map,l.set(u,f));const p=f.get(h)??0;f.set(h,p+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof Rt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}}class UD extends Yb{#t;constructor(t){super();const{map:e,hash:n,transfer:s}=t.serializable,a=structuredClone(e,s?{transfer:s}:null);this.#t={map:a,hash:n,transfer:s}}get print(){fe("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return zt(this,"modifiedIds",{ids:new Set,hash:""})}}class Hz{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||this.#t.has(t.loadedName))){if(We(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:a}=t,l=new FontFace(n,s,a);this.addNativeFontFace(l);try{await l.load(),this.#t.add(n),e?.(t)}catch{jt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw jt(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return zt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Cn||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),zt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(We(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return zt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(U,G){return U.charCodeAt(G)<<24|U.charCodeAt(G+1)<<16|U.charCodeAt(G+2)<<8|U.charCodeAt(G+3)&255}function s(U,G,Y,D){const R=U.substring(0,G),M=U.substring(G+Y);return R+D+M}let a,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(U,G){if(++f>30){jt("Load test font never loaded."),G();return}if(h.font="30px "+U,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(p.bind(null,U,G))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,g.length,g);const E=16,w=1482184792;let x=n(v,E);for(a=0,l=g.length-3;a<l;a+=4)x=x-w+n(g,a)|0;a<g.length&&(x=x-w+n(g+"XXX",a)|0),v=s(v,E,4,Rz(x));const C=`url(data:font/opentype;base64,${btoa(v)});`,N=`@font-face {font-family:"${g}";src:${C}}`;this.insertRule(N);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const U of[t.loadedName,g]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=U,O.append(G)}this._document.body.append(O),p(g,()=>{O.remove(),e.complete()})}}class Gz{constructor(t,{disableFontFace:e=!1,fontExtraProperties:n=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this.fontExtraProperties=n===!0,this._inspectFont=s}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${kz(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(l){jt(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}}const xf={DATA:1,ERROR:2},$e={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function H1(){}function $n(i){if(i instanceof Aa||i instanceof Zv||i instanceof fh||i instanceof U1||i instanceof Sp||i instanceof Ky)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Aa(i.message);case"InvalidPDFException":return new Zv(i.message);case"MissingPDFException":return new fh(i.message);case"PasswordException":return new U1(i.message,i.code);case"UnexpectedResponseException":return new Sp(i.message,i.status);case"UnknownErrorException":return new Ky(i.message,i.details)}return new Ky(i.message,i.toString())}class Lu{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===xf.DATA)s.resolve(t.data);else if(t.callback===xf.ERROR)s.reject($n(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:s,callback:xf.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:s,callback:xf.ERROR,callbackId:t.callbackId,reason:$n(l)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,s){const a=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:t,streamId:a,data:e,desiredSize:f.desiredSize},s),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,h.postMessage({sourceName:l,targetName:u,stream:$e.PULL,streamId:a,desiredSize:f.desiredSize}),p.promise},cancel:f=>{We(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:$e.CANCEL,streamId:a,reason:$n(f)}),p.promise}},n)}#n(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:$e.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:$e.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){We(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:$e.ERROR,streamId:e,reason:$n(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:$e.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:$e.START_COMPLETE,streamId:e,reason:$n(f)})})}#i(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case $e.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject($n(t.reason));break;case $e.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject($n(t.reason));break;case $e.PULL:if(!u){a.postMessage({sourceName:n,targetName:s,stream:$e.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||H1).then(function(){a.postMessage({sourceName:n,targetName:s,stream:$e.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:$e.PULL_COMPLETE,streamId:e,reason:$n(f)})});break;case $e.ENQUEUE:if(We(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case $e.CLOSE:if(We(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case $e.ERROR:We(l,"error should have stream controller"),l.controller.error($n(t.reason)),this.#r(l,e);break;case $e.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject($n(t.reason)),this.#r(l,e);break;case $e.CANCEL:if(!u)break;const h=$n(t.reason);Promise.try(u.onCancel||H1,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:$e.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:$e.CANCEL_COMPLETE,streamId:e,reason:$n(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class jD{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){fe("Abstract method `_createCanvas` called.")}}class qz extends jD{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class BD{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class zD extends BD{async _fetch(t){const e=await rm(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):sm(e)}}class HD{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,a){return"none"}destroy(t=!1){}}class $z extends HD{#t;#e;#n;#i;#r;#s;#l=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#r=e}get#o(){return this.#e||=new Map}get#u(){return this.#s||=new Map}get#c(){if(!this.#n){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(rr,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#r.createElementNS(rr,"defs"),t.append(n),n.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let g=0;g<256;g++)f[g]=h[g]/255;const p=f.join(",");return[p,p,p]}const[e,n,s]=t,a=new Array(256),l=new Array(256),u=new Array(256);for(let h=0;h<256;h++)a[h]=e[h]/255,l[h]=n[h]/255,u[h]=s[h]/255;return[a.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(am(e)?jt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=e.split("#",1)[0])}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,s,a]=this.#d(t),l=t.length===1?n:`${n}${s}${a}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const u=`g_${this.#i}_transfer_map_${this.#l++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(l,h);const f=this.#p(u);return this.#m(n,s,a,f),h}addHCMFilter(t,e){const n=`${t}-${e}`,s="base";let a=this.#u.get(s);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#u.set(s,a)),!t||!e))return a.url;const l=this.#b(t);t=_t.makeHexColor(...l);const u=this.#b(e);if(e=_t.makeHexColor(...u),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const h=new Array(256);for(let b=0;b<=255;b++){const E=b/255;h[b]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const f=h.join(","),p=`g_${this.#i}_hcm_filter`,g=a.filter=this.#p(p);this.#m(f,f,f,g),this.#a(g);const v=(b,E)=>{const w=l[b]/255,x=u[b]/255,C=new Array(E+1);for(let N=0;N<=E;N++)C[N]=w+N/E*(x-w);return C.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),g),a.url=this.#h(p),a.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#d([t]),s=`alpha_${n}`;if(e=this.#o.get(s),e)return this.#o.set(t,e),e;const a=`g_${this.#i}_alpha_map_${this.#l++}`,l=this.#h(a);this.#o.set(t,l),this.#o.set(s,l);const u=this.#p(a);return this.#y(n,u),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,s;if(t?([n]=this.#d([t]),s=`luminosity_${n}`):s="luminosity",e=this.#o.get(s),e)return this.#o.set(t,e),e;const a=`g_${this.#i}_luminosity_map_${this.#l++}`,l=this.#h(a);this.#o.set(t,l),this.#o.set(s,l);const u=this.#p(a);return this.#f(u),t&&this.#y(n,u),l}addHighlightHCMFilter(t,e,n,s,a){const l=`${e}-${n}-${s}-${a}`;let u=this.#u.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#u.set(t,u)),!e||!n))return u.url;const[h,f]=[e,n].map(this.#b.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,b]=[s,a].map(this.#b.bind(this));g<p&&([p,g,v,b]=[g,p,b,v]),this.#c.style.color="";const E=(C,N,O)=>{const U=new Array(256),G=(g-p)/O,Y=C/255,D=(N-C)/(255*O);let R=0;for(let M=0;M<=O;M++){const L=Math.round(p+M*G),V=Y+M*D;for(let z=R;z<=L;z++)U[z]=V;R=L+1}for(let M=R;M<256;M++)U[M]=U[R-1];return U.join(",")},w=`g_${this.#i}_hcm_${t}_filter`,x=u.filter=this.#p(w);return this.#a(x),this.#m(E(v[0],b[0],5),E(v[1],b[1],5),E(v[2],b[2],5),x),u.url=this.#h(w),u.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#l=0)}#f(t){const e=this.#r.createElementNS(rr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#a(t){const e=this.#r.createElementNS(rr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(rr,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#g(t,e,n){const s=this.#r.createElementNS(rr,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),t.append(s)}#m(t,e,n,s){const a=this.#r.createElementNS(rr,"feComponentTransfer");s.append(a),this.#g(a,"feFuncR",t),this.#g(a,"feFuncG",e),this.#g(a,"feFuncB",n)}#y(t,e){const n=this.#r.createElementNS(rr,"feComponentTransfer");e.append(n),this.#g(n,"feFuncA",t)}#b(t){return this.#c.style.color=t,qb(getComputedStyle(this.#c).getPropertyValue("color"))}}class GD{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class qD extends GD{async _fetch(t){const e=await rm(t,"arraybuffer");return new Uint8Array(e)}}Cn&&jt("Please use the `legacy` build in Node.js environments.");async function $D(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class Xz extends HD{}class Yz extends jD{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Kz extends BD{async _fetch(t){return $D(t)}}class Wz extends GD{async _fetch(t){return $D(t)}}const Sn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function n_(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class Kb{getPattern(){fe("Abstract method `getPattern` called.")}}class Qz extends Kb{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let a;if(s===Sn.STROKE||s===Sn.FILL){const l=e.current.getClippedPathBoundingBox(s,we(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=_t.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),n_(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);a.setTransform(g)}else n_(t,this._bbox),a=this._createGradient(t);return a}}function Jy(i,t,e,n,s,a,l,u){const h=t.coords,f=t.colors,p=i.data,g=i.width*4;let v;h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=a,a=l,l=v),h[n+1]>h[s+1]&&(v=n,n=s,s=v,v=l,l=u,u=v),h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=a,a=l,l=v);const b=(h[e]+t.offsetX)*t.scaleX,E=(h[e+1]+t.offsetY)*t.scaleY,w=(h[n]+t.offsetX)*t.scaleX,x=(h[n+1]+t.offsetY)*t.scaleY,C=(h[s]+t.offsetX)*t.scaleX,N=(h[s+1]+t.offsetY)*t.scaleY;if(E>=N)return;const O=f[a],U=f[a+1],G=f[a+2],Y=f[l],D=f[l+1],R=f[l+2],M=f[u],L=f[u+1],V=f[u+2],z=Math.round(E),F=Math.round(N);let bt,Bt,$,Z,ut,Tt,Mt,H;for(let nt=z;nt<=F;nt++){if(nt<x){const vt=nt<E?0:(E-nt)/(E-x);bt=b-(b-w)*vt,Bt=O-(O-Y)*vt,$=U-(U-D)*vt,Z=G-(G-R)*vt}else{let vt;nt>N?vt=1:x===N?vt=0:vt=(x-nt)/(x-N),bt=w-(w-C)*vt,Bt=Y-(Y-M)*vt,$=D-(D-L)*vt,Z=R-(R-V)*vt}let lt;nt<E?lt=0:nt>N?lt=1:lt=(E-nt)/(E-N),ut=b-(b-C)*lt,Tt=O-(O-M)*lt,Mt=U-(U-L)*lt,H=G-(G-V)*lt;const ht=Math.round(Math.min(bt,ut)),St=Math.round(Math.max(bt,ut));let At=g*nt+ht*4;for(let vt=ht;vt<=St;vt++)lt=(bt-vt)/(bt-ut),lt<0?lt=0:lt>1&&(lt=1),p[At++]=Bt-(Bt-Tt)*lt|0,p[At++]=$-($-Mt)*lt|0,p[At++]=Z-(Z-H)*lt|0,p[At++]=255}}function Jz(i,t,e){const n=t.coords,s=t.colors;let a,l;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(n.length/u)-1,f=u-1;for(a=0;a<h;a++){let p=a*u;for(let g=0;g<f;g++,p++)Jy(i,e,n[p],n[p+1],n[p+u],s[p],s[p+1],s[p+u]),Jy(i,e,n[p+u+1],n[p+1],n[p+u],s[p+u+1],s[p+1],s[p+u])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)Jy(i,e,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class Zz extends Kb{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),b=f/g,E=p/v,w={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/b,scaleY:1/E},x=g+4,C=v+4,N=n.getCanvas("mesh",x,C),O=N.context,U=O.createImageData(g,v);if(e){const Y=U.data;for(let D=0,R=Y.length;D<R;D+=4)Y[D]=e[0],Y[D+1]=e[1],Y[D+2]=e[2],Y[D+3]=255}for(const Y of this._figures)Jz(U,Y,w);return O.putImageData(U,2,2),{canvas:N.canvas,offsetX:u-2*b,offsetY:h-2*E,scaleX:b,scaleY:E}}getPattern(t,e,n,s){n_(t,this._bbox);let a;if(s===Sn.SHADING)a=_t.singularValueDecompose2dScale(we(t));else if(a=_t.singularValueDecompose2dScale(e.baseTransform),this.matrix){const u=_t.singularValueDecompose2dScale(this.matrix);a=[a[0]*u[0],a[1]*u[1]]}const l=this._createMeshCanvas(a,s===Sn.SHADING?null:this._background,e.cachedCanvases);return s!==Sn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class tH extends Kb{getPattern(){return"hotpink"}}function eH(i){switch(i[0]){case"RadialAxial":return new Qz(i);case"Mesh":return new Zz(i);case"Dummy":return new tH}throw new Error(`Unknown IR type: ${i[0]}`)}const G1={COLORED:1,UNCOLORED:2};class Wb{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,s,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:a,color:l,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),im("TilingType: "+a);const p=e[0],g=e[1],v=e[2],b=e[3],E=v-p,w=b-g,x=_t.singularValueDecompose2dScale(this.matrix),C=_t.singularValueDecompose2dScale(this.baseTransform),N=x[0]*C[0],O=x[1]*C[1];let U=E,G=w,Y=!1,D=!1;const R=Math.ceil(h*N),M=Math.ceil(f*O),L=Math.ceil(E*N),V=Math.ceil(w*O);R>=L?U=h:Y=!0,M>=V?G=f:D=!0;const z=this.getSizeAndScale(U,this.ctx.canvas.width,N),F=this.getSizeAndScale(G,this.ctx.canvas.height,O),bt=t.cachedCanvases.getCanvas("pattern",z.size,F.size),Bt=bt.context,$=u.createCanvasGraphics(Bt);if($.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext($,s,l),Bt.translate(-z.scale*p,-F.scale*g),$.transform(z.scale,0,0,F.scale,0,0),Bt.save(),this.clipBbox($,p,g,v,b),$.baseTransform=we($.ctx),$.executeOperatorList(n),$.endDrawing(),Bt.restore(),Y||D){const Z=bt.canvas;Y&&(U=h),D&&(G=f);const ut=this.getSizeAndScale(U,this.ctx.canvas.width,N),Tt=this.getSizeAndScale(G,this.ctx.canvas.height,O),Mt=ut.size,H=Tt.size,nt=t.cachedCanvases.getCanvas("pattern-workaround",Mt,H),lt=nt.context,ht=Y?Math.floor(E/h):0,St=D?Math.floor(w/f):0;for(let At=0;At<=ht;At++)for(let vt=0;vt<=St;vt++)lt.drawImage(Z,Mt*At,H*vt,Mt,H,0,0,Mt,H);return{canvas:nt.canvas,scaleX:ut.scale,scaleY:Tt.scale,offsetX:p,offsetY:g}}return{canvas:bt.canvas,scaleX:z.scale,scaleY:F.scale,offsetX:p,offsetY:g}}getSizeAndScale(t,e,n){const s=Math.max(Wb.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=s?a=s:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,s,a){const l=s-e,u=a-n;t.ctx.rect(e,n,l,u),t.current.updateRectMinMax(we(t.ctx),[e,n,s,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,a=t.current;switch(e){case G1.COLORED:const l=this.ctx;s.fillStyle=l.fillStyle,s.strokeStyle=l.strokeStyle,a.fillColor=l.fillStyle,a.strokeColor=l.strokeStyle;break;case G1.UNCOLORED:const u=_t.makeHexColor(n[0],n[1],n[2]);s.fillStyle=u,s.strokeStyle=u,a.fillColor=u,a.strokeColor=u;break;default:throw new Cz(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let a=n;s!==Sn.SHADING&&(a=_t.transform(a,e.baseTransform),this.matrix&&(a=_t.transform(a,this.matrix)));const l=this.createPatternCanvas(e);let u=new DOMMatrix(a);u=u.translate(l.offsetX,l.offsetY),u=u.scale(1/l.scaleX,1/l.scaleY);const h=t.createPattern(l.canvas,"repeat");return h.setTransform(u),h}}function nH({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const u=Vn.isLittleEndian?4278190080:255,[h,f]=l?[a,u]:[u,a],p=n>>3,g=n&7,v=i.length;e=new Uint32Array(e.buffer);let b=0;for(let E=0;E<s;E++){for(const x=t+p;t<x;t++){const C=t<v?i[t]:255;e[b++]=C&128?f:h,e[b++]=C&64?f:h,e[b++]=C&32?f:h,e[b++]=C&16?f:h,e[b++]=C&8?f:h,e[b++]=C&4?f:h,e[b++]=C&2?f:h,e[b++]=C&1?f:h}if(g===0)continue;const w=t<v?i[t++]:255;for(let x=0;x<g;x++)e[b++]=w&1<<7-x?f:h}return{srcPos:t,destPos:b}}const q1=16,$1=100,iH=15,X1=10,Y1=1e3,Xn=16;function sH(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},i.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},i.transform=function(n,s,a,l,u,h){t.transform(n,s,a,l,u,h),this.__originalTransform(n,s,a,l,u,h)},i.setTransform=function(n,s,a,l,u,h){t.setTransform(n,s,a,l,u,h),this.__originalSetTransform(n,s,a,l,u,h)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){t.rotate(n),this.__originalRotate(n)},i.clip=function(n){t.clip(n),this.__originalClip(n)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,a,l,u){t.bezierCurveTo(e,n,s,a,l,u),this.__originalBezierCurveTo(e,n,s,a,l,u)},i.rect=function(e,n,s,a){t.rect(e,n,s,a),this.__originalRect(e,n,s,a)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class rH{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Cf(i,t,e,n,s,a,l,u,h,f){const[p,g,v,b,E,w]=we(i);if(g===0&&v===0){const N=l*p+E,O=Math.round(N),U=u*b+w,G=Math.round(U),Y=(l+h)*p+E,D=Math.abs(Math.round(Y)-O)||1,R=(u+f)*b+w,M=Math.abs(Math.round(R)-G)||1;return i.setTransform(Math.sign(p),0,0,Math.sign(b),O,G),i.drawImage(t,e,n,s,a,0,0,D,M),i.setTransform(p,g,v,b,E,w),[D,M]}if(p===0&&b===0){const N=u*v+E,O=Math.round(N),U=l*g+w,G=Math.round(U),Y=(u+f)*v+E,D=Math.abs(Math.round(Y)-O)||1,R=(l+h)*g+w,M=Math.abs(Math.round(R)-G)||1;return i.setTransform(0,Math.sign(g),Math.sign(v),0,O,G),i.drawImage(t,e,n,s,a,0,0,M,D),i.setTransform(p,g,v,b,E,w),[M,D]}i.drawImage(t,e,n,s,a,l,u,h,f);const x=Math.hypot(p,g),C=Math.hypot(v,b);return[x*h,C*f]}function aH(i){const{width:t,height:e}=i;if(t>Y1||e>Y1)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1;let l=new Uint8Array(a*(e+1)),u,h,f;const p=t+7&-8;let g=new Uint8Array(p*e),v=0;for(const C of i.data){let N=128;for(;N>0;)g[v++]=C&N?0:255,N>>=1}let b=0;for(v=0,g[v]!==0&&(l[0]=1,++b),h=1;h<t;h++)g[v]!==g[v+1]&&(l[h]=g[v]?2:1,++b),v++;for(g[v]!==0&&(l[h]=2,++b),u=1;u<e;u++){v=u*p,f=u*a,g[v-p]!==g[v]&&(l[f]=g[v]?1:8,++b);let C=(g[v]?4:0)+(g[v-p]?8:0);for(h=1;h<t;h++)C=(C>>2)+(g[v+1]?4:0)+(g[v-p+1]?8:0),s[C]&&(l[f+h]=s[C],++b),v++;if(g[v-p]!==g[v]&&(l[f+h]=g[v]?2:4,++b),b>n)return null}for(v=p*(e-1),f=u*a,g[v]!==0&&(l[f]=8,++b),h=1;h<t;h++)g[v]!==g[v+1]&&(l[f+h]=g[v]?4:8,++b),v++;if(g[v]!==0&&(l[f+h]=4,++b),b>n)return null;const E=new Int32Array([0,a,-1,0,-a,0,0,0,1]),w=new Path2D;for(u=0;b&&u<=e;u++){let C=u*a;const N=C+t;for(;C<N&&!l[C];)C++;if(C===N)continue;w.moveTo(C%a,u);const O=C;let U=l[C];do{const G=E[U];do C+=G;while(!l[C]);const Y=l[C];Y!==5&&Y!==10?(U=Y,l[C]=0):(U=Y&51*U>>4,l[C]&=U>>2|U<<2),w.lineTo(C%a,C/a|0),l[C]||--b}while(O!==C);--u}return g=null,l=null,function(C){C.save(),C.scale(1/t,-1/e),C.translate(0,-e),C.fill(w),C.beginPath(),C.restore()}}class K1{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=OD,this.textMatrixScale=1,this.fontMatrix=Jv,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=wn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=_t.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=_t.applyTransform(e,t),s=_t.applyTransform(e.slice(2),t),a=_t.applyTransform([e[0],e[3]],t),l=_t.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],a[0],l[0]),this.minY=Math.min(this.minY,n[1],s[1],a[1],l[1]),this.maxX=Math.max(this.maxX,n[0],s[0],a[0],l[0]),this.maxY=Math.max(this.maxY,n[1],s[1],a[1],l[1])}updateScalingPathMinMax(t,e){_t.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,a,l,u,h,f,p){const g=_t.bezierBoundingBox(e,n,s,a,l,u,h,f,p);p||this.updateRectMinMax(t,g)}getPathBoundingBox(t=Sn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Sn.STROKE){e||fe("Stroke bounding box must include transform.");const s=_t.singularValueDecompose2dScale(e),a=s[0]*this.lineWidth/2,l=s[1]*this.lineWidth/2;n[0]-=a,n[1]-=l,n[2]+=a,n[3]+=l}return n}updateClipFromPath(){const t=_t.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Sn.FILL,e=null){return _t.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function W1(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%Xn,a=(e-s)/Xn,l=s===0?a:a+1,u=i.createImageData(n,Xn);let h=0,f;const p=t.data,g=u.data;let v,b,E,w;if(t.kind===Xf.GRAYSCALE_1BPP){const x=p.byteLength,C=new Uint32Array(g.buffer,0,g.byteLength>>2),N=C.length,O=n+7>>3,U=4294967295,G=Vn.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(E=v<a?Xn:s,f=0,b=0;b<E;b++){const Y=x-h;let D=0;const R=Y>O?n:Y*8-7,M=R&-8;let L=0,V=0;for(;D<M;D+=8)V=p[h++],C[f++]=V&128?U:G,C[f++]=V&64?U:G,C[f++]=V&32?U:G,C[f++]=V&16?U:G,C[f++]=V&8?U:G,C[f++]=V&4?U:G,C[f++]=V&2?U:G,C[f++]=V&1?U:G;for(;D<R;D++)L===0&&(V=p[h++],L=128),C[f++]=V&L?U:G,L>>=1}for(;f<N;)C[f++]=0;i.putImageData(u,0,v*Xn)}}else if(t.kind===Xf.RGBA_32BPP){for(b=0,w=n*Xn*4,v=0;v<a;v++)g.set(p.subarray(h,h+w)),h+=w,i.putImageData(u,0,b),b+=Xn;v<l&&(w=n*s*4,g.set(p.subarray(h,h+w)),i.putImageData(u,0,b))}else if(t.kind===Xf.RGB_24BPP)for(E=Xn,w=n*E,v=0;v<l;v++){for(v>=a&&(E=s,w=n*E),f=0,b=w;b--;)g[f++]=p[h++],g[f++]=p[h++],g[f++]=p[h++],g[f++]=255;i.putImageData(u,0,v*Xn)}else throw new Error(`bad image kind: ${t.kind}`)}function Q1(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%Xn,a=(e-s)/Xn,l=s===0?a:a+1,u=i.createImageData(n,Xn);let h=0;const f=t.data,p=u.data;for(let g=0;g<l;g++){const v=g<a?Xn:s;({srcPos:h}=nH({src:f,srcPos:h,dest:p,width:n,height:v,nonBlackColor:0})),i.putImageData(u,0,g*Xn)}}function Su(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function Rf(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Cn){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function J1(i,t){if(t)return!0;const e=_t.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*ec.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const oH=["butt","round","square"],lH=["miter","round","bevel"],cH={},Z1={};class zl{constructor(t,e,n,s,a,{optionalContentConfig:l,markedContentStack:u=null},h,f){this.ctx=t,this.current=new K1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new rH(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...we(this.compositeCtx))}this.ctx.save(),Rf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=we(this.ctx)}executeOperatorList(t,e,n,s){const a=t.argsArray,l=t.fnArray;let u=e||0;const h=a.length;if(h===u)return u;const f=h-u>X1&&typeof n=="function",p=f?Date.now()+iH:0;let g=0;const v=this.commonObjs,b=this.objs;let E;for(;;){if(s!==void 0&&u===s.nextBreakPoint)return s.breakIt(u,n),u;if(E=l[u],E!==qi.dependency)this[E].apply(this,a[u]);else for(const w of a[u]){const x=w.startsWith("g_")?v:b;if(!x.has(w))return x.get(w,n),u}if(u++,u===h)return u;if(f&&++g>X1){if(Date.now()>p)return n(),u;g=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,h=s,f="prescale1",p,g;for(;a>2&&u>1||l>2&&h>1;){let v=u,b=h;a>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/v),l>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/b),p=this.cachedCanvases.getCanvas(f,v,b),g=p.context,g.clearRect(0,0,v,b),g.drawImage(t,0,0,u,h,0,0,v,b),t=p.canvas,u=v,h=b,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,a=this.current.fillColor,l=this.current.patternFill,u=we(e);let h,f,p,g;if((t.bitmap||t.data)&&t.count>1){const R=t.bitmap||t.data.buffer;f=JSON.stringify(l?u:[u.slice(0,4),a]),h=this._cachedBitmapsMap.get(R),h||(h=new Map,this._cachedBitmapsMap.set(R,h));const M=h.get(f);if(M&&!l){const L=Math.round(Math.min(u[0],u[2])+u[4]),V=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:M,offsetX:L,offsetY:V}}p=M}p||(g=this.cachedCanvases.getCanvas("maskCanvas",n,s),Q1(g.context,t));let v=_t.transform(u,[1/n,0,0,-1/s,0,0]);v=_t.transform(v,[1,0,0,1,0,-s]);const[b,E,w,x]=_t.getAxialAlignedBoundingBox([0,0,n,s],v),C=Math.round(w-b)||1,N=Math.round(x-E)||1,O=this.cachedCanvases.getCanvas("fillCanvas",C,N),U=O.context,G=b,Y=E;U.translate(-G,-Y),U.transform(...v),p||(p=this._scaleImage(g.canvas,Es(U)),p=p.img,h&&l&&h.set(f,p)),U.imageSmoothingEnabled=J1(we(U),t.interpolate),Cf(U,p,0,0,p.width,p.height,0,0,n,s),U.globalCompositeOperation="source-in";const D=_t.transform(Es(U),[1,0,0,1,-G,-Y]);return U.fillStyle=l?a.getPattern(e,this,D,Sn.FILL):a,U.fillRect(0,0,n,s),h&&!l&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,O.canvas)),{canvas:O.canvas,offsetX:Math.round(G),offsetY:Math.round(Y)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=oH[t]}setLineJoin(t){this.ctx.lineJoin=lH[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const a=this.ctx;a.setTransform(...we(this.suspendedCtx)),Su(this.suspendedCtx,a),sH(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Su(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const a=s[0],l=s[1],u=s[2]-a,h=s[3]-l;u===0||h===0||(this.genericComposeSMask(e.context,n,u,h,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,a,l,u,h,f,p,g){let v=t.canvas,b=h-p,E=f-g;if(l){const x=_t.makeHexColor(...l);if(b<0||E<0||b+n>v.width||E+s>v.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,s),N=C.context;N.drawImage(v,-b,-E),N.globalCompositeOperation="destination-atop",N.fillStyle=x,N.fillRect(0,0,n,s),N.globalCompositeOperation="source-over",v=C.canvas,b=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(b,E,n,s),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=x,t.fillRect(b,E,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const w=new Path2D;w.rect(h,f,n,s),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(v,b,E,n,s,h,f,n,s),e.restore()}save(){this.inSMaskMode?(Su(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Su(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,a,l){this.ctx.transform(t,e,n,s,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,a=this.current;let l=a.x,u=a.y,h,f;const p=we(s),g=p[0]===0&&p[3]===0||p[1]===0&&p[2]===0,v=g?n.slice(0):null;for(let b=0,E=0,w=t.length;b<w;b++)switch(t[b]|0){case qi.rectangle:l=e[E++],u=e[E++];const x=e[E++],C=e[E++],N=l+x,O=u+C;s.moveTo(l,u),x===0||C===0?s.lineTo(N,O):(s.lineTo(N,u),s.lineTo(N,O),s.lineTo(l,O)),g||a.updateRectMinMax(p,[l,u,N,O]),s.closePath();break;case qi.moveTo:l=e[E++],u=e[E++],s.moveTo(l,u),g||a.updatePathMinMax(p,l,u);break;case qi.lineTo:l=e[E++],u=e[E++],s.lineTo(l,u),g||a.updatePathMinMax(p,l,u);break;case qi.curveTo:h=l,f=u,l=e[E+4],u=e[E+5],s.bezierCurveTo(e[E],e[E+1],e[E+2],e[E+3],l,u),a.updateCurvePathMinMax(p,h,f,e[E],e[E+1],e[E+2],e[E+3],l,u,v),E+=6;break;case qi.curveTo2:h=l,f=u,s.bezierCurveTo(l,u,e[E],e[E+1],e[E+2],e[E+3]),a.updateCurvePathMinMax(p,h,f,l,u,e[E],e[E+1],e[E+2],e[E+3],v),l=e[E+2],u=e[E+3],E+=4;break;case qi.curveTo3:h=l,f=u,l=e[E+2],u=e[E+3],s.bezierCurveTo(e[E],e[E+1],l,u,l,u),a.updateCurvePathMinMax(p,h,f,e[E],e[E+1],l,u,l,u,v),E+=4;break;case qi.closePath:s.closePath();break}g&&a.updateScalingPathMinMax(p,v),a.setCurrentPoint(l,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n?.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,Es(e),Sn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let a=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,Es(e),Sn.FILL),a=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),a&&e.restore(),t&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=cH}eoClip(){this.pendingClip=Z1}beginText(){this.current.textMatrix=OD,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const n=new Path2D,s=e.getTransform().invertSelf();for(const{transform:a,x:l,y:u,fontSize:h,path:f}of t)n.addPath(f,new DOMMatrix(a).preMultiplySelf(s).translate(l,u).scale(h,-h));e.clip(n),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||Jv,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&jt("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const a=n.loadedName||"sans-serif",l=n.systemFontInfo?.css||`"${a}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const h=n.italic?"italic":"normal";let f=e;e<q1?f=q1:e>$1&&(f=$1),this.current.fontSizeScale=e/f,this.ctx.font=`${h} ${u} ${f}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,a,l){this.current.textMatrix=[t,e,n,s,a,l],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s}paintChar(t,e,n,s,a){const l=this.ctx,u=this.current,h=u.font,f=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,g=f&wn.FILL_STROKE_MASK,v=!!(f&wn.ADD_TO_PATH_FLAG),b=u.patternFill&&!h.missingFile,E=u.patternStroke&&!h.missingFile;let w;if((h.disableFontFace||v||b||E)&&(w=h.getPathGenerator(this.commonObjs,t)),h.disableFontFace||b||E){if(l.save(),l.translate(e,n),l.scale(p,-p),g===wn.FILL||g===wn.FILL_STROKE)if(s){const x=l.getTransform();l.setTransform(...s),l.fill(this.#n(w,x,s))}else l.fill(w);if(g===wn.STROKE||g===wn.FILL_STROKE)if(a){const x=l.getTransform();l.setTransform(...a),l.stroke(this.#n(w,x,a))}else l.lineWidth/=p,l.stroke(w);l.restore()}else(g===wn.FILL||g===wn.FILL_STROKE)&&l.fillText(t,e,n),(g===wn.STROKE||g===wn.FILL_STROKE)&&l.strokeText(t,e,n);v&&(this.pendingTextPaths||=[]).push({transform:we(l),x:e,y:n,fontSize:p,path:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return zt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const a=this.ctx,l=e.fontSizeScale,u=e.charSpacing,h=e.wordSpacing,f=e.fontDirection,p=e.textHScale*f,g=t.length,v=n.vertical,b=v?1:-1,E=n.defaultVMetrics,w=s*e.fontMatrix[0],x=e.textRenderingMode===wn.FILL&&!n.disableFontFace&&!e.patternFill;a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),f>0?a.scale(p,-1):a.scale(p,1);let C,N;if(e.patternFill){a.save();const D=e.fillColor.getPattern(a,this,Es(a),Sn.FILL);C=we(a),a.restore(),a.fillStyle=D}if(e.patternStroke){a.save();const D=e.strokeColor.getPattern(a,this,Es(a),Sn.STROKE);N=we(a),a.restore(),a.strokeStyle=D}let O=e.lineWidth;const U=e.textMatrixScale;if(U===0||O===0){const D=e.textRenderingMode&wn.FILL_STROKE_MASK;(D===wn.STROKE||D===wn.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=U;if(l!==1&&(a.scale(l,l),O/=l),a.lineWidth=O,n.isInvalidPDFjsFont){const D=[];let R=0;for(const M of t)D.push(M.unicode),R+=M.width;a.fillText(D.join(""),0,0),e.x+=R*w*p,a.restore(),this.compose();return}let G=0,Y;for(Y=0;Y<g;++Y){const D=t[Y];if(typeof D=="number"){G+=b*D*s/1e3;continue}let R=!1;const M=(D.isSpace?h:0)+u,L=D.fontChar,V=D.accent;let z,F,bt=D.width;if(v){const $=D.vmetric||E,Z=-(D.vmetric?$[1]:bt*.5)*w,ut=$[2]*w;bt=$?-$[0]:bt,z=Z/l,F=(G+ut)/l}else z=G/l,F=0;if(n.remeasure&&bt>0){const $=a.measureText(L).width*1e3/s*l;if(bt<$&&this.isFontSubpixelAAEnabled){const Z=bt/$;R=!0,a.save(),a.scale(Z,1),z/=Z}else bt!==$&&(z+=(bt-$)/2e3*s/l)}if(this.contentVisible&&(D.isInFont||n.missingFile)){if(x&&!V)a.fillText(L,z,F);else if(this.paintChar(L,z,F,C,N),V){const $=z+s*V.offset.x/l,Z=F-s*V.offset.y/l;this.paintChar(V.fontChar,$,Z,C,N)}}const Bt=v?bt*w-M*f:bt*w+M*f;G+=Bt,R&&a.restore()}v?e.y-=G:e.x+=G*p,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,a=n.fontSize,l=n.fontDirection,u=s.vertical?1:-1,h=n.charSpacing,f=n.wordSpacing,p=n.textHScale*l,g=n.fontMatrix||Jv,v=t.length,b=n.textRenderingMode===wn.INVISIBLE;let E,w,x,C;if(!(b||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(p,l),E=0;E<v;++E){if(w=t[E],typeof w=="number"){C=u*w*a/1e3,this.ctx.translate(C,0),n.x+=C*p;continue}const N=(w.isSpace?f:0)+h,O=s.charProcOperatorList[w.operatorListId];if(!O){jt(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),e.scale(a,a),e.transform(...g),this.executeOperatorList(O),this.restore()),x=_t.applyTransform([w.width,0],g)[0]*a+N,e.translate(x,0),n.x+=x*p}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,a,l){this.ctx.rect(n,s,a-n,l-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||we(this.ctx),a={createCanvasGraphics:l=>new zl(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Wb(t,n,this.ctx,a,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=_t.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=_t.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=eH(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Es(e),Sn.SHADING);const s=Es(e);if(s){const{width:a,height:l}=e.canvas,[u,h,f,p]=_t.getAxialAlignedBoundingBox([0,0,a,l],s);this.ctx.fillRect(u,h,f-u,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){fe("Should not call beginInlineImage")}beginImageData(){fe("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=we(this.ctx),e)){const n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(we(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||im("TODO: Support non-isolated groups."),t.knockout&&jt("Knockout groups not supported.");const n=we(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=_t.getAxialAlignedBoundingBox(t.bbox,we(e));const a=[0,0,e.canvas.width,e.canvas.height];s=_t.intersect(s,a)||[0,0,0,0];const l=Math.floor(s[0]),u=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-l,1),f=Math.max(Math.ceil(s[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,f]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(p,h,f),v=g.context;v.translate(-l,-u),v.transform(...n),t.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:l,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,u),e.save()),Su(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=we(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const a=_t.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,s,a){if(this.#t(),Rf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],u=e[3]-e[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=u;const[h,f]=_t.singularValueDecompose2dScale(we(this.ctx)),{viewportScale:p}=this,g=Math.ceil(l*this.outputScaleX*p),v=Math.ceil(u*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:b,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(t,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(h,0,0,-f,0,u*f),Rf(this.ctx)}else Rf(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],l,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new K1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=aH(t)),s.compiled)){s.compiled(n);return}const a=this._createMaskCanvas(t),l=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,a,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const h=we(u);u.transform(e,n,s,a,0,0);const f=this._createMaskCanvas(t);u.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]);for(let p=0,g=l.length;p<g;p+=2){const v=_t.transform(h,[e,n,s,a,l[p],l[p+1]]),[b,E]=_t.applyTransform([0,0],v);u.drawImage(f.canvas,b,E)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const a of t){const{data:l,width:u,height:h,transform:f}=a,p=this.cachedCanvases.getCanvas("maskCanvas",u,h),g=p.context;g.save();const v=this.getObject(l,a);Q1(g,v),g.globalCompositeOperation="source-in",g.fillStyle=s?n.getPattern(g,this,Es(e),Sn.FILL):n,g.fillRect(0,0,u,h),g.restore(),e.save(),e.transform(...f),e.scale(1,-1),Cf(e,p.canvas,0,0,u,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){jt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){jt("Dependent image isn't ready yet");return}const l=a.width,u=a.height,h=[];for(let f=0,p=s.length;f<p;f+=2)h.push({transform:[e,0,0,n,s[f],s[f+1]],x:0,y:0,w:l,h:u});this.paintInlineImageXObjectGroup(a,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,s),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;if(this.save(),!Cn){const{filter:u}=s;u!=="none"&&u!==""&&(s.filter="none")}s.scale(1/e,-1/n);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,n).context;W1(h,t),a=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(a,Es(s));s.imageSmoothingEnabled=J1(we(s),t.interpolate),Cf(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const a=t.width,l=t.height,h=this.cachedCanvases.getCanvas("inlineImage",a,l).context;W1(h,t),s=this.applyTransferMapsToCanvas(h)}for(const a of e)n.save(),n.transform(...a.transform),n.scale(1,-1),Cf(n,s,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===Z1?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=we(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:a}=this.ctx.getTransform();let l,u;if(n===0&&s===0){const h=Math.abs(e),f=Math.abs(a);if(h===f)if(t===0)l=u=1/h;else{const p=h*t;l=u=p<1?1/p:1}else if(t===0)l=1/h,u=1/f;else{const p=h*t,g=f*t;l=p<1?1/p:1,u=g<1?1/g:1}}else{const h=Math.abs(e*a-n*s),f=Math.hypot(e,n),p=Math.hypot(s,a);if(t===0)l=p/h,u=f/h;else{const g=t*h;l=p>g?p/g:1,u=f>g?f/g:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[s,a]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&a===1){e.stroke();return}const l=e.getLineDash();if(t&&e.save(),e.scale(s,a),l.length>0){const u=Math.max(s,a);e.setLineDash(l.map(h=>h/u)),e.lineDashOffset/=u}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const i in qi)zl.prototype[i]!==void 0&&(zl.prototype[qi[i]]=zl.prototype[i]);class Wu{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class uH{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return Bb(this.#t)}has(t){return this.#t.has(t)}}const Cl=Symbol("INTERNAL");class hH{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:n,usage:s,rbGroups:a}){this.#t=!!(t&ri.DISPLAY),this.#e=!!(t&ri.PRINT),this.name=e,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Cl&&fe("Internal method `_setVisible` called."),this.#n=n,this.#i=e}}class dH{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=ri.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const n of t.groups)this.#e.set(n.id,new hH(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Cl,!1);for(const n of t.on)this.#e.get(n)._setVisible(Cl,!0);for(const n of t.off)this.#e.get(n)._setVisible(Cl,!1);this.#n=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const a=t[s];let l;if(Array.isArray(a))l=this.#r(a);else if(this.#e.has(a))l=this.#e.get(a).visible;else return jt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return im("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(jt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return jt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return jt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return jt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return jt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return jt(`Unknown optional content policy ${t.policy}.`),!0}return jt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const s=this.#e.get(t);if(!s){jt(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const a of s.rbGroups)for(const l of a)l!==t&&this.#e.get(l)?._setVisible(Cl,!1,!0);s._setVisible(Cl,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const a=this.#e.get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?Bb(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new FD;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}}class fH{constructor(t,{disableRange:e=!1,disableStream:n=!1}){We(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,a?.length>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});We(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){We(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new pH(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new mH(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class pH{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=Gb(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mH{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function gH(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let p=u(e);return p=unescape(p),p=h(p),p=f(p),a(p)}if(e=l(i),e){const p=f(e);return a(p)}if(e=n("filename","i").exec(i),e){e=e[1];let p=u(e);return p=f(p),a(p)}function n(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(p,{fatal:!0}),b=sm(g);g=v.decode(b),t=!1}catch{}}return g}function a(p){return t&&/[\x80-\xff]/.test(p)&&(p=s("utf-8",p),t&&(p=s("iso-8859-1",p))),p}function l(p){const g=[];let v;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(p))!==null;){let[,w,x,C]=v;if(w=parseInt(w,10),w in g){if(w===0)break;continue}g[w]=[x,C]}const E=[];for(let w=0;w<g.length&&w in g;++w){let[x,C]=g[w];C=u(C),x&&(C=unescape(C),w===0&&(C=h(C))),E.push(C)}return E.join("")}function u(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let v=0;v<g.length;++v){const b=g[v].indexOf('"');b!==-1&&(g[v]=g[v].slice(0,b),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function h(p){const g=p.indexOf("'");if(g===-1)return p;const v=p.slice(0,g),E=p.slice(g+1).replace(/^[^']*'/,"");return s(v,E)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,b,E){if(b==="q"||b==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,x){return String.fromCharCode(parseInt(x,16))}),s(v,E);try{E=atob(E)}catch{}return s(v,E)})}return""}function XD(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function lm(i){try{return new URL(i).origin}catch{}return null}function YD({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(i.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function KD(i){const t=i.get("Content-Disposition");if(t){let e=gH(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Gb(e))return e}return null}function cm(i,t){return i===404||i===0&&t.startsWith("file:")?new fh('Missing PDF "'+t+'".'):new Sp(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function WD(i){return i===200||i===206}function QD(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function JD(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(jt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class tx{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=XD(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return We(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new yH(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new vH(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class yH{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,QD(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=lm(a.url),!WD(a.status))throw cm(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:u,suggestedLength:h}=YD({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=KD(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Aa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:JD(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class vH{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${n-1}`);const l=s.url;fetch(l,QD(a,this._withCredentials,this._abortController)).then(u=>{const h=lm(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!WD(u.status))throw cm(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:JD(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Zy=200,tv=206;function _H(i){const t=i.response;return typeof t!="string"?t:sm(t).buffer}class bH{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=XD(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,l]of this.headers)e.setRequestHeader(a,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=tv):s.expectedStatus=Zy,e.responseType="arraybuffer",We(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const a=s.status||Zy;if(!(a===Zy&&n.expectedStatus===tv)&&a!==n.expectedStatus){n.onError(s.status);return}const u=_H(s);if(a===tv){const h=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(jt('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class AH{constructor(t){this._source=t,this._manager=new bH(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return We(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new EH(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new wH(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class EH{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=lm(e.responseURL);const n=e.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=YD({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=KD(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=cm(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class wH{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=lm(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=cm(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const TH=/^[a-z][a-z0-9\-+.]+:/i;function SH(i){if(TH.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class xH{constructor(t){this.source=t,this.url=SH(t.url),We(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return We(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new CH(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new RH(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class CH{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new fh(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Aa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class RH{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const IH=1e5,qn=30,DH=.8;class kn{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#l=0;#o=0;#u=null;#c=null;#d=0;#h=0;#f=Object.create(null);#a=[];#p=null;#g=[];#m=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#A=new WeakMap;static#w=null;static#S=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#h=n.scale*(globalThis.devicePixelRatio||1),this.#d=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:a,pageX:l,pageY:u}=n.rawDims;this.#y=[1,0,0,-1,-l,u+a],this.#o=s,this.#l=a,kn.#M(),wo(e,n),this.#t.promise.finally(()=>{kn.#S.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Vn.platform;return zt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#u=this.#p.getReader(),kn.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==this.#d&&(e?.(),this.#d=s,wo(this.#c,{rotation:s})),n!==this.#h){e?.(),this.#h=n;const a={div:null,properties:null,ctx:kn.#R(this.#r)};for(const l of this.#g)a.properties=this.#m.get(l),a.div=l,this.#E(a)}}cancel(){const t=new Aa("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#a}#C(t){if(this.#n)return;this.#s.ctx??=kn.#R(this.#r);const e=this.#g,n=this.#a;for(const s of t){if(e.length>IH){jt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),s.id!==null&&this.#e.setAttribute("id",`${s.id}`),a.append(this.#e)}else s.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(s.str),this.#I(s)}}#I(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#g.push(e);const s=_t.transform(this.#y,t.transform);let a=Math.atan2(s[1],s[0]);const l=this.#f[t.fontName];l.vertical&&(a+=Math.PI/2);let u=this.#i&&l.fontSubstitution||l.fontFamily;u=kn.fontFamilyMap.get(u)||u;const h=Math.hypot(s[2],s[3]),f=h*kn.#k(u,this.#r);let p,g;a===0?(p=s[4],g=s[5]-f):(p=s[4]+f*Math.sin(a),g=s[5]-f*Math.cos(a));const v="calc(var(--scale-factor)*",b=e.style;this.#e===this.#c?(b.left=`${(100*p/this.#o).toFixed(2)}%`,b.top=`${(100*g/this.#l).toFixed(2)}%`):(b.left=`${v}${p.toFixed(2)}px)`,b.top=`${v}${g.toFixed(2)}px)`),b.fontSize=`${v}${(kn.#w*h).toFixed(2)}px)`,b.fontFamily=u,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);w!==x&&Math.max(w,x)/Math.min(w,x)>1.5&&(E=!0)}if(E&&(n.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,n),this.#s.div=e,this.#s.properties=n,this.#E(this.#s),n.hasText&&this.#e.append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#E(t){const{div:e,properties:n,ctx:s}=t,{style:a}=e;let l="";if(kn.#w>1&&(l=`scale(${1/kn.#w})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=a,{canvasWidth:h,fontSize:f}=n;kn.#x(s,f*this.#h,u);const{width:p}=s.measureText(e.textContent);p>0&&(l=`scaleX(${h*this.#h/p}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)}static cleanup(){if(!(this.#S.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#R(t=null){let e=this.#v.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#A.set(e,{size:0,family:""})}return e}static#x(t,e,n){const s=this.#A.get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)}static#M(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#k(t,e){const n=this.#b.get(t);if(n)return n;const s=this.#R(e);s.canvas.width=s.canvas.height=qn,this.#x(s,qn,t);const a=s.measureText("");let l=a.fontBoundingBoxAscent,u=Math.abs(a.fontBoundingBoxDescent);if(l){const p=l/(l+u);return this.#b.set(t,p),s.canvas.width=s.canvas.height=0,p}s.strokeStyle="red",s.clearRect(0,0,qn,qn),s.strokeText("g",0,0);let h=s.getImageData(0,0,qn,qn).data;u=0;for(let p=h.length-1-3;p>=0;p-=4)if(h[p]>0){u=Math.ceil(p/4/qn);break}s.clearRect(0,0,qn,qn),s.strokeText("A",0,qn),h=s.getImageData(0,0,qn,qn).data,l=0;for(let p=0,g=h.length;p<g;p+=4)if(h[p]>0){l=qn-Math.floor(p/4/qn);break}s.canvas.width=s.canvas.height=0;const f=l?l/(l+u):DH;return this.#b.set(t,f),f}}class ph{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(a){if(!a)return;let l=null;const u=a.name;if(u==="#text")l=a.value;else if(ph.shouldBuildText(u))a?.attributes?.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const h of a.children)s(h)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const MH=65536,PH=100,NH=5e3,kH=Cn?Yz:qz,OH=Cn?Kz:zD,LH=Cn?Xz:$z,VH=Cn?Wz:qD;function FH(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new Qb,{docId:e}=t,n=i.url?UH(i.url):null,s=i.data?jH(i.data):null,a=i.httpHeaders||null,l=i.withCredentials===!0,u=i.password??null,h=i.range instanceof ZD?i.range:null,f=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:MH;let p=i.worker instanceof Hl?i.worker:null;const g=i.verbosity,v=typeof i.docBaseUrl=="string"&&!am(i.docBaseUrl)?i.docBaseUrl:null,b=typeof i.cMapUrl=="string"?i.cMapUrl:null,E=i.cMapPacked!==!1,w=i.CMapReaderFactory||OH,x=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,C=i.StandardFontDataFactory||VH,N=i.stopAtErrors!==!0,O=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,U=i.isEvalSupported!==!1,G=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Cn,Y=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!Cn&&(Vn.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,R=typeof i.disableFontFace=="boolean"?i.disableFontFace:Cn,M=i.fontExtraProperties===!0,L=i.enableXfa===!0,V=i.ownerDocument||globalThis.document,z=i.disableRange===!0,F=i.disableStream===!0,bt=i.disableAutoFetch===!0,Bt=i.pdfBug===!0,$=i.CanvasFactory||kH,Z=i.FilterFactory||LH,ut=i.enableHWA===!0,Tt=h?h.length:i.length??NaN,Mt=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Cn&&!R,H=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:w===zD&&C===qD&&b&&x&&Ou(b,document.baseURI)&&Ou(x,document.baseURI),nt=null;wz(g);const lt={canvasFactory:new $({ownerDocument:V,enableHWA:ut}),filterFactory:new Z({docId:e,ownerDocument:V}),cMapReaderFactory:H?null:new w({baseUrl:b,isCompressed:E}),standardFontDataFactory:H?null:new C({baseUrl:x})};if(!p){const At={verbosity:g,port:Wu.workerPort};p=At.port?Hl.fromPort(At):new Hl(At),t._worker=p}const ht={docId:e,apiVersion:"4.10.38",data:s,password:u,disableAutoFetch:bt,rangeChunkSize:f,length:Tt,docBaseUrl:v,enableXfa:L,evaluatorOptions:{maxImageSize:O,disableFontFace:R,ignoreErrors:N,isEvalSupported:U,isOffscreenCanvasSupported:G,isImageDecoderSupported:Y,canvasMaxAreaInBytes:D,fontExtraProperties:M,useSystemFonts:Mt,cMapUrl:H?b:null,standardFontDataUrl:H?x:null}},St={disableFontFace:R,fontExtraProperties:M,ownerDocument:V,pdfBug:Bt,styleElement:nt,loadingParams:{disableAutoFetch:bt,enableXfa:L}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const At=p.messageHandler.sendWithPromise("GetDocRequest",ht,s?[s.buffer]:null);let vt;if(h)vt=new fH(h,{disableRange:z,disableStream:F});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let pe;if(Cn)if(Ou(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");pe=tx}else pe=xH;else pe=Ou(n)?tx:AH;vt=new pe({url:n,length:Tt,httpHeaders:a,withCredentials:l,rangeChunkSize:f,disableRange:z,disableStream:F})}return At.then(pe=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const he=new Lu(e,pe,p.port),Us=new GH(he,t,vt,St,lt);t._transport=Us,he.send("Ready",null)})}).catch(t._capability.reject),t}function UH(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Cn&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function jH(i){if(Cn&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return sm(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ex(i){return typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0}class Qb{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Qb.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}}class ZD{constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class BH{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class zH{#t=null;#e=!1;constructor(t,e,n,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new B1:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new tM,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new Nh({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=ia.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:g=!1}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(n,s,p,g),{renderingIntent:b,cacheKey:E}=v;this.#e=!1,this.#i(),u||=this._transport.getOptionalContentConfig(b);let w=this._intentStates.get(E);w||(w=Object.create(null),this._intentStates.set(E,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const x=!!(b&ri.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const C=U=>{w.renderTasks.delete(N),(this._maybeCleanupAfterRender||x)&&(this.#e=!0),this.#n(!x),U?(N.capability.reject(U),this._abortOperatorList({intentState:w,reason:U instanceof Error?U:new Error(U)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new Nl({callback:C,params:{canvasContext:t,viewport:e,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:f});(w.renderTasks||=new Set).add(N);const O=N.task;return Promise.all([w.displayReadyCapability.promise,u]).then(([U,G])=>{if(this.destroyed){C();return}if(this._stats?.time("Rendering"),!(G.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:U,optionalContentConfig:G}),N.operatorListChanged()}).catch(C),O}getOperatorList({intent:t="display",annotationMode:e=ia.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,s,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ph.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function a(){l.read().then(function({value:h,done:f}){if(f){n(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),a()},s)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(t)}cleanup(t=!1){this.#e=!0;const e=this.#n(!1);return t&&e&&(this._stats&&=new B1),e}#n(t=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},NH),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:a,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:s},l).getReader(),f=this._intentStates.get(e);f.streamReader=h;const p=()=>{h.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#n(!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Hb){let s=PH;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Aa(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}class HH{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[s]of this.#t)s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){jt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);s=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}this.#t.set(e,s)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}var Cp,po,mo,Gl,Yf,ql,Kf;const Ee=class Ee{constructor({name:t=null,port:e=null,verbosity:n=Tz()}={}){El(this,Gl);if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(zi(Ee,mo)?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(zi(Ee,mo)||vu(Ee,mo,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Lu("main","worker",t),this._messageHandler.on("ready",function(){}),df(this,Gl,Yf).call(this)}_initialize(){if(zi(Ee,po)||zi(Ee,ql,Kf)){this._setupFakeWorker();return}let{workerSrc:t}=Ee;try{Ee._isSameOrigin(window.location.href,t)||(t=Ee._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Lu("main","worker",e),s=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:a.signal}),n.on("test",u=>{if(a.abort(),this.destroyed||!u){s();return}this._messageHandler=n,this._port=e,this._webWorker=e,df(this,Gl,Yf).call(this)}),n.on("ready",u=>{if(a.abort(),this.destroyed){s();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{im("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){zi(Ee,po)||(jt("Setting up fake worker."),vu(Ee,po,!0)),Ee._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new HH;this._port=e;const n=`fake${Tw(Ee,Cp)._++}`,s=new Lu(n+"_worker",n,e);t.setup(s,e),this._messageHandler=new Lu(n,n+"_worker",e),df(this,Gl,Yf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,zi(Ee,mo)?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=zi(this,mo)?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ee(t)}static get workerSrc(){if(Wu.workerSrc)return Wu.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return zt(this,"_setupFakeWorkerGlobal",(async()=>zi(this,ql,Kf)?zi(this,ql,Kf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Cp=new WeakMap,po=new WeakMap,mo=new WeakMap,Gl=new WeakSet,Yf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},ql=new WeakSet,Kf=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},El(Ee,ql),El(Ee,Cp,0),El(Ee,po,!1),El(Ee,mo),Cn&&(vu(Ee,po,!0),Wu.workerSrc||="./pdf.worker.mjs"),Ee._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(e,n);return n.origin===s.origin},Ee._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Hl=Ee;class GH{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,e,n,s,a){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new tM,this.fontLoader=new Hz({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,e=null){const n=this.#t.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,s),s}get annotationStorage(){return zt(this,"annotationStorage",new Yb)}getRenderingIntent(t,e=ia.ENABLE,n=null,s=!1,a=!1){let l=ri.DISPLAY,u=e_;switch(t){case"any":l=ri.ANY;break;case"display":break;case"print":l=ri.PRINT;break;default:jt(`getRenderingIntent - invalid intent: ${t}`)}const h=l&ri.PRINT&&n instanceof UD?n:this.annotationStorage;switch(e){case ia.DISABLE:l+=ri.ANNOTATIONS_DISABLE;break;case ia.ENABLE:break;case ia.ENABLE_FORMS:l+=ri.ANNOTATIONS_FORMS;break;case ia.ENABLE_STORAGE:l+=ri.ANNOTATIONS_STORAGE,u=h.serializable;break;default:jt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(l+=ri.IS_EDITING),a&&(l+=ri.OPLIST);const{ids:f,hash:p}=h.modifiedIds,g=[l,u.hash,p];return{renderingIntent:l,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),kn.cleanup(),this._networkStream?.cancelAllRequests(new Aa("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{We(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){s.close();return}We(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:l}=this._fullReader;return(!s||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,s)=>{We(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:l,done:u}){if(u){s.close();return}We(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{a.cancel(l),s.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new BH(n,this))}),t.on("DocException",n=>{e._capability.reject($n(n))}),t.on("PasswordRequest",n=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw $n(n);const s=a=>{a instanceof Error?this.#r.reject(a):this.#r.resolve({password:a})};e.onPassword(s,n.code)}catch(s){this.#r.reject(s)}return this.#r.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:l,fontExtraProperties:u,pdfBug:h}=this._params;if("error"in a){const v=a.error;jt(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const f=h&&globalThis.FontInspector?.enabled?(v,b)=>globalThis.FontInspector.fontAdded(v,b):null,p=new Gz(a,{disableFontFace:l,fontExtraProperties:u,inspectFont:f});this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u&&p.data&&(p.data=null),this.commonObjs.resolve(n,p)});break;case"CopyLocalImage":const{imageRef:g}=a;We(g,"The imageRef must be defined.");for(const v of this.#e.values())for(const[,b]of v.objs)if(b?.ref===g)return b.dataLen?(this.commonObjs.resolve(n,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,a,l])=>{if(this.destroyed)return;const u=this.#e.get(s);if(!u.objs.has(n)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(a){case"Image":u.objs.resolve(n,l),l?.dataLen>_z&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&jt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#n.get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#i.set(a.refStr,t);const l=new zH(e,a,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#n.set(e,s),s}getPageIndex(t){return ex(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new dH(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>({info:s[0],metadata:s[1]?new uH(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),kn.cleanup()}}cachedPageNumber(t){if(!ex(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}const xu=Symbol("INITIAL_DATA");class tM{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:xu}}get(t,e=null){if(e){const s=this.#e(t);return s.promise.then(()=>e(s.data)),null}const n=this.#t[t];if(!n||n.data===xu)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==xu}delete(t){const e=this.#t[t];return!e||e.data===xu?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==xu&&(yield[t,e])}}}class qH{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Nl{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:v=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new qH(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Nl.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Nl.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:a,background:l}=this.params;this.gfx=new zl(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Nl.#e.delete(this._canvas),this.callback(t||new Hb(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Nl.#e.delete(this._canvas),this.callback())))}}const $H="4.10.38",XH="f9bea397f";function nx(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Cu(i){return Math.max(0,Math.min(255,255*i))}class ix{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Cu(t),[t,t,t]}static G_HTML([t]){const e=nx(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Cu)}static RGB_HTML(t){return`#${t.map(nx).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[Cu(1-Math.min(1,t+s)),Cu(1-Math.min(1,n+s)),Cu(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,a=1-e,l=1-n,u=Math.min(s,a,l);return["CMYK",s,a,l,u]}}class YH{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){fe("Abstract method `_createSVG` called.")}}class Jb extends YH{_createSVG(t){return document.createElementNS(rr,t)}}class eM{static setupStorage(t,e,n,s,a){const l=s.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",u=>{s.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:a}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,a=t.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:a,linkService:n});const u=a!=="richText",h=t.div;if(h.append(l),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=g}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);l.append(g),u&&ph.shouldBuildText(s.name)&&f.push(g)}return{textDivs:f}}const p=[[s,-1,l]];for(;p.length>0;){const[g,v,b]=p.at(-1);if(v+1===g.children.length){p.pop();continue}const E=g.children[++p.at(-1)[1]];if(E===null)continue;const{name:w}=E;if(w==="#text"){const C=document.createTextNode(E.value);f.push(C),b.append(C);continue}const x=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,w):document.createElement(w);if(b.append(x),E.attributes&&this.setAttributes({html:x,element:E,storage:e,intent:a,linkService:n}),E.children?.length>0)p.push([E,-1,x]);else if(E.value){const C=document.createTextNode(E.value);u&&ph.shouldBuildText(w)&&f.push(C),x.append(C)}}for(const g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Oh=1e3,KH=9,To=new WeakSet;function ha(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class WH{static create(t){switch(t.data.annotationType){case tn.LINK:return new nM(t);case tn.TEXT:return new QH(t);case tn.WIDGET:switch(t.data.fieldType){case"Tx":return new JH(t);case"Btn":return t.data.radioButton?new iM(t):t.data.checkBox?new t9(t):new e9(t);case"Ch":return new n9(t);case"Sig":return new ZH(t)}return new Mo(t);case tn.POPUP:return new i_(t);case tn.FREETEXT:return new sM(t);case tn.LINE:return new s9(t);case tn.SQUARE:return new r9(t);case tn.CIRCLE:return new a9(t);case tn.POLYLINE:return new rM(t);case tn.CARET:return new l9(t);case tn.INK:return new Zb(t);case tn.POLYGON:return new o9(t);case tn.HIGHLIGHT:return new aM(t);case tn.UNDERLINE:return new c9(t);case tn.SQUIGGLY:return new u9(t);case tn.STRIKEOUT:return new h9(t);case tn.STAMP:return new oM(t);case tn.FILEATTACHMENT:return new d9(t);default:return new Le(t)}}}class Le{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t?.str||e?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Le._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#i(e),this.#n?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:u,pageY:h}}}}=this;n?.splice(0,4,...t);const{width:f,height:p}=ha(t);e.left=`${100*(t[0]-u)/a}%`,e.top=`${100*(l-t[3]+h)/l}%`,s===0?(e.width=`${100*f/a}%`,e.height=`${100*p/l}%`):this.setRotation(s)}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof Mo||(a.tabIndex=Oh);const{style:l}=a;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof i_){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,a),a}const{width:u,height:h}=ha(e.rect);if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(w>0||x>0){const N=`calc(${w}px * var(--scale-factor)) / calc(${x}px * var(--scale-factor))`;l.borderRadius=N}else if(this instanceof iM){const N=`calc(${u}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`;l.borderRadius=N}switch(e.borderStyle.style){case Tu.SOLID:l.borderStyle="solid";break;case Tu.DASHED:l.borderStyle="dashed";break;case Tu.BEVELED:jt("Unimplemented border style: beveled");break;case Tu.INSET:jt("Unimplemented border style: inset");break;case Tu.UNDERLINE:l.borderBottomStyle="solid";break}const C=e.borderColor||null;C?(this.#e=!0,l.borderColor=_t.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):l.borderWidth=0}const f=_t.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:g,pageX:v,pageY:b}=s.rawDims;l.left=`${100*(f[0]-v)/p}%`,l.top=`${100*(f[1]-b)/g}%`;const{rotation:E}=e;return e.hasOwnCanvas||E===0?(l.width=`${100*u/p}%`,l.height=`${100*h/g}%`):this.setRotation(E,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:a,height:l}=ha(this.data.rect);let u,h;t%180===0?(u=100*a/n,h=100*l/s):(u=100*l/n,h=100*a/s),e.style.width=`${u}%`,e.style.height=`${h}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const a=s.detail[e],l=a[0],u=a.slice(1);s.target.style[n]=ix[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:ix[`${l}_rgb`](u)})};return zt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail))(t[s]||n[s])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,a]of Object.entries(e)){const l=n[s];if(l){const u={detail:{[s]:a},target:t};l(u),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,a]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,x,C,N]=t.subarray(2,6);if(s===w&&a===x&&e===C&&n===N)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:w,borderWidth:x}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const h=s-e,f=a-n,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=p.createElement("defs");g.append(v);const b=p.createElement("clipPath"),E=`clippath_${this.data.id}`;b.setAttribute("id",E),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let w=2,x=t.length;w<x;w+=8){const C=t[w],N=t[w+1],O=t[w+2],U=t[w+3],G=p.createElement("rect"),Y=(O-e)/h,D=(a-N)/f,R=(C-O)/h,M=(N-U)/f;G.setAttribute("x",Y),G.setAttribute("y",D),G.setAttribute("width",R),G.setAttribute("height",M),b.append(G),u?.push(`<rect vector-effect="non-scaling-stroke" x="${Y}" y="${D}" width="${R}" height="${M}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${E})`}_createPopup(){const{data:t}=this,e=this.#n=new i_({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:a,id:l,exportValues:u}of s){if(a===-1||l===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!To.has(f)){jt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:a}=s,l=s.getAttribute("data-element-id");l!==e&&To.has(s)&&n.push({id:l,exportValue:a,domElement:s})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}}class nM extends Le{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action),s=!0):t.attachment?(this.#e(n,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(this.#n(n,t.setOCGState),s=!0):t.dest?(this._bindLink(n,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,n=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,n),!1),this.#t()}#n(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const a=n.get(s);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){jt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:s,refs:a,include:l}=e,u=[];if(s.length!==0||a.length!==0){const p=new Set(a);for(const g of s){const v=this._fieldObjects[g]||[];for(const{id:b}of v)p.add(b)}for(const g of Object.values(this._fieldObjects))for(const v of g)p.has(v.id)===l&&u.push(v)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,f=[];for(const p of u){const{id:g}=p;switch(f.push(g),p.type){case"text":{const b=p.defaultValue||"";h.setValue(g,{value:b});break}case"checkbox":case"radiobutton":{const b=p.defaultValue===p.exportValues;h.setValue(g,{value:b});break}case"combobox":case"listbox":{const b=p.defaultValue||"";h.setValue(g,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!To.has(v)){jt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class QH extends Le{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Mo extends Le{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Vn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,a){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l)}})})}_setEventListeners(t,e,n,s){for(const[a,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,l,s),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":_t.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||KH,a=t.style;let l;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(Yy*s))||1,g=f/p;l=Math.min(s,h(g/Yy))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(s,h(f/Yy))}a.fontSize=`calc(${l}px * var(--scale-factor))`,a.color=_t.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class JH extends Mo{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[s]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=t.getValue(e,{value:this.data.fieldValue});let a=s.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=s.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",u??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),To.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Oh,this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",p=>{t.setValue(e,{value:p.target.value}),this.setPropertyOnSiblings(n,"value",p.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";n.value=h.userValue=g,h.formattedValue=null});let f=p=>{const{formattedValue:g}=h;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{if(h.focused)return;const{target:v}=g;h.userValue&&(v.value=h.userValue),h.lastCommittedValue=v.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const v={value(b){h.userValue=b.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),b.target.value=h.userValue},formattedValue(b){const{formattedValue:E}=b.detail;h.formattedValue=E,E!=null&&b.target!==document.activeElement&&(b.target.value=E),t.setValue(e,{formattedValue:E})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{const{charLimit:E}=b.detail,{target:w}=b;if(E===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",E);let x=h.userValue;!x||x.length<=E||(x=x.slice(0,E),w.value=h.userValue=x,t.setValue(e,{value:x}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(v,g)}),n.addEventListener("keydown",g=>{h.commitKey=1;let v=-1;if(g.key==="Escape"?v=0:g.key==="Enter"&&!this.data.multiLine?v=2:g.key==="Tab"&&(h.commitKey=3),v===-1)return;const{value:b}=g.target;h.lastCommittedValue!==b&&(h.lastCommittedValue=b,h.userValue=b,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:v,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,n.addEventListener("blur",g=>{if(!h.focused||!g.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{value:v}=g.target;h.userValue=v,h.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),p(g)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",g=>{h.lastCommittedValue=null;const{data:v,target:b}=g,{value:E,selectionStart:w,selectionEnd:x}=b;let C=w,N=x;switch(g.inputType){case"deleteWordBackward":{const O=E.substring(0,w).match(/\w*[^\w]*$/);O&&(C-=O[0].length);break}case"deleteWordForward":{const O=E.substring(w).match(/^[^\w]*\w*/);O&&(N+=O[0].length);break}case"deleteContentBackward":w===x&&(C-=1);break;case"deleteContentForward":w===x&&(N+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:v||"",willCommit:!1,selStart:C,selEnd:N}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class ZH extends Mo{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class t9 extends Mo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return To.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=Oh,a.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n)){const p=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class iM extends Mo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(To.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=Oh,a.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=l===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=p&&g.id===n;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class e9 extends nM{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class n9 extends Mo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");To.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Oh;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,n.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),a=!1),s.append(g)}let l=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),s.prepend(p),l=()=>{p.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const u=p=>{const g=p?"value":"textContent",{options:v,multiple:b}=s;return b?Array.prototype.filter.call(v,E=>E.selected).map(E=>E[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let h=u(!1);const f=p=>{const g=p.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",p=>{const g={value(v){l?.();const b=v.detail.value,E=new Set(Array.isArray(b)?b:[b]);for(const w of s.options)w.selected=E.has(w.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(v){s.multiple=!0},remove(v){const b=s.options,E=v.detail.remove;b[E].selected=!1,s.remove(E),b.length>0&&Array.prototype.findIndex.call(b,x=>x.selected)===-1&&(b[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},clear(v){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(v){const{index:b,displayValue:E,exportValue:w}=v.detail.insert,x=s.children[b],C=document.createElement("option");C.textContent=E,C.value=w,x?x.before(C):s.append(C),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},items(v){const{items:b}=v.detail;for(;s.length!==0;)s.remove(0);for(const E of b){const{displayValue:w,exportValue:x}=E,C=document.createElement("option");C.textContent=w,C.value=x,s.append(C)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},indices(v){const b=new Set(v.detail.indices);for(const E of v.target.options)E.selected=b.has(E.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,p)}),s.addEventListener("input",p=>{const g=u(!0),v=u(!1);t.setValue(e,{value:g}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):s.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class i_ extends Le{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Le._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new i9({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${zb}${n}`).join(",")),this.container}}class i9{#t=this.#C.bind(this);#e=this.#x.bind(this);#n=this.#R.bind(this);#i=this.#E.bind(this);#r=null;#s=null;#l=null;#o=null;#u=null;#c=null;#d=null;#h=!1;#f=null;#a=null;#p=null;#g=null;#m=null;#y=null;#b=!1;constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:a,contentsObj:l,richText:u,parent:h,rect:f,parentRect:p,open:g}){this.#s=t,this.#m=s,this.#l=l,this.#g=u,this.#c=h,this.#r=e,this.#p=f,this.#d=p,this.#u=n,this.#o=VD.toDateObject(a),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",this.#i),v.addEventListener("mouseenter",this.#n),v.addEventListener("mouseleave",this.#e),v.classList.add("popupTriggerArea");for(const v of n)v.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,g&&this.#E()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#r){const a=t.style.outlineColor=_t.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:t.style.backgroundColor=_t.makeHexColor(...this.#r.map(u=>Math.floor(.7*(255-u)+u)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=this.#m,t.append(e),this.#o){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),e.append(a)}const s=this.#v;if(s)eM.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(this.#l);t.append(a)}this.#s.append(t)}get#v(){const t=this.#g,e=this.#l;return t?.str&&(!e?.str||e.str===t.str)&&this.#g.html||null}get#A(){return this.#v?.attributes?.style?.fontSize||0}get#w(){return this.#v?.attributes?.style?.color||null}#S(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#w,fontSize:this.#A?`calc(${this.#A}px * var(--scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:s});return n}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let a=0,l=s.length;a<l;++a){const u=s[a];n.append(document.createTextNode(u)),a<l-1&&n.append(document.createElement("br"))}return n}#C(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#h)&&this.#E()}updateEdited({rect:t,popupContent:e}){this.#y||={contentsObj:this.#l,richText:this.#g},t&&(this.#a=null),e&&(this.#g=this.#S(e),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#l,richText:this.#g}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#a=null)}#I(){if(this.#a!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:a}}}=this.#c;let l=!!this.#d,u=l?this.#d:this.#p;for(const E of this.#u)if(!u||_t.intersect(E.data.rect,u)!==null){u=E.data.rect,l=!0;break}const h=_t.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,g=h[0]+p,v=h[1];this.#a=[100*(g-s)/e,100*(v-a)/n];const{style:b}=this.#s;b.left=`${this.#a[0]}%`,b.top=`${this.#a[1]}%`}#E(){this.#h=!this.#h,this.#h?(this.#R(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#x(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#R(){this.#f||this.render(),this.isVisible?this.#h&&this.#s.classList.add("focused"):(this.#I(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#x(){this.#s.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#s.hidden=!0)}maybeShow(){this.#b&&(this.#f||this.#R(),this.#b=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class sM extends Le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ut.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class s9 extends Le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:n}=ha(t.rect),s=this.svgFactory.create(e,n,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class r9 extends Le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:n}=ha(t.rect),s=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",e-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class a9 extends Le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:n}=ha(t.rect),s=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class rM extends Le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:s}}=this;if(!e)return this.container;const{width:a,height:l}=ha(t),u=this.svgFactory.create(a,l,!0);let h=[];for(let p=0,g=e.length;p<g;p+=2){const v=e[p]-t[0],b=t[3]-e[p+1];h.push(`${v},${b}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class o9 extends rM{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class l9 extends Le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Zb extends Le{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ut.HIGHLIGHT:Ut.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:s,popupRef:a}}=this,{transform:l,width:u,height:h}=this.#n(e,t),f=this.svgFactory.create(u,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let g=0,v=n.length;g<v;g++){const b=this.svgFactory.createElement(this.svgElementName);this.#e.push(b),b.setAttribute("points",n[g].join(",")),p.append(b)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:s}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),n)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",n[l].join(","));if(s){const{transform:l,width:u,height:h}=this.#n(this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class aM extends Le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ut.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class c9 extends Le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class u9 extends Le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class h9 extends Le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class oM extends Le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ut.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class d9 extends Le{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:s}=Vn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class f9{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:l,structTreeLayer:u}){this.div=t,this.#t=e,this.#e=n,this.#i=u||null,this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#n.size>0}async#r(t,e){const n=t.firstChild||t,s=n.id=`${zb}${e}`,a=await this.#i?.getAriaAttributes(s);if(a)for(const[l,u]of a)n.setAttribute(l,u);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,n,!1)}async render(t){const{annotations:e}=t,n=this.div;wo(n,this.viewport);const s=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Jb,annotationStorage:t.annotationStorage||new Yb,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===tn.POPUP;if(u){const p=s.get(l.id);if(!p)continue;a.elements=p}else{const{width:p,height:g}=ha(l.rect);if(p<=0||g<=0)continue}a.data=l;const h=WH.create(a);if(!h.isRenderable)continue;if(!u&&l.popupRef){const p=s.get(l.popupRef);p?p.push(h):s.set(l.popupRef,[h])}const f=h.render();l.hidden&&(f.style.visibility="hidden"),await this.#r(f,l.id),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#s()}update({viewport:t}){const e=this.div;this.viewport=t,wo(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}}const If=/\r\n?|\n/g;class en extends Rt{#t;#e="";#n=`${this.id}-editor`;#i=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=en.prototype,e=a=>a.isEmpty(),n=Ea.TRANSLATE_SMALL,s=Ea.TRANSLATE_BIG;return zt(this,"_keyboardManager",new kh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=Ut.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||en._defaultColor||Rt._defaultLineColor,this.#r=t.fontSize||en._defaultFontSize}static initialize(t,e){Rt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Qt.FREETEXT_SIZE:en._defaultFontSize=e;break;case Qt.FREETEXT_COLOR:en._defaultColor=e;break}}updateParams(t,e){switch(t){case Qt.FREETEXT_SIZE:this.#s(e);break;case Qt.FREETEXT_COLOR:this.#l(e);break}}static get defaultPropertiesToUpdate(){return[[Qt.FREETEXT_SIZE,en._defaultFontSize],[Qt.FREETEXT_COLOR,en._defaultColor||Rt._defaultLineColor]]}get propertiesToUpdate(){return[[Qt.FREETEXT_SIZE,this.#r],[Qt.FREETEXT_COLOR,this.#t]]}#s(t){const e=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-this.#r)*this.parentScale),this.#r=s,this.#u()},n=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(t){const e=s=>{this.#t=this.editorDiv.style.color=s},n=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-en._internalPadding*t,-(en._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Ut.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(en.#c(n)),e=n);return t.join(`
`)}#u(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,l=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#o().trimEnd();if(t===e)return;const n=s=>{if(this.#e=s,!s){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){en._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#r}px * var(--scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),xp(this,this.div,["dblclick","keydown"]),this.width){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,p]=this.pageDimensions,[g,v]=this.pageTranslation;let b,E;switch(this.rotation){case 0:b=t+(l[0]-g)/f,E=e+this.height-(l[1]-v)/p;break;case 90:b=t+(l[0]-g)/f,E=e-(l[1]-v)/p,[u,h]=[h,-u];break;case 180:b=t-this.width+(l[0]-g)/f,E=e-(l[1]-v)/p,[u,h]=[-u,-h];break;case 270:b=t+(l[0]-g-this.height*p)/f,E=e+(l[1]-v-this.width*f)/p,[u,h]=[-h,u];break}this.setAt(b*s,E*a,u,h)}else this.setAt(t*s,e*a,this.width*s,this.height*a);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(If,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const s=en.#f(e.getData("text")||"").replaceAll(If,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!s.includes(`
`)){l.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:h}=l,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const b=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(If,"")),b!==this.editorDiv){let E=f;for(const w of this.editorDiv.childNodes){if(w===b){E=p;continue}E.push(en.#c(w))}}f.push(u.nodeValue.slice(0,h).replaceAll(If,""))}else if(u===this.editorDiv){let b=f,E=0;for(const w of this.editorDiv.childNodes)E++===h&&(b=p),b.push(en.#c(w))}this.#e=`${f.join(`
`)}${s}${p.join(`
`)}`,this.#d();const g=new Range;let v=f.reduce((b,E)=>b+E.length,0);for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const E=b.nodeValue.length;if(v<=E){g.setStart(b,v),g.setEnd(b,v);break}v-=E}a.removeAllRanges(),a.addRange(g)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#h(){return this.#e.replaceAll(""," ")}static#f(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,n){let s=null;if(t instanceof sM){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:f,id:p,popupRef:g},textContent:v,textPosition:b,parent:{page:{pageNumber:E}}}=t;if(!v||v.length===0)return null;s=t={annotationType:Ut.FREETEXT,color:Array.from(u),fontSize:l,value:v.join(`
`),position:b,pageIndex:E-1,rect:h.slice(0),rotation:f,id:p,deleted:!1,popupRef:g}}const a=await super.deserialize(t,e,n);return a.#r=t.fontSize,a.#t=_t.makeHexColor(...t.color),a.#e=en.#f(t.value),a.annotationElementId=t.id||null,a._initialData=s,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=en._internalPadding*this.parentScale,n=this.getRect(e,e),s=Rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:Ut.FREETEXT,color:s,fontSize:this.#r,value:this.#h(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!this.#a(a)?null:(a.id=this.annotationElementId,a)}#a(t){const{value:e,fontSize:n,color:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,u)=>l!==s[u])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:n}=e;n.fontSize=`calc(${this.#r}px * var(--scale-factor))`,n.color=this.#t,e.replaceChildren();for(const a of this.#e.split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),e.append(l)}const s=en._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class mt{static PRECISION=1e-4;toSVGPath(){fe("Abstract method `toSVGPath` must be implemented.")}get box(){fe("Abstract getter `box` must be implemented.")}serialize(t,e){fe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,a,l){l||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u]*s,l[u+1]=n+t[u+1]*a;return l}static _rescaleAndSwap(t,e,n,s,a,l){l||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u+1]*s,l[u+1]=n+t[u]*a;return l}static _translate(t,e,n,s){s||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)s[a]=e+t[a],s[a+1]=n+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,a){switch(a){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,a,l){return[(t+5*n)/6,(e+5*s)/6,(5*n+a)/6,(5*s+l)/6,(n+a)/2,(s+l)/2]}}class fo{#t;#e=[];#n;#i;#r=[];#s=new Float32Array(18);#l;#o;#u;#c;#d;#h;#f=[];static#a=8;static#p=2;static#g=fo.#a+fo.#p;constructor({x:t,y:e},n,s,a,l,u=0){this.#t=n,this.#h=a*s,this.#i=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=u,this.#c=fo.#a*s,this.#u=fo.#g*s,this.#d=s,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[n,s,a,l]=this.#t;return[(this.#l+(t[0]-e[0])/2-n)/a,(this.#o+(t[1]-e[1])/2-s)/l,(this.#l+(e[0]-t[0])/2-n)/a,(this.#o+(e[1]-t[1])/2-s)/l]}add({x:t,y:e}){this.#l=t,this.#o=e;const[n,s,a,l]=this.#t;let[u,h,f,p]=this.#s.subarray(8,12);const g=t-f,v=e-p,b=Math.hypot(g,v);if(b<this.#u)return!1;const E=b-this.#c,w=E/b,x=w*g,C=w*v;let N=u,O=h;u=f,h=p,f+=x,p+=C,this.#f?.push(t,e);const U=-C/E,G=x/E,Y=U*this.#h,D=G*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([f+Y,p+D],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([f-Y,p-D],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([u+Y,h+D],2),this.#r.push(NaN,NaN,NaN,NaN,(u+Y-n)/a,(h+D-s)/l),this.#s.set([u-Y,h-D],14),this.#e.push(NaN,NaN,NaN,NaN,(u-Y-n)/a,(h-D-s)/l)),this.#s.set([N,O,u,h,f,p],6),!this.isEmpty()):(this.#s.set([N,O,u,h,f,p],6),Math.abs(Math.atan2(O-h,N-u)-Math.atan2(C,x))<Math.PI/2?([u,h,f,p]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-n)/a,((h+p)/2-s)/l),[u,h,N,O]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((N+u)/2-n)/a,((O+h)/2-s)/l),!0):([N,O,u,h,f,p]=this.#s.subarray(0,6),this.#r.push(((N+5*u)/6-n)/a,((O+5*h)/6-s)/l,((5*u+f)/6-n)/a,((5*h+p)/6-s)/l,((u+f)/2-n)/a,((h+p)/2-s)/l),[f,p,u,h,N,O]=this.#s.subarray(12,18),this.#e.push(((N+5*u)/6-n)/a,((O+5*h)/6-s)/l,((5*u+f)/6-n)/a,((5*h+p)/6-s)/l,((u+f)/2-n)/a,((h+p)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);this.#v(n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return this.#b(n),n.join(" ")}#y(){const[t,e,n,s]=this.#t,[a,l,u,h]=this.#m();return`M${(this.#s[2]-t)/n} ${(this.#s[3]-e)/s} L${(this.#s[4]-t)/n} ${(this.#s[5]-e)/s} L${a} ${l} L${u} ${h} L${(this.#s[16]-t)/n} ${(this.#s[17]-e)/s} L${(this.#s[14]-t)/n} ${(this.#s[15]-e)/s} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,n,s,a]=this.#t,l=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[h,f,p,g]=this.#m();t.push(`L${(l[0]-e)/s} ${(l[1]-n)/a} L${h} ${f} L${p} ${g} L${(u[0]-e)/s} ${(u[1]-n)/a}`)}newFreeDrawOutline(t,e,n,s,a,l){return new lM(t,e,n,s,a,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#s,[s,a,l,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let g=0,v=h.length-2;g<v;g+=2)h[g]=(this.#f[g]-s)/l,h[g+1]=(this.#f[g+1]-a)/u;if(h[h.length-2]=(this.#l-s)/l,h[h.length-1]=(this.#o-a)/u,isNaN(n[6])&&!this.isEmpty())return this.#A(h);const f=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let g=0;g<p;g+=2){if(isNaN(t[g])){f[g]=f[g+1]=NaN;continue}f[g]=t[g],f[g+1]=t[g+1]}p=this.#S(f,p);for(let g=e.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(e[g+v])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[g+v],f[p+1]=e[g+v+1],p+=2}return this.#w(f,p),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#n,this.#i)}#A(t){const e=this.#s,[n,s,a,l]=this.#t,[u,h,f,p]=this.#m(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-s)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-s)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-s)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-s)/l],0),this.newFreeDrawOutline(g,t,this.#t,this.#d,this.#n,this.#i)}#w(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#S(t,e){const n=this.#s.subarray(4,6),s=this.#s.subarray(16,18),[a,l,u,h]=this.#t,[f,p,g,v]=this.#m();return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/u,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(s[0]-a)/u,(s[1]-l)/h],e),e+=24}}class lM extends mt{#t;#e=new Float32Array(4);#n;#i;#r;#s;#l;constructor(t,e,n,s,a,l){super(),this.#l=t,this.#r=e,this.#t=n,this.#s=s,this.#n=a,this.#i=l,this.lastPoint=[NaN,NaN],this.#o(l);const[u,h,f,p]=this.#e;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-u)/f,t[g+1]=(t[g+1]-h)/p;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-u)/f,e[g+1]=(e[g+1]-h)/p}toSVGPath(){const t=[`M${this.#l[4]} ${this.#l[5]}`];for(let e=6,n=this.#l.length;e<n;e+=6){if(isNaN(this.#l[e])){t.push(`L${this.#l[e+4]} ${this.#l[e+5]}`);continue}t.push(`C${this.#l[e]} ${this.#l[e+1]} ${this.#l[e+2]} ${this.#l[e+3]} ${this.#l[e+4]} ${this.#l[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,s],a){const l=n-t,u=s-e;let h,f;switch(a){case 0:h=mt._rescale(this.#l,t,s,l,-u),f=mt._rescale(this.#r,t,s,l,-u);break;case 90:h=mt._rescaleAndSwap(this.#l,t,e,l,u),f=mt._rescaleAndSwap(this.#r,t,e,l,u);break;case 180:h=mt._rescale(this.#l,n,e,-l,u),f=mt._rescale(this.#r,n,e,-l,u);break;case 270:h=mt._rescaleAndSwap(this.#l,n,s,-l,-u),f=mt._rescaleAndSwap(this.#r,n,s,-l,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const e=this.#l;let n=e[4],s=e[5],a=n,l=s,u=n,h=s,f=n,p=s;const g=t?Math.max:Math.min;for(let b=6,E=e.length;b<E;b+=6){if(isNaN(e[b]))a=Math.min(a,e[b+4]),l=Math.min(l,e[b+5]),u=Math.max(u,e[b+4]),h=Math.max(h,e[b+5]),p<e[b+5]?(f=e[b+4],p=e[b+5]):p===e[b+5]&&(f=g(f,e[b+4]));else{const w=_t.bezierBoundingBox(n,s,...e.slice(b,b+6));a=Math.min(a,w[0]),l=Math.min(l,w[1]),u=Math.max(u,w[2]),h=Math.max(h,w[3]),p<w[3]?(f=w[2],p=w[3]):p===w[3]&&(f=g(f,w[2]))}n=e[b+4],s=e[b+5]}const v=this.#e;v[0]=a-this.#n,v[1]=l-this.#n,v[2]=u-a+2*this.#n,v[3]=h-l+2*this.#n,this.lastPoint=[f,p]}get box(){return this.#e}newOutliner(t,e,n,s,a,l=0){return new fo(t,e,n,s,a,l)}getNewOutline(t,e){const[n,s,a,l]=this.#e,[u,h,f,p]=this.#t,g=a*f,v=l*p,b=n*f+u,E=s*p+h,w=this.newOutliner({x:this.#r[0]*g+b,y:this.#r[1]*v+E},this.#t,this.#s,t,this.#i,e??this.#n);for(let x=2;x<this.#r.length;x+=2)w.add({x:this.#r[x]*g+b,y:this.#r[x+1]*v+E});return w.getOutlines()}}class s_{#t;#e;#n=[];#i=[];constructor(t,e=0,n=0,s=!0){let a=1/0,l=-1/0,u=1/0,h=-1/0;const f=10**-4;for(const{x,y:C,width:N,height:O}of t){const U=Math.floor((x-e)/f)*f,G=Math.ceil((x+N+e)/f)*f,Y=Math.floor((C-e)/f)*f,D=Math.ceil((C+O+e)/f)*f,R=[U,Y,D,!0],M=[G,Y,D,!1];this.#n.push(R,M),a=Math.min(a,U),l=Math.max(l,G),u=Math.min(u,Y),h=Math.max(h,D)}const p=l-a+2*n,g=h-u+2*n,v=a-n,b=u-n,E=this.#n.at(s?-1:-2),w=[E[0],E[2]];for(const x of this.#n){const[C,N,O]=x;x[0]=(C-v)/p,x[1]=(N-b)/g,x[2]=(O-b)/g}this.#t=new Float32Array([v,b,p,g]),this.#e=w}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#u(e)),this.#l(e)):(this.#o(e),t.push(...this.#u(e)));return this.#r(t)}#r(t){const e=[],n=new Set;for(const l of t){const[u,h,f]=l;e.push([u,h,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const h=e[l][2],f=e[l+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const s=[];let a;for(;n.size>0;){const l=n.values().next().value;let[u,h,f,p,g]=l;n.delete(l);let v=u,b=h;for(a=[u,f],s.push(a);;){let E;if(n.has(p))E=p;else if(n.has(g))E=g;else break;n.delete(E),[u,h,f,p,g]=E,v!==u&&(a.push(v,b,u,b===h?h:f),v=u),b=b===h?f:h}a.push(v,b)}return new p9(s,this.#t,this.#e)}#s(t){const e=this.#i;let n=0,s=e.length-1;for(;n<=s;){const a=n+s>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:s=a-1}return s+1}#l([,t,e]){const n=this.#s(t);this.#i.splice(n,0,[t,e])}#o([,t,e]){const n=this.#s(t);for(let s=n;s<this.#i.length;s++){const[a,l]=this.#i[s];if(a!==t)break;if(a===t&&l===e){this.#i.splice(s,1);return}}for(let s=n-1;s>=0;s--){const[a,l]=this.#i[s];if(a!==t)break;if(a===t&&l===e){this.#i.splice(s,1);return}}}#u(t){const[e,n,s]=t,a=[[e,n,s]],l=this.#s(s);for(let u=0;u<l;u++){const[h,f]=this.#i[u];for(let p=0,g=a.length;p<g;p++){const[,v,b]=a[p];if(!(f<=v||b<=h)){if(v>=h){if(b>f)a[p][1]=f;else{if(g===1)return[];a.splice(p,1),p--,g--}continue}a[p][2]=h,b>f&&a.push([e,f,b])}}}return a}}class p9 extends mt{#t;#e;constructor(t,e,n){super(),this.#e=t,this.#t=e,this.lastPoint=n}toSVGPath(){const t=[];for(const e of this.#e){let[n,s]=e;t.push(`M${n} ${s}`);for(let a=2;a<e.length;a+=2){const l=e[a],u=e[a+1];l===n?(t.push(`V${u}`),s=u):u===s&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,s],a){const l=[],u=n-t,h=s-e;for(const f of this.#e){const p=new Array(f.length);for(let g=0;g<f.length;g+=2)p[g]=t+f[g]*u,p[g+1]=s-f[g+1]*h;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class r_ extends fo{newFreeDrawOutline(t,e,n,s,a,l){return new m9(t,e,n,s,a,l)}}class m9 extends lM{newOutliner(t,e,n,s,a,l=0){return new r_(t,e,n,s,a,l)}}class Si{#t=null;#e=null;#n;#i=null;#r=!1;#s=!1;#l=null;#o;#u=null;#c=null;#d;static#h=null;static get _keyboardManager(){return zt(this,"_keyboardManager",new kh([[["Escape","mac+Escape"],Si.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Si.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Si.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Si.prototype._moveToPrevious],[["Home","mac+Home"],Si.prototype._moveToBeginning],[["End","mac+End"],Si.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#d=Qt.HIGHLIGHT_COLOR,this.#l=t):(this.#s=!0,this.#d=Qt.HIGHLIGHT_DEFAULT_COLOR),this.#c=t?._uiManager||e,this.#o=this.#c._eventBus,this.#n=t?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",Si.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=this.#c._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#p.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#n,t.append(n),t}renderMainDropdown(){const t=this.#i=this.#f();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#f(){const t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",Ji,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of this.#c.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",Si.#h[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=s,a.setAttribute("aria-selected",s===this.#n),a.addEventListener("click",this.#a.bind(this,s),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#p.bind(this),{signal:e}),t}#a(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#a(e,t)}_moveToNext(t){if(!this.#y){this.#g(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#y){this.#g(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#y){this.#g(t);return}this.#i.lastChild?.focus()}#p(t){Si._keyboardManager.exec(this,t)}#g(t){if(this.#y){this.hideDropdown();return}if(this.#r=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#f();this.#t.append(e)}#m(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#y){this.#l?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#c.highlightColors.values();for(const n of this.#i.children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class ke extends Rt{#t=null;#e=0;#n;#i=null;#r=null;#s=null;#l=null;#o=0;#u=null;#c=null;#d=null;#h=!1;#f=null;#a;#p=null;#g="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ut.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ke.prototype;return zt(this,"_keyboardManager",new kh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ke._defaultColor,this.#m=t.thickness||ke._defaultThickness,this.#a=t.opacity||ke._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#g=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#h=!0,this.#v(t),this.#I()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#l=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#I(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new s_(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const e=new s_(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:n}=this.#s;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#c=t;const s=1.5;if(this.#s=t.getNewOutline(this.#m/2+s,.0025),e>=0)this.#d=e,this.#i=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ke.#E(this.#c.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ke.#E(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[a,l,u,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=u,this.height=h;break;case 90:{const[p,g]=this.parentDimensions;this.x=l,this.y=1-a,this.width=u*g/p,this.height=h*p/g;break}case 180:this.x=1-a,this.y=1-l,this.width=u,this.height=h;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-l,this.y=a,this.width=u*g/p,this.height=h*p/g;break}}const{lastPoint:f}=this.#s;this.#f=[(f[0]-a)/u,(f[1]-l)/h]}static initialize(t,e){Rt.initialize(t,e),ke._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Qt.HIGHLIGHT_DEFAULT_COLOR:ke._defaultColor=e;break;case Qt.HIGHLIGHT_THICKNESS:ke._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case Qt.HIGHLIGHT_COLOR:this.#A(e);break;case Qt.HIGHLIGHT_THICKNESS:this.#w(e);break}}static get defaultPropertiesToUpdate(){return[[Qt.HIGHLIGHT_DEFAULT_COLOR,ke._defaultColor],[Qt.HIGHLIGHT_THICKNESS,ke._defaultThickness]]}get propertiesToUpdate(){return[[Qt.HIGHLIGHT_COLOR,this.color||ke._defaultColor],[Qt.HIGHLIGHT_THICKNESS,this.#m||ke._defaultThickness],[Qt.HIGHLIGHT_FREE,this.#h]]}#A(t){const e=(a,l)=>{this.color=a,this.#a=l,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:a,"fill-opacity":l}}),this.#r?.updateColor(a)},n=this.color,s=this.#a;this.addCommands({cmd:e.bind(this,t,ke._defaultOpacity),undo:e.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#w(t){const e=this.#m,n=s=>{this.#m=s,this.#S(s)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#r=new Si({editor:this}),t.addColorPicker(this.#r)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#I(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#I(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#S(t){if(!this.#h)return;this.#v({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#I(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#a},rootClass:{highlight:!0,free:this.#h},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#u&&(this.#u.style.clipPath=this.#i))}static#E([t,e,n,s],a){switch(a){case 90:return[1-e-s,t,s,n];case 180:return[1-t-n,1-e-s,n,s];case 270:return[e,1-t-n,s,n]}return[t,e,n,s]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#h?(t=(t-this.rotation+360)%360,n=ke.#E(this.#c.box,t)):n=ke.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:ke.#E(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#g&&(t.setAttribute("aria-label",this.#g),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),xp(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(t){ke._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#x(!0);break;case 1:case 3:this.#x(!1);break}}#x(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#l,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#x(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#k(){if(this.#h)return null;const[t,e]=this.pageDimensions,[n,s]=this.pageTranslation,a=this.#n,l=new Float32Array(a.length*8);let u=0;for(const{x:h,y:f,width:p,height:g}of a){const v=h*t+n,b=(1-f)*e+s;l[u]=l[u+4]=v,l[u+1]=l[u+3]=b,l[u+2]=l[u+6]=v+p*t,l[u+5]=l[u+7]=b-g*e,u+=8}return l}#L(t){return this.#c.serialize(t,this.#M())}static startHighlighting(t,e,{target:n,x:s,y:a}){const{x:l,y:u,width:h,height:f}=n.getBoundingClientRect(),p=new AbortController,g=t.combinedSignal(p),v=b=>{p.abort(),this.#_(t,b)};window.addEventListener("blur",v,{signal:g}),window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("pointerdown",oi,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Ji,{signal:g}),n.addEventListener("pointermove",this.#T.bind(this,t),{signal:g}),this._freeHighlight=new r_({x:s,y:a},[l,u,h,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#T(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#_(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let s=null;if(t instanceof aM){const{data:{quadPoints:E,rect:w,rotation:x,id:C,color:N,opacity:O,popupRef:U},parent:{page:{pageNumber:G}}}=t;s=t={annotationType:Ut.HIGHLIGHT,color:Array.from(N),opacity:O,quadPoints:E,boxes:null,pageIndex:G-1,rect:w.slice(0),rotation:x,id:C,deleted:!1,popupRef:U}}else if(t instanceof Zb){const{data:{inkLists:E,rect:w,rotation:x,id:C,color:N,borderStyle:{rawWidth:O},popupRef:U},parent:{page:{pageNumber:G}}}=t;s=t={annotationType:Ut.HIGHLIGHT,color:Array.from(N),thickness:O,inkLists:E,boxes:null,pageIndex:G-1,rect:w.slice(0),rotation:x,id:C,deleted:!1,popupRef:U}}const{color:a,quadPoints:l,inkLists:u,opacity:h}=t,f=await super.deserialize(t,e,n);f.color=_t.makeHexColor(...a),f.#a=h||1,u&&(f.#m=t.thickness),f.annotationElementId=t.id||null,f._initialData=s;const[p,g]=f.pageDimensions,[v,b]=f.pageTranslation;if(l){const E=f.#n=[];for(let w=0;w<l.length;w+=8)E.push({x:(l[w]-v)/p,y:1-(l[w+1]-b)/g,width:(l[w+2]-l[w])/p,height:(l[w+1]-l[w+5])/g});f.#b(),f.#I(),f.rotate(f.rotation)}else if(u){f.#h=!0;const E=u[0],w={x:E[0]-v,y:g-(E[1]-b)},x=new r_(w,[0,0,p,g],1,f.#m/2,!0,.001);for(let O=0,U=E.length;O<U;O+=2)w.x=E[O]-v,w.y=g-(E[O+1]-b),x.add(w);const{id:C,clipPathId:N}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);f.#v({highlightOutlines:x.getOutlines(),highlightId:C,clipPathId:N}),f.#I()}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),n=Rt._colorManager.convert(this.color),s={annotationType:Ut.HIGHLIGHT,color:n,opacity:this.#a,thickness:this.#m,quadPoints:this.#k(),outlines:this.#L(e),pageIndex:this.pageIndex,rect:e,rotation:this.#M(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#N(s)?null:(s.id=this.annotationElementId,s)}#N(t){const{color:e}=this._initialData;return t.color.some((n,s)=>n!==e[s])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class g9{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){fe("Not implemented")}}class Ct extends Rt{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static#s=NaN;static#l=null;static#o=null;static#u=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,t.drawOutlines&&(this.#c(t),this.#f())}#c({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#g(t.box)}#d(t,e){const{id:n}=e.drawLayer.draw(Ct._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[s,a]of Object.entries(e))n.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){fe("Not implemented")}static get typesMap(){fe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(Ct.#n.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)t.push([n,e[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,s]of this.constructor.typesMap)t.push([n,e[s]]);return t}_updateProperty(t,e,n){const s=this._drawingOptions,a=s[e],l=u=>{s.updateProperty(e,u);const h=this.#t.updateProperty(e,u);h&&this.#g(h),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ct._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ct._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m(t,e)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ct._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#g(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#a([t,e,n,s]){const{parentDimensions:[a,l],rotation:u}=this;switch(u){case 90:return[e,1-t,n*(l/a),s*(a/l)];case 180:return[1-t,1-e,n,s];case 270:return[1-e,t,n*(l/a),s*(a/l)];default:return[t,e,n,s]}}#p(){const{x:t,y:e,width:n,height:s,parentDimensions:[a,l],rotation:u}=this;switch(u){case 90:return[1-e,t,n*(a/l),s*(l/a)];case 180:return[1-t,1-e,n,s];case 270:return[e,1-t,n*(a/l),s*(l/a)];default:return[t,e,n,s]}}#g(t){if([this.x,this.y,this.width,this.height]=this.#a(t),this.div){this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}this._onResized()}#m(){const{x:t,y:e,width:n,height:s,rotation:a,parentRotation:l,parentDimensions:[u,h]}=this;switch((a*4+l)/90){case 1:return[1-e-s,t,s,n];case 2:return[1-t-n,1-e-s,n,s];case 3:return[e,1-t-n,s,n];case 4:return[t,e-n*(u/h),s*(h/u),n*(u/h)];case 5:return[1-e,t,n*(u/h),s*(h/u)];case 6:return[1-t-s*(h/u),1-e,s*(h/u),n*(u/h)];case 7:return[e-n*(u/h),1-t-s*(h/u),n*(u/h),s*(h/u)];case 8:return[t-n,e-s,n,s];case 9:return[1-e,t-n,s,n];case 10:return[1-t,1-e,n,s];case 11:return[e-s,1-t,s,n];case 12:return[t-s*(h/u),e,s*(h/u),n*(u/h)];case 13:return[1-e-n*(u/h),t-s*(h/u),n*(u/h),s*(h/u)];case 14:return[1-t,1-e-n*(u/h),s*(h/u),n*(u/h)];case 15:return[e,1-t,n*(u/h),s*(h/u)];default:return[t,e,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ct._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#g(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const e=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal";const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,e,n,s,a){fe("Not implemented")}static startDrawing(t,e,n,s){const{target:a,offsetX:l,offsetY:u,pointerId:h,pointerType:f}=s;if(Ct.#l&&Ct.#l!==f)return;const{viewport:{rotation:p}}=t,{width:g,height:v}=a.getBoundingClientRect(),b=Ct.#i=new AbortController,E=t.combinedSignal(b);if(Ct.#s||=h,Ct.#l??=f,window.addEventListener("pointerup",w=>{Ct.#s===w.pointerId?this._endDraw(w):Ct.#o?.delete(w.pointerId)},{signal:E}),window.addEventListener("pointercancel",w=>{Ct.#s===w.pointerId?this._currentParent.endDrawingSession():Ct.#o?.delete(w.pointerId)},{signal:E}),window.addEventListener("pointerdown",w=>{Ct.#l===w.pointerType&&((Ct.#o||=new Set).add(w.pointerId),Ct.#n.isCancellable()&&(Ct.#n.removeLastElement(),Ct.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",Ji,{signal:E}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),a.addEventListener("touchmove",w=>{w.timeStamp===Ct.#u&&oi(w)},{signal:E}),t.toggleDrawing(),e._editorUndoBar?.hide(),Ct.#n){t.drawLayer.updateProperties(this._currentDrawId,Ct.#n.startNew(l,u,g,v,p));return}e.updateUIForDefaultProperties(this),Ct.#n=this.createDrawerInstance(l,u,g,v,p),Ct.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Ct.#r.toSVGProperties(),Ct.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Ct.#u=-1,!Ct.#n)return;const{offsetX:e,offsetY:n,pointerId:s}=t;if(Ct.#s===s){if(Ct.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ct.#n.add(e,n)),Ct.#u=t.timeStamp,oi(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Ct.#n=null,Ct.#r=null,Ct.#l=null,Ct.#u=NaN),Ct.#i&&(Ct.#i.abort(),Ct.#i=null,Ct.#s=NaN,Ct.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t&&e.drawLayer.updateProperties(this._currentDrawId,Ct.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=Ct.#n,s=this._currentDrawId,a=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(s,n.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:Qt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Qt.DRAW_STEP),!Ct.#n.isEmpty()){const{pageDimensions:[n,s],scale:a}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ct.#n.getOutlines(n*a,s*a,a,this._INNER_MARGIN),drawingOptions:Ct.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,s,a,l){fe("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:u}}=e.viewport,h=this.deserializeDraw(l,u,s,a,this._INNER_MARGIN,t),f=await super.deserialize(t,e,n);return f.createDrawingOptions(t),f.#c({drawOutlines:h}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,n]=this.pageTranslation,[s,a]=this.pageDimensions;return this.#t.serialize([e,n,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class y9{#t=new Float64Array(6);#e;#n;#i;#r;#s;#l="";#o=0;#u=new um;#c;#d;constructor(t,e,n,s,a,l){this.#c=n,this.#d=s,this.#i=a,this.#r=l,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#n=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return mt._normalizePoint(t,e,this.#c,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#h(t,e);const[n,s,a,l]=this.#t.subarray(2,6),u=t-a,h=e-l;return Math.hypot(this.#c*u,this.#d*h)<=2?null:(this.#s.push(t,e),isNaN(n)?(this.#t.set([a,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,s,a,l,t,e],0),this.#e.push(...mt.createBezierPoints(n,s,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,a){this.#c=n,this.#d=s,this.#i=a,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#l="";for(let t=0,e=this.#n.length;t<e;t++){const{line:n,points:s}=this.#n[t];this.#e=n,this.#s=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const t=mt.svgRound(this.#e[4]),e=mt.svgRound(this.#e[5]);if(this.#s.length===2)return this.#l=`${this.#l} M ${t} ${e} Z`,this.#l;if(this.#s.length<=6){const s=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,s)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const s=mt.svgRound(this.#e[10]),a=mt.svgRound(this.#e[11]);return this.#l=`${this.#l} L ${s} ${a}`,this.#o=12,this.#l}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let s=this.#o,a=this.#e.length;s<a;s+=6){const[l,u,h,f,p,g]=this.#e.slice(s,s+6).map(mt.svgRound);n.push(`C${l} ${u} ${h} ${f} ${p} ${g}`)}return this.#l+=n.join(" "),this.#o=this.#e.length,this.#l}getOutlines(t,e,n,s){const a=this.#n.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#u.build(this.#n,t,e,n,this.#i,this.#r,s),this.#t=null,this.#e=null,this.#n=null,this.#l=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class um extends mt{#t;#e=0;#n;#i;#r;#s;#l;#o;#u;build(t,e,n,s,a,l,u){this.#r=e,this.#s=n,this.#l=s,this.#o=a,this.#u=l,this.#n=u??0,this.#i=t,this.#h()}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${mt.svgRound(e[4])} ${mt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12){t.push(`L${mt.svgRound(e[10])} ${mt.svgRound(e[11])}`);continue}for(let n=6,s=e.length;n<s;n+=6){const[a,l,u,h,f,p]=e.subarray(n,n+6).map(mt.svgRound);t.push(`C${a} ${l} ${u} ${h} ${f} ${p}`)}}return t.join("")}serialize([t,e,n,s],a){const l=[],u=[],[h,f,p,g]=this.#d();let v,b,E,w,x,C,N,O,U;switch(this.#o){case 0:U=mt._rescale,v=t,b=e+s,E=n,w=-s,x=t+h*n,C=e+(1-f-g)*s,N=t+(h+p)*n,O=e+(1-f)*s;break;case 90:U=mt._rescaleAndSwap,v=t,b=e,E=n,w=s,x=t+f*n,C=e+h*s,N=t+(f+g)*n,O=e+(h+p)*s;break;case 180:U=mt._rescale,v=t+n,b=e,E=-n,w=s,x=t+(1-h-p)*n,C=e+f*s,N=t+(1-h)*n,O=e+(f+g)*s;break;case 270:U=mt._rescaleAndSwap,v=t+n,b=e+s,E=-n,w=-s,x=t+(1-f-g)*n,C=e+(1-h-p)*s,N=t+(1-f)*n,O=e+(1-h)*s;break}for(const{line:G,points:Y}of this.#i)l.push(U(G,v,b,E,w,a?new Array(G.length):null)),u.push(U(Y,v,b,E,w,a?new Array(Y.length):null));return{lines:l,points:u,rect:[x,C,N,O]}}static deserialize(t,e,n,s,a,{paths:{lines:l,points:u},rotation:h,thickness:f}){const p=[];let g,v,b,E,w;switch(h){case 0:w=mt._rescale,g=-t/n,v=e/s+1,b=1/n,E=-1/s;break;case 90:w=mt._rescaleAndSwap,g=-e/s,v=-t/n,b=1/s,E=1/n;break;case 180:w=mt._rescale,g=t/n+1,v=-e/s,b=-1/n,E=1/s;break;case 270:w=mt._rescaleAndSwap,g=e/s+1,v=t/n+1,b=-1/s,E=-1/n;break}if(!l){l=[];for(const C of u){const N=C.length;if(N===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(N===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const O=new Float32Array(3*(N-2));l.push(O);let[U,G,Y,D]=C.subarray(0,4);O.set([NaN,NaN,NaN,NaN,U,G],0);for(let R=4;R<N;R+=2){const M=C[R],L=C[R+1];O.set(mt.createBezierPoints(U,G,Y,D,M,L),(R-2)*3),[U,G,Y,D]=[Y,D,M,L]}}}for(let C=0,N=l.length;C<N;C++)p.push({line:w(l[C].map(O=>O??NaN),g,v,b,E),points:w(u[C].map(O=>O??NaN),g,v,b,E)});const x=new um;return x.build(p,n,s,1,h,f,a),x}#c(t=this.#u){const e=this.#n+t/2*this.#l;return this.#o%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,n,s]=this.#t,[a,l]=this.#c(0);return[t+a,e+l,n-2*a,s-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#i){if(s.length<=12){for(let u=4,h=s.length;u<h;u+=6){const[f,p]=s.subarray(u,u+2);t[0]=Math.min(t[0],f),t[1]=Math.min(t[1],p),t[2]=Math.max(t[2],f),t[3]=Math.max(t[3],p)}continue}let a=s[4],l=s[5];for(let u=6,h=s.length;u<h;u+=6){const[f,p,g,v,b,E]=s.subarray(u,u+6);_t.bezierBoundingBox(a,l,f,p,g,v,b,E,t),a=b,l=E}}const[e,n]=this.#c();t[0]=Math.min(1,Math.max(0,t[0]-e)),t[1]=Math.min(1,Math.max(0,t[1]-n)),t[2]=Math.min(1,Math.max(0,t[2]+e)),t[3]=Math.min(1,Math.max(0,t[3]+n)),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#c();this.#u=t;const[s,a]=this.#c(),[l,u]=[s-e,a-n],h=this.#t;return h[0]-=l,h[1]-=u,h[2]+=2*l,h[3]+=2*u,h}updateParentDimensions([t,e],n){const[s,a]=this.#c();this.#r=t,this.#s=e,this.#l=n;const[l,u]=this.#c(),h=l-s,f=u-a,p=this.#t;return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(mt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,s=0,a=0,l=0,u=0,h=0;switch(this.#e){case 90:s=e/t,a=-t/e,u=t;break;case 180:n=-1,l=-1,u=t,h=e;break;case 270:s=-e/t,a=t/e,h=e;break;default:return""}return`matrix(${n} ${s} ${a} ${l} ${mt.svgRound(u)} ${mt.svgRound(h)})`}getPathResizingSVGProperties([t,e,n,s]){const[a,l]=this.#c(),[u,h,f,p]=this.#t;if(Math.abs(f-a)<=mt.PRECISION||Math.abs(p-l)<=mt.PRECISION){const w=t+n/2-(u+f/2),x=e+s/2-(h+p/2);return{path:{"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${w} ${x})`}}}const g=(n-2*a)/(f-2*a),v=(s-2*l)/(p-2*l),b=f/n,E=p/s;return{path:{"transform-origin":`${mt.svgRound(u)} ${mt.svgRound(h)}`,transform:`${this.rotationTransform} scale(${b} ${E}) translate(${mt.svgRound(a)} ${mt.svgRound(l)}) scale(${g} ${v}) translate(${mt.svgRound(-a)} ${mt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,s]){const[a,l]=this.#c(),u=this.#t,[h,f,p,g]=u;if(u[0]=t,u[1]=e,u[2]=n,u[3]=s,Math.abs(p-a)<=mt.PRECISION||Math.abs(g-l)<=mt.PRECISION){const x=t+n/2-(h+p/2),C=e+s/2-(f+g/2);for(const{line:N,points:O}of this.#i)mt._translate(N,x,C,N),mt._translate(O,x,C,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(n-2*a)/(p-2*a),b=(s-2*l)/(g-2*l),E=-v*(h+a)+t+a,w=-b*(f+l)+e+l;if(v!==1||b!==1||E!==0||w!==0)for(const{line:x,points:C}of this.#i)mt._rescale(x,E,w,v,b,x),mt._rescale(C,E,w,v,b,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[s,a]=n,l=this.#t,u=t-l[0],h=e-l[1];if(this.#r===s&&this.#s===a)for(const{line:f,points:p}of this.#i)mt._translate(f,u,h,f),mt._translate(p,u,h,p);else{const f=this.#r/s,p=this.#s/a;this.#r=s,this.#s=a;for(const{line:g,points:v}of this.#i)mt._rescale(g,u,h,f,p,g),mt._rescale(v,u,h,f,p,v);l[2]*=f,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${mt.svgRound(t)} ${mt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${mt.svgRound(t[0])} ${mt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class t0 extends g9{#t;constructor(t){super(),this.#t=t,super.updateProperties({fill:"none",stroke:Rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this.#t.realScale),super.updateSVGProperty(t,e)}clone(){const t=new t0(this.#t);return t.updateAll(this),t}}class e0 extends Ct{static _type="ink";static _editorType=Ut.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(t,e){Rt.initialize(t,e),this._defaultDrawingOptions=new t0(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return zt(this,"typesMap",new Map([[Qt.INK_THICKNESS,"stroke-width"],[Qt.INK_COLOR,"stroke"],[Qt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,s,a){return new y9(t,e,n,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,s,a,l){return um.deserialize(t,e,n,s,a,l)}static async deserialize(t,e,n){let s=null;if(t instanceof Zb){const{data:{inkLists:l,rect:u,rotation:h,id:f,color:p,opacity:g,borderStyle:{rawWidth:v},popupRef:b},parent:{page:{pageNumber:E}}}=t;s=t={annotationType:Ut.INK,color:Array.from(p),thickness:v,opacity:g,paths:{points:l},boxes:null,pageIndex:E-1,rect:u.slice(0),rotation:h,id:f,deleted:!1,popupRef:b}}const a=await super.deserialize(t,e,n);return a.annotationElementId=t.id||null,a._initialData=s,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=e0.getDefaultDrawingOptions({stroke:_t.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":u}}=this,h={annotationType:Ut.INK,color:Rt._colorManager.convert(a),opacity:l,thickness:u,paths:{lines:e,points:n},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?h:this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:n,opacity:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==e[u])||t.thickness!==n||t.opacity!==s||t.pageIndex!==a}renderAnnotationElement(t){const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class n0 extends Rt{#t=null;#e=null;#n=null;#i=null;#r=null;#s="";#l=null;#o=null;#u=!1;#c=!1;static _type="stamp";static _editorType=Ut.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile}static initialize(t,e){Rt.initialize(t,e)}static get supportedTypes(){return zt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return zt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(Ut.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#d(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#u=t.isSvg),t.file&&(this.#s=t.file.name),this.#a()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await n.guess({name:"altText",request:{data:s,width:a,height:l,channels:s.length/(a*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#f(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#d(n,!0)).finally(()=>this.#h());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(s=>this.#d(s)).finally(()=>this.#h());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(s=>this.#d(s)).finally(()=>this.#h());return}const t=document.createElement("input");t.type="file",t.accept=n0.supportedTypesStr;const e=this._uiManager._signal;this.#n=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(s)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#h()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#l?.remove(),this.#l=null,this.#o&&(clearTimeout(this.#o),this.#o=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#f();return}super.rebuild(),this.div!==null&&(this.#e&&this.#l===null&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#a():this.#f(),this.width&&!this.annotationElementId){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#o!==null&&clearTimeout(this.#o);const t=200;this.#o=setTimeout(()=>{this.#o=null,this.#g()},t)}#a(){const{div:t}=this;let{width:e,height:n}=this.#t;const[s,a]=this.pageDimensions,l=.75;if(this.width)e=this.width*s,n=this.height*a;else if(e>l*s||n>l*a){const p=Math.min(l*s/e,l*a/n);e*=p,n*=p}const[u,h]=this.parentDimensions;this.setDims(e*u/s,n*h/a),this._uiManager.enableWaiting(!1);const f=this.#l=document.createElement("canvas");f.setAttribute("role","img"),this.addContainer(f),this.width=e/s,this.height=n/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#c||(this.parent.addUndoableEditor(this),this.#c=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&f.setAttribute("aria-label",this.#s)}copyCanvas(t,e,n=!1){t||(t=224);const{width:s,height:a}=this.#t,l=new t_;let u=this.#t,h=s,f=a,p=null;if(e){if(s>e||a>e){const Y=Math.min(e/s,e/a);h=Math.floor(s*Y),f=Math.floor(a*Y)}p=document.createElement("canvas");const v=p.width=Math.ceil(h*l.sx),b=p.height=Math.ceil(f*l.sy);this.#u||(u=this.#p(v,b));const E=p.getContext("2d");E.filter=this._uiManager.hcmFilter;let w="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",x="#42414d");const C=15,N=C*l.sx,O=C*l.sy,U=new OffscreenCanvas(N*2,O*2),G=U.getContext("2d");G.fillStyle=w,G.fillRect(0,0,N*2,O*2),G.fillStyle=x,G.fillRect(0,0,N,O),G.fillRect(N,O,N,O),E.fillStyle=E.createPattern(U,"repeat"),E.fillRect(0,0,v,b),E.drawImage(u,0,0,u.width,u.height,0,0,v,b)}let g=null;if(n){let v,b;if(l.symmetric&&u.width<t&&u.height<t)v=u.width,b=u.height;else if(u=this.#t,s>t||a>t){const x=Math.min(t/s,t/a);v=Math.floor(s*x),b=Math.floor(a*x),this.#u||(u=this.#p(v,b))}const w=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,v,b),g={width:v,height:b,data:w.getImageData(0,0,v,b).data}}return{canvas:p,width:h,height:f,imageData:g}}#p(t,e){const{width:n,height:s}=this.#t;let a=n,l=s,u=this.#t;for(;a>2*t||l>2*e;){const h=a,f=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(a,l);p.getContext("2d").drawImage(u,0,0,h,f,0,0,a,l),u=p.transferToImageBitmap()}return u}#g(){const[t,e]=this.parentDimensions,{width:n,height:s}=this,a=new t_,l=Math.ceil(n*t*a.sx),u=Math.ceil(s*e*a.sy),h=this.#l;if(!h||h.width===l&&h.height===u)return;h.width=l,h.height=u;const f=this.#u?this.#t:this.#p(l,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,u)}getImageForAltText(){return this.#l}#m(t){if(t){if(this.#u){const s=this._uiManager.imageManager.getSvgUrl(this.#e);if(s)return s}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#u){const[e,n]=this.pageDimensions,s=Math.round(this.width*e*ec.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*ec.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(s,a);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,s,a),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let s=null;if(t instanceof oM){const{data:{rect:E,rotation:w,id:x,structParent:C,popupRef:N},container:O,parent:{page:{pageNumber:U}}}=t,G=O.querySelector("canvas"),Y=n.imageManager.getFromCanvas(O.id,G);G.remove();const D=(await e._structTree.getAriaAttributes(`${zb}${x}`))?.get("aria-label")||"";s=t={annotationType:Ut.STAMP,bitmapId:Y.id,bitmap:Y.bitmap,pageIndex:U-1,rect:E.slice(0),rotation:w,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:D},isSvg:!1,structParent:C,popupRef:N}}const a=await super.deserialize(t,e,n),{rect:l,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:g}=t;f&&n.imageManager.isValidId(f)?(a.#e=f,u&&(a.#t=u)):a.#i=h,a.#u=p;const[v,b]=a.pageDimensions;return a.width=(l[2]-l[0])/v,a.height=(l[3]-l[1])/b,a.annotationElementId=t.id||null,g&&(a.altTextData=g),a._initialData=s,a.#c=!!s,a}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Ut.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=this.#m(!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=this.#y(n);if(u.isSame)return null;u.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,e===null)return n;e.stamps||=new Map;const l=this.#u?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#m(!1);else if(this.#u){const u=e.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#m(!1))}return n}#y(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,s=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class ar{#t;#e=!1;#n=null;#i=null;#r=null;#s=new Map;#l=!1;#o=!1;#u=!1;#c=null;#d=null;#h=null;#f=null;#a;static _initialized=!1;static#p=new Map([en,e0,n0,ke].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:l,drawLayer:u,textLayer:h,viewport:f,l10n:p}){const g=[...ar.#p.values()];if(!ar._initialized){ar._initialized=!0;for(const v of g)v.initialize(p,t)}t.registerEditorTypes(g),this.#a=t,this.pageIndex=e,this.div=n,this.#t=a,this.#n=l,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=s,this.#a.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#a.getMode()===Ut.NONE}updateToolbar(t){this.#a.updateToolbar(t)}updateMode(t=this.#a.getMode()){switch(this.#v(),t){case Ut.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ut.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ut.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of ar.#p.values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#a.setEditingState(t)}addCommands(t){this.#a.addCommands(t)}cleanUndoStack(t){this.#a.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of this.#s.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#a.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#n){this.#u=!1;return}const e=this.#n.getEditableAnnotations();for(const n of e){if(n.hide(),this.#a.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}this.#u=!1}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const s of this.#s.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){t.set(s.annotationElementId,s);continue}else e.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){const s=this.#n.getEditableAnnotations();for(const a of s){const{id:l}=a.data;if(this.#a.isDeletedAnnotationElement(l))continue;let u=e.get(l);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=t.get(l),u&&(this.#a.addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of ar.#p.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#a.getActive()!==t&&this.#a.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#a.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#g.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#g(t){this.#a.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:n}=Vn.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#a.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ke.startHighlighting(this,this.#a.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#a._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#a.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#a.isDeletedAnnotationElement(e)&&this.#a.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#a.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#a.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#a.addDeletedAnnotationElement(t.annotationElementId),Rt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#a.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#a.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#a._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return this.#a.getId()}get#m(){return ar.#p.get(this.#a.getMode())}combinedSignal(t){return this.#a.combinedSignal(t)}#y(t){const e=this.#m;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#m?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#a.updateToolbar(t),this.#a.updateMode(t);const{offsetX:n,offsetY:s}=this.#b(),a=this.getNextId(),l=this.#y({parent:this,id:a,x:n,y:s,uiManager:this.#a,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await ar.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#a)||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),a=this.#y({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#a,isCentered:e,...n});return a&&this.add(a),a}#b(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+s),f=(a+u)/2-t,p=(l+h)/2-e,[g,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:g,offsetY:v}}addNewEditor(){this.createAndAddNewEditor(this.#b(),!0)}setSelected(t){this.#a.setSelected(t)}toggleSelected(t){this.#a.toggleSelected(t)}unselect(t){this.#a.unselect(t)}pointerup(t){const{isMac:e}=Vn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&this.#l&&(this.#l=!1,!(this.#m?.isDrawer&&this.#m.supportMultipleDrawings))){if(!this.#e){this.#e=!0;return}if(this.#a.getMode()===Ut.STAMP){this.#a.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#a.getMode()===Ut.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:e}=Vn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#l=!0,this.#m?.isDrawer){this.startDrawingSession(t);return}const n=this.#a.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus(),this.#c){this.#m.startDrawing(this,this.#a,!1,t);return}this.#a.setCurrentDrawingSession(this),this.#c=new AbortController;const e=this.#a.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#m.startDrawing(this,this.#a,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#a.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#m.endDrawing(t)):null}findNewParent(t,e,n){const s=this.#a.findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#m.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#a.removeLayer(this)}#v(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,wo(this.div,t);for(const e of this.#a.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#a.commitOrRemove(),this.#v();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,wo(this.div,{rotation:n}),e!==n)for(const s of this.#s.values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#a.viewParameters.realScale}}class Nn{#t=null;#e=0;#n=new Map;#i=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#n.size>0)for(const e of this.#n.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return zt(this,"_svgFactory",new Jb)}static#r(t,[e,n,s,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*s}%`,l.height=`${100*a}%`}#s(){const t=Nn._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#l(t,e){const n=Nn._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Nn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),s}#o(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)}draw(t,e=!1,n=!1){const s=this.#e++,a=this.#s(),l=Nn._svgFactory.createElement("defs");a.append(l);const u=Nn._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${s}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(s,u);const f=n?this.#l(l,h):null,p=Nn._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(a,t),this.#n.set(s,a),{id:s,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=this.#e++,s=this.#s(),a=Nn._svgFactory.createElement("defs");s.append(a);const l=Nn._svgFactory.createElement("path");a.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const g=Nn._svgFactory.createElement("mask");a.append(g),h=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const v=Nn._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const b=Nn._svgFactory.createElement("use");g.append(b),b.setAttribute("href",`#${u}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const f=Nn._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return s.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(s,t),this.#n.set(n,s),n}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:s,rootClass:a,path:l}=e,u=typeof t=="number"?this.#n.get(t):t;if(u){if(n&&this.#o(u,n),s&&Nn.#r(u,s),a){const{classList:h}=u;for(const[f,p]of Object.entries(a))h.toggle(f,p)}if(l){const f=u.firstChild.firstChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const n=this.#n.get(t);n&&(e.#t.append(n),this.#n.delete(t),e.#n.set(t,n))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#n.get(t).remove(),this.#n.delete(t))}destroy(){this.#t=null;for(const t of this.#n.values())t.remove();this.#n.clear(),this.#i.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:s_};Pt.AbortException;Pt.AnnotationEditorLayer;Pt.AnnotationEditorParamsType;Pt.AnnotationEditorType;Pt.AnnotationEditorUIManager;Pt.AnnotationLayer;Pt.AnnotationMode;Pt.ColorPicker;Pt.DOMSVGFactory;Pt.DrawLayer;Pt.FeatureTest;var v9=Pt.GlobalWorkerOptions;Pt.ImageKind;Pt.InvalidPDFException;Pt.MissingPDFException;Pt.OPS;Pt.OutputScale;Pt.PDFDataRangeTransport;Pt.PDFDateString;Pt.PDFWorker;Pt.PasswordResponses;Pt.PermissionFlag;Pt.PixelsPerInch;Pt.RenderingCancelledException;Pt.TextLayer;Pt.TouchManager;Pt.UnexpectedResponseException;Pt.Util;Pt.VerbosityLevel;Pt.XfaLayer;Pt.build;Pt.createValidAbsoluteUrl;Pt.fetchData;var _9=Pt.getDocument;Pt.getFilenameFromUrl;Pt.getPdfFilenameFromUrl;Pt.getXfaPageViewport;Pt.isDataScheme;Pt.isPdfFile;Pt.noContextMenu;Pt.normalizeUnicode;Pt.setLayerDimensions;Pt.shadow;Pt.stopEvent;Pt.version;const b9="4.10.38";v9.workerSrc=`https://unpkg.com/pdfjs-dist@${b9}/build/pdf.worker.min.mjs`;const A9=async i=>{const t=await i.arrayBuffer(),n=await _9({data:t}).promise,s=await n.getMetadata(),a=s.info?.Title||i.name.replace(/\.[^/.]+$/,""),l=s.info?.CreationDate||"",u=new Set,h=Math.min(n.numPages,15),f=v=>{let b=v.replace(/['"]/g,"").trim();const E=b.toLowerCase();if(E==="sans-serif"||E.includes("sansserif"))return"Sans Serif";if(E==="serif")return"Serif";if(E==="monospace")return"Monospace";if(b.includes("+")&&(b=b.split("+")[1]),/^g_d\d+_f\d+$/.test(b))return"";b=b.replace(/[,\-](Bold|Italic|Regular|BoldItalic|SemiBold|Medium|Light|Black|ExtraBold|ExtraLight|Thin)$/i,""),b=b.replace(/[_\-\.]/g," ");const w=b.split(" ").filter(x=>x.length>0).map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()).join(" ").trim();return w.toLowerCase()==="sans serif"?"Sans Serif":w};for(let v=1;v<=h;v++)try{const E=await(await n.getPage(v)).getTextContent();Object.values(E.styles).forEach(w=>{if(w.fontFamily){const x=f(w.fontFamily);x&&x.length>2&&!/^\d+$/.test(x)&&u.add(x)}})}catch(b){console.warn(`Font extraction failed for page ${v}:`,b)}u.size===0&&u.add("Helvetica");const p=[],g=Math.min(n.numPages,6);for(let v=1;v<=g;v++)try{const b=await n.getPage(v),E=b.getViewport({scale:.5}),w=document.createElement("canvas"),x=w.getContext("2d",{alpha:!1});w.height=E.height,w.width=E.width,x&&(x.fillStyle="#ffffff",x.fillRect(0,0,w.width,w.height),await b.render({canvasContext:x,viewport:E,intent:"display"}).promise,p.push(w.toDataURL("image/jpeg",.85)))}catch(b){console.error(`Thumbnail generation failed for page ${v}:`,b)}return{title:a,pageCount:n.numPages,fonts:Array.from(u).slice(0,10),thumbnails:p,creationDate:l}},sx=async(i,t="auto")=>(console.warn("Cloudinary credentials missing. Falling back to local URL for demo."),typeof i=="string"?i:URL.createObjectURL(i)),E9=({isOpen:i,onClose:t,onSuccess:e})=>{const[n,s]=B.useState(!1),[a,l]=B.useState(null),[u,h]=B.useState(!1),[f,p]=B.useState(!1),[g,v]=B.useState(!1),[b,E]=B.useState(null),[w,x]=B.useState(null),[C,N]=B.useState([]);B.useEffect(()=>{const L=V=>{V.key==="Escape"&&t()};return i&&window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[i,t]),B.useEffect(()=>{a&&!g&&!u&&(h(!0),A9(a).then(L=>{E(L),x(L.thumbnails[0]||null),N(L.fonts),h(!1),v(!0)}).catch(L=>{console.error("PDF Processing Error:",L),h(!1)}))},[a,g,u]);const O=L=>{L.preventDefault(),s(!0)},U=()=>{s(!1)},G=L=>{L.preventDefault(),s(!1),L.dataTransfer.files&&L.dataTransfer.files[0]&&l(L.dataTransfer.files[0])},Y=L=>{L.target.files&&L.target.files[0]&&l(L.target.files[0])},D=()=>{l(null),v(!1),E(null),x(null),N([]),h(!1)},R=L=>{N(V=>V.filter(z=>z!==L))},M=async()=>{if(!(!b||f)){p(!0);try{let L=w||"",V="";w&&w.startsWith("data:")&&(L=await sx(w,"image")),a&&a.size<20*1024*1024&&(V=await sx(a,"raw")),await F1({title:b.title,font:C[0]||"Helvetica",fonts:C,color:"#135bec",date:new Date().getFullYear().toString(),aspectRatio:"aspect-video",image:L,pdfUrl:V}),p(!1),e()}catch(L){console.error("Failed to save project",L),p(!1)}}};return k.jsx(nV,{children:i&&k.jsxs(xi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-[#101622]/80 backdrop-blur-xl",children:[k.jsxs("header",{className:"absolute top-0 left-0 right-0 flex items-center justify-between px-10 py-4 border-b border-white/10",children:[k.jsxs("div",{className:"flex items-center gap-4 text-white",children:[k.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:k.jsx("span",{className:"material-symbols-outlined text-sm",children:"archive"})}),k.jsx("h2",{className:"text-white text-lg font-bold leading-tight",children:"Eren Suki Beleyarman Archive"})]}),k.jsxs("button",{onClick:t,className:"text-white/60 hover:text-white flex items-center gap-2 text-[10px] uppercase tracking-widest font-bold",children:["ESC to cancel",k.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"})]})]}),k.jsxs("div",{className:"w-full max-w-[1100px] grid grid-cols-1 lg:grid-cols-12 gap-12 items-center p-8",children:[k.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-6",children:[k.jsxs("div",{className:"flex flex-col",children:[k.jsx("h1",{className:"text-white text-3xl font-bold leading-tight pb-2",children:"New Ingestion"}),k.jsx("p",{className:"text-white/40 text-sm mb-6",children:"Drag and drop assets directly into the creative workspace."})]}),a?k.jsxs("div",{className:"flex flex-col gap-4",children:[k.jsxs("div",{className:"flex flex-col items-center justify-center gap-6 rounded-xl border border-white/20 bg-white/5 px-6 py-20 relative",children:[k.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center text-green-500",children:k.jsx("span",{className:"material-symbols-outlined text-3xl",children:"check_circle"})}),k.jsx("p",{className:"text-white text-xl font-bold",children:"File Uploaded"}),k.jsx("button",{onClick:D,className:"text-primary text-sm font-bold hover:underline",children:"Replace File"})]}),g&&b&&k.jsxs("div",{className:"mt-4",children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsx("h3",{className:"text-white text-xs font-bold tracking-widest uppercase opacity-40 ml-1",children:"Visual Palette"}),b.thumbnails.length===0&&k.jsx("span",{className:"text-[10px] text-red-400 font-bold uppercase tracking-tighter",children:"No Images Found"})]}),k.jsx("div",{className:"grid grid-cols-3 gap-3",children:b.thumbnails.map((L,V)=>k.jsxs(xi.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x(L),className:`relative aspect-[4/3] rounded-lg overflow-hidden cursor-pointer border-2 transition-all ${w===L?"border-primary shadow-[0_0_15px_rgba(19,91,236,0.3)]":"border-white/10 hover:border-white/30"}`,children:[k.jsx("img",{src:L,alt:`Page ${V+1}`,className:"w-full h-full object-cover",onError:z=>{z.target.src="https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&q=80&w=400"}}),w===L&&k.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-primary rounded-full flex items-center justify-center shadow-lg",children:k.jsx("span",{className:"material-symbols-outlined text-white text-[12px] font-bold",children:"check"})})]},V))})]})]}):k.jsxs("div",{onDragOver:O,onDragLeave:U,onDrop:G,className:`flex flex-col items-center justify-center gap-6 rounded-xl border-2 border-dashed ${n?"border-primary bg-primary/10":"border-white/20 bg-white/5"} hover:bg-white/10 transition-all cursor-pointer px-6 py-24 group`,children:[k.jsx("input",{type:"file",accept:".pdf",className:"hidden",id:"file-upload",onChange:Y}),k.jsxs("label",{htmlFor:"file-upload",className:"flex flex-col items-center cursor-pointer w-full h-full",children:[k.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:k.jsx("span",{className:"material-symbols-outlined text-3xl",children:"upload_file"})}),k.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[k.jsx("p",{className:"text-white text-xl font-bold",children:"Drop PDF to Archive"}),k.jsx("p",{className:"text-white/40 text-sm max-w-[320px] text-center",children:"Files will be automatically processed for gallery and font extraction"})]}),k.jsx("div",{className:"mt-6 flex items-center justify-center rounded-lg h-10 px-6 bg-warm-gray text-white text-sm font-bold border border-white/10 hover:border-white/20 transition-all",children:"Browse Files"})]})]})]}),k.jsx("div",{className:"lg:col-span-5 flex flex-col gap-4 self-start lg:mt-20",children:a?k.jsxs(xi.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-warm-gray/40 border border-white/10 rounded-xl p-8 relative overflow-hidden h-full",children:[(u||f)&&k.jsx("div",{className:"absolute top-0 left-0 h-1 bg-primary w-full shadow-[0_0_15px_rgba(19,91,236,0.6)] animate-[shimmer_2s_infinite]"}),g&&!f&&k.jsx("div",{className:"absolute top-0 left-0 h-1 bg-green-500 w-full shadow-[0_0_15px_rgba(34,197,94,0.6)]"}),k.jsxs("div",{className:"flex items-center justify-between mb-8",children:[k.jsx("h3",{className:"text-white text-sm font-bold tracking-wider uppercase opacity-60",children:"Auto-Extraction"}),u||f?k.jsxs("span",{className:"flex items-center gap-2 text-[10px] text-primary font-bold tracking-widest",children:[k.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-ping"}),f?"UPLOADING TO CLOUDINARY":"PROCESSING PDF"]}):k.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] text-green-500 font-bold tracking-widest",children:[k.jsx("span",{className:"material-symbols-outlined text-sm",children:"verified"}),"READY"]})]}),k.jsxs("div",{className:"flex items-center gap-4 p-5 mb-8 bg-black/20 rounded-xl border border-white/5",children:[k.jsx("div",{className:"w-14 h-18 bg-primary/10 rounded-lg flex items-center justify-center text-primary border border-primary/20",children:k.jsx("span",{className:"material-symbols-outlined text-2xl",children:"picture_as_pdf"})}),k.jsxs("div",{className:"flex-1 overflow-hidden",children:[k.jsx("p",{className:"text-base font-bold text-white truncate",children:a.name}),k.jsx("p",{className:"text-xs text-white/40 mt-1 uppercase tracking-widest",children:b?`${b.pageCount} Pages  ARCHIVE READY`:"Analyzing Architecture..."})]})]}),g&&b&&k.jsxs(xi.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[k.jsxs("div",{children:[k.jsx("h4",{className:"text-xs text-white/40 font-bold tracking-widest uppercase mb-4 ml-1",children:"Font Detection (Filterable)"}),k.jsxs("div",{className:"flex gap-2 flex-wrap",children:[C.map((L,V)=>k.jsxs("div",{className:"flex h-10 items-center gap-x-3 rounded-xl bg-white/5 pl-3 pr-2 border border-white/10 group hover:border-primary/50 transition-colors",children:[k.jsx("span",{className:"material-symbols-outlined text-primary text-[20px]",children:"text_format"}),k.jsx("p",{className:"text-white text-sm font-bold",children:L}),k.jsx("button",{onClick:()=>R(L),className:"w-6 h-6 rounded-lg bg-white/5 flex items-center justify-center hover:bg-red-500/20 hover:text-red-500 transition-colors border border-white/5",children:k.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]},V)),C.length===0&&k.jsx("p",{className:"text-white/30 text-xs italic ml-1",children:"No fonts selected. Fallback to Helvetica."})]})]}),k.jsxs("div",{className:"mt-12 pt-8 border-t border-white/10",children:[k.jsxs("button",{onClick:M,disabled:f,className:`w-full flex items-center justify-center gap-3 rounded-xl h-14 text-white text-sm font-bold tracking-widest uppercase transition-all shadow-xl ${f?"bg-primary/50 cursor-not-allowed":"bg-primary hover:bg-primary/90 hover:scale-[1.02] active:scale-[0.98] shadow-primary/20"}`,children:[k.jsx("span",{children:"Place on Canvas"}),k.jsx("span",{className:"material-symbols-outlined text-lg",children:f?"sync":"arrow_outward"})]}),k.jsx("p",{className:"text-[10px] text-white/20 text-center mt-4 tracking-widest uppercase",children:"Cloudinary Powered Storage System"})]})]})]}):k.jsxs(xi.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-warm-gray/40 border border-white/10 rounded-xl p-8",children:[k.jsx("h3",{className:"text-white text-sm font-bold tracking-wider uppercase opacity-60 mb-6",children:"Manual Entry"}),k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{className:"space-y-1",children:[k.jsx("label",{className:"text-xs text-white/40 font-medium ml-1",children:"Project Title"}),k.jsx("input",{type:"text",placeholder:"Enter project name...",className:"w-full h-12 bg-black/20 border border-white/10 rounded-lg px-4 text-white text-sm focus:outline-none focus:border-primary/50 transition-colors",id:"manual-title"})]}),k.jsxs("div",{className:"space-y-1",children:[k.jsx("label",{className:"text-xs text-white/40 font-medium ml-1",children:"Font"}),k.jsxs("select",{className:"w-full h-12 bg-black/20 border border-white/10 rounded-lg px-4 text-white text-sm focus:outline-none focus:border-primary/50 transition-colors appearance-none",id:"manual-font",children:[k.jsx("option",{value:"Helvetica",children:"Helvetica"}),k.jsx("option",{value:"Futura",children:"Futura"}),k.jsx("option",{value:"Garamond",children:"Garamond"})]})]})]}),k.jsx("div",{className:"mt-10 pt-6 border-t border-white/10",children:k.jsxs("button",{onClick:async()=>{const L=document.getElementById("manual-title"),V=document.getElementById("manual-font");if(L.value)try{await F1({title:L.value,font:V.value||"Helvetica",color:"#135bec",date:new Date().getFullYear().toString(),aspectRatio:"aspect-video",image:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&q=80&w=800"}),e()}catch(z){console.error("Failed to add project",z)}},className:"w-full flex items-center justify-center gap-2 rounded-lg h-14 bg-white/5 text-white text-sm font-bold tracking-wide hover:bg-white/10 transition-all border border-white/10",children:[k.jsx("span",{children:"Create Project"}),k.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})]})})]})})]})]})})},w9=({children:i,initialScale:t=1,minScale:e=.1,maxScale:n=5,onTransformChange:s,programmaticPosition:a})=>{const[l,u]=B.useState(t),[h,f]=B.useState({x:0,y:0});B.useEffect(()=>{a&&f(a)},[a]);const[p,g]=B.useState(!1),[v,b]=B.useState(!1),[E,w]=B.useState({x:0,y:0}),x=B.useRef(null);B.useEffect(()=>{s?.({scale:l,position:h})},[l,h,s]),B.useEffect(()=>{const U=Y=>{if(Y.code==="Space"&&!Y.repeat){if(Y.target.tagName==="INPUT"||Y.target.tagName==="TEXTAREA")return;Y.preventDefault(),g(!0)}},G=Y=>{Y.code==="Space"&&(g(!1),b(!1))};return window.addEventListener("keydown",U),window.addEventListener("keyup",G),()=>{window.removeEventListener("keydown",U),window.removeEventListener("keyup",G)}},[]),B.useEffect(()=>{const U=x.current;if(!U)return;const G=Y=>{Y.preventDefault();const R=-Y.deltaY*5e-4,M=Math.min(Math.max(e,l+R),n),L=U.getBoundingClientRect(),V=Y.clientX-L.left,z=Y.clientY-L.top,F=(V-h.x)/l,bt=(z-h.y)/l,Bt=V-F*M,$=z-bt*M;u(M),f({x:Bt,y:$})};return U.addEventListener("wheel",G,{passive:!1}),()=>U.removeEventListener("wheel",G)},[l,h,e,n]);const C=U=>{(p||U.button===1||U.button===0)&&(b(!0),w({x:U.clientX,y:U.clientY}),U.preventDefault())},N=U=>{if(!v)return;const G=U.clientX-E.x,Y=U.clientY-E.y;f(D=>({x:D.x+G,y:D.y+Y})),w({x:U.clientX,y:U.clientY})},O=()=>{b(!1)};return k.jsxs("div",{ref:x,className:`w-full h-screen overflow-hidden bg-[#101622] relative select-none ${v?"cursor-grabbing":p?"cursor-grab":"cursor-default"}`,onMouseDown:C,onMouseMove:N,onMouseUp:O,onMouseLeave:O,children:[k.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.07] will-change-[background-position,background-size]",style:{backgroundImage:"radial-gradient(#ffffff 1.5px, transparent 1.5px)",backgroundSize:`${20*l}px ${20*l}px`,backgroundPosition:`${h.x}px ${h.y}px`}}),k.jsx("div",{className:"w-full h-full absolute inset-0 origin-top-left will-change-transform",style:{transform:`translate(${h.x}px, ${h.y}px) scale(${l})`},children:i}),k.jsxs("div",{className:"fixed bottom-4 left-4 text-white/30 text-xs pointer-events-none font-mono z-[60]",children:[Math.round(l*100),"% | ",Math.round(h.x),", ",Math.round(h.y)]})]})},T9=()=>{const[i,t]=B.useState(!1),[e,n]=B.useState([]),[s,a]=B.useState(!0),[l,u]=B.useState(""),[h,f]=B.useState({scale:1,position:{x:0,y:0}}),[p,g]=B.useState(void 0);B.useEffect(()=>{(async()=>{try{const x=await V1();n(x)}catch(x){console.error(x)}finally{a(!1)}})()},[]);const v=()=>{a(!0),V1().then(w=>{n(w),a(!1)}),t(!1)},b=(w,x)=>{n(C=>C.map(N=>N.id===w?{...N,position:x}:N))},E=e.filter(w=>w.title.toLowerCase().includes(l.toLowerCase())||w.font.toLowerCase().includes(l.toLowerCase()));return k.jsxs(dz,{children:[k.jsx(yz,{onSearch:u}),k.jsx(vz,{onAddClick:()=>t(!0),scale:h.scale,position:h.position,onNavigate:g}),k.jsx(E9,{isOpen:i,onClose:()=>t(!1),onSuccess:v}),k.jsx(w9,{onTransformChange:f,programmaticPosition:p,children:k.jsx("div",{className:"w-full h-full absolute top-0 left-0",children:s?k.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none flex flex-col items-center gap-4",children:k.jsx("img",{src:"/Kibele/logo.svg",alt:"Kibele Logo",className:"w-16 h-16 opacity-50 animate-pulse"})}):E.length===0?null:E.map((w,x)=>{const C={x:x%4*400+100,y:Math.floor(x/4)*450+100};return k.jsx(gz,{project:w,scale:h.scale,initialPosition:w.position||C,onPositionChange:b},w.id)})})})]})},S9=()=>{const{id:i}=MN();return console.log("Viewing project:",i),k.jsxs("div",{className:"bg-background-light dark:bg-background-dark font-display text-white selection:bg-primary/30 overflow-hidden h-screen w-full relative",children:[k.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-8 py-6 bg-gradient-to-b from-background-dark/80 to-transparent backdrop-blur-sm",children:[k.jsxs("div",{className:"flex items-center gap-12",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx(Vu,{to:"/",className:"w-6 h-6 bg-primary rounded-sm flex items-center justify-center hover:opacity-80 transition-opacity",children:k.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"arrow_back"})}),k.jsx("h2",{className:"text-sm font-bold tracking-widest uppercase",children:"Eren Suki Beleyarman"})]}),k.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[k.jsx(Vu,{to:"/",className:"text-xs font-bold tracking-widest uppercase text-primary",children:"Canvas"}),k.jsx("a",{href:"#",className:"text-xs font-bold tracking-widest uppercase text-[#9da6b9] hover:text-white transition-colors",children:"Projects"}),k.jsx("a",{href:"#",className:"text-xs font-bold tracking-widest uppercase text-[#9da6b9] hover:text-white transition-colors",children:"Archive"})]})]}),k.jsxs("div",{className:"flex items-center gap-6",children:[k.jsxs("div",{className:"flex items-center bg-white/5 border border-white/10 rounded-full px-4 py-1.5",children:[k.jsx("span",{className:"material-symbols-outlined text-sm text-[#9da6b9]",children:"search"}),k.jsx("input",{type:"text",placeholder:"Search archive...",className:"bg-transparent border-none focus:ring-0 text-sm placeholder:text-[#9da6b9] w-24 md:w-48 text-white"})]}),k.jsx("button",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-primary transition-colors",children:k.jsx("span",{className:"material-symbols-outlined text-xl text-white",children:"grid_view"})})]})]}),k.jsxs("main",{className:"relative w-full h-screen overflow-hidden flex items-center justify-center bg-cover bg-center",style:{backgroundImage:"linear-gradient(rgba(16, 22, 34, 0.6), rgba(16, 22, 34, 0.9)), url(https://lh3.googleusercontent.com/aida-public/AB6AXuCt7ZeE9QrDPFibS9UkQo8OPZ5QKNlCQ4dnjIFIbkGkb5YiThOU69bRzkxTxHHpwor2mq7Ap7SnCEhCvZwiH1qK3FoOcaXkpwUWzM_tFIFIrV5nVr2hCdat8vaebQ1x_wr3XgthkU9wresWaOntgk8mOxA7AbCEBH3tRrD-BnQvxz8BExs-qs6fzW2VLDMZWJ3_mA8m4qEMD_nZL2tplvbdNAT_EewGgxF-xKCrSQnpNqHWb1k1SnyQcB2eM-Lt_MW2uG95rrqhLUO_)"},children:[k.jsxs(xi.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"relative z-10 max-w-5xl w-full px-4 md:px-12 flex flex-col items-start gap-8",children:[k.jsxs("div",{className:"flex items-center gap-3 text-[#9da6b9] text-xs font-bold tracking-widest uppercase",children:[k.jsx(Vu,{to:"/",className:"hover:text-white transition-colors",children:"Endless Canvas"}),k.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),k.jsx("span",{className:"text-white",children:"Project Detail"})]}),k.jsxs("div",{className:"flex flex-col gap-6",children:[k.jsx("h1",{className:"font-serif text-6xl md:text-8xl lg:text-9xl tracking-tighter italic text-white leading-none",children:"Metamorphosis"}),k.jsxs("div",{className:"flex flex-wrap items-center gap-x-8 gap-y-4",children:[k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{className:"text-[10px] uppercase tracking-widest text-primary font-bold mb-1",children:"Timeline"}),k.jsx("p",{className:"text-lg text-white font-medium",children:"Spring 2023"})]}),k.jsx("div",{className:"w-px h-8 bg-white/10 hidden sm:block"}),k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{className:"text-[10px] uppercase tracking-widest text-primary font-bold mb-1",children:"Client"}),k.jsx("p",{className:"text-lg text-white font-medium",children:"Museum of Modern Art"})]}),k.jsx("div",{className:"w-px h-8 bg-white/10 hidden sm:block"}),k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{className:"text-[10px] uppercase tracking-widest text-primary font-bold mb-1",children:"Typography"}),k.jsx("p",{className:"text-lg text-white font-medium italic font-serif",children:"Neue Haas Grotesk"})]})]})]}),k.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-12 gap-6 mt-12",children:[k.jsxs("div",{className:"lg:col-span-7 aspect-[16/9] rounded-xl overflow-hidden group relative border border-white/10",children:[k.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-105",style:{backgroundImage:"url('https://lh3.googleusercontent.com/aida-public/AB6AXuBaX_Sa05RrifGW1Jg_Om8VoCxAl9LcdyJlfHmoY1GEQylK9c-60nVlAjVLlqdGdmRl8OMyiEXg_NIj1GhWS3c5V5OEhqErOIYNTQkU6yr8PBwbDZmNIoQJ_rhOskUZl3MQv06uZGf0xIq7Kma-mQvn3KPDX8He0hvZ_DQFWjz_vahN1ypG5OAp7lifQ-_32OIvmT6Z1hllTBfWyxzRvE6igTqxQIol39scLUmDiR548QnwcEHmhrb2Hb6sMxdvpYdwp9zyHVVne9nH')"}}),k.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/0 transition-colors"}),k.jsxs("div",{className:"absolute bottom-6 left-6 flex items-center gap-2",children:[k.jsx("span",{className:"material-symbols-outlined text-white text-sm",children:"zoom_in"}),k.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold",children:"Zoom for details"})]})]}),k.jsxs("div",{className:"lg:col-span-5 flex flex-col justify-between py-2",children:[k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("span",{className:"material-symbols-outlined text-primary",children:"edit_note"}),k.jsx("p",{className:"text-xs uppercase tracking-[0.2em] font-bold",children:"Process Notes"})]}),k.jsx("p",{className:"text-[#9da6b9] text-base leading-relaxed max-w-sm",children:"The visual language explores the tension between organic growth and digital decay. Using custom shaders in After Effects to simulate microscopic biological shifts."})]}),k.jsxs("div",{className:"space-y-4 mt-8 lg:mt-0",children:[k.jsx("p",{className:"text-[10px] uppercase tracking-widest text-[#9da6b9] font-bold",children:"Project Palette"}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx("div",{className:"w-12 h-12 rounded bg-[#101622] border border-white/10",title:"#101622"}),k.jsx("div",{className:"w-12 h-12 rounded bg-[#135bec] shadow-lg shadow-primary/20",title:"#135bec"}),k.jsx("div",{className:"w-12 h-12 rounded bg-[#e2e8f0]",title:"#e2e8f0"}),k.jsx("div",{className:"w-12 h-12 rounded bg-[#4a5568]",title:"#4a5568"}),k.jsx("div",{className:"w-12 h-12 rounded bg-[#cbd5e0]",title:"#cbd5e0"})]})]})]})]})]}),k.jsx("div",{className:"absolute top-1/4 right-20 z-20 opacity-40 pointer-events-none hidden xl:block",children:k.jsxs("div",{className:"p-4 border-l border-white/20",children:[k.jsx("p",{className:"text-[10px] font-bold tracking-widest text-primary uppercase mb-2",children:"Technical Info"}),k.jsx("p",{className:"text-xs font-medium text-white/60",children:"Renderer: Octane v2023.1"}),k.jsx("p",{className:"text-xs font-medium text-white/60",children:"Bit-Depth: 32-bit Float"})]})}),k.jsxs("aside",{className:"fixed right-8 top-1/2 -translate-y-1/2 flex flex-col gap-4 z-50",children:[k.jsxs("div",{className:"bg-black/40 backdrop-blur-md p-2 rounded-full border border-white/10 flex flex-col gap-4",children:[k.jsx("button",{className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 text-[#9da6b9] hover:text-white transition-colors",children:k.jsx("span",{className:"material-symbols-outlined",children:"add"})}),k.jsx("div",{className:"h-px w-6 mx-auto bg-white/10"}),k.jsx("button",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-primary text-white",children:k.jsx("span",{className:"material-symbols-outlined",children:"center_focus_strong"})}),k.jsx("div",{className:"h-px w-6 mx-auto bg-white/10"}),k.jsx("button",{className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 text-[#9da6b9] hover:text-white transition-colors",children:k.jsx("span",{className:"material-symbols-outlined",children:"remove"})})]}),k.jsx("button",{className:"bg-black/40 backdrop-blur-md w-14 h-14 rounded-full border border-white/10 flex items-center justify-center hover:bg-primary transition-all text-white shadow-xl",children:k.jsx("span",{className:"material-symbols-outlined",children:"info"})})]})]}),k.jsxs("footer",{className:"fixed bottom-0 left-0 right-0 z-50 px-8 py-6 flex items-center justify-between pointer-events-none",children:[k.jsx("div",{className:"flex items-center gap-6 pointer-events-auto",children:k.jsxs("div",{className:"flex flex-col",children:[k.jsx("p",{className:"text-[10px] font-bold tracking-widest text-[#9da6b9] uppercase",children:"Current Level"}),k.jsx("p",{className:"text-sm font-medium",children:"Project Spread 1:1"})]})}),k.jsxs("div",{className:"flex items-center gap-8 pointer-events-auto",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),k.jsx("span",{className:"text-[10px] font-bold tracking-widest uppercase text-[#9da6b9]",children:"Archive Synced"})]}),k.jsx("div",{className:"text-[10px] font-bold tracking-widest uppercase text-white/40 hidden md:block",children:" 2024 ESB Archive"})]})]})]})},rx=({children:i})=>localStorage.getItem("isAuthenticated")==="true"?i:k.jsx(qN,{to:"/login",replace:!0});function x9(){return k.jsx(yk,{basename:"/Kibele/",children:k.jsxs(XN,{children:[k.jsx(Df,{path:"/login",element:k.jsx(uz,{})}),k.jsx(Df,{path:"/",element:k.jsx(rx,{children:k.jsx(T9,{})})}),k.jsx(Df,{path:"/project/:id",element:k.jsx(rx,{children:k.jsx(S9,{})})})]})})}YP.createRoot(document.getElementById("root")).render(k.jsx(B.StrictMode,{children:k.jsx(x9,{})}));
